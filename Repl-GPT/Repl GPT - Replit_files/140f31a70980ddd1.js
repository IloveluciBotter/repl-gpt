;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="2cc5f337-cafd-2327-b43d-82b949ca7c9f")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,732015,e=>{e.v({actionsWrapper:"FolderItem-module__KaEJJG__actionsWrapper",folderItem:"FolderItem-module__KaEJJG__folderItem",folderName:"FolderItem-module__KaEJJG__folderName",root:"FolderItem-module__KaEJJG__root"})},974715,e=>{e.v({actionsContainer:"ReplItem-module__7E4LFq__actionsContainer",borderRadiusBottomOnly:"ReplItem-module__7E4LFq__borderRadiusBottomOnly",borderRadiusFull:"ReplItem-module__7E4LFq__borderRadiusFull",borderRadiusTopOnly:"ReplItem-module__7E4LFq__borderRadiusTopOnly",desktopPadding:"ReplItem-module__7E4LFq__desktopPadding",hiddenOnDesktop:"ReplItem-module__7E4LFq__hiddenOnDesktop",hiddenOnMobile:"ReplItem-module__7E4LFq__hiddenOnMobile",item:"ReplItem-module__7E4LFq__item",replSelector:"ReplItem-module__7E4LFq__replSelector",replStar:"ReplItem-module__7E4LFq__replStar",replStarActive:"ReplItem-module__7E4LFq__replStarActive",surfaceSelected:"ReplItem-module__7E4LFq__surfaceSelected",wrapper:"ReplItem-module__7E4LFq__wrapper"})},928905,e=>{e.v({ctaBox:"FolderList-module__MS0VVa__ctaBox",ctaButton:"FolderList-module__MS0VVa__ctaButton",errorContainer:"FolderList-module__MS0VVa__errorContainer",folderGrid:"FolderList-module__MS0VVa__folderGrid",newFolder:"FolderList-module__MS0VVa__newFolder",spinner:"FolderList-module__MS0VVa__spinner"})},957296,e=>{"use strict";var t,r,n,l=e.i(721281),o=e.i(276385),i=e.i(931849),s=e.i(781230),a=e.i(709485),d=e.i(566949),c=e.i(968783),u=e.i(858248),p=e.i(532130),f=e.i(297083),m=e.i(817556),h=e.i(596139),x=e.i(135173),g=e.i(173532),v=e.i(263481),j=e.i(158689),_=e.i(446530),w=e.i(613355),R=e.i(751273),y=e.i(42458),b=function(){var e=(0,v.useUpgradeModal)().showUpgradeModal,t=(0,g.useReplLimit)();if("loading"===t.type||"error"===t.type)return null;var r=t.replCount,n=t.isStarterUser,l=t.shouldEnforceUsersOverLimit,i=t.refetch;if(!n||!l)return null;var s=r>=x.STARTER_PLAN_REPL_LIMIT,a="Click here to upgrade to Replit ".concat(h.corePlanName," and create more than ").concat(x.STARTER_PLAN_REPL_LIMIT," Apps."),d=s?"(".concat(r,"/").concat(x.STARTER_PLAN_REPL_LIMIT,") You've hit the limit for Apps in the Starter Plan. "):"",c="(".concat(r,"/").concat(x.STARTER_PLAN_REPL_LIMIT,") Apps");return(0,o.jsx)(R.Tooltip,{tooltip:d+a,children:(0,o.jsx)(j.Pill,{css:k.pill,text:c,iconLeft:s?(0,o.jsx)(y.default,{size:20}):void 0,onClick:function(){return(0,f._)(function(){return(0,m._)(this,function(t){switch(t.label){case 0:return[4,e({onUpgradeConfirm:i})];case 1:return t.sent(),[2]}})})()}})})},k=(0,_.cssRecord)({pill:[w.rcss.cursor.pointer]}),I=e.i(878420),C=e.i(64386),D=e.i(530658),F=e.i(346715),S=e.i(389959),T=e.i(833579),E=e.i(222342),M=e.i(366492),P=e.i(766205),V=e.i(967629),L=e.i(480028),A=e.i(341577),O=(0,V.css)({".icon":{color:L.tokens.foregroundDimmest,padding:"0 8px"},"&":{minHeight:"64px",display:"grid",gridColumnGap:"20px",gridTemplateColumns:"40px auto",alignItems:"center",marginBottom:L.tokens.space24,padding:L.tokens.space8,borderRadius:L.tokens.borderRadius8,color:L.tokens.foregroundDimmer,fontSize:L.tokens.fontSizeSubheadDefault,textDecoration:"none",border:"1px solid transparent"},"a:hover":{backgroundColor:L.tokens.backgroundDefault},"a:active":{backgroundColor:L.tokens.backgroundHigher,borderColor:L.tokens.accentPrimaryDefault}});let B=function(e){var t=e.pathnames;return(0,o.jsxs)(M.default,(0,C._)((0,I._)({},(0,P.folderLinkProps)({pathnames:t})),{css:O,children:[(0,o.jsx)("div",{className:"icon",children:(0,o.jsx)(A.default,{size:24,css:{transform:"scaleX(-1)"}})}),(0,o.jsx)("div",{children:"(up 1 level)"})]}))};var N=e.i(945821),U=e.i(822243),q=((t={}).Repl="REPL",t.Folder="FOLDER",t),z=(0,V.css)({"header, .sidebar-layout-header":{pointerEvents:"none"}});let H=function(e){var t=e.folder,r=e.onMove,n=e.children,l=(0,D._)((0,U.useDrag)({type:q.Folder,item:function(){return{id:t.id,type:q.Folder}},collect:function(e){return{isDragging:e.isDragging()}},end:function(e,n){if(n.didDrop()){var l=n.getDropResult();l&&l.id!==t.id&&r({to:l,folder:t})}}}),2),i=l[0].isDragging,s=l[1];return(0,o.jsxs)("div",{ref:s,style:{opacity:i?.5:1},children:[i?(0,o.jsx)(V.Global,{styles:[z]}):null,n]})};var G=(0,V.css)({"header, .sidebar-layout-header":{pointerEvents:"none"}});let W=function(e){var t=e.repl,r=e.onMove,n=e.children,l=(0,D._)((0,U.useDrag)({type:q.Repl,item:function(){return{id:t.id,type:q.Repl}},collect:function(e){return{isDragging:e.isDragging()}},end:function(e,n){if(n.didDrop()){var l=n.getDropResult();l&&r({to:l,repl:t})}}}),2),i=l[0].isDragging,s=l[1];return(0,o.jsxs)("div",{ref:s,style:{opacity:i?.5:1},children:[i?(0,o.jsx)(V.Global,{styles:[G]}):null,n]})};var J=e.i(848415),K=(0,V.css)({".is-active":{outline:"2px solid ".concat(L.tokens.accentPrimaryDefault)}});let Q=function(e){var t=e.folder,r=e.children,n=(0,D._)((0,J.useDrop)({accept:[q.Folder,q.Repl],drop:function(){return t},collect:function(e){var r=e.getItem()||!1;return{isActive:e.isOver()&&e.canDrop()&&r&&r.id!==t.id}}}),2),l=n[0].isActive,i=n[1];return(0,o.jsx)("div",{ref:i,clsx:[{"is-active":l}],css:K,children:r})};var $=e.i(368964),X=e.i(569384),Y=e.i(973245),Z=e.i(951262);function ee(){var e=(0,X._)(["\n  mutation ReplsDashboardFolderItemUpdate($folderId: String!, $name: String!) {\n    updateReplFolder(folderId: $folderId, name: $name) {\n      id\n      name\n      pathnames\n    }\n  }\n"]);return ee=function(){return e},e}var et={},er=(0,Y.gql)(ee()),en=e.i(490931),el=e.i(428596),eo=e.i(140487),ei=e.i(607278),es=e.i(960178),ea=e.i(625484),ed=e.i(940745),ec=e.i(703505),eu=ea.SpecializedView.form,ep=(0,_.cssRecord)({root:[w.rcss.colWithGap(24)]});function ef(e){var t=e.folder,r=e.onDelete,n=e.onCancel,l=(0,el.useIdSeed)()("confirmInput"),i=(0,D._)((0,S.useState)(""),2),s=i[0],a=i[1],d=(0,E.default)(),c=d.showConfirm,u=d.showError,p=(0,D._)((0,en.useDeleteFolderDialogDeleteFolderMutation)({variables:{folderId:t.id},onCompleted:function(){c("Folder deleted"),r()},onError:function(e){u(e.message)}}),2),f=p[0],m=p[1].loading,h=t.pathnames.slice(1).join("/"),x=m||s!==h;return(0,o.jsxs)(eu,{css:ep.root,onSubmit:function(e){e.preventDefault(),x||f()},children:[(0,o.jsx)(es.Header,{variant:"headerDefault",level:2,children:"Delete folder"}),(0,o.jsxs)(ea.View,{gap:24,children:[(0,o.jsx)(es.Text,{children:"Are you sure you want to delete this folder? This will remove all Apps and folders within. This cannot be undone."}),(0,o.jsxs)(ea.View,{gap:4,children:[(0,o.jsx)("label",{htmlFor:l,children:(0,o.jsxs)(es.Text,{color:"dimmer",variant:"small",children:["Type the folder path (",h,") to delete"]})}),(0,o.jsx)(ei.Input,{id:l,disabled:m,autoFocus:!0,value:s,onChange:function(e){return a(e.currentTarget.value)}})]}),(0,o.jsxs)(ea.View,{row:!0,gap:12,justify:"end",children:[(0,o.jsx)(eo.Button,{type:"button",onClick:n,text:"Cancel"}),(0,o.jsx)(eo.Button,{type:"submit",disabled:x,iconLeft:m?(0,o.jsx)(ed.default,{}):(0,o.jsx)(ec.default,{}),colorway:"negative",text:"Yes, delete this folder"})]})]})]})}var em=e.i(47503),eh=e.i(136540),ex=e.i(119274),eg=e.i(739521),ev=e.i(185591),ej=e.i(972777),e_=e.i(559482),ew=e.i(759905),eR=e.i(283023),ey=e.i(841691),eb=e.i(243074),ek=e.i(196353),eI=e.i(592877),eC=e.i(14868),eD=(0,V.css)([{"&&:hover button":[w.rcss.backgroundColor.backgroundHigher]}]);function eF(e){var t,r=e.repl,n=e.editRepl,l=e.deleteRepl,i=e.forkRepl,s=e.moveItem,a=e.removeMultiplayerRepl,d=e.selectRepl,c=(0,D._)((0,S.useState)(!1),2),u=c[0],p=c[1],f=(0,em.useCurrentUserId)(),m=r.authorizations,h=!r.org||"Org"!==r.org.__typename,x=(null==(t=r.owner)?void 0:t.id)===f,g=[];return m.editMetadata.isAuthorized&&g.push({label:"Edit",id:"edit",icon:(0,o.jsx)(eR.default,{})}),g.push((0,I._)({label:"Cover page",id:"coverpage",icon:(0,o.jsx)(ey.default,{})},(0,ev.replViewLinkProps)(r))),m.fork.isAuthorized&&g.push({label:"Remix",id:"fork",icon:(0,o.jsx)(eI.default,{})}),h&&x&&g.push({label:"Transfer To Organization",id:"transferToOrg",icon:(0,o.jsx)(eC.default,{})}),m.editFolder.isAuthorized&&g.push({label:"Move",id:"move",icon:(0,o.jsx)(eb.default,{})}),d&&g.push({label:"Select",id:"select",icon:(0,o.jsx)(e_.default,{})}),m.deleteRepl.isAuthorized&&g.push({label:"Delete",id:"delete",isDestructive:!0,icon:(0,o.jsx)(ec.default,{})}),m.removeSelf.isAuthorized&&g.push({label:"Remove",id:"remove",isDestructive:!0,icon:(0,o.jsx)(ew.default,{})}),(0,o.jsxs)(ea.View,{css:eD,children:[(0,o.jsx)(ex.PopupMenu,{placement:"bottom right",trigger:(0,o.jsx)(eh.IconButton,{tooltipBehavior:"hidden",size:24,alt:"App Actions",children:(0,o.jsx)(ek.default,{})}),elevated:!0,"aria-label":"App Actions",onAction:function(e){switch(e){case"edit":n();break;case"coverpage":break;case"fork":i();break;case"transferToOrg":p(!0);break;case"move":s();break;case"remove":a();break;case"select":null==d||d();break;case"delete":l()}},children:g.map(function(e){return(0,o.jsx)(ex.MenuItem,{id:e.id,label:e.label,icon:e.icon,isDestructive:e.isDestructive,href:e.href,as:e.as,shallow:e.shallow},e.id)})}),(0,o.jsx)(eg.Modal,{isOpen:u,onRequestClose:function(){return p(!1)},children:(0,o.jsx)(ej.TransferReplToOrgDialog,{repl:r,onDone:function(){return p(!1)}})})]})}function eS(e){var t=e.renameFolder,r=e.moveItem,n=e.deleteFolder,l=[{id:"rename",label:"Rename",icon:(0,o.jsx)(eR.default,{})},{id:"move",label:"Move",icon:(0,o.jsx)(eb.default,{})},{id:"delete",label:"Delete",isDestructive:!0,icon:(0,o.jsx)(ec.default,{})}];return(0,o.jsx)(ea.View,{css:eD,children:(0,o.jsx)(ex.PopupMenu,{trigger:(0,o.jsx)(eh.IconButton,{tooltipBehavior:"hidden",size:24,alt:"App Actions",children:(0,o.jsx)(ek.default,{})}),elevated:!0,"aria-label":"Folder Actions",onAction:function(e){switch(e){case"rename":t();break;case"move":r();break;case"delete":n()}},children:l.map(function(e){return(0,o.jsx)(ex.MenuItem,{id:e.id,label:e.label,icon:e.icon,isDestructive:e.isDestructive},e.id)})})})}var eT=e.i(304277);function eE(){var e=(0,X._)(["\n  fragment ReplsDashboardMoveItemReplFolder on ReplFolder {\n    id\n    pathnames\n    folderType\n    name\n    parentId\n    timeCreated\n  }\n"]);return eE=function(){return e},e}function eM(){var e=(0,X._)(["\n  query ReplsDashboardMoveItemModalFolder($id: String!, $teamId: Int) {\n    currentUser {\n      id\n      replFolder(id: $id, teamId: $teamId) {\n        id\n        folders {\n          id\n          ...ReplsDashboardMoveItemReplFolder\n        }\n      }\n    }\n  }\n  ","\n"]);return eM=function(){return e},e}e.i(566901);var eP={},eV=(0,Y.gql)(eE()),eL=(0,Y.gql)(eM(),eV),eA=e.i(46654),eO=e.i(644826),eB={__typename:"ReplFolder",id:"__ROOT_ID__",name:"(home)/",pathnames:["(home)/"],canEdit:!1,timeCreated:null},eN=(0,_.cssRecord)({folderPicker:[w.rcss.height(250),w.rcss.overflow("auto"),w.rcss.borderRadius(4),w.rcss.border({color:L.tokens.outlineDimmest})]}),eU=(0,V.css)({"&":{height:"40px",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 10px"},"&:hover":{cursor:"pointer",backgroundColor:L.tokens.backgroundRoot},".small-folder-icon-container":{height:"20px",width:"20px",display:"flex",justifyContent:"center",alignItems:"center"},".small-back-folder-icon":{transform:"rotate(90deg)",width:"17px"},".small-folder-icon":{width:"20px"},".small-folder-title":{display:"flex",alignItems:"center"},".small-folder-title a":{marginLeft:"20px",borderBottom:"none",color:"inherit"},".small-folder-time":{fontSize:"12px",color:L.tokens.foregroundDimmer},"&.is-selected:hover,.is-selected":{backgroundColor:L.tokens.accentPrimaryDefault,color:L.tokens.backgroundHigher},".is-selected .small-folder-time":{color:"inherit"}}),eq=function(e){var t=e.folder,r=e.onSelect,n=e.onNavigate,l=e.isSelected,i=e.isBack;return(0,o.jsxs)("div",{clsx:[{"is-selected":l}],onClick:function(){r&&r(t)},css:eU,children:[(0,o.jsxs)("div",{className:"small-folder-title",children:[(0,o.jsx)("div",{className:"small-folder-icon-container",children:void 0!==i&&i?(0,o.jsx)("div",{className:"small-back-folder-icon",children:(0,o.jsx)(eO.default,{})}):(0,o.jsx)("div",{className:"small-folder-icon",children:(0,o.jsx)(eb.default,{})})}),(0,o.jsx)("a",{onClick:function(e){return n?n(t,e):function(){}},children:t.name})]}),(0,o.jsx)("div",{className:"small-folder-time",children:t.timeCreated?(0,eA.ago)(t.timeCreated):""})]})};let ez=function(e){var t,r,n,l,s=e.item,a=e.isRepl,d=e.teamId,c=e.hideModal,u=/\/@([^/]*)/.exec(i.default.asPath||""),p=u?u[1]:null,h=d&&p?{__typename:"ReplFolder",id:"__TEAM__".concat(d,"__"),name:"@".concat(p),pathnames:["@".concat(p)],canEdit:!1,timeCreated:null}:eB,x=(0,D._)((0,S.useState)(null),2),g=x[0],v=x[1],j=(0,D._)((0,S.useState)(h),2),_=j[0],w=j[1],R=(0,D._)((0,S.useState)([]),2),y=R[0],b=R[1],k=(t={fetchPolicy:"cache-and-network",variables:{id:_.id,teamId:d},ssr:!1,notifyOnNetworkStatusChange:!0},r=(0,I._)({},eP,t),eT.useQuery(eL,r)),F=k.data,T=k.loading,E=function(e){e===g?v(null):v(e)},M=function(e,t){t.stopPropagation(),e.pathnames.length>_.pathnames.length?y.push(_):y.pop(),w(e),v(e),b(y)},P=((null==F||null==(l=F.currentUser)||null==(n=l.replFolder)?void 0:n.folders)||[]).filter(function(e){return("Unnamed"!==e.name||null!==e.parentId)&&e.folderType===$.ReplFolderTypes.Default&&(!!a||e.id!==s.id)}).map(function(e){return(0,C._)((0,I._)({},e),{pathnames:e.pathnames.slice(1)})}),V=y[y.length-1]||h,L=g?g.id:"",O="name"in s?s.name:s.title;return(0,o.jsxs)(ea.View,{gap:8,tag:"form",onSubmit:function(t){t.preventDefault(),(0,f._)(function(){var t,r;return(0,m._)(this,function(n){return t=[],r=[],a?t.push(s.id):r.push(s.id),e.onSubmit({variables:{destFolderId:g?g.id:"",replIds:t,folderIds:r,teamId:d}}),c(),[2]})})()},children:[(0,o.jsxs)(es.Text,{children:["Move ",O," to:"]}),(0,o.jsxs)(ea.View,{css:eN.folderPicker,children:[_.pathnames&&_.pathnames.join()!==h.pathnames.join()?(0,o.jsx)(eq,{folder:(0,C._)((0,I._)({},V),{name:"(up one level)"}),isBack:!0,onNavigate:M,isSelected:L===V.id}):null,P?P.map(function(e){return(0,o.jsx)(eq,{folder:e,onSelect:E,onNavigate:M,isSelected:e.id===L},"move-folder-".concat(e.id))}):null]}),(0,o.jsxs)(es.Text,{children:["Moving to:"," ",g?g.pathnames[g.pathnames.length-1]:_.pathnames[_.pathnames.length-1]||"(home)/"]}),(0,o.jsxs)(ea.View,{row:!0,gap:8,justify:"end",children:[T?null:(0,o.jsx)(eo.Button,{text:"Cancel",onClick:function(){return c()}}),(0,o.jsx)(eo.Button,{colorway:"primary",iconLeft:T?(0,o.jsx)(ed.default,{}):(0,o.jsx)(A.default,{}),disabled:T,text:a?"Move App":"Move folder",type:"submit"})]})]})};var eH=e.i(842435),eG=(0,_.cssRecord)({header:[w.rcss.maxWidth("100%")]});let eW=function(e){var t=e.onSubmit,r=e.hideModal,n=e.defaultValue,l=e.loading,i=e.errorMessage,s=e.mode,a=(0,D._)((0,S.useState)(n||""),2),d=a[0],c=a[1],u=(0,S.useRef)(null);(0,S.useEffect)(function(){(null==u?void 0:u.current)&&u.current.select()},[]);var p=function(){if(!i)return t(d);(null==u?void 0:u.current)&&u.current.select()},f=(0,el.useIdSeed)();return(0,o.jsxs)(ea.View,{gap:24,children:[(0,o.jsxs)(es.Header,{variant:"headerDefault",level:2,css:eG.header,children:["create"===s?"Create":"Rename"," folder"]}),(0,o.jsxs)(ea.View,{gap:4,children:[(0,o.jsx)("label",{htmlFor:f("title"),children:(0,o.jsx)(es.Text,{color:"dimmer",variant:"small",multiline:!1,children:"Title"})}),(0,o.jsx)(ei.Input,{disabled:l,value:d,placeholder:"Name your folder",onChange:function(e){c(e.currentTarget.value)},name:"folderName",ref:u,onKeyDown:function(e){"Enter"===e.key&&p()},id:f("title")})]}),(0,o.jsxs)(ea.View,{row:!0,gap:12,justify:"end",children:[(0,o.jsx)(eo.Button,{text:"Cancel",onClick:r}),(0,o.jsx)(eo.Button,{iconLeft:(0,o.jsx)(eH.default,{}),disabled:l,loading:l,onClick:p,text:"".concat("create"===s?"Create":"Rename"," folder"),colorway:"primary"})]})]})};var eJ=e.i(907371),eK=e.i(714165),eQ=e.i(652219),e$=e.i(732015),eX=((r=eX||{})[r.RenameFolder=0]="RenameFolder",r[r.DeleteFolder=1]="DeleteFolder",r[r.MoveItem=2]="MoveItem",r),eY=function(e){var t,r=e.folder;return r.folderType===$.ReplFolderTypes.Multiplayer?(0,o.jsx)(eQ.default,{size:16}):r.folderType===$.ReplFolderTypes.Team?(0,o.jsx)(eK.Avatar,{src:null!=(t=r.image)?t:null,username:"Team"}):r.folderType===$.ReplFolderTypes.AllTeams?(0,o.jsx)(eQ.default,{size:16}):(0,o.jsx)(eb.default,{size:16})};let eZ=function(e){var t,r=e.folder,n=e.teamId,l=e.onDelete,i=e.onMove,s=(0,D._)((0,S.useState)(null),2),a=s[0],d=s[1],c=(0,E.default)(),u=c.showConfirm,p=c.showError,f=(0,eJ.useCreateInteractive)({variant:"filled"}),m=(0,D._)((t=(0,I._)({},et,void 0),Z.useMutation(er,t)),2),h=m[0],x=m[1],g=(0,D._)((0,T.useReplsDashboardMoveItemsToFolderMutation)(),2),v=g[0],j=g[1],_=[x.error,j.error];(0,S.useEffect)(function(){var e=!0,t=!1,r=void 0;try{for(var n,l=_[Symbol.iterator]();!(e=(n=l.next()).done);e=!0){var o=n.value;o&&(o.graphQLErrors[0]&&o.graphQLErrors[0].message?p(o.graphQLErrors[0].message):p("Something went wrong when updating this folder"))}}catch(e){t=!0,r=e}finally{try{e||null==l.return||l.return()}finally{if(t)throw r}}},_),(0,S.useEffect)(function(){x.data&&u("Folder renamed")},[x.data]),(0,S.useEffect)(function(){j.data&&(u("Folder moved"),i())},[j.data]);var w=function(e){x.loading||h({variables:{folderId:r.id,name:e}})};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(ea.View,{clsx:e$.default.root,children:[(0,o.jsx)(M.default,(0,C._)((0,I._)({passHref:!0},(0,P.folderLinkProps)({pathnames:r.pathnames})),{children:(0,o.jsx)(ea.View,{clsx:[e$.default.folderItem,f.clsx,{team:r.folderType===$.ReplFolderTypes.Team}],style:f.style,p:8,row:!0,gap:32,justify:"space-between",align:"center",grow:!0,shrink:!0,children:(0,o.jsxs)(ea.View,{pr:32*!!r.canEdit,grow:!0,shrink:!0,row:!0,gap:8,align:"center",children:[(0,o.jsx)(ea.View,{p:2,children:(0,o.jsx)(eY,{folder:r})}),(0,o.jsxs)(es.Text,{clsx:e$.default.folderName,multiline:!1,children:[r.name,r.replsCount?" (".concat(r.replsCount,")"):null]})]})})})),r.canEdit?(0,o.jsx)(ea.View,{clsx:e$.default.actionsWrapper,children:(0,o.jsx)(eS,{renameFolder:function(){return d(0)},deleteFolder:function(){return d(1)},moveItem:function(){return d(2)}})}):null]}),(0,o.jsxs)(eg.Modal,{isOpen:null!==a,onRequestClose:function(){d(null)},children:[0===a?(0,o.jsx)(eW,{mode:"rename",defaultValue:r.name,hideModal:function(){return d(null)},onSubmit:function(e){w(e),d(null)},loading:x.loading}):null,1===a?(0,o.jsx)(ef,{folder:r,onDelete:function(){l(),d(null)},onCancel:function(){d(null)}}):null,2===a?(0,o.jsx)(ez,{item:r,teamId:n,isRepl:!1,onSubmit:function(e){j.loading||v(e)},hideModal:function(){return d(null)}}):null]})]})};var e0=e.i(223808),e1=function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)};let e2=function(e){var t=e.loadMore,r=(0,S.useRef)(null);return(0,S.useEffect)(function(){var e=(0,e0.default)(function(){r.current&&e1(r.current)&&t()},200);return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}},[t]),(0,o.jsx)("div",{ref:r})},e4=function(e){var t,r=e.onCreate,n=e.parentId,l=e.teamId,i=(0,D._)((0,S.useState)(!1),2),s=i[0],a=i[1],d=(0,E.default)(),c=d.showConfirm,u=d.showError,p=(0,D._)((0,T.useReplsDashboardCreateReplFolderMutation)(),2),f=p[0],m=p[1];return(0,S.useEffect)(function(){m.data?(c("Folder created"),a(!1),r()):m.error&&u(m.error.graphQLErrors[0].message||"Something went wrong when creating this folder")},[m.data,m.error,r,c,u]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eg.Modal,{isOpen:s,onRequestClose:function(){a(!1)},children:(0,o.jsx)(eW,{mode:"create",onSubmit:function(e){m.loading||f({variables:{name:e,parentId:n,teamId:l}})},hideModal:function(){a(!1)},loading:m.loading,errorMessage:null==(t=m.error)?void 0:t.message})}),(0,o.jsx)(eo.Button,{iconLeft:(0,o.jsx)(eH.default,{}),text:"New folder",onClick:function(){return a(!0)}})]})};var e7=e.i(703774),e8=e.i(431601),e5=e.i(498710),e6=function(e){var t=e.enabled,r=e.onClick,n=(0,e7.useTheme)().isDarkColorScheme,l=n?L.tokens.yellowStrongest:L.tokens.yellowDimmest,i=n?L.tokens.yellowDefault:L.tokens.yellowStronger;return(0,o.jsx)(ea.View,{css:[w.rcss.transition.snappy,{height:28,width:44,backgroundColor:t?L.tokens.yellowDimmest:L.tokens.backgroundDefault,borderRadius:14,border:t?"1px solid "+L.tokens.yellowDimmer:"1px solid "+L.tokens.outlineDimmest}],onClick:r,title:"Toggle starred Apps",children:(0,o.jsx)(ea.View,{css:[w.rcss.center,w.rcss.transition.snappy,{margin:1,height:24,width:24,borderRadius:"100%",backgroundColor:t?i:L.tokens.backgroundHigher,color:t?l:L.tokens.foregroundDimmer,transform:t?"translateX(16px)":"translateX(0px)"}],children:t?(0,o.jsx)(e5.default,{size:16}):(0,o.jsx)(e8.default,{size:16})})})},e9=function(e){var t=e.starred,r=(0,i.useRouter)();return(0,o.jsx)(M.default,{href:{pathname:r.pathname,query:(0,I._)({},t?{}:{starred:!0})},as:{pathname:"/repls",query:(0,I._)({},t?{}:{starred:!0})},scroll:!1,shallow:!0,children:(0,o.jsx)(e6,{enabled:t,onClick:void 0})})},e3=e.i(167626),te=e.i(798e3),tt=e.i(638086),tr=e.i(115217),tn=e.i(481700),tl=e.i(26124),to=e.i(236379),ti=e.i(17009),ts=e.i(452412);function ta(e){var t=e.repl,r=e.onLeave,n=e.onCancel,l=(0,E.default)(),i=l.showConfirm,s=l.showError,a=(0,D._)((0,ti.useLeaveMultiplayerReplDialogRemoveMutation)({variables:{id:t.id},onCompleted:function(){i("App removed"),r()},onError:function(e){s(e.message)}}),2),d=a[0],c=a[1].loading;return(0,o.jsx)(ts.default,{title:"Leave multiplayer App",confirmLabel:"Yes, leave this App",isDestructive:!0,loading:c,confirmIcon:(0,o.jsx)(ew.default,{}),onCancel:n,onConfirm:function(){c||d()},children:(0,o.jsxs)(es.Text,{children:["Are you sure you want to leave this multiplayer App (",t.title,")? You will no longer be able to access its content."]})})}var td=e.i(811842),tc=e.i(127227),tu=e.i(929872),tp=e.i(464092),tf=e.i(418944),tm=e.i(987154),th=e.i(530310),tx=e.i(452814),tg=e.i(974715),tv=((n=tv||{}).EditRepl="EditRepl",n.DeleteRepl="DeleteRepl",n.RemoveRepl="RemoveRepl",n.MoveItem="MoveItem",n),tj=function(e){var t=e.selected,r=e.onClick,n=e.isDarkColorScheme,l=e.className,i=n?L.tokens.yellowStrongest:L.tokens.yellowDimmest;return(0,o.jsx)(eh.IconButton,{className:l,onClick:r,style:{color:L.tokens.foregroundDimmer},alt:t?"Unstar":"Star",children:t?(0,o.jsx)(e5.default,{color:i}):(0,o.jsx)(e8.default,{})})},t_=function(e){var t=e.isPrivate;return(0,o.jsx)(R.Tooltip,{tooltip:t?"Only you and invited multiplayers can see this App":"Anyone can see this App",children:(0,o.jsxs)(ea.View,{row:!0,gap:4,align:"center",children:[t?(0,o.jsx)(th.default,{size:16,color:L.tokens.foregroundDimmest}):(0,o.jsx)(tm.default,{size:16,color:L.tokens.foregroundDimmest}),(0,o.jsx)(es.Text,{color:"dimmest",multiline:!1,children:t?"Private":"Public"})]})})},tw=function(e){var t=e.replId,r=e.isSelected,n=e.onSelection;return(0,o.jsx)(ea.View,{onClick:function(e){e.preventDefault(),e.stopPropagation(),(0,e3._)(document.activeElement,HTMLElement)&&document.activeElement.blur()},clsx:tg.default.replSelector,onKeyDownCapture:function(e){"Enter"===e.key&&n()},children:(0,o.jsx)(tc.Checkbox,{name:"Select app",id:t,checked:r,onChange:n})})},tR=function(e){var t=e.children,r=e.repl,n=e.disabled,l=e.onInactiveClick;return n?(0,o.jsx)(ea.View,{onClick:l,children:t}):(0,o.jsx)(M.default,(0,C._)((0,I._)({},(0,ev.replLinkProps)(r)),{passHref:!0,children:t}))},ty=function(e){var t,r=e.repl,n=e.position,i=e.onDelete,s=e.onMove,a=e.teamId,d=(0,e7.useTheme)().isDarkColorScheme,c=(0,tp.useForkContext)(),u=(0,E.default)(),p=u.showConfirm,f=u.showError,m=(0,tt.useHover)({}),h=m.hoverProps,x=m.isHovered,g=(0,D._)((0,S.useState)(!1),2),v=g[0],j=g[1],_=(0,te.useFocusWithin)({onFocusWithinChange:function(e){j(e)}}).focusWithinProps,w=(0,eJ.useCreateInteractive)({variant:"filled"}),R=(0,D._)((0,S.useState)(null),2),y=R[0],b=R[1],k=(0,td.useSelectedRepls)(),F=k.selectedRepls,M=k.isReplSelected,P=k.selectRepl,V=k.deselectRepl,A=r.isOwner&&(x||v||F.length>0),O=M(r.id),B=function(){O?V(r.id):P(r)},N=(0,D._)((0,tr.useReplsDashboardUpdateReplMutation)(),2),U=N[0],q=N[1],z=(0,D._)((0,T.useReplsDashboardMoveItemsToFolderMutation)({onCompleted:function(e){e.moveItemsToFolder.every(function(e){return"Repl"===e.__typename||"ReplFolder"===e.__typename})?(p("App moved"),s()):f("Something went wrong")},onError:function(e){f(e.message)}}),2),H=z[0],G=z[1],W=r.authorizations.star.isAuthorized,J=(0,eA.ago)(new Date(r.timeCreated));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(ea.View,(0,C._)((0,I._)({},h,_),{clsx:tg.default.wrapper,children:[(0,o.jsx)(tR,{repl:r,disabled:F.length>0,onInactiveClick:B,children:(0,o.jsx)(tu.Surface,{elevated:O,clsx:[w.clsx,tg.default.item,O&&tg.default.surfaceSelected,0===n&&tg.default.borderRadiusTopOnly,1===n&&tg.default.borderRadiusBottomOnly,-1===n&&tg.default.borderRadiusFull],style:(0,C._)((0,I._)({},w.style),{color:L.tokens.foregroundDefault}),children:(0,o.jsxs)(ea.View,{gap:8,p:8,children:[(0,o.jsxs)(ea.View,{style:{paddingRight:W?"64px":"40px"},grow:!0,shrink:!0,row:!0,gap:8,align:"center",children:[A?(0,o.jsx)(tw,{replId:r.id,isSelected:O,onSelection:B}):(0,o.jsx)(tf.default,{size:20,iconUrl:r.iconUrl,alt:""}),(0,o.jsxs)(ea.View,{row:!0,gap:12,align:"baseline",grow:!0,shrink:!0,children:[(0,o.jsx)(es.Text,{multiline:!1,translate:"no",style:{fontWeight:500,flexGrow:1,flexShrink:1,maxWidth:"max-content"},children:r.title}),(0,o.jsxs)(ea.View,{clsx:tg.default.hiddenOnMobile,row:!0,gap:12,children:[!r.isOwner&&r.user?(0,o.jsxs)(es.Text,{color:"dimmer",multiline:!1,translate:"no",children:["@",r.user.username]}):null,(0,o.jsx)(es.Text,{color:"dimmer",multiline:!1,children:J})]})]})]}),(0,o.jsxs)(ea.View,{clsx:tg.default.hiddenOnDesktop,px:2,row:!0,gap:12,children:[!r.isOwner&&r.user?(0,o.jsxs)(es.Text,{color:"dimmer",multiline:!1,translate:"no",children:["@",r.user.username]}):null,(0,o.jsx)(es.Text,{color:"dimmer",multiline:!1,children:J})]}),(0,o.jsxs)(ea.View,{clsx:tg.default.desktopPadding,row:!0,gap:12,children:["Template"===r.publishedAs?(0,o.jsx)(o.Fragment,{}):null,(0,o.jsx)(t_,{isPrivate:r.isPrivate}),(null==(t=r.hostingDeployment)?void 0:t.__typename)==="HostingDeployment"?(0,o.jsx)(tn.BuildStatusesBadge,{deployment:r.hostingDeployment}):null,r.publishedAs?(0,o.jsxs)(ea.View,{row:!0,gap:4,align:"center",children:[(0,o.jsx)(tx.default,{size:16,color:L.tokens.foregroundDimmest}),(0,o.jsx)(es.Text,{color:"dimmest",multiline:!1,children:"Published"})]}):null]})]})})}),(0,o.jsxs)(ea.View,{clsx:tg.default.actionsContainer,row:!0,gap:2,children:[W?(0,o.jsx)(tj,{clsx:[tg.default.replStar,(0,l._)({},tg.default.replStarActive,O)],selected:r.isStarred,onClick:function(){if(!q.loading){var e=!r.isStarred;U({variables:{input:{id:r.id,isStarred:e}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,C._)((0,I._)({},r),{isStarred:e})}}}).then(function(t){t.errors?f(t.errors[0].message):p(e?"App starred":"App unstarred")})}},isDarkColorScheme:d}):null,(0,o.jsx)(eF,{editRepl:function(){return b("EditRepl")},deleteRepl:function(){return b("DeleteRepl")},removeMultiplayerRepl:function(){return b("RemoveRepl")},moveItem:function(){return b("MoveItem")},forkRepl:function(){c.isForking||c.fork()},repl:r,selectRepl:r.isOwner?B:void 0})]})]})),(0,o.jsx)(eg.Modal,{isOpen:"EditRepl"===y,onRequestClose:function(){return b(null)},children:(0,o.jsx)(to.EditReplForm,{repl:r,onDone:function(){return b(null)}})}),(0,o.jsx)(eg.Modal,{isOpen:"DeleteRepl"===y,onRequestClose:function(){return b(null)},children:(0,o.jsx)(tl.DeleteReplDialog,{repl:r,onDone:function(){return b(null)}})}),(0,o.jsx)(eg.Modal,{isOpen:"MoveItem"===y,onRequestClose:function(){return b(null)},children:(0,o.jsx)(ez,{item:r,teamId:a,isRepl:!0,onSubmit:function(e){G.loading||H(e)},hideModal:function(){return b(null)}})}),(0,o.jsx)(eg.Modal,{isOpen:"RemoveRepl"===y,onRequestClose:function(){return b(null)},children:(0,o.jsx)(ta,{repl:r,onCancel:function(){return b(null)},onLeave:function(){b(null),i()}})})]})};let tb=function(e){return(0,o.jsx)(tp.ForkContextProvider,{forkParams:{trackingData:{forkSource:"replsDashboard"}},repl:e.repl,children:(0,o.jsx)(ty,(0,I._)({},e))})};var tk=e.i(91720),tI=e.i(788124),tC=e.i(952030),tD=e.i(928905);let tF=function(e){var t,r=e.path,n=e.starred,l=(0,td.useSelectedRepls)(),i=l.deselectRepl,s=l.isReplSelected,c=l.clearSelectedRepls,p=(0,D._)((0,S.useState)(r),2),f=p[0],m=p[1];r!==f&&(m(r),c());var h=(0,T.useReplsDashboardReplFolderListQuery)({fetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",variables:{path:r,starred:n},ssr:!1,notifyOnNetworkStatusChange:!0}),x=h.data,g=h.loading,v=h.refetch,j=h.fetchMore,_=(0,E.default)(),w=_.showError,R=_.showConfirm,y=(0,D._)((0,T.useReplsDashboardMoveItemsToFolderMutation)({onError:function(e){return w(e.message)},onCompleted:function(e){e.moveItemsToFolder.forEach(function(e){"Repl"===e.__typename&&s(e.id)&&i(e.id)})},update:function(e,t){var r=t.data;r&&M&&(r.moveItemsToFolder.forEach(function(t){e.modify({id:e.identify({__typename:"ReplFolder",id:M.id}),optimistic:!0,fields:{folders:function(e,r){var n=r.readField;return"ReplFolder"!==t.__typename?e:e.filter(function(e){return n("id",e)!==t.id})},repls:function(e,r){var n=r.readField;if("Repl"!==t.__typename)return e;var l=e.items.filter(function(e){return n("id",e)!==t.id});return{pageInfo:e.pageInfo,items:l}}}})}),R("Item moved!"))}}),2),b=y[0],k=y[1],M=x&&x.currentUser&&x.currentUser.replFolderByPath?x.currentUser.replFolderByPath:null,P=(null==M?void 0:M.pathnames.length)===1&&(null==M?void 0:M.pathnames[0])===""||null==M?void 0:M.id,V=!!n,L=M&&M.folders.length+M.repls.items.length===0,A=M&&1===M.folders.length&&0===M.repls.items.length&&"multiplayer"===M.folders[0].pathnames[0],O=!V&&(L||A)&&((null==M?void 0:M.canEdit)||!P),U=M&&M.repls.pageInfo.nextCursor?M&&M.repls.pageInfo.nextCursor:null,q=(null==M?void 0:M.ownerId)&&(null==M?void 0:M.ownerId)!==(null==x||null==(t=x.currentUser)?void 0:t.id)?M.ownerId:void 0,z=(0,d.default)(),G=function(e){k.loading||b({variables:{replIds:"repl"in e?[e.repl.id]:[],folderIds:"folder"in e?[e.folder.id]:[],destFolderId:e.to.id,teamId:q}})};return!x&&g?(0,o.jsx)(ea.View,{justify:"center",align:"center",p:20,clsx:tD.default.spinner,children:(0,o.jsx)(ed.default,{})}):M?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(ea.View,{children:[(0,o.jsxs)(ea.View,{pb:16,row:!0,justify:"space-between",align:"center",children:[O||!M.canCreateSubFolders&&P?(0,o.jsx)(ea.View,{}):(0,o.jsx)(ea.View,{clsx:tD.default.newFolder,children:(0,o.jsx)(e4,{onCreate:v,parentId:P,teamId:q})}),(0,o.jsx)(e9,{starred:!!n})]}),(0,o.jsx)(tI.default,{children:(0,o.jsxs)(ea.View,{gap:16,children:[M.parent&&M.canEdit?(0,o.jsx)(ea.View,{children:(0,o.jsx)(Q,{folder:M.parent,children:(0,o.jsx)(B,{pathnames:M.parent.pathnames})})}):null,M.parent&&!M.canEdit?(0,o.jsx)(B,{pathnames:M.parent.pathnames}):null,!V&&M.folders.length?(0,o.jsx)(ea.View,{clsx:tD.default.folderGrid,children:M.folders.map(function(e){return e.canEdit?(0,o.jsx)(Q,{folder:e,children:(0,o.jsx)(H,{onMove:G,folder:e,children:(0,o.jsx)(eZ,{onDelete:v,folder:e,teamId:q,onMove:v})})},e.id):(0,o.jsx)(eZ,{onDelete:v,teamId:q,onMove:v,folder:e},e.id)})}):null,(0,o.jsx)(ea.View,{gap:1,children:M.repls.items.map(function(e,t){return(0,o.jsx)(W,{onMove:G,repl:e,children:(0,o.jsx)(tb,{position:M.repls.items.length>1?t/(M.repls.items.length-1):-1,repl:e,onMove:v,onDelete:v,teamId:q})},e.id)})}),O?(0,o.jsx)(ea.View,{align:"center",gap:8,p:32,clsx:tD.default.ctaBox,children:(0,o.jsxs)(ea.View,{pt:16,children:[(0,o.jsx)(ea.View,{clsx:tD.default.ctaButton,p:5,children:(0,o.jsx)(e4,{onCreate:v,parentId:P,teamId:q})}),(0,o.jsx)(ea.View,{clsx:tD.default.ctaButton,p:5,children:(0,o.jsx)(tk.ButtonLink,{iconLeft:(0,o.jsx)(tC.default,{}),text:"New App",href:{pathname:"/home",query:{folderId:z}},as:"/home",onClick:function(){(0,u.track)(a.events.OPEN_REPL_CREATION_PAGE,{source:"repl folder"})}})})]})}):null]})}),g?(0,o.jsx)(ea.View,{justify:"center",align:"center",p:20,children:(0,o.jsx)(ed.default,{})}):null,U&&!g?(0,o.jsx)(e2,{loadMore:function(){U&&!g&&j({variables:{path:r,starred:n,after:U},updateQuery:function(e,t){var r=t.fetchMoreResult;return e&&e.currentUser&&e.currentUser.replFolderByPath&&r&&r.currentUser&&r.currentUser.replFolderByPath?{__typename:"RootQueryType",currentUser:(0,C._)((0,I._)({},r.currentUser),{replFolderByPath:(0,C._)((0,I._)({},r.currentUser.replFolderByPath),{repls:{__typename:"ReplConnection",pageInfo:(0,I._)({},r.currentUser.replFolderByPath.repls.pageInfo),items:(0,F._)(e.currentUser.replFolderByPath.repls.items).concat((0,F._)(r.currentUser.replFolderByPath.repls.items))}})})}:e}})}}):null]}),(0,o.jsx)(N.default,{onDelete:v})]}):(0,o.jsx)(ea.View,{justify:"center",p:16,clsx:tD.default.errorContainer,children:(0,o.jsx)(es.Text,{variant:"text",multiline:!1,children:"Unable to fetch repls. Please try again."})})},tS=function(e){var t=e.links;return(0,o.jsx)(es.Text,{multiline:!1,children:t.map(function(e,r){var n=e.pathnames,l=e.text;return(0,o.jsxs)(S.Fragment,{children:[r===t.length-1?l:(0,o.jsx)(M.default,(0,C._)((0,I._)({},(0,P.folderLinkProps)({pathnames:n})),{style:{color:L.tokens.foregroundDefault},children:l})),(0,o.jsx)("span",{css:{color:L.tokens.foregroundDimmest},children:" / "})]},n.join("/"))})})};var tT=e.i(578134),tE=e.i(403675),tM=(0,_.cssRecord)({content:[(0,l._)({margin:"0 auto"},w.media.min("tabletMin"),[w.rcss.width("90%")])]});e.s(["default",0,function(){var e=(0,i.useRouter)(),t=e.asPath,r=e.query,n=(0,s.useIsSSR)(),l=(0,P.getFolderPath)(t),f=(0,d.default)(),m=n?[]:(0,P.getPathLinks)(l);return(0,o.jsx)(td.SelectedReplsContextProvider,{children:(0,o.jsx)(tT.default,{title:"Apps",children:(0,o.jsxs)(ea.View,{css:tM.content,px:12,py:32,gap:16,children:[(0,o.jsxs)(ea.View,{pt:12,tag:"header",css:p.orgStyles.pageHeader,children:[(0,o.jsxs)(ea.View,{css:p.orgStyles.pageTitle,children:[(0,o.jsx)(tE.default,{size:24}),(0,o.jsx)(es.Header,{level:2,variant:"headerDefault",children:(0,o.jsxs)(ea.View,{row:!0,gap:16,justify:"start",align:"center",children:[(0,o.jsx)(ea.View,{children:"Apps"}),(0,o.jsx)(b,{})]})})]}),(0,o.jsx)(ea.View,{css:p.orgStyles.pageHeaderActions,children:(0,o.jsx)(tk.ButtonLink,{colorway:"primary",href:{pathname:"/home",query:{folderId:f}},as:"/home",onClick:function(){(0,u.track)(a.events.OPEN_REPL_CREATION_MODAL,{source:"repls-dashboard",href:window.location.href,context:(0,c.getOrgTrackingContext)()})},text:"Create",iconLeft:(0,o.jsx)(tC.default,{})})})]}),(0,o.jsxs)(ea.View,{gap:16,children:[(0,o.jsx)(tS,{links:m}),(0,o.jsx)(tF,{path:l,starred:r.starred?!!r.starred:void 0})]})]})})})}],957296)},852771,(e,t,r)=>{var n="/replsDashboard";(window.__NEXT_P=window.__NEXT_P||[]).push([n,function(){return e.r(957296)}]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([n])})}]);

//# debugId=2cc5f337-cafd-2327-b43d-82b949ca7c9f
//# sourceMappingURL=5f590b99efb53b61.js.map