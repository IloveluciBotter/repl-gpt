;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="0e3e4704-b447-41d9-f507-f8dd435e1b60")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,535076,e=>{"use strict";e.s(["FEED_PADDING_BOTTOM",()=>6,"FEED_PADDING_INLINE_DESKTOP",()=>4,"FEED_PADDING_INLINE_MOBILE",()=>8,"FEED_PADDING_TOP",()=>6])},825118,e=>{"use strict";var t,n,r,i=((t={}).UNKNOWN_NOT_GIT="UNKNOWN_NOT_GIT",t.UNKNOWN="UNKNOWN",t.TIMEOUT="TIMEOUT",t.CHANNEL_CLOSED="CHANNEL_CLOSED",t.UNEXPECTED_DISCONNECT="UNEXPECTED_DISCONNECT",t.UNKNOWN_REF="UNKNOWN_REF",t.NOT_INITIALIZED="NOT_INITIALIZED",t.UNAUTHENTICATED="UNAUTHENTICATED",t.INDEX_FILE_CORRUPT="INDEX_FILE_CORRUPT",t.UNKNOWN_REMOTE="UNKNOWN_REMOTE",t.INDEX_LOCKED="INDEX_LOCKED",t.CONFIG_LOCKED="CONFIG_LOCKED",t.NO_COMMITS="NO_COMMITS",t.PATH_MATCHED_NO_FILES="PATH_MATCHED_NO_FILES",t.USER_NOT_CONFIGURED="USER_NOT_CONFIGURED",t.INVALID_REFERENCE="INVALID_REFERENCE",t.BRANCH_ALREADY_EXISTS="BRANCH_ALREADY_EXISTS",t.MERGE_CONFLICT="MERGE_CONFLICT",t.UPSTREAM_NOT_SET="UPSTREAM_NOT_SET",t.HEAD_DETACHED="HEAD_DETACHED",t.DIRTY_WORKTREE="DIRTY_WORKTREE",t.PUSH_REJECTED="PUSH_REJECTED",t.REMOTE_ALREADY_EXISTS="REMOTE_ALREADY_EXISTS",t.ALREADY_INITIALIZED="ALREADY_INITIALIZED",t.INVALID_STATE="INVALID_STATE",t.PROTECTED_BRANCH="PROTECTED_BRANCH",t.NOTE_SUCCESSFULLY_REMOVED="NOTE_SUCCESSFULLY_REMOVED",t.OBJECT_HAS_NO_NOTE="OBJECT_HAS_NO_NOTE",t.OBJECT_ALREADY_HAS_NOTE="OBJECT_ALREADY_HAS_NOTE",t.NOTE_SUCCESSFULLY_OVERWRITTEN="NOTE_SUCCESSFULLY_OVERWRITTEN",t.PRE_COMMIT_HOOK_FAILED="PRE_COMMIT_HOOK_FAILED",t),a=/^(fatal: |error: |remote: error: |CONFLICT \([^)]+\): )/im,o=/^cat: .*: No such file or directory$/im;function s(e){return RegExp("^fatal: ".concat(e.source),"im")}function l(e){return RegExp("^error: ".concat(e.source),"im")}var u=[{error:"NOT_INITIALIZED",match:[s(/not a git repository/)]},{error:"UNAUTHENTICATED",match:[s(/Authentication failed/),s(/unable to access/),s(/repository \S+ not found/),s(/could not read Username/),s(/could not read Password/),s(/Could not read from remote/)]},{error:"INDEX_FILE_CORRUPT",match:[s(/index file corrupt/),s(/index file smaller than expected/),l(/index file .*?\.idx is too small/)]},{error:"UNKNOWN_REMOTE",match:[s(/No such remote/),l(/No such remote/)]},{error:"UNKNOWN_REF",match:[s(/couldn't find remote ref/)]},{error:"INDEX_LOCKED",match:[s(/Unable to create .*?\.git\/index\.lock/),l(/Unable to create .*?\.git\/index\.lock/)]},{error:"CONFIG_LOCKED",match:[s(/could not lock config file/),l(/could not lock config file/)]},{error:"NO_COMMITS",match:[s(/your current branch '.*?' does not have any commits yet/)]},{error:"PATH_MATCHED_NO_FILES",match:[s(/pathspec '.*?' did not match any files/),s(/pathspec '.*?' did not match any file\(s\) known to git/),s(/path '.*?' does not exist/),s(/path '.*?' exists on disk, but not in/)]},{error:"USER_NOT_CONFIGURED",match:[s(/unable to auto-detect email address/),s(/unable to auto-detect name/),s(/empty ident name \(for <.*?>\) not allowed/)]},{error:"INVALID_REFERENCE",match:[s(/invalid reference: .*?$/),s(/'.*?' - not a valid ref/)]},{error:"BRANCH_ALREADY_EXISTS",match:[s(/A branch named '.*?' already exists/)]},{error:"MERGE_CONFLICT",match:[s(/Not possible to fast-forward, aborting/),s(/refusing to merge unrelated histories/),s(/Exiting because of an unresolved conflict/),s(/Exiting because of unfinished merge/),l(/Failed to merge in the changes/),(n=/Merge conflict in/,RegExp("^CONFLICT \\([^\\)]+\\): ".concat(n.source),"im"))]},{error:"UPSTREAM_NOT_SET",match:[s(/The current branch \S+ has no upstream branch/),s(/No configured push destination/)]},{error:"HEAD_DETACHED",match:[s(/HEAD does not point to a branch/),s(/ref HEAD is not a symbolic ref/)]},{error:"DIRTY_WORKTREE",match:[l(/Your local changes to the following files would be overwritten/),l(/The following untracked working tree files would be overwritten/),l(/\S+ is not possible because you have unmerged files/),l(/cannot rebase: You have unstaged changes/)]},{error:"PROTECTED_BRANCH",match:[(r=/.*? Protected branch update failed/,RegExp("^remote: error: ".concat(r.source),"im"))]},{error:"PUSH_REJECTED",match:[l(/failed to push some refs to/)]},{error:"REMOTE_ALREADY_EXISTS",match:[s(/remote .*? already exists/),l(/remote .*? already exists/)]},{error:"INVALID_STATE",match:[s(/There is no merge in progress/),s(/There is no merge to abort/),s(/No rebase in progress/)]},{error:"OBJECT_ALREADY_HAS_NOTE",match:[l(/Cannot add notes. Found existing notes for object/)]}],c=[{error:"NOTE_SUCCESSFULLY_REMOVED",match:[/^Removing note for object/]},{error:"OBJECT_HAS_NO_NOTE",match:[/^Object \S+ has no note/]},{error:"NOTE_SUCCESSFULLY_OVERWRITTEN",match:[/^Overwriting existing notes for object \S+/]},{error:"PRE_COMMIT_HOOK_FAILED",match:[/pre-?commit/i]}];function d(e){if(a.test(e)){for(var t=0;t<u.length;t++)for(var n=0;n<u[t].match.length;n++)if(u[t].match[n].test(e))return u[t].error;return"UNKNOWN"}for(var r=0;r<c.length;r++)for(var i=0;i<c[r].match.length;i++)if(c[r].match[i].test(e))return c[r].error;return o.test(e)?"PATH_MATCHED_NO_FILES":"UNKNOWN_NOT_GIT"}e.s(["GitErrors",()=>i,"gitErrorFromOutput",()=>d])},597865,e=>{"use strict";var t=e.i(530658),n=e.i(346715),r=e.i(389959),i=e.i(992785),a=e.i(825118),o=e.i(125674),s=e.i(529810);function l(e){var l,u,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},p=(0,t._)((0,r.useState)(null),2),f=p[0],m=p[1],g=(0,r.useRef)(null),h=null==(u=null!=(l=d.keepStaleResult)?l:d.refresh)||u,v=(0,r.useCallback)(function(e){(0,i.default)(e,g.current)||(g.current=e,m(e))},[]),y=(0,o.default)(function(){return e},(0,n._)(c)),x=(0,s.default)().git,b=(0,r.useRef)(null),S=(0,r.useCallback)(function(){b.current?b.current():h||v(null);var e=!1;y(x).then(function(t){e||(v(t),b.current=null)}).catch(function(){e||(v({error:a.GitErrors.UNKNOWN}),b.current=null)}),b.current=function(){e=!0,b.current=null,h||v(null)}},[v,y,x,h]);return(0,r.useEffect)(function(){return S()},[S]),(0,r.useEffect)(function(){var e;if(null==(e=d.refresh)||e)return x.onRefresh(S)},[x,S,d.refresh]),f}e.s(["default",()=>l])},45442,e=>{"use strict";var t=e.i(297083),n=e.i(878420),r=e.i(530658),i=e.i(817556),a=e.i(389959),o=e.i(906368),s=e.i(368964),l=e.i(9270),u=e.i(576255),c=e.i(180703),d=e.i(207237),p=e.i(354093),f=e.i(117807),m=e.i(76961),g=e.i(248011),h={thinkingEnabled:!1,modelProfile:s.ModelProfile.ModelProfileStandard,enableAutomatedTesting:!1,samplingRate:0,webSearchEnabled:!0,imageGenerationEnabled:!0,chatMode:s.AgentChatMode.Unspecified,maxAutonomyEnabled:!1,autonomyLevel:s.AutonomyLevel.Unspecified};function v(){var e=(0,d.default)(),h=(0,r._)((0,l.useUpdateReplAgentSettingsMutation)(),1)[0],v=(0,g.useIsFreemiumStarterPlanUsersOwnRepl)().isFreemiumStarterPlanUsersOwnRepl,y=(0,r._)((0,c.default)("".concat(e,"-high-powered-model-opted-out"),!1),2),x=y[0],b=y[1],S=(0,l.useReplAgentSettingQuery)({variables:{replId:e}}),_=S.data,w=S.loading,T=(0,m.useIsAgentWebDesignMockup)().isWebDesignMockup,j=(null==_?void 0:_.getRepl.__typename)==="Repl"&&_.getRepl.timeCreated&&new Date(_.getRepl.timeCreated)<new Date("2025-09-10"),D=(null==_?void 0:_.getRepl.__typename)==="Repl"?_.getRepl.config.agentSettings:null,k=(null==_?void 0:_.getRepl.__typename)==="Repl"?_.getRepl.config.isInPlanningPhase:null,C=(0,f.useAgentStackBlueprint)(),E=(0,u.getAutomatedTestingConfig)(C),A=E===u.AutomatedTestingConfig.DEFAULT_ON,I="slider-full"!==(0,p.useAutonomyControlVariant)();return{settings:(0,a.useMemo)(function(){var e,t,n,r,i,a,o=j?s.AutonomyLevel.Medium:s.AutonomyLevel.High;T?o=s.AutonomyLevel.Low:(null==D?void 0:D.autonomyLevel)&&D.autonomyLevel!==s.AutonomyLevel.Unspecified&&(o=D.autonomyLevel),I&&o===s.AutonomyLevel.Medium&&(o=s.AutonomyLevel.High);var l=s.AgentChatMode.Unspecified;return v?l=s.AgentChatMode.QuickEdit:T&&!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.AgentChatMode.Unspecified;return e===s.AgentChatMode.Unspecified||e===s.AgentChatMode.General||e===s.AgentChatMode.QuickEdit}(null==D?void 0:D.chatMode)?l=s.AgentChatMode.General:(null==D?void 0:D.chatMode)&&D.chatMode!==s.AgentChatMode.Unspecified?l=D.chatMode:k&&(l=s.AgentChatMode.InitialPlanning),e=E!==u.AutomatedTestingConfig.DISABLED&&l!==s.AgentChatMode.QuickEdit&&((null==D?void 0:D.enableAutomatedTesting)!=null?D.enableAutomatedTesting:A),t=T?s.ModelProfile.ModelProfileUnspecified:x?null!=(n=null==D?void 0:D.modelProfile)?n:s.ModelProfile.ModelProfileStandard:s.ModelProfile.ModelProfileAdvanced,{thinkingEnabled:!v&&null!=(r=null==D?void 0:D.thinkingEnabled)&&r,modelProfile:t,enableAutomatedTesting:e,samplingRate:0,webSearchEnabled:null==(i=null==D?void 0:D.webSearchEnabled)||i,imageGenerationEnabled:null==(a=null==D?void 0:D.imageGenerationEnabled)||a,chatMode:l,maxAutonomyEnabled:!1,autonomyLevel:o}},[D,v,A,j,x,T,E,k,I]),updateSettings:(0,a.useCallback)(function(r){return(0,t._)(function(){var t,a,l;return(0,i._)(this,function(i){switch(i.label){case 0:t=(0,n._)({},D,r),(a=r.modelProfile)&&b(a===s.ModelProfile.ModelProfileStandard),a===s.ModelProfile.ModelProfileAdvanced&&(r.modelProfile=null==D?void 0:D.modelProfile),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,h({variables:{input:{id:e,agentSettings:r}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:{__typename:"Repl",id:e,config:{__typename:"ReplConfig",agentSettings:(0,n._)({__typename:"AgentSettings"},t),isInPlanningPhase:k}}}}})];case 2:return i.sent(),[3,4];case 3:return l=i.sent(),o.captureException(l,{extra:{message:"Error updating agent settings",replId:e,attemptedSettings:r,currentSettings:D}}),[3,4];case 4:return[2]}})})()},[k,e,D,b,h]),loading:w}}e.s(["DEFAULT_AGENT_SETTINGS",()=>h,"useAgentSettings",()=>v])},97207,26857,e=>{"use strict";var t=e.i(297083),n=e.i(817556),r=e.i(389959),i=e.i(878420),a=e.i(64386),o=e.i(188507),s=e.i(569910),l=e.i(112942),u=e.i(45442),c=e.i(509908);function d(e){var t=(0,u.useAgentSettings)();return(0,r.useCallback)(function(n){if(!e)return Promise.reject(Error("Session is null, cannot send user action response"));var r=null,u=(0,l.convertAgentSettingsFromGQLToAiChat)(t.settings);switch(n.type){case"nextStepResponse":(0,c.trackAgentAnalyticsEvent)({action:"suggested_feature_selected",sessionId:e.id}),r={$kind:"nextStepResponse",nextStepResponse:{response:{$kind:"newFeatureResponse",newFeatureResponse:{selectedFeatureId:n.data.id,featureName:n.data.featureName}}}};break;case"userSecretsResponse":r={$kind:"userSecretsResponse",userSecretsResponse:{providedSecrets:n.providedSecretKeys.map(function(e){return{key:e,status:o.UserSecretResponseStatus.SECRET_COMPLETED}})}};break;case"queryResponse":r={$kind:"queryResponse",queryResponse:n.data};break;case"userMarkedTaskComplete":r={$kind:"userMarkedTaskComplete",userMarkedTaskComplete:n.data};break;case"approveTaskListResponse":r={$kind:"approveTaskListResponse",approveTaskListResponse:{taskListEventId:n.taskListEventId,approved:!0,agentConfig:u}};break;case"addingIntegrationsResponse":r={$kind:"addingIntegrationsResponse",addingIntegrationsResponse:{connectionIds:n.connectionIds,rejectedConnectorIds:n.rejectedConnectorIds}};break;case"approveInitialBuildVisualPhaseResponse":r={$kind:"approveInitialBuildVisualPhaseResponse",approveInitialBuildVisualPhaseResponse:(0,a._)((0,i._)({},n.data),{agentConfig:u})};break;case"approveInitialBuildMvpResponse":r={$kind:"approveInitialBuildMvpResponse",approveInitialBuildMvpResponse:(0,a._)((0,i._)({},n.data),{agentConfig:u})};break;case"approveBlueprintResponse":r={$kind:"approveBlueprintResponse",approveBlueprintResponse:{blueprintEventId:n.blueprintEventId,approved:n.approved,blueprintName:n.blueprintName}};break;case"convertMockupToAppResponse":r={$kind:"convertMockupToAppResponse",convertMockupToAppResponse:{approved:n.data.approved,additionalComments:n.data.additionalComments}};break;case"envVarsResponse":r={$kind:"envVarsResponse",envVarsResponse:{providedEnvVars:n.providedEnvVars}};break;default:(0,s.default)(n)}if(!r)return Promise.reject(Error("Failed to create response for user action"));var d={kind:"agentAskUserForActionResponse",response:r,requestEventId:n.requestEventId};return e.appendEvent(d)},[e,t.settings])}e.s(["useSendAskUserForActionResponse",()=>d],26857),e.i(545082);var p=e.i(423111);function f(e){var i=d(e),a=(0,p.useSetInProgressMockupToAppGraduation)();return(0,r.useCallback)(function(e){var r=e.approved,o=e.additionalComments,s=e.requestEventId;return(0,t._)(function(){var e;return(0,n._)(this,function(t){switch(t.label){case 0:r&&a(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,i({type:"convertMockupToAppResponse",data:{approved:r,additionalComments:o},requestEventId:s})];case 2:return[2,t.sent()];case 3:throw e=t.sent(),a(!1),e;case 4:return[2]}})})()},[i,a])}e.s(["useSendConvertMockupToAppResponse",()=>f],97207)},721341,e=>{e.v({grow1:"ConvertMockupToAppRequest-module__Cla0pq__grow1",grow3:"ConvertMockupToAppRequest-module__Cla0pq__grow3",root:"ConvertMockupToAppRequest-module__Cla0pq__root"})},418689,e=>{"use strict";e.s(["ConvertMockupToAppRequest",()=>w]);var t=e.i(297083),n=e.i(817556),r=e.i(276385);e.i(877212);var i=e.i(924908);e.i(925218);var a=e.i(267103),o=e.i(709485),s=e.i(596139),l=e.i(993796),u=e.i(142365),c=e.i(858248);e.i(653863);var d=e.i(973519),p=e.i(117328),f=e.i(97207),m=e.i(248011),g=e.i(443394),h=e.i(140487),v=e.i(929872),y=e.i(960178),x=e.i(625484),b=e.i(693188),S=e.i(634669),_=e.i(721341);function w(e){var w=e.message,T=e.id,j=(0,d.useGlobalModal)().show,D=(0,g.getCurrentUrl)(),k=(0,i.useChatter)(),C=(0,a.useObservable)(k.sessions.agent.current),E=(0,f.useSendConvertMockupToAppResponse)(null!=C?C:null),A=(0,m.useIsFreemiumStarterPlanUsersOwnRepl)().isFreemiumStarterPlanUsersOwnRepl,I=(0,l.useFlag)({controlName:"flag-free-plan",default:!1});return(0,u.useTrackEffect)(o.events.MOCKUP_TO_APP_CHAT_NUDGE,{action:"impression",agent_message:w,event_id:T}),(0,r.jsx)(p.EventContainer,{children:(0,r.jsxs)(v.Surface,{gap:4,p:8,elevated:!0,clsx:_.default.root,children:[(0,r.jsx)(y.Text,{textWrap:"pretty",children:w}),(0,r.jsxs)(x.View,{row:!0,gap:4,children:[(0,r.jsx)(h.Button,{clsx:_.default.grow1,text:"Dismiss",onClick:function(){(0,c.track)(o.events.MOCKUP_TO_APP_CHAT_NUDGE,{action:"select_dismiss",agent_message:w,event_id:T}),E({approved:!1,additionalComments:"",requestEventId:T})}}),I&&A?(0,r.jsx)(h.Button,{clsx:_.default.grow3,text:"Upgrade to ".concat(s.corePlanName),onClick:function(){return(0,t._)(function(){return(0,n._)(this,function(e){switch(e.label){case 0:return(0,c.track)(o.events.MOCKUP_TO_APP_CHAT_NUDGE,{action:"select_upgrade",agent_message:w,event_id:T}),[4,j("MembershipPurchaseModal",{analyticsContext:{upgrade:{context:"design_mode_conversion_upsell"}},redirectPath:D})];case 1:return e.sent(),[2]}})})()},iconLeft:(0,r.jsx)(b.default,{}),colorway:"primary"}):(0,r.jsx)(h.Button,{clsx:_.default.grow3,text:"Convert to App",onClick:function(){(0,c.track)(o.events.MOCKUP_TO_APP_CHAT_NUDGE,{action:"select_open_modal",agent_message:w,event_id:T}),j("MockupToAppModal",{onSendConvertMockupToAppResponse:E,origin:"chat_nudge",eventId:T})},iconLeft:(0,r.jsx)(S.default,{}),colorway:"primary"})]})]})})}},165579,755323,e=>{"use strict";var t=e.i(276385),n=e.i(389959),r=e.i(709485),i=e.i(858248),a=e.i(446530),o=e.i(613355),s=e.i(929872),l=e.i(960178),u=e.i(625484),c=e.i(140161),d=(0,a.cssRecord)({targetedElementWrapper:[o.rcss.width("100%"),o.rcss.flex.row,o.rcss.align.center,o.rcss.justify.end],targetedElement:[o.rcss.borderRadius(),o.rcss.backgroundColor.accentPrimaryDimmer],clickable:[{cursor:"pointer"}]});function p(e){var a=e.targetedElement,o=e.openPane,p=(0,n.useCallback)(function(){a.filePath&&o&&((0,i.track)(r.events.TARGETED_ELEMENT_FILE_LINK_CLICKED,{componentName:a.componentName,filePath:a.filePath,lineNumber:a.lineNumber}),o({type:"codeEditor",data:{path:a.filePath,line:a.lineNumber}}))},[a,o]);if(!a.componentName)return null;var f=a.filePath&&!!o,m=f?[d.targetedElement,d.clickable]:d.targetedElement;return(0,t.jsx)(u.View,{css:d.targetedElementWrapper,children:(0,t.jsxs)(s.Surface,{css:m,py:4,px:6,row:!0,align:"center",gap:4,onClick:f?p:void 0,children:[(0,t.jsx)(c.default,{size:16}),(0,t.jsx)(l.Text,{variant:"small",children:a.componentName})]})})}e.s(["TargetedElement",()=>p],165579),e.s(["TARGETED_ELEMENT_SCREENSHOT_PREFIX",()=>"targeted_element_"],755323)},758365,e=>{e.v({tooltipTitle:"DynamicIntelligenceTooltip-module__dEmn7G__tooltipTitle"})},346227,e=>{e.v({userMessageAttachments:"UserMessage-module__wrN9Aa__userMessageAttachments",userMessageMain:"UserMessage-module__wrN9Aa__userMessageMain",userMessageSurface:"UserMessage-module__wrN9Aa__userMessageSurface",userMessageSurfaceShades:"UserMessage-module__wrN9Aa__userMessageSurfaceShades"})},831147,798790,e=>{"use strict";var t=e.i(276385),n=e.i(188507),r=e.i(389959),i=e.i(629536),a=e.i(815900),o=e.i(993796),s=e.i(266645),l=e.i(200260),u=e.i(64256),c=e.i(462995),d=e.i(165579),p=e.i(755323),f=e.i(613355),m=e.i(960178),g=e.i(625484),h=e.i(758365),v={extendedThinking:{title:"Extended thinking",description:"~1.25x cost"},highPowerModel:{title:"High power model"}};function y(e){var n=v[e.type];return(0,t.jsxs)(g.View,{gap:4,children:[(0,t.jsx)(m.Text,{variant:"small",css:f.rcss.fontWeight.medium,clsx:h.default.tooltipTitle,children:n.title}),n.description?(0,t.jsx)(m.Text,{variant:"small",children:n.description}):null]})}var x=e.i(480028),b=e.i(173703),S=e.i(696770),_=e.i(929872),w=e.i(257811),T=e.i(751273),j=e.i(713081),D=e.i(14007),k=e.i(562e3),C=e.i(658886),E=e.i(744895),A=e.i(861594),I=e.i(346227);function R(e){var r,a=e.created,s=e.children,l=e.agentConfig,u=e.metaContent,c=(0,o.useFlag)({controlName:"flag-high-power-model-rollout",default:!1}),d=null!=(r=null==l?void 0:l.thinkingEnabled)&&r,p=(null==l?void 0:l.modelProfile)===n.ModelProfile.MODEL_PROFILE_ADVANCED,f=(null==l?void 0:l.agentMode)===n.AgentMode.AGENT_MODE_DISCUSSION,h=(null==l?void 0:l.agentMode)===n.AgentMode.AGENT_MODE_QUICK_EDIT,v=(null==l?void 0:l.agentInitialBuildTier)===n.AgentInitialBuildTier.AGENT_INITIAL_BUILD_TIER_LITE,b=(null==l?void 0:l.maxAutonomyEnabled)||(null==l?void 0:l.autonomyLevel)===n.AutonomyLevel.AUTONOMY_LEVEL_MAX,S=(null==l?void 0:l.initialBuildMode)===n.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_DESIGN;return(0,t.jsx)(g.View,{py:16,justify:"end",pl:32,row:!0,gap:8,"data-event-type":"user-message","data-cy":"user-message",children:(0,t.jsxs)(g.View,{clsx:I.default.userMessageMain,shrink:!0,align:"end",gap:6,children:[s,(0,t.jsxs)(g.View,{row:!0,gap:8,align:"center",children:[!p||h||c?null:(0,t.jsx)(T.Tooltip,{tooltip:(0,t.jsx)(y,{type:"highPowerModel"}),children:(0,t.jsx)(E.default,{size:12,color:x.tokens.foregroundDimmest})}),d?(0,t.jsx)(T.Tooltip,{tooltip:(0,t.jsx)(y,{type:"extendedThinking"}),children:(0,t.jsx)(D.default,{size:12,color:x.tokens.foregroundDimmest})}):null,f?(0,t.jsx)(T.Tooltip,{tooltip:(0,t.jsxs)(g.View,{children:[(0,t.jsx)(m.Text,{variant:"small",children:"Plan"}),(0,t.jsxs)(m.Text,{variant:"small",color:"dimmer",children:[i.AGENT_NAME," cannot make changes to your app."]})]}),children:(0,t.jsx)(C.default,{size:12,color:x.tokens.foregroundDimmest})}):null,h||v?(0,t.jsx)(T.Tooltip,{tooltip:(0,t.jsx)(m.Text,{variant:"small",children:"Fast"}),children:(0,t.jsx)(j.default,{size:12,color:x.tokens.foregroundDimmest})}):null,b&&!h?(0,t.jsx)(T.Tooltip,{tooltip:"Max autonomy",children:(0,t.jsx)(A.default,{size:12,color:x.tokens.foregroundDimmest})}):null,S?(0,t.jsx)(T.Tooltip,{tooltip:"Design",children:(0,t.jsx)(k.default,{size:12,color:x.tokens.foregroundDimmest})}):null,u,a?(0,t.jsx)(g.View,{row:!0,children:(0,t.jsx)(w.Timestamp,{live:!0,date:a,textVariant:"small",textColor:"dimmest",textTransform:"first-letter-capitalized",dateFormat:"switch"})}):null]})]})})}var P=(0,r.memo)(function(e){var n=e.message,r=e.attachments,i=e.created,a=e.acknowledged,o=e.readFile,s=e.targetedElement,l=e.openPane,u=e.agentConfig;return(0,t.jsxs)(R,{created:i,agentConfig:u,children:[o?(0,t.jsx)(M,{attachments:r,readFile:o}):null,(0,t.jsx)(O,{message:n,acknowledged:a,targetedElement:s,openPane:l,agentMode:null==u?void 0:u.agentMode})]})});function M(e){var n=e.attachments,r=e.readFile,a=n.filter(function(e){return!(e.path.split("/").pop()||"").startsWith(p.TARGETED_ELEMENT_SCREENSHOT_PREFIX)});return 0===a.length?null:(0,t.jsx)(g.View,{clsx:I.default.userMessageAttachments,children:(0,t.jsx)(s.default,{fileAttachments:a.map(function(e){return(0,t.jsx)(l.FileAttachment,{readFile:r,attachment:e,getAttachmentTypeDisclaimer:(0,u.getAttachmentTypeDisclaimer)({aiName:(0,i.getAgentName)({capitalizeFirstChar:!0})})},e.path)})})})}function O(e){var r=e.message,i=e.acknowledged,o=e.targetedElement,s=e.openPane,l=e.agentMode;if(!r)return null;var u=(0,a.replaceJsonMarkers)(r);return(0,t.jsx)(T.Tooltip,{tooltip:"The agent is wrapping up its current step, and will respond shortly",isDisabled:i,children:(0,t.jsxs)(N,{agentMode:l,acknowledged:i,children:[(0,t.jsx)(c.MessageMarkdown,{text:u,messageState:n.EventState.COMPLETE,textColor:"shades"}),o?(0,t.jsx)(d.TargetedElement,{targetedElement:o,openPane:s}):null]})})}function N(e){var r=e.agentMode,i=e.acknowledged,a=e.children;if((0,S.useShadesFlag)()){var o=r===n.AgentMode.AGENT_MODE_DISCUSSION;return(0,t.jsx)(b.ShadesSurface,{colorShade:o?"default":"notice",elevate:o?"2x":"1x","data-acknowledged":i,px:8,py:6,br:4,clsx:I.default.userMessageSurfaceShades,children:a})}return(0,t.jsx)(_.Surface,{clsx:I.default.userMessageSurface,elevated:!0,"data-acknowledged":i,"data-agent-mode":function(e){if(e)switch(e){case n.AgentMode.AGENT_MODE_DISCUSSION:return"plan";case n.AgentMode.AGENT_MODE_GENERAL:return"general";default:return}}(r),px:8,py:6,children:a})}function L(e){var r=e.created,i=e.additionalComments;return(0,t.jsx)(R,{created:r,children:(0,t.jsx)(N,{agentMode:n.AgentMode.AGENT_MODE_GENERAL,acknowledged:!0,children:(0,t.jsx)(m.Text,{children:"Convert to app".concat(i?": ".concat(i):"")})})})}e.s(["UserMessage",()=>P,"UserMessageContainer",()=>R,"UserMessageContent",()=>O,"UserMessageSurface",()=>N],798790),e.s(["ConvertMockupToAppResponse",()=>L],831147)},287999,e=>{"use strict";var t=e.i(394212),n=e.i(297083),r=e.i(878420),i=e.i(64386),a=e.i(817556),o=e.i(276385),s=e.i(389959),l=e.i(188507),u=e.i(986194);e.i(877212);var c=e.i(924908),d=e.i(825118);e.i(242933);var p=e.i(279606),f=e.i(424360);e.i(925218);var m=e.i(112077),g=e.i(641555),h=e.i(802088),v=e.i(968323),y=e.i(98816),x=e.i(927158),b="Replit-Restored-To";function S(e){switch(e){case l.CommitAuthor.COMMIT_AUTHOR_AGENT:return"Agent";case l.CommitAuthor.COMMIT_AUTHOR_USER:return"User";case l.CommitAuthor.COMMIT_AUTHOR_DEPLOYMENT:return"Deployment";default:return}}function _(e,t){var n=new Map,a=!0,o=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;n.set(c.id,{session:c,commitRanges:[]})}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}var d=!0,p=!1,f=void 0;try{for(var m,g=e[Symbol.iterator]();!(d=(m=g.next()).done);d=!0){var h=m.value,v=!0,y=!1,x=void 0;try{for(var b,S=h.commitRange[Symbol.iterator]();!(v=(b=S.next()).done);v=!0)!function(){var e,a=b.value,o=null!=(e=a.sessionId)?e:"unknown",s=n.get(o);s||(s={session:t.find(function(e){return e.id===o}),commitRanges:[]},n.set(o,s));var l=s.commitRanges[s.commitRanges.length-1];(void 0===l||l.collapsed!==h.collapsed)&&(l=(0,i._)((0,r._)({},h),{commitRange:[]}),s.commitRanges.push(l)),l.commitRange.push(a)}()}catch(e){y=!0,x=e}finally{try{v||null==S.return||S.return()}finally{if(y)throw x}}}}catch(e){p=!0,f=e}finally{try{d||null==g.return||g.return()}finally{if(p)throw f}}return Array.from(n.values()).sort(function(e,t){return e.session?t.session?e.session.created.getTime()-t.session.created.getTime():1:-1})}var w=(0,s.createContext)(null);function T(e){var g,S,T=e.children,j=e.replTimeCreated,D=(0,m.useCreateObservable)(null),k=(0,s.useRef)(null),C=(0,m.useCreateObservable)(!1),E=(0,x.usePid2Callback)(function(e){return function(){return(0,n._)(function(){var n,r,i,o,s,l,u,c,p,f,m,g,h,y,x,S,_,w,T,D;return(0,a._)(this,function(a){switch(a.label){case 0:n=[],r=e.git.checkpoints.subscribe({}).resReadable,i=!1,o=!1,a.label=1;case 1:a.trys.push([1,6,7,12]),l=(0,t._)(r),a.label=2;case 2:return[4,l.next()];case 3:if(!(i=!(u=a.sent()).done))return[3,5];if(!(c=u.value).ok){if("UNEXPECTED_DISCONNECT"===(p=c.payload).code)return[3,5];if(p.code===d.GitErrors.NOT_INITIALIZED)return[2,(0,v.Err)({type:"notInitialized"})];return[2,(0,v.Err)({type:"error",error:"".concat(p.code,": ").concat(p.message)})]}n.push(c.payload),a.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return f=a.sent(),o=!0,s=f,[3,12];case 7:if(a.trys.push([7,,10,11]),!(i&&null!=l.return))return[3,9];return[4,l.return()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(o)throw s;return[7];case 11:return[7];case 12:m=[],g=new Set,h=j?new Date(j):null,y=!0,x=!1,S=void 0;try{for(_=n[Symbol.iterator]();!(y=(w=_.next()).done);y=!0)if(T=w.value,D=function(e,t){var n,r=e.trailers["Replit-Commit-Author"];if(void 0!==r&&"User"!==r&&"Agent"!==r&&"Deployment"!==r||!e.trailers[b]&&void 0===r)return null;var i=new Date(e.author.date);return{hash:e.hash,committer:e.committer,subject:e.subject,customSubject:null==(n=e.notes)?void 0:n.split("\n")[0],body:e.body,screenshotUrl:e.trailers["Replit-Commit-Screenshot-Url"],sessionId:e.trailers["Replit-Commit-Session-Id"],eventId:e.trailers["Replit-Commit-Event-Id"],restoredToHash:e.trailers[b],deploymentBuildId:e.trailers["Replit-Commit-Deployment-Build-Id"],heliumCheckpointCreated:"true"===e.trailers["Replit-Helium-Checkpoint-Created"],authoredBy:r,missingAgentState:e.missingAgentState,beforeReplCreation:null!=t&&i<t}}(T,h)){if(g.has(D.hash))continue;g.add(D.hash),m.push(D)}}catch(e){x=!0,S=e}finally{try{y||null==_.return||_.return()}finally{if(x)throw S}}return[2,(0,v.Ok)(m)]}})})()}},[j]),A=(0,c.useChatter)(),I=(0,s.useMemo)(function(){return E?function(){return(0,n._)(function(){var e,t,n;return(0,a._)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,A.sessions.query({types:[l.SessionType.AGENT_SESSION]}).list.once()];case 1:return e=a.sent(),[3,3];case 2:return a.sent(),[2];case 3:if(!e)return[2];return C.set(!0),[4,E()];case 4:return k.current=t=a.sent(),t.ok?(n=_((function(e){for(var t=[],n=null,r=null,i=0;i<e.length;i++){var a=e[i],o=void 0!==a.restoredToHash;!o||(null==n?void 0:n.collapsed)||(r=a),n?n.collapsed&&r&&r.restoredToHash===a.hash?(t.push(n),n={collapsed:!1,commitRange:[]}):!n.collapsed&&o&&(t.push(n),n={collapsed:!0,commitRange:[]}):n={collapsed:o,commitRange:[]},o||n.commitRange.push(a)}return n&&t.push(n),t})(t.value).reverse().map(function(e){return(0,i._)((0,r._)({},e),{commitRange:e.commitRange.reverse()})}),e),D.set((0,v.Ok)(n))):D.set("notInitialized"===t.error.type?(0,v.Ok)(_([],e)):(0,v.Err)(t.error)),C.set(!1),[2]}})})()}:null},[E,A,C,D]),R=(g=(0,m.useCreateObservable)(null),(0,c.useChatHook)("received-completed-event",function(e){var t=e.event,n=t.contents.contents;if((0,u.isKind)(n,"agentTimelineEventContents")){var r=n.agentTimelineEventContents.toolData;switch(null==r?void 0:r.$kind){case"commitData":case"revertData":g.set(t.id)}}}),(0,s.useMemo)(function(){return new f.StatelessMulticast(function(e){var t=g.subscribe(function(t){null!==t&&e.next(t)});return function(){return t.unsubscribe()}})},[g]));(0,h.useObserver)(R,{next:function(){return null==I?void 0:I()}});var P=(S=(0,m.useCreateObservable)(0),(0,c.useChatHook)("client-reverted-session",function(){S.set(S.current+1)}),(0,s.useMemo)(function(){return new f.StatelessMulticast(function(e){var t=S.subscribe(function(t){0!==t&&e.next(t)});return function(){return t.unsubscribe()}})},[S]));(0,h.useObserver)(P,{next:function(){null==I||I()}}),(0,s.useEffect)(function(){I&&I()},[I]);var M=(0,y.default)(I),O=(0,x.usePid2Callback)(function(e){return function(t,r){return(0,n._)(function(){var n,i;return(0,a._)(this,function(a){switch(a.label){case 0:return[4,e.git.addNote.rpc({object:t,message:r,force:!0})];case 1:if(!(i=a.sent()).ok){if("UNEXPECTED_DISCONNECT"===i.payload.code)return[2];throw Error("failed to rename commit")}return[4,null==(n=M.current)?void 0:n.call(M)];case 2:return a.sent(),[2]}})})()}},[M]),N=(0,s.useCallback)(function(e){var t=!0,n=!1,r=void 0;try{for(var i,a,o,s=(null!=(a=null==(i=k.current)?void 0:i.value)?a:[])[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var l=o.value;if(l.hash===e)return l}}catch(e){n=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}return null},[]),L=(0,s.useMemo)(function(){return{checkpoints:p.Observable.from(D),loading:p.Observable.from(C),checkpointMade:R,renameCommit:O,findCommit:N}},[D,C,R,O,N]);return(0,o.jsx)(w.Provider,{value:L,children:T})}function j(){var e=(0,s.useContext)(w);if(!e)throw Error("useCheckpoints must be used within a CheckpointProvider");return e}function D(){var e=j().checkpoints;return(0,g.useObservableMemo)(function(){return e.map(function(e){return(null==e?void 0:e.ok)?e.value.reduce(function(e,t){return e+t.commitRanges.reduce(function(e,t){return e+t.commitRange.length},0)},0):0})},[e])}e.s(["CheckpointProvider",()=>T,"commitAuthorToCheckpointAuthor",()=>S,"useCheckpoints",()=>j,"useNumCheckpointsCompleted",()=>D])},680183,705705,963931,e=>{"use strict";var t,n,r=e.i(960933),i=((t={}).HEAD="HEAD",t.REMOTE_HEAD="REMOTE_HEAD",t.BRANCH="BRANCH",t.REMOTE_BRANCH="REMOTE_BRANCH",t.TAG="TAG",t);r.Type.Enum(i);var a=r.Type.Object({type:r.Type.Literal("BRANCH"),name:r.Type.String()}),o=r.Type.Object({type:r.Type.Literal("HEAD"),name:r.Type.Literal("HEAD"),detached:r.Type.Boolean(),ref:r.Type.Union([a,r.Type.Null()])}),s=r.Type.Object({type:r.Type.Literal("REMOTE_HEAD"),name:r.Type.Literal("HEAD"),remote:r.Type.String()}),l=r.Type.Object({type:r.Type.Literal("REMOTE_BRANCH"),name:r.Type.String(),remote:r.Type.String(),branch:r.Type.String()}),u=r.Type.Object({type:r.Type.Literal("TAG"),name:r.Type.String()}),c=r.Type.Union([o,s,a,l,u]);e.s(["GitBranchRefSchema",()=>a,"GitRefSchema",()=>c,"GitRefType",()=>i,"GitRemoteBranchRefSchema",()=>l],705705);var d=r.Type.Object({name:r.Type.String(),email:r.Type.String(),date:r.Type.Number()});e.s(["GitUserSchema",()=>d],963931);var p=((n={}).LOCAL="LOCAL",n.REMOTE="REMOTE",n.TRACKED="TRACKED",n);r.Type.Enum(p);var f=r.Type.Object({hash:r.Type.String(),author:d}),m=r.Type.Object({type:r.Type.Literal("LOCAL"),name:r.Type.String(),push:r.Type.Union([l,a,r.Type.Null()]),commit:f,remote:r.Type.Null(),tracking:r.Type.Null()}),g=r.Type.Object({type:r.Type.Literal("REMOTE"),name:r.Type.String(),remote:r.Type.String(),commit:f,push:r.Type.Null(),tracking:r.Type.Null()}),h=r.Type.Object({type:r.Type.Literal("TRACKED"),name:r.Type.String(),remote:r.Type.String(),push:l,tracking:g,commit:f}),v=r.Type.Union([m,g,h]);r.Type.Union([v,a,l,r.Type.String()]),e.s(["GitBranchSchema",()=>v,"GitBranchType",()=>p],680183)},526962,e=>{"use strict";var t,n=e.i(960933),r=e.i(680183),i=((t={}).DASHBOARD="DASHBOARD",t.BRANCH="BRANCH",t.CURRENT_BRANCH="CURRENT_BRANCH",t.SETTINGS="SETTINGS",t.COMMIT="COMMIT",t),a=n.Type.Union([n.Type.Object({type:n.Type.Literal("DASHBOARD")}),n.Type.Object({type:n.Type.Literal("BRANCH"),branch:r.GitBranchSchema}),n.Type.Object({type:n.Type.Literal("CURRENT_BRANCH")}),n.Type.Object({type:n.Type.Literal("SETTINGS")}),n.Type.Object({type:n.Type.Literal("COMMIT"),hash:n.Type.String()})]);e.s(["GitPaneModeSchema",()=>a,"GitPaneModeType",()=>i])},678420,e=>{"use strict";var t=e.i(878420),n=e.i(569384),r=e.i(973245),i=e.i(304277),a=e.i(566901),o=e.i(951262);function s(){var e=(0,n._)(["\n  fragment WorkspaceSharedSecret on SharedSecret {\n    id\n    name\n    description\n    version\n    timeCreated\n    timeUpdated\n    owner {\n      __typename\n      ... on User {\n        id\n      }\n    }\n    value\n    signedUrl\n  }\n"]);return s=function(){return e},e}function l(){var e=(0,n._)(["\n  fragment WorkspaceSharedSecretLink on SharedSecretLink {\n    id\n    alias\n    secret {\n      ...WorkspaceSharedSecret\n    }\n  }\n  ","\n"]);return l=function(){return e},e}function u(){var e=(0,n._)(["\n  query SecretsPaneAuthorizations($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        isOwner\n        authorizations {\n          editSecrets {\n            isAuthorized\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return u=function(){return e},e}function c(){var e=(0,n._)(["\n  query WorkspaceSecrets($secretsInput: SecretsInput) {\n    currentUser {\n      id\n      secrets(input: $secretsInput) {\n        ... on SharedSecretConnection {\n          items {\n            ...WorkspaceSharedSecret\n          }\n          pageInfo {\n            hasNextPage\n            hasPreviousPage\n            nextCursor\n            previousCursor\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function d(){var e=(0,n._)(["\n  query ReplLinkedSecrets($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        sharedSecretLinks {\n          ...WorkspaceSharedSecretLink\n        }\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,n._)(["\n  query WorkspaceAndReplLinkedSecrets($replId: String!) {\n    currentUser {\n      id\n      secrets {\n        ... on SharedSecretConnection {\n          items {\n            ...WorkspaceSharedSecret\n          }\n        }\n      }\n    }\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        sharedSecretLinks {\n          ...WorkspaceSharedSecretLink\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,n._)(["\n  mutation LinkSharedSecrets($input: LinkSharedSecretsInput!) {\n    linkSharedSecrets(input: $input) {\n      ... on LinkSharedSecretsResult {\n        links {\n          ...WorkspaceSharedSecretLink\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function m(){var e=(0,n._)(["\n  mutation UnlinkSharedSecrets($input: UnlinkSharedSecretsInput!) {\n    unlinkSharedSecrets(input: $input) {\n      ... on UnlinkSharedSecretsResult {\n        success\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return m=function(){return e},e}function g(){var e=(0,n._)(["\n  mutation UpdateSharedSecretLink($input: UpdateSharedSecretLinkInput!) {\n    updateSharedSecretLink(input: $input) {\n      ... on UpdateSharedSecretLinkOutput {\n        ...WorkspaceSharedSecretLink\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}var h={},v=(0,r.gql)(s()),y=(0,r.gql)(l(),v),x=(0,r.gql)(u());function b(e){var n=(0,t._)({},h,e);return i.useQuery(x,n)}var S=(0,r.gql)(c(),v);function _(e){var n=(0,t._)({},h,e);return i.useQuery(S,n)}var w=(0,r.gql)(d(),y);function T(e){var n=(0,t._)({},h,e);return i.useQuery(w,n)}var j=(0,r.gql)(p(),v,y);function D(e){var n=(0,t._)({},h,e);return a.useLazyQuery(j,n)}var k=(0,r.gql)(f(),y);function C(e){var n=(0,t._)({},h,e);return o.useMutation(k,n)}var E=(0,r.gql)(m());function A(e){var n=(0,t._)({},h,e);return o.useMutation(E,n)}var I=(0,r.gql)(g(),y);function R(e){var n=(0,t._)({},h,e);return o.useMutation(I,n)}e.s(["ReplLinkedSecretsDocument",()=>w,"useLinkSharedSecretsMutation",()=>C,"useReplLinkedSecretsQuery",()=>T,"useSecretsPaneAuthorizationsQuery",()=>b,"useUnlinkSharedSecretsMutation",()=>A,"useUpdateSharedSecretLinkMutation",()=>R,"useWorkspaceAndReplLinkedSecretsLazyQuery",()=>D,"useWorkspaceSecretsQuery",()=>_])},712516,e=>{"use strict";var t=e.i(721281),n=e.i(276385);e.i(282890);var r=e.i(827456),i=e.i(446530),a=e.i(123850),o=e.i(613355),s=e.i(960178),l=e.i(625484),u=e.i(548190),c=e.i(940745),d=(0,a.createCssVarTokens)(["maxWidth"]),p=d.cssVars,f=d.styleTokens,m=(0,i.cssRecord)({container:[o.rcss.width("100%"),o.rcss.minHeight("100%"),o.rcss.center],centeredContent:[o.rcss.width("100%"),o.rcss.maxWidth(f.maxWidth),o.rcss.colWithGap(16),o.rcss.p(16),o.rcss.center],imageWithHeader:[o.rcss.center,o.rcss.flex.shrink(1),o.rcss.textAlign.center],bodyText:[o.rcss.textAlign.center,o.rcss.color.foregroundDimmest]});function g(e){var i=e.pane,a=e.asciiArt,o=e.headerText,d=e.bodyText,f=e.body,g=e.action,h=e.icon,v=e.loading,y=e.maxWidth,x=e.innerRef,b=(0,r.usePaneUIContext)(),S=b.getDescription(i),_=(0,n.jsx)(b.Icon,{pane:i,size:48}),w=null!=f?f:S;void 0!==v&&v?w=(0,n.jsxs)(l.View,{gap:4,align:"center",row:!0,children:[(0,n.jsx)(c.default,{size:16}),(0,n.jsx)(s.Text,{css:m.bodyText,children:"Loadingâ€¦"})]}):void 0!==d&&(w=(0,n.jsx)(l.View,{children:(0,n.jsx)(s.Text,{css:m.bodyText,multiline:!0,children:d})}));var T=_;return void 0!==h?T=h:void 0!==a&&(T=(0,n.jsx)(u.default,{art:a})),(0,n.jsx)(l.View,{css:m.container,style:(0,t._)({},p.maxWidth,"".concat(void 0===y?600:y,"px")),innerRef:x,children:(0,n.jsxs)(l.View,{css:m.centeredContent,children:[(0,n.jsxs)(l.View,{css:m.imageWithHeader,gap:16,children:[T,(0,n.jsx)(s.Header,{level:1,variant:"subheadBig",multiline:!0,children:null!=o?o:S})]}),w,g]})})}e.s(["default",()=>g])},269746,e=>{"use strict";var t=e.i(276385),n=e.i(366492),r=e.i(761201),i=e.i(858248),a=e.i(709485),o=e.i(712516),s=e.i(446530),l=e.i(613355),u=e.i(396776),c=e.i(625484),d=e.i(363201),p=(0,s.cssRecord)({buttonLink:[l.rcss.reset.button,l.rcss.linkStyle]});function f(e){var s=e.performPaneOperation,l=e.editSecretsAuthz;return(0,t.jsx)(o.default,{pane:{type:"envEditor"},bodyText:(0,t.jsxs)(c.View,{gap:4,children:[l.isAuthorized?null:(0,t.jsx)(u.StatusBanner,{icon:(0,t.jsx)(d.default,{}),text:l.message}),(0,t.jsx)("div",{children:(0,t.jsx)(n.default,{href:r.LINKS_DOCS.SECRETS_SAFETY,target:"_blank",rel:"noopener",children:"Learn how Replit keeps your Secrets safe."})}),(0,t.jsxs)("div",{children:["Not sure where to start?"," ",(0,t.jsx)("button",{onClick:function(){s({operation:"open",pane:{type:"integrations"}}),(0,i.track)(a.events.TOOL_OPENED,{source:"secretsPaneNudge",tool:"integrations"})},css:p.buttonLink,children:"Explore Integrations."})]})]})})}function m(e){var i=e.message;return(0,t.jsx)(o.default,{pane:{type:"envEditor"},bodyText:(0,t.jsxs)(c.View,{gap:4,children:[(0,t.jsx)("div",{children:i}),(0,t.jsx)("div",{children:(0,t.jsx)(n.default,{href:r.LINKS_DOCS.SECRETS,target:"_blank",rel:"noopener",children:"Visit the secrets documentation to learn more."})})]})})}e.s(["EnvEditorEmpty",()=>f,"EnvEditorUnauthorized",()=>m])},12291,e=>{"use strict";var t=e.i(878420),n=e.i(886513),r=e.i(276385),i=e.i(205104),a=e.i(446530),o=e.i(613355),s=e.i(140487),l=e.i(88619),u=e.i(929872),c=e.i(960178),d=e.i(625484),p=e.i(782096),f=(0,a.cssRecord)({code:[o.rcss.font.code,o.rcss.flex.grow(1)],surface:[o.rcss.borderRadius(8),o.rcss.p(8),o.rcss.flex.row,o.rcss.rowWithGap(8),o.rcss.align.center,o.rcss.width("100%"),o.rcss.overflowX("auto")]});function m(e){var n=h(e.filePath,e.keyName);if(!n)return null;var i=n.import,a=n.access;return(0,r.jsxs)(d.View,{gap:8,children:[i?(0,r.jsx)(g,(0,t._)({code:i},e)):null,(0,r.jsx)(g,(0,t._)({code:a},e))]})}function g(e){var t=e.code,i=e.onInsert,a=(0,n._)(e,["code","onInsert"]);return(0,r.jsxs)(u.Surface,{elevated:a.elevated,css:f.surface,children:[(0,r.jsx)(l.CopyIconButton,{textToCopy:t}),(0,r.jsx)(c.Text,{variant:"small",css:f.code,multiline:!1,children:t}),i?(0,r.jsx)(s.Button,{variant:"outlined",size:"small",onClick:function(){return i(t)},text:"Insert",iconRight:(0,r.jsx)(p.default,{})}):null]})}function h(e,t){if(!e)return null;switch((0,i.getExt)(e)){case"js":case"ts":case"jsx":case"tsx":return{import:null,access:"const mySecret = process.env['".concat(t,"']")};case"py":return{import:"import os",access:"my_secret = os.environ['".concat(t,"']")};case"go":return{import:'import "os"',access:'mySecret := os.Getenv("'.concat(t,'")')};case"java":case"scala":return{import:null,access:'System.getenv("'.concat(t,'")')};case"rb":return{import:null,access:'ENV["'.concat(t,'"]')};case"c":case"cpp":return{import:"#include <stdlib.h>",access:'char* mySecret = getenv("'.concat(t,'")')};case"cs":return{import:"using System;",access:'string mySecret = System.Environment.GetEnvironmentVariable("'.concat(t,'");')};case"sh":return{import:null,access:'"$'.concat(t,'"')};default:return null}}e.s(["default",()=>m,"getEnvCodeForLanguage",()=>h])},952685,e=>{"use strict";var t=e.i(389959),n=e.i(205104),r=e.i(529810);function i(e){var i=(0,r.default)().fs,a=(0,t.useCallback)(function(t,r){var a=t.code,o=t.insertAt,s=t.newLine,l=void 0===s||s;if(!e||(0,n.isMedia)(e)||(0,n.isDrawFile)(e)||(0,n.isBinary)(e))throw Error("Invalid file, this should never happen");if(0!==a.length)var u=i.watchTextFile(e,{onReady:function(t){var n=t.initialContent,s=t.writeChange,c=n.toString(),d="end"===o?c.length:o,p=a;l&&(0!==d&&d!==c.length&&-1===(d=c.indexOf("\n",d))&&(d=c.length),0!==d&&"\n"!==c[d-1]&&(p="\n"+p),"\n"!==c[d]&&(p+="\n")),s({from:d,insert:p},r),i.flush(new Set([e])).finally(function(){u()})}})},[e,i]);return!e||(0,n.isMedia)(e)||(0,n.isDrawFile)(e)||(0,n.isBinary)(e)?null:a}e.s(["default",()=>i])},642049,e=>{"use strict";var t,n,r=e.i(878420),i=e.i(64386),a=e.i(960933),o=a.Type.Integer({minimum:0,maximum:65535}),s=a.Type.Object({forwarded:a.Type.Boolean(),port:o,address:a.Type.String(),externalPort:o,comm:a.Type.String({description:"Comm is the name chosen by the thread / process. Sometimes it has nice information to disambiguate between multiple instances of that process."}),cmdline:a.Type.Array(a.Type.String(),{description:"Cmdline is the commandline arguments provided when the process started."}),cgroup:a.Type.String({description:"Cgroup is the cgroup of the process, as reported by `/proc/${pid}/cgroup`"}),pid:a.Type.Integer(),pidChain:a.Type.Array(a.Type.Integer(),{description:"PidChain is the list of process ids in the hierarchy of the process, starting with the current process id and ending with 1 (pid1)."})});a.Type.Array(s);var l=((t={}).NOT_STARTED="NOT_STARTED",t.RUNNING="RUNNING",t.FINISHED="FINISHED",t.FAILED="FAILED",t),u=((n={}).NOT_STARTED="NOT_STARTED",n.RUNNING="RUNNING",n.FINISHED="FINISHED",n.FAILED="FAILED",n.ERROR="ERROR",n),c=a.Type.Object({task:a.Type.Literal("shell.exec"),args:a.Type.String(),env:a.Type.Optional(a.Type.Record(a.Type.String(),a.Type.String())),waitForPort:a.Type.Optional(a.Type.Number()),ensurePreviewReachable:a.Type.Optional(a.Type.String())}),d=a.Type.Object({task:a.Type.Literal("shell.exec"),cgroupPath:a.Type.Optional(a.Type.String()),pid:a.Type.Optional(a.Type.Integer()),isInRecoveryMode:a.Type.Optional(a.Type.Boolean()),openPorts:a.Type.Optional(a.Type.Array(s)),isPreviewReachable:a.Type.Optional(a.Type.Boolean())}),p=a.Type.Object({task:a.Type.Literal("packager.installForLanguage"),args:a.Type.String(),enablePackageGuessing:a.Type.Optional(a.Type.Boolean()),continueOnFail:a.Type.Optional(a.Type.Boolean())}),f=a.Type.Object({task:a.Type.Literal("packager.installForLanguage"),hasUserFacingOutput:a.Type.Boolean()}),m=a.Type.Object({task:a.Type.Literal("packager.installForAll"),enablePackageGuessing:a.Type.Optional(a.Type.Boolean()),continueOnFail:a.Type.Optional(a.Type.Boolean())}),g=a.Type.Object({task:a.Type.Literal("packager.installForAll"),hasUserFacingOutput:a.Type.Boolean()}),h=a.Type.Object({task:a.Type.Literal("workflow.run"),args:a.Type.String()}),v=a.Type.Object({task:a.Type.Literal("workflow.run"),runId:a.Type.String()}),y=a.Type.Union([m,p,c,h]),x=a.Type.Union([g,f,d,v]),b=a.Type.Union([a.Type.Literal("parallel"),a.Type.Literal("sequential")]),S=a.Type.Object({agentRequireRestartOnSave:a.Type.Optional(a.Type.Boolean({description:"Meant for agent use only. Some frameworks have Hot Module Replacement or other mechanisms to automatically serve updated contents when files change. This metadata option is intended to be set to true when the frameworks do not have support for HMR, and the caller is expected to manually restart the workflow after saving files."})),agentRestartPatterns:a.Type.Optional(a.Type.Array(a.Type.String(),{description:"Meant for agent use only. Specify a list of glob patterns used for matching file change events that would require a restart."})),generated:a.Type.Optional(a.Type.Boolean({description:"Used for auto-generated workflows, generated workflows should be kept read-only, and do not persist in .replit, examples being run button workflow, or package.json generated workflows."})),dotReplitRun:a.Type.Optional(a.Type.Boolean({description:"Only used by the workflow generated from .replit run configuration, only to be set internally in workflow service state and should not be persisted in dotreplit (unless potentially duplicated by the user)"})),outputType:a.Type.Optional(a.Type.Enum({webview:"webview",console:"console",vnc:"vnc",automations:"automations"},{description:'Set by the agent to allow more integration with the workspace - mainly which pane do we focus on running the specific workflow; defaults to "webview"'}))}),_=a.Type.Union([a.Type.Literal("agent"),a.Type.Literal("system"),a.Type.Number()]),w=a.Type.Object({name:a.Type.String(),mode:a.Type.Optional(b),metadata:a.Type.Optional(S),tasks:a.Type.Array(y),author:a.Type.Optional(_)});a.Type.Object({workflows:a.Type.Object({runButton:a.Type.Optional(a.Type.String()),workflow:a.Type.Optional(a.Type.Array(w))})}),a.Type.Object({runButton:a.Type.Optional(a.Type.String()),workflow:a.Type.Optional(a.Type.Array(w))});var T={userIds:a.Type.Array(a.Type.Number()),metadata:a.Type.Optional(x),config:y},j=a.Type.Union([a.Type.Object((0,i._)((0,r._)({},T),{state:a.Type.Literal("NOT_STARTED")})),a.Type.Object((0,i._)((0,r._)({},T),{state:a.Type.Literal("RUNNING"),isReady:a.Type.Optional(a.Type.Boolean()),startTime:a.Type.Number()})),a.Type.Object((0,i._)((0,r._)({},T),{state:a.Type.Literal("FAILED"),startTime:a.Type.Number(),endTime:a.Type.Number(),result:a.Type.Optional(a.Type.Object({message:a.Type.Optional(a.Type.String()),exitCode:a.Type.Optional(a.Type.Number())}))})),a.Type.Object((0,i._)((0,r._)({},T),{state:a.Type.Literal("FINISHED"),startTime:a.Type.Number(),endTime:a.Type.Number(),result:a.Type.Optional(a.Type.Object({message:a.Type.Optional(a.Type.String()),exitCode:a.Type.Optional(a.Type.Number())}))})),a.Type.Object((0,i._)((0,r._)({},T),{state:a.Type.Literal("ERROR"),startTime:a.Type.Number(),endTime:a.Type.Number(),result:a.Type.Optional(a.Type.Object({message:a.Type.Optional(a.Type.String())}))}))]);a.Type.Record(a.Type.String(),a.Type.Object({runId:a.Type.String(),startTime:a.Type.Number(),endTime:a.Type.Optional(a.Type.Number()),step:a.Type.Enum(l),tasks:a.Type.Array(j),workflow:w,userId:a.Type.Optional(a.Type.Union([a.Type.Literal("agent"),a.Type.Number()]))})),e.s(["TaskConfigSchema",()=>y,"TaskState",()=>u,"WorkflowStateStep",()=>l],642049)},982829,e=>{"use strict";var t,n,r=e.i(878420),i=e.i(346715),a=e.i(119468),o=function(e){return e.startsWith("Run ")?e.slice(4):e};function s(e){return e.replace(/\/nix\/store\/[^/]+\/bin\/([^\s]+)/,"$1")}function l(e){return["PARSE_ERROR","NOT_FOUND","READ_FILE"].includes(e)}function u(e){return(void 0===e?"undefined":(0,a._)(e))==="object"&&null!==e&&"code"in e&&"string"==typeof e.code&&l(e.code)&&(void 0===e.message||"string"==typeof e.message)&&(void 0===e.extras||"string"==typeof e.extras)}function c(e,t){for(var n=[],a=0;a<e.length;a++){var o=e[a];if("shell.exec"===o.task){if(t.length){var s=t.shift();s&&n.push((0,r._)({},o,s))}}else n.push(o)}return n.push.apply(n,(0,i._)(t)),n}var d=((t={}).OFFLINE="OFFLINE",t.IDLE="IDLE",t.BEFORE_RUN="BEFORE_RUN",t.RUNNING="RUNNING",t.STOPPING="STOPPING",t),p=((n={}).AUTO_RUN="AUTO_RUN",n.AGENT_RUN="AGENT_RUN",n.RUN_BUTTON_CLICKED="RUN_BUTTON_CLICKED",n.KEYBOARD_SHORTCUT="KEYBOARD_SHORTCUT",n.GITHUB_IMPORT="GITHUB_IMPORT",n);e.s(["PID1_RUNNER_NAME",()=>"Run App","RunReason",()=>p,"RunState",()=>d,"formatNixStorePath",()=>s,"isConfigErrorCode",()=>l,"isDotReplitError",()=>u,"mergeProposedTasks",()=>c,"removeRunPrefix",()=>o])},448154,432902,e=>{"use strict";var t=e.i(394212),n=e.i(297083),r=e.i(817556),i=e.i(299798),a=e.i(982829),o=e.i(389959),s=e.i(529810);function l(e){var t=(0,s.default)().container,n=(0,o.useRef)(null);(0,o.useEffect)(function(){return t.onConnectionStateChanged(function(t){t!==n.current&&(n.current=t,e(t))})},[t,e])}function u(e){var o=e.onWorkflowsConfigChange,s=e.onDotReplitStateChange,u=e.onRunStateChange,c=e.onConnectionStateChange;(0,i.usePid2)(function(e,i){var l=i.signal;return(0,n._)(function(){return(0,r._)(this,function(i){switch(i.label){case 0:return[4,e.workflows.init.rpc({useWorkflowGenerators:!0},{signal:l})];case 1:if(!i.sent().ok)return[2];return[4,Promise.all([(0,n._)(function(){var n,i,u,c,d,p,f,m;return(0,r._)(this,function(r){switch(r.label){case 0:n=e.workflows.config.subscribe({},{signal:l}).resReadable,i=!1,u=!1,r.label=1;case 1:r.trys.push([1,6,7,12]),d=(0,t._)(n),r.label=2;case 2:return[4,d.next()];case 3:if(!(i=!(p=r.sent()).done))return[3,5];if(!(f=p.value).ok)return(0,a.isDotReplitError)(f.payload)&&s(f.payload),[3,4];if(void 0!==f.payload.dotReplitState)return s(f.payload.dotReplitState),[3,4];o(f.payload.config),r.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return m=r.sent(),u=!0,c=m,[3,12];case 7:if(r.trys.push([7,,10,11]),!(i&&null!=d.return))return[3,9];return[4,d.return()];case 8:r.sent(),r.label=9;case 9:return[3,11];case 10:if(u)throw c;return[7];case 11:return[7];case 12:return[2]}})})(),(0,n._)(function(){var n,i,a,o,s,c,d,p;return(0,r._)(this,function(r){switch(r.label){case 0:n=e.workflows.runState.subscribe({},{signal:l}).resReadable,i=!1,a=!1,r.label=1;case 1:r.trys.push([1,6,7,12]),s=(0,t._)(n),r.label=2;case 2:return[4,s.next()];case 3:if(!(i=!(c=r.sent()).done))return[3,5];if(!(d=c.value).ok)return[3,4];u(d.payload.state),r.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return p=r.sent(),a=!0,o=p,[3,12];case 7:if(r.trys.push([7,,10,11]),!(i&&null!=s.return))return[3,9];return[4,s.return()];case 8:r.sent(),r.label=9;case 9:return[3,11];case 10:if(a)throw o;return[7];case 11:return[7];case 12:return[2]}})})()])];case 2:return i.sent(),[2]}})})()},[o,s,u]),l(c)}e.s(["default",()=>l],432902),e.s(["default",()=>u],448154)},417120,215969,e=>{"use strict";var t=e.i(389959),n=e.i(188507);e.i(877212);var r=e.i(924908),i=e.i(165680);e.i(925218);var a=e.i(267103),o=e.i(641555),s={direction:"reverse",state:{isMostRecentMessageFromUser:!1},map:function(e){return e.isMostRecentMessageFromUser},reducer:function(e,t){return e.sender.type===n.UserType.USER?t.isMostRecentMessageFromUser=!0:t.isMostRecentMessageFromUser=!1,!1}};function l(e){var t=e.sessionId,n=(0,r.useChatter)(),i=(0,o.useObservableMemo)(function(){return t?n.sessions.get(t):null},[n,t],{default:null});return(0,o.useObservableMemo)(function(){return null==i?void 0:i.reduce(s,1)},[i],{default:!1})}function u(){var e=(0,r.useChatter)(),o=(0,a.useObservable)(e.sessions.agent.current),s=(0,i.useSetAgentPausedByUser)(),l=(0,t.useCallback)(function(e){null==o||o.agent.update(e),e===n.AgentRunState.AGENT_STATE_PAUSED&&s(!0)},[o,s]);return{agentState:null==o?void 0:o.agent.state,updateAgentState:l}}function c(){var e=u().agentState;return(0,o.useObservableMemo)(function(){return null==e?void 0:e.select(function(e){return null==e?void 0:e.state})},[e])}function d(){return c()===n.AgentRunState.AGENT_STATE_RUNNING}function p(){var e=u().updateAgentState;return(0,t.useCallback)(function(){return e(n.AgentRunState.AGENT_STATE_PAUSED)},[e])}function f(){var e=(0,r.useChatter)(),t=(0,a.useObservable)(e.sessions.agent.current),n=null==t?void 0:t.id,i=d(),o=l({sessionId:n});return i||o}e.s(["useIsUserMessageMostRecentEvent",()=>l],215969),e.s(["useAgentRunState",()=>c,"useAgentState",()=>u,"useIsAgentOptimisticallyWorking",()=>f,"useIsAgentWorking",()=>d,"usePauseAgent",()=>p],417120)},729122,341727,e=>{"use strict";var t=e.i(297083),n=e.i(878420),r=e.i(530658),i=e.i(346715),a=e.i(119468),o=e.i(817556),s=e.i(517884),l=e.i(389959),u=e.i(992785),c=e.i(131141),d=e.i(541793),p=e.i(814563),f=e.i(642049),m=e.i(188507);e.i(925218);var g=e.i(267103),h=e.i(968323);e.i(963146);var v=e.i(62820),y=e.i(162914),x=e.i(98816),b=e.i(927158),S=e.i(529810),_=e.i(982829),w=e.i(448154),T=e.i(852819),j=e.i(417120);e.i(792e3);var D=e.i(8808),k=e.i(873379);function C(){var e=(0,S.default)().container,t=(0,k.default)(e),n=(0,r._)((0,l.useState)(!1),2),i=n[0],a=n[1];return((0,l.useEffect)(function(){t===D.ConnectionState.CONNECTED&&a(!0)},[t]),i)?{didConnectOnce:i,didDisconnect:t!==D.ConnectionState.CONNECTED}:{didConnectOnce:!1,didDisconnect:!1}}e.s(["default",()=>C],341727);var E=(0,d.atom)();function A(){return(0,T.useValue)(E)}var I=(0,d.atom)(!0);function R(){return(0,T.useValue)(I)}var P=(0,d.atom)(null,function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=(0,c.produce)(e(E),n);return t(E,i),r.persist&&e(em).persist(),i});function M(){return(0,T.useSet)(P)}function O(){var e=M();return(0,l.useCallback)(function(t){return e(function(e){if(!e){e={runButton:t};return}e.runButton=t},{persist:!0})},[e])}function N(){var e=M();return(0,l.useCallback)(function(t,n){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).persist;return e(function(e){var r,i=null==e||null==(r=e.workflow)?void 0:r[t];i&&n(i)},{persist:r})},[e])}function L(){var e=M();return(0,l.useCallback)(function(t){return e(function(e){var n;null==e||null==(n=e.workflow)||n.splice(t,1)},{persist:!0})},[e])}function B(){var e=N();return(0,l.useCallback)(function(t){return e(t.workflowIndex,function(e){null==e||e.tasks.splice(t.taskIndex,1)},{persist:!0})},[e])}function V(){var e=N();return(0,l.useCallback)(function(t,n,r){var i=r.persist;return e(t.workflowIndex,function(e){e.tasks[t.taskIndex]=n},{persist:i})},[e])}function U(){var e=N();return(0,l.useCallback)(function(t,n,r){var i=r.persist;return e(t.workflowIndex,function(e){e.tasks=n},{persist:i})},[e])}function F(){var e=N();return(0,l.useCallback)(function(t){return e(t,function(e){var t,r=null!=(t=e.tasks[e.tasks.length-1])?t:{};e.tasks.push(r?(0,n._)({},r):{task:"shell.exec",args:""})})},[e])}var H=(0,d.atom)(null,function(e,t,n){var r=t(P,function(e){if(void 0===e)return{workflow:[n]};e.workflow?e.workflow.push(n):e.workflow=[n]},{persist:!0});return(0,s.default)(null==r?void 0:r.workflow),r.workflow.length-1});function G(){return(0,T.useSet)(H)}var z=(0,d.atom)(void 0);function q(){return(0,T.useValue)(z)}var W=(0,d.atom)(function(e){var t=e(z);return t?Object.entries(t).flatMap(function(e){var t=(0,r._)(e,2),n=t[0],i=t[1];return i.tasks.filter(function(e){return e.state===f.TaskState.RUNNING||e.state===f.TaskState.FINISHED||e.state===f.TaskState.FAILED||e.state===f.TaskState.ERROR}).map(function(e,t){return{task:e,taskIdx:t,runId:n,workflowId:i.workflow.name,config:i.workflow.tasks[t]}})}):[]});function K(){return(0,T.useValue)(W)}var $=(0,d.atom)(function(e){var t,n=e(E);return null!=(t=null==n?void 0:n.workflow)?t:[]}),Y=(0,p.selectAtom)($,function(e){var t;return null!=(t=null==e?void 0:e.map(function(e,t){return t}))?t:[]},u.default),X=(0,d.atom)(function(e){var t=function(e){var t=!0,n=!1,i=void 0;try{for(var a,o=e.tasks[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value;if("workflow.run"===s.task&&!r.includes(s.args))return(0,h.Err)('workflow "'.concat(s.args,'" not found'))}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}return(0,h.Ok)(null)},n=e($),r=e(J),i={};return n.forEach(function(e,n){var r=t(e);r.ok||(i[n]=r.error)}),i});function Q(e){return(0,T.useValue)((0,l.useMemo)(function(){return(0,p.selectAtom)(X,function(t){return e in t?t[e]:null})},[e]))}var J=(0,p.selectAtom)($,function(e){var t;return null!=(t=null==e?void 0:e.map(function(e){return e.name}))?t:[]},u.default);function Z(){return(0,T.useValue)($)}function ee(){return(0,T.useValue)(ec)}function et(){return(0,T.useValue)(Y)}function en(){return(0,T.useValue)(J)}function er(e){var t,n;return(0,T.useValue)((t=e.workflowIndex,n=e.taskIndex,(0,l.useMemo)(function(){return(0,p.selectAtom)($,function(e){var r;return e?null==(r=e[t])?void 0:r.tasks[n]:null})},[t,n])))}function ei(e){return(0,T.useValue)((0,l.useMemo)(function(){return(0,p.selectAtom)($,function(t){return t?t[e]:null})},[e]))}function ea(){return(0,T.useGet)($)}function eo(e){var t=(0,l.useMemo)(function(){return(0,d.atom)(function(t){var n,r=null==(n=t($)[e])?void 0:n.name;if(!r)return null;var i=t(z);return i?function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=Object.values(e)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;l.workflow.name===t&&n.push(l)}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n.length?n.sort(function(e,t){return e.startTime-t.startTime}):null}(i,r):null})},[e]);return(0,l.useMemo)(function(){return(0,p.selectAtom)(t,function(e){return e?e[e.length-1]:null})},[t])}function es(e){return(0,T.useGet)(eo(e))}function el(e){var t;return(0,T.useObservableValue)((t=eo(e),(0,l.useMemo)(function(){return(0,p.selectAtom)(t,function(e){return(null==e?void 0:e.step)===f.WorkflowStateStep.RUNNING})},[t])))}var eu=(0,d.atom)(function(e){var t=e(E);if(!(null==t?void 0:t.workflow)||!(null==t?void 0:t.runButton))return null;var n=!0,r=!1,i=void 0;try{for(var a,o=t.workflow[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if(s.name===t.runButton)return s}}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return null}),ec=(0,p.selectAtom)(eu,function(e){var t;return null!=(t=null==e?void 0:e.name)?t:null}),ed=(0,d.atom)(function(e){var t=e($).find(function(e){var t;return null==(t=e.metadata)?void 0:t.dotReplitRun});return t?t.name:null}),ep=(0,d.atom)(function(e){var t=e(z);if(!t)return null;var n=Object.values(t).filter(function(e){return e.step===f.WorkflowStateStep.RUNNING});return 0===n.length?null:n});function ef(){var e=(0,T.useValue)(ec),n=(0,S.default)().fs,r=(0,T.useValue)(ed);e||(e=r);var i=(0,T.useValue)(ep),a=e_(),s=(0,l.useMemo)(function(){return null!==i&&i.some(function(e){return"agent"===e.userId})},[i]),u=(0,l.useMemo)(function(){return s||(null==i?void 0:i.some(function(e){return e.step===f.WorkflowStateStep.RUNNING}))?_.RunState.RUNNING:_.RunState.IDLE},[s,i]),c=(0,b.usePid2Callback)(function(r){return function(i){return(0,t._)(function(){return(0,o._)(this,function(t){switch(t.label){case 0:return[4,n.flush()];case 1:return t.sent(),a(i),[2,!!e&&r.workflows.runWorkflow.rpc({workflowId:e})]}})})()}},[a,e,n]),d=(0,b.usePid2Callback)(function(e){return function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).graceful;null==i||i.forEach(function(n){e.workflows.stopRun.rpc({runId:n.runId,graceful:t})})}},[i]);return null!==e?{workflowId:e,run:c,stop:d,step:u,runningWorkflows:i,isAgentRunningWorkflow:s}:null}var em=(0,d.atom)({persist:function(){return(0,t._)(function(){return(0,o._)(this,function(e){return[2,(0,h.Ok)(null)]})})()}});function eg(){var e=(0,T.useGet)(em);return(0,l.useCallback)(function(){return(0,e().persist)()},[e])}var eh={PARSE_ERROR:"Failed to parse workflow configs from .replit",NOT_FOUND:"Missing .replit file",READ_FILE:"Error reading .replit"},ev=(0,d.atom)(void 0);function ey(){return(0,T.useValue)(ev)}function ex(e){var n=e.dotReplit,r=(0,T.useGet)(E),i=(0,T.useSet)(E),a=(0,T.useSet)(ev),s=(0,T.useSet)(z),c=(0,T.useSet)(I),d=(0,T.useValue)(I),p=(0,l.useCallback)(function(e){var t=r();t&&(0,u.default)(e,t)||i(e||{}),c(!1)},[c,r,i]),f=(0,l.useCallback)(function(e){c(!1),(0,_.isConfigErrorCode)(e.code)?a({code:e.code,message:eh[e.code],extras:e.extras}):a(void 0)},[a,c]),m=(0,l.useCallback)(function(e){switch(e){case v.ConnectionState.DISCONNECTED:s(void 0),c(!0);return;case v.ConnectionState.CONNECTING:c(!0);return;case v.ConnectionState.CONNECTED:d&&r()&&c(!1);return}},[c,s,d,r]);(0,w.default)({onWorkflowsConfigChange:p,onRunStateChange:s,onDotReplitStateChange:f,onConnectionStateChange:m});var g=(0,T.useObservableValue)(E),y=(0,T.useSet)(em);(0,l.useEffect)(function(){y({persist:function(){return(0,t._)(function(){var e,r,i;return(0,o._)(this,function(a){var s;return(r=g.current)?(i=null==(e=r.workflow)?void 0:e.filter(function(e){var t;return!(null==(t=e.metadata)?void 0:t.generated)}),[2,(s={runButton:r.runButton,workflow:i},(0,t._)(function(){var e;return(0,o._)(this,function(t){switch(t.label){case 0:return[4,n.updateDotReplit([(null==(e=s.workflow)?void 0:e.length)||s.runButton?{path:"workflows",op:"add",value:JSON.stringify(s)}:{path:"workflows",op:"remove",value:""}])];case 1:if(t.sent().error)return[2,(0,h.Err)("Error applying update")];return[2,(0,h.Ok)(null)]}})})())]):[2,(0,h.Err)("No config found")]})})()}})},[n,y,g])}var eb=(0,d.atom)([]);function eS(e,t){var n=(0,T.useSet)(eb),r=(0,x.default)(e);(0,l.useEffect)(function(){var e=function(e){r.current(e)};return n(function(t){return(0,i._)(t).concat([e])}),function(){n(function(t){return t.filter(function(t){return t!==e})})}},[n].concat((0,i._)(t)))}function e_(){var e=(0,T.useValue)(eb);return(0,l.useCallback)(function(t){e.forEach(function(e){return e(t)})},[e])}function ew(){var e=C().didDisconnect,t=R(),n=ef(),r=en(),i=(0,j.useAgentState)().agentState,a=(0,g.useObservable)(i),o=(0,l.useMemo)(function(){var e;return!!a&&null!=n&&!!n.isAgentRunningWorkflow&&(a.state===m.AgentRunState.AGENT_STATE_RUNNING||a.state===m.AgentRunState.AGENT_STATE_PAUSING||a.state===m.AgentRunState.AGENT_STATE_PAUSED&&(null==(e=a.reason)?void 0:e.$kind)==="waitingOnUserResponse")},[a,null==n?void 0:n.isAgentRunningWorkflow]),s=(0,y.default)(o,1e3),u=(0,l.useMemo)(function(){return(null==n?void 0:n.step)===_.RunState.RUNNING},[null==n?void 0:n.step]),c=(0,y.default)(u,100),d=(0,l.useMemo)(function(){return s?c:u},[s,c,u]),p=(0,l.useMemo)(function(){var e=null==n?void 0:n.workflowId;return!e||!r.includes(e)},[r,null==n?void 0:n.workflowId]);return{isWorkflowsLoading:t,isWorkflowsRunning:u,isRunning:d,isAgentRunningWorkflow:null==n?void 0:n.isAgentRunningWorkflow,isOffline:e,isDisabled:p,runButtonWorkflowName:null==n?void 0:n.workflowId}}function eT(){var e=ef(),t=ew().isRunning;return(0,l.useCallback)(function(n){var r;t||null==e||null==(r=e.run)||r.call(e,null!=n?n:_.RunReason.RUN_BUTTON_CLICKED)},[t,e])}function ej(){var e=ef(),t=ew(),n=t.isRunning,r=t.isWorkflowsRunning;return(0,l.useCallback)(function(){if(n&&r){var t;null==e||null==(t=e.stop)||t.call(e,{graceful:!0})}},[n,r,e])}function eD(){var e=eT(),t=ej(),n=ew().isRunning;return(0,l.useCallback)(function(r){n?t():e(r)},[n,e,t])}function ek(){var e=eT(),t=ej(),n=ew().isRunning,i=(0,x.default)(n),a=(0,r._)((0,l.useState)(!1),2),o=a[0],s=a[1];return(0,l.useEffect)(function(){o&&(i.current||(e(),s(!1)))},[o,i,e]),(0,l.useCallback)(function(){o||(i.current?(s(!0),t()):e())},[o,i,e,t])}function eC(e,t){return function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(r>=5)return!1;var i=!0,o=!1,s=void 0;try{for(var l,u=n.tasks[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=function(){var n=l.value;if("shell.exec"===n.task&&n.waitForPort)return{v:!0};if("workflow.run"===n.task){var i=t.find(function(e){return e.name===n.args});if(i&&e(i,r+1))return{v:!0}}}();if("object"===(0,a._)(c))return c.v}}catch(e){o=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw s}}return!1}(e)}function eE(){var e=Z();return(0,l.useMemo)(function(){return e.some(function(e){return"agent"===e.author})},[e])}function eA(){var e=Z();return(0,l.useMemo)(function(){return e.some(function(e){var t;return(null==(t=e.metadata)?void 0:t.generated)!==!0})},[e])}e.s(["useAddTask",()=>F,"useAddWorkflow",()=>G,"useConfigError",()=>ey,"useDeleteTask",()=>B,"useDeleteWorkflow",()=>L,"useGetLatestWorkflowState",()=>es,"useGetWorkflows",()=>ea,"useHasAgentConfiguredWorkflows",()=>eE,"useHasNonGeneratedWorkflowSet",()=>eA,"useInitWorkflows",()=>ex,"useIsLoading",()=>R,"useObservableIsRunning",()=>el,"useOnLocalRun",()=>eS,"useOnReRun",()=>ek,"useOnStartRun",()=>eT,"useOnStopRun",()=>ej,"useOnToggleRun",()=>eD,"usePersistConfig",()=>eg,"useRunButton",()=>ee,"useRunInfo",()=>ew,"useSetRunButton",()=>O,"useTask",()=>er,"useTriggerLocalRun",()=>e_,"useUpdateWorkflow",()=>N,"useUpdateWorkflowTask",()=>V,"useUpdateWorkflowTasks",()=>U,"useWorkflow",()=>ei,"useWorkflowError",()=>Q,"useWorkflowIndices",()=>et,"useWorkflowNames",()=>en,"useWorkflows",()=>Z,"useWorkflowsConfig",()=>A,"useWorkflowsRunState",()=>q,"useWorkflowsRunner",()=>ef,"useWorkflowsTaskFlatMap",()=>K,"workflowOpensPort",()=>eC],729122)},343166,e=>{e.v({iconBase:"EnvVarTypeIcon-module__7n-TXa__iconBase",iconDevOnly:"EnvVarTypeIcon-module__7n-TXa__iconDevOnly",iconProdOnly:"EnvVarTypeIcon-module__7n-TXa__iconProdOnly",iconShared:"EnvVarTypeIcon-module__7n-TXa__iconShared",iconSplit:"EnvVarTypeIcon-module__7n-TXa__iconSplit"})},800766,e=>{e.v({gridContainer:"AddEnvVar-module__a6fKCG__gridContainer"})},998803,e=>{e.v({copyButtonWrapper:"EnvVarField-module__tfLO-a__copyButtonWrapper",fieldInput:"EnvVarField-module__tfLO-a__fieldInput",inputWrapper:"EnvVarField-module__tfLO-a__inputWrapper",isEditing:"EnvVarField-module__tfLO-a__isEditing",isKey:"EnvVarField-module__tfLO-a__isKey"})},717574,e=>{e.v({wrapper:"SecretItemMenu-module__NqaiNa__wrapper"})},802743,e=>{e.v({devValueWrapperEditing:"EnvVarItem-module__qoP15G__devValueWrapperEditing",gridContainer:"EnvVarItem-module__qoP15G__gridContainer",gridRow:"EnvVarItem-module__qoP15G__gridRow",valueColumnEditing:"EnvVarItem-module__qoP15G__valueColumnEditing"})},365870,e=>{e.v({loadingContainer:"EnvVarsEditor-module__aQqAba__loadingContainer"})},305669,630937,14257,e=>{"use strict";var t=e.i(530658),n=e.i(276385),r=e.i(389959),i=e.i(480028),a=e.i(446530),o=e.i(613355),s=e.i(140487),l=e.i(127227),u=e.i(136540),c=e.i(51054),d=e.i(396776),p=e.i(929872),f=e.i(960178),m=e.i(751273),g=e.i(625484),h=e.i(841691),v=e.i(90102),y=e.i(363201),x=e.i(292642),b=(0,a.cssRecord)({root:[{maxHeight:"70vh"}],header:[o.rcss.gap(4),o.rcss.align.start,{"& > *:first-child":[o.rcss.flex.growAndShrink(1),{alignSelf:"end"}]}],list:[o.rcss.borderRadius(),o.rcss.overflowY("auto")],item:[o.rcss.display.grid,o.rcss.align.center,o.rcss.justify.spaceBetween,o.rcss.px(8),o.rcss.py(12),o.rcss.border({direction:"bottom",color:i.tokens.outlineDimmer,width:1}),{gridTemplateColumns:"1fr 1fr","&:last-child":{borderBottom:"none"},"> *:last-child":{justifyContent:"end"}}],itemName:[o.rcss.flex.row,o.rcss.gap(8),o.rcss.align.center,o.rcss.overflow("hidden"),{"*":{overflow:"hidden",textOverflow:"ellipsis"}}],itemValue:[o.rcss.overflow("hidden"),o.rcss.flex.row,o.rcss.gap(4),o.rcss.align.center,{'&[data-sensitive="true"]':{fontFamily:"text-security-disc"},span:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}]}),S=function(e){var a=e.name,o=e.value,s=e.checked,c=e.onCheck,d=e.disabled,p=e.disabledReason,f=e.linked,S=(0,t._)((0,r.useState)(!0),2),_=S[0],w=S[1];return(0,n.jsxs)(g.View,{css:b.item,children:[(0,n.jsxs)("div",{css:b.itemName,children:[f?(0,n.jsx)(m.Tooltip,{tooltip:"Linked to Account Secrets",children:(0,n.jsx)(x.default,{color:i.tokens.accentPrimaryStronger})}):(0,n.jsx)(l.Checkbox,{checked:s,onChange:c,id:"secret-".concat(a),name:"Select secret",disabled:d}),(0,n.jsx)("label",{htmlFor:"secret-".concat(a),children:a}),d&&!f&&p?(0,n.jsx)(m.Tooltip,{tooltip:p,children:(0,n.jsx)(y.default,{color:i.tokens.foregroundDimmer})}):null]}),(0,n.jsxs)(g.View,{css:b.itemValue,"data-sensitive":_,children:[(0,n.jsx)("span",{children:_?"****************":o}),(0,n.jsx)(u.IconButton,{alt:_?"Hide secret":"Show secret",onClick:function(){return w(!_)},children:_?(0,n.jsx)(v.default,{}):(0,n.jsx)(h.default,{})})]})]})};function _(e){var i=e.secrets,a=e.onSelectSecrets,l=e.actionText,u=e.helpText,m=e.existingKeys,h=e.linkedSecrets,v=void 0===h?[]:h,x=(0,t._)((0,r.useState)(new Set),2),_=x[0],w=x[1],T=(0,t._)((0,r.useState)(""),2),j=T[0],D=T[1],k=v.length>=10,C=v.length+_.size>=10,E=(0,r.useCallback)(function(){return i.filter(function(e){return _.has(e.name)})},[i,_]),A=new Set(v.map(function(e){return e.secret.id})),I=j.trim()?i.filter(function(e){return e.name.toLowerCase().includes(j.toLowerCase())}):i;return(0,n.jsxs)(g.View,{css:b.root,p:8,gap:8,children:[k?(0,n.jsx)(d.StatusBanner,{colorway:"warning",icon:(0,n.jsx)(y.default,{}),text:"You've reached the limit of ".concat(10," linked secrets. Please unlink some secrets before adding more.")}):C?(0,n.jsx)(d.StatusBanner,{colorway:"warning",icon:(0,n.jsx)(y.default,{}),text:"Selecting another secret would exceed the limit of ".concat(10," linked secrets.")}):null,(0,n.jsx)(g.View,{css:b.header,gap:8,row:!0,justify:"space-between",children:(0,n.jsx)(f.Text,{variant:"subheadDefault",children:"Account secrets"})}),(0,n.jsx)(f.Text,{color:"dimmer",children:u}),(0,n.jsx)(g.View,{shrink:0,children:(0,n.jsx)(c.SearchBar,{placeholder:"Search secrets...",value:j,onChange:function(e){return D(e.target.value)},onClear:function(){return D("")}})}),(0,n.jsx)(p.Surface,{elevated:!0,shrink:!0,css:b.list,children:0===I.length?(0,n.jsx)(g.View,{p:16,css:o.rcss.textAlign.center,children:(0,n.jsx)(f.Text,{color:"dimmer",children:j.trim()?"No secrets match your search":"No account secrets available"})}):I.map(function(e){return(0,n.jsx)(S,{checked:_.has(e.name),onCheck:function(t){t&&v.length+_.size>=10||w(function(n){var r=new Set(n);return t?r.add(e.name):r.delete(e.name),r})},value:e.value||"",name:e.name,linked:A.has(e.id),disabled:m.has(e.name)||k||!_.has(e.name)&&C,disabledReason:m.has(e.name)?"A secret with this name already exists in this Repl":k?"Secret limit reached. Please unlink some secrets before adding more.":C&&!_.has(e.name)?"Cannot select more secrets. This would exceed the limit of ".concat(10):void 0},e.name)})}),(0,n.jsx)(s.Button,{colorway:"primary",text:l,disabled:0===_.size,onClick:function(){return a(E())},size:"small"})]})}e.s(["default",()=>_],305669);var w=e.i(297083),T=e.i(817556),j=e.i(878420),D=e.i(64386),k=e.i(921737),C=e.i(987154),E=e.i(504908),A=e.i(343166),I={split:{tooltip:"This configuration has separate values for your published app and when testing on Replit",icon:E.default,styleClass:A.default.iconSplit},shared:{tooltip:"This configuration is shared between your published app and when testing on Replit",icon:x.default,styleClass:A.default.iconShared},prodOnly:{tooltip:"This configuration only exists in your published app",icon:C.default,styleClass:A.default.iconProdOnly},devOnly:{tooltip:"This configuration only exists when testing on Replit",icon:k.default,styleClass:A.default.iconDevOnly}};function R(e){var t=I[e.envVarType];if(!t)return null;var r=t.icon;return(0,n.jsx)(m.Tooltip,{tooltip:t.tooltip,maxWidth:180,children:(0,n.jsx)(p.Surface,{elevated:!0,align:"center",justify:"center",br:4,clsx:[A.default.iconBase,t.styleClass],children:(0,n.jsx)(r,{})})})}var P=e.i(939562),M=e.i(607278),O=e.i(818503),N=e.i(795581),L=e.i(800766),B={shared:"shared",production:"prodOnly",development:"devOnly"};function V(e){var i=e.onClose,a=e.onAdd,o=e.existingKeysMap,l=e.environment,u=(0,t._)((0,r.useState)({key:"",value:"",environment:l}),2),c=u[0],d=u[1],p=(0,t._)((0,r.useState)(!1),2),f=p[0],m=p[1],h=(0,r.useMemo)(function(){var e=c.key.trim();if(!e)return"Key is required";var t=o.get(e);if(t){if(t.has(c.environment))return"This variable already exists in this environment. Edit it instead.";if("shared"===c.environment){if(t.has("production")||t.has("development"))return"This key exists in production or development. Cannot add to shared as it would conflict."}else if(t.has("shared"))return"This key exists in shared. Cannot add to production/development as it would conflict."}},[o,c.key,c.environment]),v=c.key.trim().length>0&&!h,y=function(){m(!0),v&&(a({key:c.key.trim(),value:c.value,environment:c.environment}),i())};return(0,n.jsxs)(g.View,{py:8,gap:8,onKeyDown:function(e){"Enter"===e.key&&y()},children:[(0,n.jsxs)(g.View,{clsx:L.default.gridContainer,align:"end",children:[(0,n.jsx)(R,{envVarType:B[l]}),(0,n.jsx)(g.View,{gap:2,children:(0,n.jsxs)(N.TextField,{validate:function(){return h},validationBehavior:"aria",isRequired:!0,minLength:1,maxLength:128,name:"envVarKey",value:c.key,onChange:function(e){return d(function(t){return(0,D._)((0,j._)({},t),{key:e})})},isInvalid:f&&!!h,children:[(0,n.jsx)(O.Label,{color:"dimmer",multiline:!1,children:"Key"}),(0,n.jsx)(M.Input,{autoComplete:"off",autoFocus:!0}),f?(0,n.jsx)(P.FieldError,{children:h}):null]})}),(0,n.jsx)(g.View,{gap:2,children:(0,n.jsxs)(N.TextField,{isRequired:!0,minLength:1,name:"envVarValue",value:c.value,onChange:function(e){return d(function(t){return(0,D._)((0,j._)({},t),{value:e})})},children:[(0,n.jsx)(O.Label,{color:"dimmer",multiline:!1,children:"Value"}),(0,n.jsx)(M.Input,{autoComplete:"off"})]})})]}),(0,n.jsxs)(g.View,{row:!0,gap:8,justify:"end",children:[(0,n.jsx)(s.Button,{size:"small",text:"Cancel",onClick:function(){return i()}}),(0,n.jsx)(s.Button,{size:"small",text:"Add configuration",colorway:"primary",disabled:!v,onClick:y})]})]})}var U=e.i(721281),F=e.i(88619),H=e.i(998803);function G(e){var t,r=e.value,i=e.isEditing,a=e.onChange,o=e.copyTooltipText,s=e.isKey,l=e.placeholder,u=i&&a;return(0,n.jsxs)(g.View,{clsx:H.default.inputWrapper,children:[!u&&(0,n.jsx)(g.View,{clsx:H.default.copyButtonWrapper,children:(0,n.jsx)(F.CopyIconButton,{tooltipText:o,textToCopy:r})}),(0,n.jsx)(M.Input,{value:r,onChange:function(e){return a(e.target.value)},clsx:[H.default.fieldInput,(t={},(0,U._)(t,H.default.isEditing,u),(0,U._)(t,H.default.isKey,void 0!==s&&s),t)],disabled:!i,placeholder:l})]})}var z=e.i(42458),q={both:{envLabel:"published app and workspace testing",buttonText:"Remove both",environments:["production","development"]},production:{envLabel:"published app",buttonText:"Remove published app value",environments:["production"]},development:{envLabel:"workspace testing",buttonText:"Remove workspace testing value",environments:["development"]}};function W(e){var t,r,i,a,o,l,u=e.conflict,c=e.onDeleteEnvVar,p=e.contextType,m=q[r=(t=u.conflictingEnvs).includes("production"),i=t.includes("development"),r&&i?"both":r?"production":"development"],g=(a=u.key,o=m.envLabel,l=m.environments.length>1,"singleEnv"===p?"This ".concat(o," value for ").concat(a," is overriding the shared value."):l?"".concat(a," has ").concat(o," values that override the shared value."):"".concat(a," has a ").concat(o," value that overrides the shared value."));return(0,n.jsx)(d.StatusBanner,{colorway:"warning",icon:(0,n.jsx)(z.default,{}),text:(0,n.jsx)(f.Text,{variant:"small",children:g}),action:(0,n.jsx)(s.Button,{size:"small",text:m.buttonText,onClick:function(){m.environments.forEach(function(e){c(u.key,e)})}})})}var K=e.i(569910),$=e.i(119274),Y=e.i(283110),X=e.i(283023),Q=e.i(196353),J=e.i(952030),Z=e.i(703505),ee=e.i(717574);function et(e){var t=e.onEdit,r=e.onDelete,i=function(e){switch(e.type){case"disabled":case"deploymentOnly":return null;case"synced":return{label:"Unsync from workspace value",icon:(0,n.jsx)(E.default,{}),onClick:e.optOut};case"unsynced":return{label:"Sync to workspace value",icon:(0,n.jsx)(x.default,{}),onClick:e.sync};case"shared":return{label:"Add testing value",icon:(0,n.jsx)(J.default,{}),onClick:e.addTestingOverride};case"split":return{label:"Remove testing value",icon:(0,n.jsx)(Y.default,{}),onClick:e.removeOverride};case"prodOnly":case"devOnly":return{label:"Convert to shared configuration",icon:(0,n.jsx)(x.default,{}),onClick:e.convertToShared};default:(0,K.default)(e)}}(e.environmentControlState);return(0,n.jsx)(p.Surface,{elevated:!0,clsx:ee.default.wrapper,children:(0,n.jsxs)($.PopupMenu,{placement:"bottom right",trigger:(0,n.jsx)(u.IconButton,{size:32,tooltipBehavior:"hidden",alt:"Options",children:(0,n.jsx)(Q.default,{})}),children:[(0,n.jsx)($.MenuItem,{label:"Edit",icon:(0,n.jsx)(X.default,{}),onAction:t}),i?(0,n.jsx)($.MenuItem,{label:i.label,icon:i.icon,onAction:i.onClick}):null,(0,n.jsx)($.MenuItem,{label:"Delete",icon:(0,n.jsx)(Z.default,{}),isDestructive:!0,onAction:r})]})})}e.s(["SecretItemMenu",()=>et],630937);var en=e.i(802743);function er(e){var a=e.envKey,o=e.onUpdate,l=e.onDeleteEnvVar,u=(0,t._)((0,r.useState)(!1),2),c=u[0],d=u[1],p=(0,t._)((0,r.useState)(!1),2),h=p[0],v=p[1],x=(0,t._)((0,r.useState)(a),2),b=x[0],S=x[1],_=(0,t._)((0,r.useState)(function(){switch(e.type){case"shared":case"devOnly":case"prodOnly":return e.value;case"split":return e.prodValue}}),2),w=_[0],T=_[1],j=(0,t._)((0,r.useState)(function(){return"split"===e.type?e.devValue:""}),2),D=j[0],k=j[1],C=function(){if(!c)switch(e.type){case"shared":case"devOnly":case"prodOnly":return e.value;case"split":return e.prodValue}return w}(),E="split"===e.type||h;return(0,n.jsxs)(g.View,{gap:4,children:[!c&&e.conflict?(0,n.jsx)(W,{conflict:e.conflict,onDeleteEnvVar:l,contextType:"shared"===e.type||"split"===e.type?"unified":"singleEnv"}):null,(0,n.jsxs)(g.View,{clsx:en.default.gridContainer,gap:4,children:[(0,n.jsxs)(g.View,{clsx:en.default.gridRow,children:[(0,n.jsx)(R,{envVarType:e.type}),(0,n.jsx)(G,{value:c?b:a,isEditing:c&&!h,onChange:S,copyTooltipText:"Copy key",isKey:!0,placeholder:"Key"}),(0,n.jsx)(g.View,{clsx:[c?en.default.valueColumnEditing:""],children:(0,n.jsx)(G,{value:C,isEditing:c,onChange:T,copyTooltipText:"Copy value",placeholder:"Value"})}),!c&&(0,n.jsx)(et,{onEdit:function(){switch(S(a),e.type){case"shared":case"devOnly":case"prodOnly":T(e.value);break;case"split":T(e.prodValue),k(e.devValue)}d(!0)},onDelete:function(){switch(e.type){case"shared":l(a,"shared");break;case"split":l(a,"development"),l(a,"production");break;case"devOnly":l(a,"development");break;case"prodOnly":l(a,"production")}},environmentControlState:function(){switch(e.type){case"split":return{type:"split",removeOverride:function(){return e.onRemoveOverride(a,e.prodValue)}};case"shared":return{type:"shared",addTestingOverride:function(){v(!0),T(e.value),k(e.value),d(!0)}};case"prodOnly":return{type:"prodOnly",convertToShared:function(){return e.onConvertToShared(a,e.value)}};case"devOnly":return{type:"devOnly",convertToShared:function(){return e.onConvertToShared(a,e.value)}}}}()})]}),E?(0,n.jsxs)(g.View,{clsx:en.default.gridRow,children:[(0,n.jsx)(g.View,{}),(0,n.jsxs)(g.View,{row:!0,gap:6,pr:4,align:"center",justify:"end",children:[(0,n.jsx)(f.Text,{color:"dimmer",variant:"small",children:"Testing value"}),(0,n.jsx)(m.Tooltip,{tooltip:"The value used when testing your app on Replit",maxWidth:180,children:(0,n.jsx)(y.default,{color:i.tokens.foregroundDimmest})})]}),(0,n.jsx)(g.View,{clsx:[c?en.default.devValueWrapperEditing:""],children:(0,n.jsx)(G,{placeholder:"Testing value",value:c||h||"split"!==e.type?D:e.devValue,isEditing:c||h,onChange:k,copyTooltipText:"Copy testing value"})})]}):null]}),c?(0,n.jsxs)(g.View,{row:!0,gap:8,justify:"end",children:[(0,n.jsx)(s.Button,{size:"small",text:"Cancel",onClick:function(){switch(S(a),e.type){case"shared":case"devOnly":case"prodOnly":T(e.value);break;case"split":T(e.prodValue),k(e.devValue)}v(!1),d(!1)}}),(0,n.jsx)(s.Button,{size:"small",colorway:"primary",text:"Save",onClick:function(){if(h&&"shared"===e.type){e.onCreateOverride(a,D,w),v(!1),d(!1);return}if("shared"===e.type){o([{oldKey:a,envVar:{key:b,value:w,environment:"shared"}}]),d(!1);return}if("split"===e.type){o([{oldKey:a,envVar:{key:b,value:w,environment:"production"}},{oldKey:a,envVar:{key:b,value:D,environment:"development"}}]),d(!1);return}if("prodOnly"===e.type){o([{oldKey:a,envVar:{key:b,value:w,environment:"production"}}]),d(!1);return}if("devOnly"===e.type){o([{oldKey:a,envVar:{key:b,value:w,environment:"development"}}]),d(!1);return}}})]}):null]})}var ei=e.i(988676);function ea(e){var i=e.groupedEnvVars,a=e.onUpdateEnvVar,o=e.onDeleteEnvVar,l=e.onAddEnvVar,u=e.onSplitDevAndProd,c=e.onReplaceWithShared,d=e.showAddEnvVar,p=e.onCloseAddEnvVar,m=e.onShowAdd,h=e.showAddProdOnly,v=e.setShowAddProdOnly,y=e.showAddDevOnly,x=e.setShowAddDevOnly,b=(0,t._)((0,r.useState)(!1),2),S=b[0],_=b[1],j=(0,t._)((0,r.useState)(!1),2),D=j[0],k=j[1],C=null!=h?h:S,E=null!=v?v:_,A=null!=y?y:D,I=null!=x?x:k,R=i.unified,P=i.prodOnly,M=i.devOnly,O=i.conflicts,N=(0,r.useMemo)(function(){var e=new Map;return R.forEach(function(t){var n,r,i;e.has(t.key)||e.set(t.key,new Set),"shared"===t.type?null==(n=e.get(t.key))||n.add("shared"):(null==(r=e.get(t.key))||r.add("development"),null==(i=e.get(t.key))||i.add("production"))}),P.forEach(function(t){var n;e.has(t.key)||e.set(t.key,new Set),null==(n=e.get(t.key))||n.add("production")}),M.forEach(function(t){var n;e.has(t.key)||e.set(t.key,new Set),null==(n=e.get(t.key))||n.add("development")}),e},[R,P,M]),L=function(e,t){return(0,w._)(function(){return(0,T._)(this,function(n){return a(e,"production",{key:e,value:t,environment:"shared"}),[2]})})()},B=function(e,t){return(0,w._)(function(){return(0,T._)(this,function(n){return a(e,"development",{key:e,value:t,environment:"shared"}),[2]})})()};return(0,n.jsx)(g.View,{py:8,gap:8,children:(0,n.jsxs)(g.View,{gap:8,children:[(0,n.jsxs)(g.View,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,n.jsx)(g.View,{gap:4,grow:!0,shrink:!0,children:(0,n.jsx)(f.Text,{variant:"small",children:"Configurations are similar to secrets, but should only be used for non-sensitive information. They're useful for having a variable that's different between your published app and when testing on Replit."})}),m?(0,n.jsx)(s.Button,{iconLeft:(0,n.jsx)(J.default,{}),text:"New configuration",colorway:"primary",size:"small",onClick:m}):null]}),d?(0,n.jsx)(V,{onClose:p,onAdd:l,existingKeysMap:N,environment:"shared"}):null,R.length>0?(0,n.jsx)(g.View,{gap:12,children:R.map(function(e){var t=O.find(function(t){return t.key===e.key});return"shared"===e.type&&u?(0,n.jsx)(er,{type:"shared",envKey:e.key,value:e.value,conflict:t,onUpdate:function(e){e.forEach(function(e){var t=e.oldKey,n=e.envVar;a(t,n.environment,n)})},onDeleteEnvVar:o,onCreateOverride:u},e.key):"split"===e.type&&c?(0,n.jsx)(er,{type:"split",envKey:e.key,devValue:e.devValue,prodValue:e.prodValue,conflict:t,onUpdate:function(e){e.forEach(function(e){var t=e.oldKey,n=e.envVar;a(t,n.environment,n)})},onDeleteEnvVar:o,onRemoveOverride:c},e.key):null})}):null,P.length>0||C?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ei.DividerH,{}),(0,n.jsxs)(g.View,{gap:8,children:[C?(0,n.jsx)(V,{onClose:function(){return E(!1)},onAdd:l,existingKeysMap:N,environment:"production"}):null,(0,n.jsx)(g.View,{gap:12,children:P.length?P.map(function(e){var t=O.find(function(t){return t.key===e.key});return(0,n.jsx)(er,{type:"prodOnly",envKey:e.key,value:e.value,conflict:t,onUpdate:function(e){e.forEach(function(e){a(e.oldKey,"production",e.envVar)})},onDeleteEnvVar:o,onConvertToShared:L},e.key)}):(0,n.jsx)(g.View,{px:6,children:(0,n.jsx)(f.Text,{color:"dimmer",variant:"small",children:"No published app only configurations"})})})]})]}):null,M.length>0||A?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ei.DividerH,{}),(0,n.jsxs)(g.View,{gap:8,children:[A?(0,n.jsx)(V,{onClose:function(){return I(!1)},onAdd:l,existingKeysMap:N,environment:"development"}):null,(0,n.jsx)(g.View,{gap:8,children:M.length?M.map(function(e){var t=O.find(function(t){return t.key===e.key});return(0,n.jsx)(er,{type:"devOnly",envKey:e.key,value:e.value,conflict:t,onUpdate:function(e){e.forEach(function(e){a(e.oldKey,"development",e.envVar)})},onDeleteEnvVar:o,onConvertToShared:B},e.key)}):(0,n.jsx)(g.View,{px:6,children:(0,n.jsx)(f.Text,{color:"dimmer",variant:"small",children:"No testing only configurations"})})})]})]}):null]})})}var eo=e.i(906368),es=e.i(222342),el=e.i(858248),eu=e.i(709485),ec=e.i(927158),ed=e.i(529810),ep=e.i(940745),ef=e.i(365870);function em(e){var i,a,o,s,l,u,c,d,p,m,h,v,y,x,b=e.editAuthorization,S=e.error,_=e.showAddEnvVar,j=e.setShowAddEnvVar,D=e.showAddProdOnly,k=e.setShowAddProdOnly,C=e.showAddDevOnly,E=e.setShowAddDevOnly,A=(i=(0,es.default)().showError,a=(0,ed.default)().dotReplit,s=(o=(0,t._)((0,r.useState)({unified:[],prodOnly:[],devOnly:[],conflicts:[]}),2))[0],l=o[1],c=(u=(0,t._)((0,r.useState)(!0),2))[0],d=u[1],p=(0,ec.usePid2Callback)(function(e){return function(){return(0,w._)(function(){var t,n;return(0,T._)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e.environment.getEnvVarsGroupedByKey.rpc({})];case 1:return(t=r.sent()).ok&&l({unified:t.payload.unified,prodOnly:t.payload.prodOnly,devOnly:t.payload.devOnly,conflicts:t.payload.conflicts||[]}),d(!1),[3,3];case 2:return n=r.sent(),eo.captureException(n),i("Failed to fetch environment variables"),d(!1),[3,3];case 3:return[2]}})})()}},[i]),m=(0,ec.usePid2Callback)(function(e){return function(t){return(0,w._)(function(){var n;return(0,T._)(this,function(r){switch(r.label){case 0:return[4,e.environment.setEnvVars.rpc(t)];case 1:if(!(n=r.sent()).ok)return i("ENV_VAR_MUTATION_CONFLICT_ERROR"===n.payload.code?"Environment variable conflict detected":"DOT_REPLIT_EDITING_ERROR"===n.payload.code?"Failed to update .replit file":n.payload.message||"Failed to update environment variables"),[2];return(0,el.track)(eu.events.ENV_EDITOR_USED,{action:"updated",multiline:!1}),[4,null==p?void 0:p()];case 2:return r.sent(),[2]}})})()}},[i,p]),h=(0,ec.usePid2Callback)(function(e){return function(t,n){return(0,w._)(function(){var r;return(0,T._)(this,function(a){switch(a.label){case 0:return[4,e.environment.deleteEnvVars.rpc([{key:t,env:n}])];case 1:if(!(r=a.sent()).ok)return i("DOT_REPLIT_EDITING_ERROR"===r.payload.code?"Failed to update .replit file":r.payload.message||"Failed to delete environment variable"),[2];return[4,null==p?void 0:p()];case 2:return a.sent(),[2]}})})()}},[i,p]),v=(0,ec.usePid2Callback)(function(e){return function(t,n,r){return(0,w._)(function(){var a;return(0,T._)(this,function(o){switch(o.label){case 0:return[4,e.environment.splitDevAndProd.rpc({key:t,devValue:n,prodValue:r})];case 1:if(!(a=o.sent()).ok)return i("DOT_REPLIT_EDITING_ERROR"===a.payload.code?"Failed to update .replit file":a.payload.message||"Failed to split environment variable"),[2];return[4,null==p?void 0:p()];case 2:return o.sent(),[2]}})})()}},[i,p]),y=(0,ec.usePid2Callback)(function(e){return function(t,n){return(0,w._)(function(){var r;return(0,T._)(this,function(a){switch(a.label){case 0:return[4,e.environment.replaceWithShared.rpc({key:t,value:n})];case 1:if(!(r=a.sent()).ok)return i("DOT_REPLIT_EDITING_ERROR"===r.payload.code?"Failed to update .replit file":r.payload.message||"Failed to combine environment variable"),[2];return[4,null==p?void 0:p()];case 2:return a.sent(),[2]}})})()}},[i,p]),(0,r.useEffect)(function(){if(p)return a.watch(function(){p()})},[a,p]),{groupedEnvVars:s,isLoading:c,addEnvVar:(0,r.useCallback)(function(e){return(0,w._)(function(){return(0,T._)(this,function(t){switch(t.label){case 0:return(0,el.track)(eu.events.ENV_EDITOR_USED,{action:"created",multiline:!1}),[4,null==m?void 0:m([{key:e.key,value:e.value,env:e.environment}])];case 1:return t.sent(),[2]}})})()},[m]),updateEnvVar:(0,r.useCallback)(function(e,t,n){return(0,w._)(function(){return(0,T._)(this,function(r){switch(r.label){case 0:if((0,el.track)(eu.events.ENV_EDITOR_USED,{action:"updated",multiline:!1}),t===n.environment)return[3,2];return[4,null==h?void 0:h(e,t)];case 1:r.sent(),r.label=2;case 2:if(e===n.key)return[3,4];return[4,null==h?void 0:h(e,t)];case 3:r.sent(),r.label=4;case 4:return[4,null==m?void 0:m([{key:n.key,value:n.value,env:n.environment}])];case 5:return r.sent(),[2]}})})()},[m,h]),deleteEnvVar:(0,r.useCallback)(function(e,t){return(0,w._)(function(){return(0,T._)(this,function(n){switch(n.label){case 0:return(0,el.track)(eu.events.ENV_EDITOR_USED,{action:"deleted"}),[4,null==h?void 0:h(e,t)];case 1:return n.sent(),[2]}})})()},[h]),splitDevAndProd:(0,r.useCallback)(function(e,t,n){return(0,w._)(function(){return(0,T._)(this,function(r){switch(r.label){case 0:return(0,el.track)(eu.events.ENV_EDITOR_USED,{action:"updated",multiline:!1}),[4,null==v?void 0:v(e,t,n)];case 1:return r.sent(),[2]}})})()},[v]),replaceWithShared:(0,r.useCallback)(function(e,t){return(0,w._)(function(){return(0,T._)(this,function(n){switch(n.label){case 0:return(0,el.track)(eu.events.ENV_EDITOR_USED,{action:"updated",multiline:!1}),[4,null==y?void 0:y(e,t)];case 1:return n.sent(),[2]}})})()},[y])}),I=A.groupedEnvVars,R=A.isLoading,P=A.addEnvVar,M=A.updateEnvVar,O=A.deleteEnvVar,N=A.splitDevAndProd,L=A.replaceWithShared;return R?(0,n.jsx)(g.View,{className:ef.default.loadingContainer,align:"center",justify:"center",children:(0,n.jsx)(ep.default,{size:24})}):!b||S?(0,n.jsx)(g.View,{className:ef.default.emptyState,p:16,children:(0,n.jsx)(f.Text,{color:"dimmer",children:null!=(x=null==S?void 0:S.message)?x:"Unable to determine environment variable permissions, please refresh your browser."})}):(0,n.jsxs)(g.View,{className:ef.default.body,grow:!0,shrink:!0,children:[b.isAuthorized?null:(0,n.jsx)(g.View,{p:8,children:(0,n.jsx)(f.Text,{children:b.message})}),(0,n.jsx)(ea,{groupedEnvVars:I,onUpdateEnvVar:M,onDeleteEnvVar:O,onAddEnvVar:P,onSplitDevAndProd:N,onReplaceWithShared:L,showAddEnvVar:_,onCloseAddEnvVar:function(){j(!1)},showAddProdOnly:D,setShowAddProdOnly:k,showAddDevOnly:C,setShowAddDevOnly:E})]})}e.s(["default",()=>em],14257)},935835,e=>{"use strict";var t=e.i(167626),n=e.i(530658);function r(e,t){return e.split(t).length-1}var i={parse:function(e){var t=new Map,n=e.split(/\n|\r|\r\n/),i=!0,a=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;if(!function(e){var t=e.trim();return 0===t.length||t.startsWith("#")}(u)){var c=(u=function(e){if(!e.includes("#"))return e;var t=e.split("#"),n=!1,i=[],a=!0,o=!1,s=void 0;try{for(var l,u=t[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;(1===r(c,'"')||r(c,"'"))&&(n?(n=!1,i.push(c)):n=!0),(0===i.length||n)&&i.push(c)}}catch(e){o=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(o)throw s}}return i.join("#")}(u)).indexOf("="),d=u.indexOf(":");if(-1!==d||-1!==c){var p=c;-1!==d&&(d<c||-1===c)&&(p=d);var f=u.slice(0,p).replace(/^\s*(?:export\s+)?(.*?)\s*$/,"$1"),m=function(e,t){var n=e.trim();if(0===n.length)return n;var r=n.length-1,i='"'===n[0]&&'"'===n[r],a="'"===n[0]&&"'"===n[r];return(a||i)&&(n=n.slice(1,-1)),i&&(n=(n=n.replace(/\\./g,function(e){return"\\n"===e?"\n":"\\r"===e?"\r":e})).replace(/\\([^$])/g,"$1")),a||(n=n.replace(/(\\)?(\$)(\()?\{?([A-Z0-9_]+)?\}?/g,function(e){var n=e.match(/(\\)?(\$)(\()?\{?([A-Z0-9_]+)?\}?/);if(null===n)return e;if("\\"===n[1]||"("===n[2])return n[0].slice(1);var r=n[4];return""!==r?t.get(r)||"":e})),n}(u.slice(p+1),t);t.set(f,m)}}}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}return t},serialize:function(e){return((0,t._)(e,Map)?Array.from(e):Object.entries(e)).reduce(function(e,t){var r=(0,n._)(t,2),i=r[0],a=r[1].replace(/\\([^$])/g,"\\\\$1").replace(/\$/g,"\\\\$$").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r");return e+"".concat(i,'="').concat(a,'"\n')},"")}};e.s(["default",()=>i])},644230,e=>{e.v({addSecretTitleContainer:"index-module__87l8Pa__addSecretTitleContainer",addSecretValueLabel:"index-module__87l8Pa__addSecretValueLabel",body:"index-module__87l8Pa__body",envEditorBody:"index-module__87l8Pa__envEditorBody",loadingContainer:"index-module__87l8Pa__loadingContainer",secretAccessibilityText:"index-module__87l8Pa__secretAccessibilityText",secretItem:"index-module__87l8Pa__secretItem",secretSelect:"index-module__87l8Pa__secretSelect",tabExtraText:"index-module__87l8Pa__tabExtraText"})},316799,837605,32967,97845,e=>{"use strict";var t,n=e.i(530658),r=e.i(389959),i=e.i(368964),a=e.i(207237),o=e.i(297083),s=e.i(878420),l=e.i(64386),u=e.i(346715),c=e.i(817556),d=e.i(276385),p=e.i(678420),f=e.i(761201),m=e.i(993796),g=e.i(222342),h=e.i(858248),v=e.i(709485),y=e.i(529810),x=e.i(952521),b=e.i(269746),S=e.i(12291),_=e.i(952685);e.i(545082);var w=e.i(91442),T=e.i(729122),j=e.i(305669),D=e.i(354429),k=e.i(14257),C=e.i(906368),E=e.i(682532),A=e.i(179302),I=e.i(221250),R=e.i(542101),P=e.i(935835),M=e.i(262206),O=e.i(480028),N=e.i(613355),L=e.i(140487),B=e.i(739521),V=e.i(396776),U=e.i(929872),F=e.i(960178),H=e.i(625484),G=e.i(616278),z=e.i(383748),q=v.events.ENV_EDITOR_USED;(t={})[t.VALID=0]="VALID",t[t.ERROR_PARSE_JSON=1]="ERROR_PARSE_JSON",t[t.ERROR_PARSE_ENV=2]="ERROR_PARSE_ENV",t[t.ERROR_STRINGS=3]="ERROR_STRINGS",t[t.ERROR_SAVE=4]="ERROR_SAVE",t[t.ERROR_MISSING_KEYS=5]="ERROR_MISSING_KEYS";var W=(0,r.forwardRef)(function(e,t){var i=e.secrets,a=e.update,s=e.disabledMessage,l=(0,n._)((0,r.useState)(!1),2),u=l[0],p=l[1],f=(0,n._)((0,r.useState)(!1),2),m=f[0],g=f[1],v=(0,n._)((0,r.useState)(!1),2),y=v[0],x=v[1],b=(0,n._)((0,r.useState)(0),2),S=b[0],_=b[1],w=(0,n._)((0,r.useState)(0),2),T=w[0],j=w[1],D=0===S,k=(0,E.linter)(function(e){var t=e.state.doc.toString(),n=0===T?K(t):$(t);return _(n),(0,h.track)(q,{action:0===n?"rawEditorUpdatedSuccess":"rawEditorUpdatedError"}),[]}),W=(0,R.default)(),Y=W.ref,X=W.view,Q=function(){m||p(!1)},J=function(e){j(e),x(!1),p(!0),(0,h.track)(q,{action:"rawEditorOpened"})},Z=(0,r.useCallback)(function(){void 0!==s||m||J(0)},[s,m]),ee=(0,r.useCallback)(function(){void 0!==s||m||J(1)},[s,m]);(0,r.useImperativeHandle)(t,function(){return{openJSONEditor:Z,openEnvEditor:ee,isSaving:m,disabledMessage:s}},[m,s,Z,ee]);var et=function(){if(!X)return!1;var e=X.state.doc.toString(),t=0===T?K(e):$(e);return _(t),0===t},en=function(){return(0,o._)(function(){var e,t;return(0,c._)(this,function(r){switch(r.label){case 0:if(!X||!et())return[2];g(!0),r.label=1;case 1:return r.trys.push([1,3,,4]),e=X.state.doc.toString(),[4,a(0===T?new Map(Object.entries(JSON.parse(e)).map(function(e){var t=(0,n._)(e,2);return[t[0],t[1]]})):P.default.parse(e))];case 2:return r.sent(),g(!1),x(!0),setTimeout(function(){Q(),setTimeout(function(){x(!1)},500)},500),[3,4];case 3:return t=r.sent(),C.captureException(t),(0,h.track)(q,{action:"rawEditorUpdatedError"}),_(4),g(!1),[3,4];case 4:return[2]}})})()};return(0,r.useEffect)(function(){if(X){var e=0===T?JSON.stringify(Object.fromEntries(i.entries()),null,2):P.default.serialize(i);0===T&&"{}"===e&&(e="{\n  \n}"),X.dispatch({changes:{from:0,to:X.state.doc.length,insert:e}}),X.dispatch({selection:{anchor:X.state.doc.length-2*(0===T)}}),X.focus()}},[X,i,T]),(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(B.Modal,{isOpen:u,onRequestClose:function(){return Q()},children:(0,d.jsxs)(H.View,{gap:24,children:[(0,d.jsx)(F.Header,{level:1,variant:"headerDefault",children:"Raw Secrets Editor"}),(0,d.jsx)(F.Text,{children:0===T?"Secrets are specified in JSON. Values must be strings.":'Secrets are specified in .env format (KEY="value").'}),(0,d.jsx)(U.Surface,{css:[N.rcss.borderRadius(8),N.rcss.transition.snappy,N.rcss.p(4),{border:"1px solid ".concat(O.tokens.outlineDimmer),":hover":{borderColor:O.tokens.outlineStronger}}],elevated:!0,children:(0,d.jsx)(I.default,{ref:Y,readOnly:m||y,extensions:[k,A.keymap.of([{key:(0,M.defaultKeyCombo)({cmdOrCtrl:!0,key:"Enter"}),run:function(){return en(),!0},preventDefault:!0,stopPropagation:!0}])],language:0===T?"json":"properties",hideGutter:!0})}),(0,d.jsxs)(H.View,{row:!0,gap:4,justify:"end",children:[!D&&(0,d.jsx)(V.StatusBanner,{icon:(0,d.jsx)(z.default,{}),colorway:"negative",text:function(e){switch(e){case 1:return"Make sure the data is valid JSON.";case 2:return'Make sure the data is in valid .env format (KEY="value").';case 3:return"Make sure that all values are strings.";case 5:return"Make sure that all keys are non-empty strings.";case 4:return"There was an error saving the secrets.";default:return""}}(S)}),(0,d.jsxs)(H.View,{row:!0,gap:12,children:[(0,d.jsx)(L.Button,{onClick:Q,text:"Cancel"}),(0,d.jsx)(L.Button,{iconLeft:(0,d.jsx)(G.default,{}),stretch:!0,colorway:y?"positive":"primary",text:y?"Saved!":"Save",disabled:!D||m||y,onClick:function(){return en()}})]})]})]})})})});function K(e){try{var t=JSON.parse(e);for(var n in t){if("string"!=typeof n||"string"!=typeof t[n])return 3;if(!n.trim())return 5}return 0}catch(e){return 1}}function $(e){try{var t=e.replace(/#.*$/gm,"").split("\n"),r="",i=!0,a=!1,o=void 0;try{for(var s,l=t[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var u=s.value;if((r+=(r?"\n":"")+u).trim()){var c=(r.match(/'/g)||[]).length,d=(r.match(/"/g)||[]).length;if(c%2!=0||d%2!=0){if(u===t[t.length-1])return 2;continue}r=""}}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}var p=P.default.parse(e),f=!0,m=!1,g=void 0;try{for(var h,v=p[Symbol.iterator]();!(f=(h=v.next()).done);f=!0)if(!(0,n._)(h.value,1)[0].trim())return 5}catch(e){m=!0,g=e}finally{try{f||null==v.return||v.return()}finally{if(m)throw g}}return 0}catch(e){return 2}}var Y=e.i(877212),X=[{title:"OpenAI",description:"Integrate with GPT-4, DALL-E, Whisper, and more.",pattern:/^OPENAI_.*/,defaultLink:"https://replit.com/guides/gpt-4o-quickstart-guide#set-up-your-openai-api-key",presetSecrets:[{key:"OPENAI_API_KEY"},{key:"OPENAI_ORG_ID"}]},{title:"Gemini",description:"Leverage Google's latest AI models.",pattern:/^(GEMINI_.*|GOOGLE_API_KEY)/,defaultLink:"https://replit.com/guides/gemini-flash-quickstart-guide#set-up-a-google-api-key"},{title:"Groq",description:"Try a variety of AI models with Groq.",pattern:/^GROQ_.*/,defaultLink:"https://replit.com/guides/groq-chatbot-quickstart#set-up-your-groq-api-key"},{title:"Anthropic",description:"Explore Anthropic's latest Claude AI models.",pattern:/^ANTHROPIC_.*/,defaultLink:"https://replit.com/guides/image2text-ai-app-with-anthropic#add-anthropic-api-key-to-secrets"},{title:"Slack",description:"Use Slack to build interactive apps and bots.",pattern:/^SLACK_.*/,defaultLink:"https://replit.com/guides/slackbot-quickstart#add-secrets",presetSecrets:[{key:"SLACK_SIGNING_SECRET"},{key:"SLACK_APP_TOKEN"},{key:"SLACK_BOT_TOKEN"}]},{title:"HubSpot",description:"Use HubSpot's API to pull customer data.",pattern:/^HUBSPOT_.*/,defaultLink:"https://replit.com/guides/hubspot-deal-data-api-python-flask#getting-started"},{title:"Coinbase Developer Platform",description:"Use Coinbase Developer Platform to build on chain agents and apps.",pattern:/^(CDP_|COINBASE_).*/,defaultLink:"https://replit.com/guides/coinbase-developer-platform-agentkit-quickstart-guide"}],Q=e.i(446530),J=e.i(88619),Z=e.i(939562),ee=e.i(136540),et=e.i(607278),en=e.i(818503),er=e.i(119274),ei=e.i(795581),ea=e.i(751273),eo=e.i(283023),es=e.i(841691),el=e.i(90102),eu=e.i(292642),ec=e.i(196353),ed=e.i(793579),ep=e.i(703505),ef=e.i(42458),em=(0,Q.cssRecord)({valueInput:[N.rcss.flex.grow(0),{'&[data-sensitive="true"]':{fontFamily:"text-security-disc"}}],linkedSecret:[{'&[data-unlinking="true"]':{opacity:.5,pointerEvents:"none"}}]}),eg=(0,Q.cssRecord)({root:[N.rcss.p(4),N.rcss.rowWithGap(4),N.rcss.borderRadius(4),N.rcss.width("44%"),N.rcss.display.flex,N.rcss.overflowX("hidden"),N.rcss.backgroundColor.backgroundHigher],text:[N.rcss.flex.growAndShrink(1)]});function eh(e){var t=e.value;return(0,d.jsxs)(U.Surface,{elevated:!0,css:eg.root,children:[(0,d.jsx)(J.CopyIconButton,{tooltipText:"Copy secret key",textToCopy:t}),(0,d.jsx)(ea.Tooltip,{tooltip:(0,d.jsx)(F.Text,{children:t}),children:function(e,n){return(0,d.jsx)(F.Text,(0,l._)((0,s._)({ref:n},e),{multiline:!1,css:eg.text,children:t}))}})]})}var ev=(0,Q.cssRecord)({root:[N.rcss.p(4),N.rcss.rowWithGap(4),N.rcss.borderRadius(4),N.rcss.flex.growAndShrink(1),N.rcss.align.center,N.rcss.backgroundColor.backgroundHigher],text:[N.rcss.flex.growAndShrink(1),N.rcss.truncate,{fontFamily:O.tokens.fontFamilyCode}],input:[{border:"none",background:"inherit",fontFamily:O.tokens.fontFamilyCode,'&[data-sensitive="true"]':{fontFamily:"text-security-disc"}}]});function ey(e){var t=e.value,i=e.placeholder,a=void 0===i?"Enter your secret value":i,o=e.onChange,s=e.canEditDisabledMessage,l=e.defaultVisible,u=(0,n._)((0,r.useState)(void 0!==l&&l),2),c=u[0],p=u[1],f=void 0===s;return(0,d.jsxs)(U.Surface,{elevated:!0,css:ev.root,children:[(0,d.jsx)(J.CopyIconButton,{tooltipText:f?"Copy secret value":s,textToCopy:f?t:""}),o&&f?(0,d.jsx)(et.Input,{value:t,onChange:function(e){return o(e.target.value)},placeholder:a,css:ev.input,"data-sensitive":t&&!c}):(0,d.jsx)(F.Text,{multiline:!1,css:ev.text,children:t?(0,d.jsx)(d.Fragment,{children:c?t:"â€¢".repeat(8)}):a}),(0,d.jsx)(ee.IconButton,{alt:"Toggle Secret",tooltipContents:s,tooltipBehavior:f?"hidden":void 0,onClick:function(){return p(!c)},disabled:!f,children:c?(0,d.jsx)(el.default,{}):(0,d.jsx)(es.default,{})})]})}var ex=(0,Q.cssRecord)({keySection:[N.rcss.width("44%")],titleLabel:[N.rcss.pt(2),N.rcss.pb(4),{label:[N.rcss.flex.row,N.rcss.gap(4),N.rcss.align.center]}]});function eb(e){var t=e.name,n=e.value,r=void 0===n?"":n,i=e.isEditing,a=e.isSensitive,o=e.canEdit,u=void 0===o||o,c=e.editDisabledMessage,p=e.onToggleSensitive,f=e.renderSuffix,m=e.renderKeyExtra;return(0,d.jsxs)(H.View,{row:!0,gap:8,align:"center",children:[(0,d.jsxs)(H.View,{css:eg.root,children:[(0,d.jsx)(J.CopyIconButton,{tooltipText:"Copy secret key",textToCopy:t}),(0,d.jsx)(ea.Tooltip,{tooltip:(0,d.jsx)(F.Text,{children:t}),children:function(e,n){return(0,d.jsx)(F.Text,(0,l._)((0,s._)({ref:n},e),{multiline:!1,css:eg.text,children:t}))}}),m?(0,d.jsx)(H.View,{justify:"center",children:null==m?void 0:m()}):null]}),(0,d.jsxs)(H.View,{css:ev.root,children:[(0,d.jsx)(J.CopyIconButton,{tooltipText:u?"Copy secret value":c,textToCopy:u?r:""}),i&&u?(0,d.jsx)(et.Input,{value:r,onChange:function(){},placeholder:"Enter your secret value",css:ev.input,"data-sensitive":r&&a}):(0,d.jsx)(F.Text,{multiline:!1,css:ev.text,children:r?(0,d.jsx)(d.Fragment,{children:a?"â€¢".repeat(8):r}):"Enter your secret value"}),(0,d.jsx)(ee.IconButton,{alt:"Toggle Secret",tooltipContents:c,tooltipBehavior:u?"hidden":void 0,onClick:p,disabled:!u,children:a?(0,d.jsx)(es.default,{}):(0,d.jsx)(el.default,{})})]}),null==f?void 0:f()]})}function eS(e){var t=e.secret,i=e.onUpdateSecret,a=e.onDeleteSecret,o=e.onSearchSecret,u=e.editAuthorizationErrorMessage,c=(0,n._)((0,r.useState)(""===t.value?{key:t.key,value:""}:null),2),p=c[0],f=c[1],m=(0,n._)((0,r.useState)(!1),2),g=m[0],h=m[1],v=(0,n._)((0,r.useState)(!0),2),y=v[0],x=v[1],b=(0,r.useMemo)(function(){var e,n,r,i,a,o;return n=null!=(e=null==p?void 0:p.key)?e:t.key,null!=(i=null==(o=null==(a=X.find(function(e){return e.pattern.test(n)}))||null==(r=a.presetSecrets)?void 0:r.find(function(e){return e.key===n}))?void 0:o.link)?i:null==a?void 0:a.defaultLink},[null==p?void 0:p.key,t.key]),S=void 0===u;return p?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(e_,{keyValue:p.key,onKeyChange:function(e){return f(function(t){return t?(0,l._)((0,s._)({},t),{key:e}):t})},value:p.value,onValueChange:function(e){return f(function(t){return t?(0,l._)((0,s._)({},t),{value:e}):t})},isSensitive:y,onToggleSensitive:function(){return x(!y)},renderValueExtra:function(){return b&&(0,d.jsx)(F.Text,{variant:"small",children:(0,d.jsx)("a",{href:b,target:"_blank",children:"Where do I find this?"})})},onDelete:function(){return h(!0)},onCancel:function(){return f(null)},onSave:function(){i(t.key,{key:p.key.trim(),value:p.value}),f(null)},saveButtonText:""===t.value?"Add Secret":"Update Secret"}),g&&(0,d.jsx)(eT,{keys:[t.key],isOpen:g,onClose:function(){return h(!1)},onConfirm:function(){return a(t.key)}})]}):(0,d.jsx)(eb,{name:t.key,value:t.value,isEditing:!1,isSensitive:y,canEdit:S,editDisabledMessage:u,onToggleSensitive:function(){return x(!y)},renderSuffix:function(){return(0,d.jsxs)(U.Surface,{elevated:!0,br:4,children:[(0,d.jsxs)(er.PopupMenu,{placement:"bottom right",trigger:(0,d.jsx)(ee.IconButton,{size:32,tooltipBehavior:"hidden",alt:"Options",children:(0,d.jsx)(ec.default,{})}),children:[S?(0,d.jsx)(er.MenuItem,{label:"Edit",icon:(0,d.jsx)(eo.default,{}),onAction:function(){return f({key:t.key,value:t.value})}}):null,(0,d.jsx)(er.MenuItem,{label:"Find Usages",icon:(0,d.jsx)(ed.default,{}),onAction:function(){return o(t.key)}}),S?(0,d.jsx)(er.MenuItem,{label:"Delete",icon:(0,d.jsx)(ep.default,{}),isDestructive:!0,onAction:function(){return h(!0)}}):null]}),g?(0,d.jsx)(eT,{keys:[t.key],isOpen:g,onClose:function(){return h(!1)},onConfirm:function(){return a(t.key)}}):null]})}})}function e_(e){var t=e.keyLabel,n=e.keyValue,i=e.onKeyChange,a=e.valueLabel,o=e.value,s=e.onValueChange,l=e.isSensitive,u=e.onToggleSensitive,c=e.isValueReadOnly,p=e.disableValueVisibilityToggle,f=e.renderValueExtra,m=e.onDelete,g=e.onCancel,h=e.onSave,v=e.saveButtonText,y=e.deleteButtonText,x=e.isSaving,b=e.keyError,S=(0,r.useMemo)(function(){return null!==n.match(D.POSIX_ENV_VAR_PATTERN)},[n]),_=b||(!S&&n?D.POSIX_ENV_VAR_ERROR:void 0);return(0,d.jsxs)(H.View,{gap:8,onKeyDown:function(e){"Enter"===e.key&&h()},children:[(0,d.jsxs)(H.View,{row:!0,gap:8,children:[(0,d.jsx)(H.View,{css:ex.keySection,gap:2,children:(0,d.jsxs)(ei.TextField,{validate:function(){return b||(!S&&n?D.POSIX_ENV_VAR_ERROR:void 0)},validationBehavior:"aria",isRequired:!0,minLength:1,maxLength:128,name:"secretKey",value:n,onChange:i,isInvalid:!!_,children:[(0,d.jsx)(en.Label,{color:"dimmer",multiline:!1,css:ex.titleLabel,children:void 0===t?"Key":t}),(0,d.jsx)(et.Input,{placeholder:"SECRET_KEY",autoComplete:"off",css:em.valueInput,autoFocus:!0}),(0,d.jsx)(Z.FieldError,{children:_})]})}),(0,d.jsxs)(H.View,{grow:!0,shrink:!0,gap:2,children:[(0,d.jsxs)(ei.TextField,{isRequired:!0,minLength:1,name:"secretValue",value:o,onChange:function(e){return null==s?void 0:s(e)},children:[(0,d.jsxs)(en.Label,{color:"dimmer",multiline:!1,css:ex.titleLabel,children:[void 0===a?"Value":a," ",(0,d.jsx)(ee.IconButton,{alt:"Toggle Visibility",tooltipBehavior:"hidden",onClick:u,disabled:p,size:12,children:l?(0,d.jsx)(es.default,{}):(0,d.jsx)(el.default,{})})]}),(0,d.jsx)(et.Input,{"data-sensitive":l,css:em.valueInput,readOnly:c,autoComplete:"off"})]}),null==f?void 0:f()]})]}),(0,d.jsxs)(H.View,{row:!0,gap:8,children:[m?(0,d.jsx)(L.Button,{size:"small",text:void 0===y?"Delete":y,colorway:"negative",onClick:m,disabled:!!_,loading:x}):null,(0,d.jsx)(H.View,{grow:!0}),(0,d.jsxs)(H.View,{row:!0,gap:8,children:[(0,d.jsx)(L.Button,{size:"small",text:"Cancel",onClick:g,loading:x}),(0,d.jsx)(L.Button,{size:"small",colorway:"primary",text:v,disabled:!n.length||!!_||!S,loading:x,onClick:h})]})]})]})}function ew(e){var t=e.link,i=e.onUpdateLink,a=e.onUnlink,s=e.existingKeys,l=(0,n._)((0,r.useState)(null),2),u=l[0],p=l[1],f=(0,n._)((0,r.useState)(!0),2),m=f[0],g=f[1],h=(0,n._)((0,r.useState)(!1),2),v=h[0],y=h[1],x=(0,n._)((0,r.useState)(!1),2),b=x[0],S=x[1],_=u&&s.has(u.alias)&&u.alias!==t.alias?"A secret with this name already exists":void 0;return u?(0,d.jsx)(e_,{keyLabel:"Name",keyValue:u.alias,onKeyChange:function(e){return p({alias:e})},value:t.secret.value,isSensitive:m,onToggleSensitive:function(){return g(!m)},isValueReadOnly:!0,onDelete:function(){return(0,o._)(function(){return(0,c._)(this,function(e){switch(e.label){case 0:S(!0),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,a(t.id)];case 2:return e.sent(),[3,4];case 3:return S(!1),[7];case 4:return[2]}})})()},onCancel:function(){return p(null)},onSave:function(){return(0,o._)(function(){return(0,c._)(this,function(e){switch(e.label){case 0:if(_)return[2];y(!0),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,i(t.id,u.alias.trim())];case 2:return e.sent(),p(null),[3,4];case 3:return y(!1),[7];case 4:return[2]}})})()},saveButtonText:"Update",deleteButtonText:"Unlink",isSaving:v||b,keyError:_}):(0,d.jsx)(H.View,{css:em.linkedSecret,"data-unlinking":b,children:(0,d.jsx)(eb,{name:t.alias,value:t.secret.value,isEditing:!1,isSensitive:m,canEdit:!0,onToggleSensitive:function(){return g(!m)},renderKeyExtra:function(){return(0,d.jsx)(ea.Tooltip,{tooltip:"Linked to Account Secret: ".concat(t.secret.name),children:(0,d.jsx)(eu.default,{color:O.tokens.accentPrimaryStronger})})},renderSuffix:function(){return(0,d.jsxs)(er.PopupMenu,{trigger:(0,d.jsx)(U.Surface,{elevated:!0,br:4,children:(0,d.jsx)(ee.IconButton,{size:32,alt:"Options",children:(0,d.jsx)(ec.default,{})})}),children:[(0,d.jsx)(er.MenuItem,{label:"Edit",icon:(0,d.jsx)(eo.default,{}),onAction:function(){return p({alias:t.alias})}}),(0,d.jsx)(er.MenuItem,{label:"Unlink",icon:(0,d.jsx)(ep.default,{}),isDestructive:!0,onAction:function(){return(0,o._)(function(){return(0,c._)(this,function(e){switch(e.label){case 0:S(!0),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,a(t.id)];case 2:return e.sent(),[3,4];case 3:return S(!1),[7];case 4:return[2]}})})()}})]})}})})}function eT(e){var t=e.keys,n=e.isOpen,r=e.onClose,i=e.onConfirm,a=e.loading,o=t.length>1,s=(0,Y.useSupportsAgent)();return(0,d.jsx)(B.Modal,{isOpen:n,onRequestClose:r,children:(0,d.jsxs)(H.View,{gap:12,children:[(0,d.jsx)(F.Text,{variant:"subheadDefault",multiline:!1,children:o?"Delete secrets?":"Delete ".concat(t[0],"?")}),(0,d.jsxs)(F.Text,{color:"dimmer",children:["Are you sure you would like to delete"," ",o?"these secrets (".concat(t.join(", "),")"):"this secret","? This cannot be undone."]}),s?(0,d.jsx)(V.StatusBanner,{icon:(0,d.jsx)(ef.default,{}),text:"Deleting these secrets may break historical agent checkpoint previews that depend on them. Previews always use the latest secrets.",colorway:"warning"}):null,(0,d.jsxs)(H.View,{justify:"end",row:!0,gap:8,children:[(0,d.jsx)(L.Button,{text:"Cancel",onClick:r}),(0,d.jsx)(L.Button,{text:"Delete",colorway:"negative",onClick:i,loading:a})]})]})})}e.s(["LinkedSecretItem",()=>ew,"SecretItem",()=>eS,"SecretKey",()=>eh,"SecretValue",()=>ey],837605);var ej=e.i(988676),eD=e.i(604963),ek=e.i(679668),eC=e.i(442060),eE=e.i(368357),eA=e.i(761922),eI=e.i(363201),eR=e.i(940745),eP=e.i(952030),eM=e.i(644230);e.i(630937);var eO=["SLACK_API_KEY","GOOGLE_API_KEY","MONGO_API_KEY","FIREBASE_API_KEY"];function eN(e){var t=e.onClose,i=e.onAdd,a=e.otherKeys,o=(0,n._)((0,r.useState)(!0),2),u=o[0],c=o[1],p=(0,n._)((0,r.useState)({key:"",value:""}),2),f=p[0],m=p[1],g=(0,n._)((0,r.useState)(function(){var e=Math.floor(Math.random()*eO.length);return eO[e]}),1)[0],h=(0,r.useMemo)(function(){return null!==f.key.match(D.POSIX_ENV_VAR_PATTERN)},[f.key]),v=(0,r.useMemo)(function(){return a.includes(f.key)?"Secret already exists":!h&&f.key?D.POSIX_ENV_VAR_ERROR:void 0},[a,f.key,h]),y=f.key.length>0&&!v,x=function(){y&&(i({key:f.key.trim(),value:f.value}),m({key:"",value:""}))};return(0,d.jsxs)(H.View,{gap:8,py:8,onKeyDown:function(e){"Enter"===e.key&&x()},children:[(0,d.jsxs)(H.View,{row:!0,gap:8,children:[(0,d.jsx)(H.View,{clsx:eM.default.addSecretTitleContainer,children:(0,d.jsxs)(ei.TextField,{validate:function(){return v},validationBehavior:"aria",isRequired:!0,minLength:1,maxLength:128,name:"secretKey",value:f.key,onChange:function(e){return m(function(t){return(0,l._)((0,s._)({},t),{key:e})})},isInvalid:!!v,children:[(0,d.jsx)(en.Label,{color:"dimmer",multiline:!1,children:"Key"}),(0,d.jsx)(et.Input,{placeholder:g,autoComplete:"off",autoFocus:!0}),(0,d.jsx)(Z.FieldError,{children:v})]})}),(0,d.jsx)(H.View,{grow:!0,shrink:!0,gap:4,children:(0,d.jsxs)(ei.TextField,{isRequired:!0,minLength:1,name:"secretValue",value:f.value,onChange:function(e){return m(function(t){return(0,l._)((0,s._)({},t),{value:e})})},children:[(0,d.jsxs)(en.Label,{color:"dimmer",multiline:!1,clsx:eM.default.addSecretValueLabel,children:["Value",(0,d.jsx)(ee.IconButton,{alt:"Toggle Visibility",tooltipBehavior:"hidden",onClick:function(){return c(!u)},size:12,children:u?(0,d.jsx)(es.default,{}):(0,d.jsx)(el.default,{})})]}),(0,d.jsx)(et.Input,{"data-sensitive":u,autoComplete:"off"})]})})]}),(0,d.jsxs)(H.View,{row:!0,gap:8,justify:"end",children:[(0,d.jsx)(L.Button,{size:"small",text:"Cancel",onClick:function(){return t()}}),(0,d.jsx)(L.Button,{size:"small",text:"Add Secret",colorway:"primary",disabled:!y,onClick:x})]})]})}function eL(e){var t=e.secrets,i=e.onUpdateSecret,a=e.onDeleteSecret,o=e.onAddSecret,s=e.showAddSecret,l=e.onSearch,c=e.onClose,p=e.editAuthorizationErrorMessage,f=e.linkedSecrets,m=e.userSecrets,g=e.onUpdateLink,h=e.onUnlink,v=(0,r.useMemo)(function(){return new Set((0,u._)(t.keys()).concat((0,u._)((null==f?void 0:f.map(function(e){return e.alias}))||[])))},[t,f]),y=(0,r.useMemo)(function(){return(0,u._)(t.entries()).filter(function(e){var t=(0,n._)(e,2);return""===(t[0],t[1])})},[t]),x=(0,r.useMemo)(function(){return(0,u._)(t.entries()).filter(function(e){var t=(0,n._)(e,2);return""!==(t[0],t[1])})},[t]);return s||0!==y.length||0!==x.length||(null==f?void 0:f.length)?(0,d.jsxs)(H.View,{py:8,gap:8,children:[0!==y.length&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(H.View,{px:8,gap:8,children:[(0,d.jsx)(F.Text,{variant:"subheadDefault",multiline:!1,children:"Configure missing Secret values"}),(0,d.jsx)(F.Text,{variant:"small",children:"This App contains Secrets that might be required. Add values to ensure the code runs as expected."}),(0,d.jsx)(H.View,{gap:8,children:y.map(function(e){var t=(0,n._)(e,2),r=t[0],o=t[1];return(0,d.jsx)(U.Surface,{elevated:!0,clsx:eM.default.secretItem,p:8,children:(0,d.jsx)(eS,{secret:{key:r,value:o},onUpdateSecret:i,onDeleteSecret:a,onSearchSecret:function(){},editAuthorizationErrorMessage:p})},r)})})]}),(0,d.jsx)(ej.DividerH,{})]}),(0,d.jsxs)(H.View,{gap:8,children:[s?(0,d.jsx)(eN,{onClose:c,onAdd:o,otherKeys:Object.keys(t)}):null,x.map(function(e){var t=(0,n._)(e,2),r=t[0],o=t[1];return(0,d.jsx)(eS,{secret:{key:r,value:o},onUpdateSecret:i,onDeleteSecret:a,onSearchSecret:l,editAuthorizationErrorMessage:p},r)}),f&&f.length>0?(0,d.jsxs)(d.Fragment,{children:[x.length>0?(0,d.jsx)(ej.DividerH,{}):null,f.map(function(e){return(0,d.jsx)(ew,{link:e,onUpdateLink:g,onUnlink:h,userSecrets:m,existingKeys:v},e.id)})]}):null]})]}):null}function eB(e){var t,i=e.secrets,a=e.activeFile,o=(0,n._)((0,r.useState)(null==(t=i.keys().next())?void 0:t.value),2),s=o[0],l=o[1],c=(0,_.default)(a);return void 0!==s&&c&&(0,S.getEnvCodeForLanguage)(a,s)&&i.size>0?(0,d.jsxs)(H.View,{px:8,py:16,gap:8,children:[(0,d.jsxs)(H.View,{row:!0,gap:8,align:"center",children:[(0,d.jsx)(F.Text,{multiline:!1,children:"Access secret"}),(0,d.jsx)(ek.Select,{"aria-label":"Select secret to access",clsx:eM.default.secretSelect,items:(0,u._)(i.keys()).map(function(e){return{title:e}}),selectedItem:{title:s},onChange:function(e){return l(e.title)}})]}),(0,d.jsx)(S.default,{elevated:!0,keyName:s,filePath:a})]}):null}var eV=function(e){var t,n=e.performPaneOperation,r=e.showAddSecret,i=e.setShowAddSecret,a=e.secrets,s=e.editAuthorization,l=e.error,u=e.dismissibleElement,p=u.isDone,m=u.setAsDone,x=e.linkedSecrets,S=e.userSecrets,_=e.onUpdateLink,j=e.onUnlink,D=e.rawEditorRef,k=(0,g.default)().showConfirm,C=(0,y.default)().secrets,E=(0,T.useRunInfo)().isRunning,A=(0,w.useCursorFilepath)(),I=function(){i(!1)},R=a.size>0||x&&x.length>0;return!s||l?(0,d.jsx)(b.EnvEditorUnauthorized,{message:null!=(t=null==l?void 0:l.message)?t:"Unable to determine secret eligibility, please refresh your browser."}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(H.View,{clsx:eM.default.envEditorBody,grow:!0,shrink:!0,children:[s.isAuthorized&&!p?(0,d.jsx)(H.View,{p:8,children:(0,d.jsx)(V.StatusBanner,{icon:(0,d.jsx)(eI.default,{}),closable:!0,closeAction:function(){return m()},colorway:"primary",text:(0,d.jsxs)(F.Text,{clsx:eM.default.secretAccessibilityText,children:["Secrets are accessible to anyone who has access to this App. To restrict secret access, you must update App invite permissions. For more information, visit"," ",(0,d.jsx)("a",{href:f.LINKS_DOCS.SECRETS,target:"_blank",children:"our documentation"}),"."]})})}):null,R||!1!==r?null:(0,d.jsx)(b.EnvEditorEmpty,{performPaneOperation:n,editSecretsAuthz:s}),(0,d.jsx)(eL,{secrets:a,onUpdateSecret:function(e,t){return(0,o._)(function(){var n;return(0,c._)(this,function(r){return(0,h.track)(v.events.ENV_EDITOR_USED,{action:"updated",multiline:t.value.includes("\n")}),(n=new Map(a)).delete(e),n.set(t.key,t.value),C.replaceAll(n),[2]})})()},onDeleteSecret:function(e){return(0,o._)(function(){return(0,c._)(this,function(t){return(0,h.track)(v.events.ENV_EDITOR_USED,{action:"deleted"}),C.removeEntries(e),[2]})})()},onAddSecret:function(e){return(0,o._)(function(){return(0,c._)(this,function(t){return(0,h.track)(v.events.ENV_EDITOR_USED,{action:"created",multiline:e.value.includes("\n")}),C.addEntries([{key:e.key,value:e.value}]),E&&k("Re-run your App to use this secret"),I(),[2]})})()},showAddSecret:r,onSearch:function(e){return n({operation:"open",pane:{type:"searchReplace",data:{initialQuery:e}}})},editAuthorizationErrorMessage:s.isAuthorized?void 0:s.message,onClose:I,linkedSecrets:x,userSecrets:S,onUpdateLink:_,onUnlink:j}),A&&R?(0,d.jsx)(eB,{secrets:a,activeFile:A}):null]}),(0,d.jsx)(W,{ref:D,secrets:a,update:function(e){return(0,o._)(function(){return(0,c._)(this,function(t){switch(t.label){case 0:return[4,C.replaceAll(e)];case 1:return t.sent(),[2]}})})()},disabledMessage:s.isAuthorized?void 0:s.message})]})};function eU(e,t){return(0,p.useUnlinkSharedSecretsMutation)({update:function(n,r,i){var a=r.data,o=i.variables;(null==a?void 0:a.unlinkSharedSecrets.__typename)==="UnlinkSharedSecretsResult"&&n.updateQuery({query:p.ReplLinkedSecretsDocument,variables:{replId:e}},function(e){if(!(null==e?void 0:e.getRepl)||"Repl"!==e.getRepl.__typename||!o)return e;var n,r,i=null!=(r=null==(n=e.getRepl.sharedSecretLinks)?void 0:n.filter(function(e){return!o.input.ids.includes(e.id)}))?r:[];return t(i.map(function(e){return{key:e.alias,url:e.secret.signedUrl}})),(0,l._)((0,s._)({},e),{getRepl:(0,l._)((0,s._)({},e.getRepl),{sharedSecretLinks:i})})})}})}function eF(e,t){return(0,p.useLinkSharedSecretsMutation)({update:function(n,r){return(0,o._)(function(n,r){var i,a,o,d,f,m,g;return(0,c._)(this,function(c){switch(c.label){case 0:if((null==(i=r.data)?void 0:i.linkSharedSecrets.__typename)!=="LinkSharedSecretsResult")return[3,2];return o=i.linkSharedSecrets.links,m=(null==(d=n.readQuery({query:p.ReplLinkedSecretsDocument,variables:{replId:e}}))||null==(a=d.getRepl)?void 0:a.__typename)==="Repl"&&null!=(f=d.getRepl.sharedSecretLinks)?f:[],[4,t((g=(0,u._)(m).concat((0,u._)(o))).map(function(e){return{key:e.alias,url:e.secret.signedUrl}}))];case 1:c.sent(),n.updateQuery({query:p.ReplLinkedSecretsDocument,variables:{replId:e}},function(e){return(null==e?void 0:e.getRepl)&&"Repl"===e.getRepl.__typename?(0,l._)((0,s._)({},e),{getRepl:(0,l._)((0,s._)({},e.getRepl),{sharedSecretLinks:g})}):e}),c.label=2;case 2:return[2]}})}).apply(this,arguments)}})}function eH(e){var t,b,S,_,w,T=e.performPaneOperation,D=(0,a.default)(),C=(0,y.default)().secrets,E=(0,n._)(eU(D,C.replaceAllExternalSecrets),1)[0],A=(0,n._)(eF(D,C.replaceAllExternalSecrets),1)[0],I=(0,n._)((t=(0,y.default)().secrets,(0,p.useUpdateSharedSecretLinkMutation)({update:function(e,n){var r=n.data;if((null==r?void 0:r.updateSharedSecretLink.__typename)==="SharedSecretLink"){var i=r.updateSharedSecretLink;e.updateQuery({query:p.ReplLinkedSecretsDocument,variables:{replId:D}},function(e){if((null==e||null==(n=e.getRepl)?void 0:n.__typename)!=="Repl")return e;var n,r,a,o=null!=(a=null==(r=e.getRepl.sharedSecretLinks)?void 0:r.map(function(e){return e.id===i.id?i:e}))?a:[];return t.replaceAllExternalSecrets(o.map(function(e){return{key:e.alias,url:e.secret.signedUrl}})),(0,l._)((0,s._)({},e),{getRepl:(0,l._)((0,s._)({},e.getRepl),{sharedSecretLinks:o})})})}}})),1)[0],R=(0,m.useFlag)({controlName:"flag-manage-environment-tool",default:!1}),P=(0,n._)((0,r.useState)(new Map),2),M=P[0],O=P[1],N=(0,n._)((0,r.useState)(!1),2),B=N[0],V=N[1],U=(0,n._)((0,r.useState)(!1),2),G=U[0],z=U[1],q=(0,n._)((0,r.useState)(!1),2),W=q[0],K=q[1],$=(0,n._)((0,r.useState)(!1),2),Y=$[0],X=$[1],Q=(0,n._)((0,r.useState)(!1),2),J=Q[0],Z=Q[1],ee=(0,r.useRef)(null),et=(0,g.default)(),en=(0,x.useMemoedDismissibleElement)("editors-have-secret-access-warning"),ei=(0,p.useSecretsPaneAuthorizationsQuery)({variables:{replId:D}}),eo=ei.data,es=ei.loading,el=ei.error,ec=(null==eo?void 0:eo.getRepl.__typename)==="Repl"?eo.getRepl:void 0,ed=null==ec?void 0:ec.authorizations.editSecrets,ep=(0,p.useReplLinkedSecretsQuery)({variables:{replId:D}}),ef=ep.data,em=ep.loading,eg=(0,p.useWorkspaceSecretsQuery)({fetchPolicy:"cache-and-network",ssr:!1}).data,eh=(0,r.useMemo)(function(){if((null==ef?void 0:ef.getRepl.__typename)==="Repl"&&ef.getRepl.sharedSecretLinks)return ef.getRepl.sharedSecretLinks},[ef]),ev=(0,r.useMemo)(function(){var e;return(null==eg||null==(e=eg.currentUser)?void 0:e.secrets.__typename)==="SharedSecretConnection"?eg.currentUser.secrets.items:[]},[eg]),ey=(0,r.useMemo)(function(){return new Set((0,u._)(M.keys()).concat((0,u._)((null==eh?void 0:eh.map(function(e){return e.alias}))||[])))},[M,eh]),ex=(0,r.useMemo)(function(){return ev.map(function(e){return{id:e.id,value:e.value||""}})},[ev]);return((0,r.useEffect)(function(){(0,h.trackOnce)(v.events.ENV_EDITOR_USED,{action:"opened",tab:"repl"})},[]),(0,r.useEffect)(function(){var e=C.watch(function(e){O(e)});return function(){e()}},[C,O]),!M||es||em||en.isLoading)?(0,d.jsx)(H.View,{align:"center",justify:"center",clsx:eM.default.loadingContainer,children:(0,d.jsx)(eR.default,{size:24})}):(0,d.jsxs)(H.View,{css:eM.default.body,grow:!0,p:8,gap:12,shrink:!0,children:[(0,d.jsxs)(H.View,{children:[(0,d.jsxs)(H.View,{row:!0,gap:8,align:"center",justify:"space-between",children:[(0,d.jsx)(F.Text,{variant:"subheadDefault",multiline:!1,children:"Secrets"}),(0,d.jsxs)(H.View,{row:!0,gap:8,children:[(0,d.jsxs)(er.PopupMenu,{placement:"bottom right",trigger:(0,d.jsx)(L.Button,{text:"More",size:"small"}),children:[(0,d.jsx)(er.MenuItem,{label:"Docs",icon:(0,d.jsx)(eC.default,{}),href:f.LINKS_DOCS.SECRETS,target:"_blank"}),(0,d.jsx)(er.MenuItem,{label:"Edit as JSON",icon:(0,d.jsx)(eE.default,{}),onAction:function(){var e;null==(e=ee.current)||e.openJSONEditor()},isDisabled:!(null==ed?void 0:ed.isAuthorized)||(null==(b=ee.current)?void 0:b.isSaving)===!0||!!(null==(S=ee.current)?void 0:S.disabledMessage)}),(0,d.jsx)(er.MenuItem,{label:"Edit as .env",icon:(0,d.jsx)(eA.default,{}),onAction:function(){var e;null==(e=ee.current)||e.openEnvEditor()},isDisabled:!(null==ed?void 0:ed.isAuthorized)||(null==(_=ee.current)?void 0:_.isSaving)===!0||!!(null==(w=ee.current)?void 0:w.disabledMessage)})]}),(null==ec?void 0:ec.isOwner)?(0,d.jsxs)(eD.PopoverTrigger,{label:"Link Account Secrets",isOpen:J,onOpenChange:Z,placement:"bottom",offset:8,children:[(0,d.jsx)(L.Button,{iconLeft:(0,d.jsx)(eu.default,{}),text:(0,d.jsxs)(d.Fragment,{children:["Link"," ",(0,d.jsx)("span",{css:eM.default.tabExtraText,children:"Account Secrets"})]}),size:"small",disabled:!(null==ed?void 0:ed.isAuthorized)}),(0,d.jsx)(j.default,{secrets:ev,actionText:"Link to this App",helpText:"Linked secrets will stay in sync with your Account Secrets",existingKeys:ey,onSelectSecrets:function(e){return(0,o._)(function(){return(0,c._)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,A({variables:{input:{resourceId:D,resourceType:i.SharedSecretResourceType.Repl,secrets:e.map(function(e){return{secretId:e.id,alias:e.name}})}}})];case 1:return t.sent(),et.showConfirm("Secrets linked to this App"),Z(!1),(0,h.track)(v.events.SHARED_SECRETS_USED,{ownerType:"account",action:"link",source:"secrets-pane",count:e.length,keys:e.map(function(e){return e.name})}),[3,3];case 2:return t.sent(),et.showError("Failed to link secrets"),[3,3];case 3:return[2]}})})()},linkedSecrets:eh})]}):null,(0,d.jsx)(ea.Tooltip,{isDisabled:null==ed?void 0:ed.isAuthorized,tooltip:null==ed?void 0:ed.message,children:(0,d.jsx)(L.Button,{iconLeft:(0,d.jsx)(eP.default,{}),text:(0,d.jsxs)(d.Fragment,{children:["New ",(0,d.jsx)("span",{css:eM.default.tabExtraText,children:"Secret"})]}),colorway:"primary",size:"small",disabled:!(null==ed?void 0:ed.isAuthorized),onClick:function(){return V(!0)}})})]})]}),(0,d.jsx)(eV,{performPaneOperation:T,showAddSecret:B,setShowAddSecret:V,secrets:M,dismissibleElement:en,editAuthorization:ed,error:el,linkedSecrets:eh,userSecrets:ex,rawEditorRef:ee,onUpdateLink:function(e,t){return(0,o._)(function(){return(0,c._)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,I({variables:{input:{id:e,resourceId:D,resourceType:i.SharedSecretResourceType.Repl,alias:t}}})];case 1:return n.sent(),et.showConfirm("Secret link updated"),[3,3];case 2:return n.sent(),et.showError("Failed to update secret link"),[3,3];case 3:return[2]}})})()},onUnlink:function(e){return(0,o._)(function(){return(0,c._)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,E({variables:{input:{resourceId:D,resourceType:i.SharedSecretResourceType.Repl,ids:[e]}}})];case 1:return t.sent(),et.showConfirm("Secret unlinked"),[3,3];case 2:return t.sent(),et.showError("Failed to unlink secret"),[3,3];case 3:return[2]}})})()}})]}),R?(0,d.jsxs)(H.View,{css:eM.default.configurationsSection,children:[(0,d.jsxs)(H.View,{css:eM.default.sectionHeader,row:!0,gap:8,align:"center",justify:"space-between",children:[(0,d.jsx)(F.Text,{variant:"subheadDefault",multiline:!1,children:"Configurations"}),(0,d.jsxs)(H.View,{row:!0,gap:8,children:[(0,d.jsxs)(er.PopupMenu,{placement:"bottom right",trigger:(0,d.jsx)(L.Button,{text:"More",size:"small"}),children:[(0,d.jsx)(er.MenuItem,{label:"New published app configuration",icon:(0,d.jsx)(eP.default,{}),onAction:function(){return K(!0)}}),(0,d.jsx)(er.MenuItem,{label:"New testing configuration",icon:(0,d.jsx)(eP.default,{}),onAction:function(){return X(!0)}})]}),(0,d.jsx)(ea.Tooltip,{isDisabled:null==ed?void 0:ed.isAuthorized,tooltip:null==ed?void 0:ed.message,children:(0,d.jsx)(L.Button,{iconLeft:(0,d.jsx)(eP.default,{}),text:(0,d.jsxs)(d.Fragment,{children:["New ",(0,d.jsx)("span",{css:eM.default.tabExtraText,children:"configuration"})]}),colorway:"primary",size:"small",disabled:!(null==ed?void 0:ed.isAuthorized),onClick:function(){return z(!0)}})})]})]}),(0,d.jsx)(k.default,{performPaneOperation:T,editAuthorization:ed,showAddEnvVar:G,setShowAddEnvVar:z,showAddProdOnly:W,setShowAddProdOnly:K,showAddDevOnly:Y,setShowAddDevOnly:X})]}):null]})}function eG(e){var t=(0,a.default)(),o=(0,n._)(eF(t,e),1)[0],s=(0,r.useCallback)(function(e){return o({variables:{input:{resourceId:t,resourceType:i.SharedSecretResourceType.Repl,secrets:e}}})},[o,t]),l=(0,n._)(eU(t,e),1)[0];return{linkSecrets:s,unlinkSecrets:(0,r.useCallback)(function(e){return l({variables:{input:{resourceId:t,resourceType:i.SharedSecretResourceType.Repl,ids:e}}})},[l,t])}}e.s(["default",()=>eH,"useLinkSharedSecretsWithCache",()=>eF,"useUnlinkSharedSecretsWithCache",()=>eU],32967),e.s(["useLinkUnlinkSecrets",()=>eG],316799),e.i(242933);var ez=e.i(424360);e.i(925218);var eq=e.i(112077);function eW(){var e=(0,eq.useCreateObservable)(null),t=(0,r.useMemo)(function(){return new ez.Multicast(function(t){return e.subscribe(function(e){if(e){var n=!1,r=null,i=function(){var n=e.scrollHeight-(e.scrollTop+e.clientHeight);n!==r&&(r=n,t.next(n))},a=function(){n||(n=!0,requestAnimationFrame(function(){n=!1,i()}))};return i(),e.addEventListener("scroll",a,{passive:!0}),function(){return e.removeEventListener("scroll",a)}}})})},[e]);return{setElement:(0,r.useCallback)(function(t){return e.set(t)},[e]),distanceFromBottom:t}}e.s(["useDistanceFromBottom",()=>eW],97845)},387491,31290,e=>{"use strict";function t(e){var t=e.current,n=e.target,r=e.elapsed,i=e.delta,a=e.snappiness,o=e.ramp,s=void 0===o?1:o,l=e.minStepSize,u=void 0===l?.5:l,c=n-t;if(Math.abs(c)<=u)return n;var d=1;r<s&&(d=r/s);var p=1-Math.exp(-(void 0===a?16:a)*d*i),f=(1-p)*t+p*n;return Math.abs(f-t)<u?t+Math.sign(c)*u:f}function n(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=void 0===n.moveThreshold;e.preventDefault();var i={x:e.pageX,y:e.pageY},a={x:0,y:0};t.start&&t.start({mouse:i,shiftKey:e.shiftKey});var o=function(e){var o={x:e.pageX,y:e.pageY};if(a={x:o.x-i.x,y:o.y-i.y},void 0!==n.moveThreshold&&!r){if(Math.abs(a.x)<n.moveThreshold&&Math.abs(a.y)<n.moveThreshold)return;r=!0}t.move({delta:a,shiftKey:e.shiftKey,mouse:o})},s=null,l=function(e){e.preventDefault(),s&&cancelAnimationFrame(s),s=requestAnimationFrame(function(){o(e)})},u=function(){s&&cancelAnimationFrame(s),document.removeEventListener("pointermove",l),document.removeEventListener("pointerup",u),document.removeEventListener("touchcancel",u),(void 0===n.moveThreshold||r)&&t.end&&t.end({delta:a,shiftKey:e.shiftKey})};document.addEventListener("pointermove",l),document.addEventListener("pointerup",u),document.addEventListener("touchcancel",u)}e.s(["damp",()=>t],387491),e.s(["measureMouseMove",()=>n],31290)},652488,e=>{e.v({button:"ScrollToLatestButton-module__3hieVa__button",buttonContent:"ScrollToLatestButton-module__3hieVa__buttonContent"})},501431,e=>{e.v({content:"AutoScroller-module__ZCuA_W__content",root:"AutoScroller-module__ZCuA_W__root",scroll:"AutoScroller-module__ZCuA_W__scroll",thumb:"AutoScroller-module__ZCuA_W__thumb",thumbUi:"AutoScroller-module__ZCuA_W__thumbUi",track:"AutoScroller-module__ZCuA_W__track"})},488174,e=>{e.v({bordered:"Pane-module__yukHDW__bordered",divider:"Pane-module__yukHDW__divider",elevated:"Pane-module__yukHDW__elevated",header:"Pane-module__yukHDW__header",left:"Pane-module__yukHDW__left",middleText:"Pane-module__yukHDW__middleText",root:"Pane-module__yukHDW__root"})},495663,e=>{e.v({envItem:"EnvironmentRequested-module__YzIbEq__envItem",envList:"EnvironmentRequested-module__YzIbEq__envList"})},932708,e=>{e.v({envHeader:"index-module__VR971W__envHeader",envRow:"index-module__VR971W__envRow",envValueRoot:"index-module__VR971W__envValueRoot",input:"index-module__VR971W__input",primaryButton:"index-module__VR971W__primaryButton"})},272643,e=>{e.v({requestedSecretsList:"SecretsRequested-module__FbxOSG__requestedSecretsList",requestedSecretsListItem:"SecretsRequested-module__FbxOSG__requestedSecretsListItem",root:"SecretsRequested-module__FbxOSG__root",seeAllButton:"SecretsRequested-module__FbxOSG__seeAllButton"})},147721,376363,608434,901708,653412,80858,922463,245329,822229,613909,593366,e=>{"use strict";var t=e.i(297083),n=e.i(530658),r=e.i(817556),i=e.i(276385),a=e.i(389959),o=e.i(131141),s=e.i(721281),l=e.i(878420),u=e.i(64386),c=e.i(886513),d=e.i(467951),p=e.i(649960),f=e.i(480028),m=e.i(446530),g=e.i(613355),h=e.i(764848),v=e.i(136540),y=e.i(929872),x=e.i(960178),b=e.i(625484);e.i(312917);var S=e.i(675186);e.i(925218);var _=e.i(112077),w=e.i(128068),T=e.i(802088),j=e.i(97845),D=e.i(98816),k=e.i(387491),C=e.i(315801),E=e.i(343252),A=e.i(31290),I=e.i(869226),R=e.i(337761),P=e.i(119468),M=function(e){return"object"==(void 0===e?"undefined":(0,P._)(e))&&null!=e&&1===e.nodeType},O=function(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e},N=function(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var n,r=getComputedStyle(e,null);return O(r.overflowY,t)||O(r.overflowX,t)||!!(n=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e))&&(n.clientHeight<e.scrollHeight||n.clientWidth<e.scrollWidth)}return!1},L=function(e,t,n,r,i,a,o,s){return a<e&&o>t||a>e&&o<t?0:a<=e&&s<=n||o>=t&&s>=n?a-e-r:o>t&&s<n||a<e&&s>n?o-t+i:0},B=function(e){var t=e.parentElement;return null==t?e.getRootNode().host||null:t},V=function(e,t){if("undefined"==typeof document)return[];var n,r,i,a,o,s,l=t.scrollMode,u=t.block,c=t.inline,d=t.boundary,p=t.skipOverflowHiddenElements,f="function"==typeof d?d:function(e){return e!==d};if(!M(e))throw TypeError("Invalid target");for(var m=document.scrollingElement||document.documentElement,g=[],h=e;M(h)&&f(h);){if((h=B(h))===m){g.push(h);break}null!=h&&h===document.body&&N(h)&&!N(document.documentElement)||null!=h&&N(h,p)&&g.push(h)}for(var v=null!=(r=null==(n=window.visualViewport)?void 0:n.width)?r:innerWidth,y=null!=(a=null==(i=window.visualViewport)?void 0:i.height)?a:innerHeight,x=null!=(o=window.scrollX)?o:pageXOffset,b=null!=(s=window.scrollY)?s:pageYOffset,S=e.getBoundingClientRect(),_=S.height,w=S.width,T=S.top,j=S.right,D=S.bottom,k=S.left,C="start"===u||"nearest"===u?T:"end"===u?D:T+_/2,E="center"===c?k+w/2:"end"===c?j:k,A=[],I=0;I<g.length;I++){var R=g[I],P=R.getBoundingClientRect(),O=P.height,V=P.width,U=P.top,F=P.right,H=P.bottom,G=P.left;if("if-needed"===l&&T>=0&&k>=0&&D<=y&&j<=v&&T>=U&&D<=H&&k>=G&&j<=F)break;var z=getComputedStyle(R),q=parseInt(z.borderLeftWidth,10),W=parseInt(z.borderTopWidth,10),K=parseInt(z.borderRightWidth,10),$=parseInt(z.borderBottomWidth,10),Y=0,X=0,Q="offsetWidth"in R?R.offsetWidth-R.clientWidth-q-K:0,J="offsetHeight"in R?R.offsetHeight-R.clientHeight-W-$:0,Z="offsetWidth"in R?0===R.offsetWidth?0:V/R.offsetWidth:0,ee="offsetHeight"in R?0===R.offsetHeight?0:O/R.offsetHeight:0;if(m===R)Y="start"===u?C:"end"===u?C-y:"nearest"===u?L(b,b+y,y,W,$,b+C,b+C+_,_):C-y/2,X="start"===c?E:"center"===c?E-v/2:"end"===c?E-v:L(x,x+v,v,q,K,x+E,x+E+w,w),Y=Math.max(0,Y+b),X=Math.max(0,X+x);else{Y="start"===u?C-U-W:"end"===u?C-H+$+J:"nearest"===u?L(U,H,O,W,$+J,C,C+_,_):C-(U+O/2)+J/2,X="start"===c?E-G-q:"center"===c?E-(G+V/2)+Q/2:"end"===c?E-F+K+Q:L(G,F,V,q,K+Q,E,E+w,w);var et=R.scrollLeft,en=R.scrollTop;Y=Math.max(0,Math.min(en+Y/ee,R.scrollHeight-O/ee+J)),X=Math.max(0,Math.min(et+X/Z,R.scrollWidth-V/Z+Q)),C+=en-Y,E+=et-X}A.push({el:R,top:Y,left:X})}return A},U=function(e){return!1===e?{block:"end",inline:"nearest"}:e===Object(e)&&0!==Object.keys(e).length?e:{block:"start",inline:"nearest"}};function F(e,t){var n=e.isConnected||e.ownerDocument.documentElement.contains(e);if("object"==(void 0===t?"undefined":(0,P._)(t))&&"function"==typeof t.behavior)return t.behavior(n?V(e,t):[]);if(n){var r=U(t),i=V(e,r),a="scrollBehavior"in document.body.style;i.forEach(function(e){var t=e.el,n=e.top,i=e.left;t.scroll&&a?t.scroll({top:n,left:i,behavior:r.behavior}):(t.scrollTop=n,t.scrollLeft=i)})}}function H(e,t,n){n&&F(e,t),t&&(void 0===t?"undefined":(0,P._)(t))==="object"?(t.skipOverflowHiddenElements=!0,F(e,t)):F(e,{skipOverflowHiddenElements:!0})}e.s(["default",()=>H],376363);var G=e.i(187505),z=e.i(754873),q=e.i(496019),W=e.i(652488),K=(0,f.cvarsFrom)("ScrollToLatestButton.module.css",["--opacity","--scale","--y","--bottom-offset","--pointer-events"]);function $(e){var t;return t={},(0,s._)(t,K.y,e?"-8px":"0px"),(0,s._)(t,K.scale,e?"1":"0.25"),(0,s._)(t,K.opacity,e?"1":"0"),(0,s._)(t,K.pointerEvents,e?"auto":"none"),t}function Y(e){var t=(0,G.useTrackClick)().trackClick,n=(0,a.useRef)(null);(0,I.useStyleSet)(n,e.show,$);var r=e.bottomOffset?(0,s._)({},K.bottomOffset,e.bottomOffset+"px"):void 0;return(0,i.jsxs)("button",{style:r,ref:n,clsx:W.default.button,css:z.interactive.filledAndOutlined,onClick:function(n){t({target:"scroll_to_latest_button",productArea:"agent"}),e.onClick(n)},children:[(0,i.jsx)(q.default,{size:12,clsx:W.default.buttonContent}),(0,i.jsx)(x.Text,{variant:"small",clsx:W.default.buttonContent,children:"Scroll to latest"})]})}e.s(["ScrollToLatestButton",()=>Y],608434);var X=e.i(501431),Q=(0,f.cvarsFrom)("AutoScroller.module.css",["--first-child-margin","--track-width","--track-height","--track-opacity","--track-pointer-events","--track-transition-delay","--thumb-ui-width","--thumb-width","--thumb-height","--thumb-transform","--scroll-height"]),J={height:Q.scrollHeight};function Z(e){var t=e.children,r=e.scrollerRef,o=e.shouldAutoScrollRef,d=e.scrollCache,p=e.scrollCacheKey,f=e.alignToEnd,m=e.autoScrollBehavior,g=e.buttonOffset,h=(0,c._)(e,["children","scrollerRef","shouldAutoScrollRef","scrollCache","scrollCacheKey","alignToEnd","autoScrollBehavior","buttonOffset"]),v=function(e){var t,r,i,o,s,l,u,c,d,p,f,m,g,h,v,y=e.shouldAutoScrollRef,x=e.scrollCache,b=e.scrollCacheKey,E=e.autoScrollBehavior,A=e.scrollToEndOnInitialRender,I=void 0===A||A,R=(0,_.useCreateObservable)(!1),P=(0,n._)((0,a.useState)(null),2),M=P[0],O=P[1],N=(0,n._)((0,a.useState)(null),2),L=N[0],B=N[1],V=(0,n._)((0,a.useState)(null),2),U=V[0],F=V[1],G=(0,D.default)(x),z=(t=(0,_.useCreateObservable)({scrollTop:0,scrollHeight:0,clientHeight:0}),r=(0,_.useCreateObservable)("idle"),(0,a.useEffect)(function(){var e=function(){n&&clearTimeout(n),i||(i=!0,requestAnimationFrame(function(){if(i=!1,L){var e=L.scrollHeight,a=L.scrollTop,o=L.clientHeight;r.set(t.current.scrollTop>=a?"backwards":"forwards"),t.set({scrollHeight:e,scrollTop:a,clientHeight:o}),n=setTimeout(function(){r.set("idle")},200)}}))};if(L){var n=null,i=!1;return e(),L.addEventListener("scroll",e),function(){L.removeEventListener("scroll",e),n&&clearTimeout(n)}}},[L,t,r]),{measurements:t,scrollDirection:r}),q=z.measurements,W=z.scrollDirection,K=(i=(0,_.useCreateObservable)({width:0,height:0}),(0,a.useEffect)(function(){if(L){var e=null;return"undefined"!=typeof ResizeObserver&&(e=new ResizeObserver(function(e){var t=!0,n=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value;s.target===L&&i.set({width:Math.round(s.contentRect.width),height:Math.round(s.contentRect.height)})}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}})).observe(L),function(){null==e||e.disconnect()}}},[L,i]),{scrollSize:i}).scrollSize,$=(s=(o={shouldAutoScrollRef:y,autoScrollBehavior:E,anchorEl:M,scrollEl:L,contentEl:U,scrollToEndOnInitialRender:I}).shouldAutoScrollRef,l=o.autoScrollBehavior,u=o.anchorEl,c=o.scrollEl,d=o.contentEl,f=void 0===(p=o.scrollToEndOnInitialRender)||p,g=(m=(0,n._)((0,a.useState)(!1),2))[0],h=m[1],v=(0,a.useRef)(l),(0,a.useEffect)(function(){if(u&&c&&d){var e=0,t=!f,n=new S.AnimationLoop(function(n,r){if(e+=n,!s.current)return e=0,h(!1),r();var i=c.scrollTop,a=Math.max(Math.min(u.getBoundingClientRect().top-c.getBoundingClientRect().top+i,c.scrollHeight-c.clientHeight),0);if("instant"===v.current||!t)return t=!0,e=0,c.scrollTop=a,h(!1),r();var o=(0,k.damp)({current:i,target:a,elapsed:e,delta:n});if(c.scrollTop=o,o===a)return e=0,h(!1),r();h(!0)}),r=new ResizeObserver(function(){s.current&&n.start()});return r.observe(u),r.observe(c),r.observe(d),s.current&&!f&&n.start(),function(){n.stop(),r.disconnect(),h(!1)}}},[s,u,c,d,f]),{autoScrolling:g}).autoScrolling;(0,a.useEffect)(function(){if(M&&L)return $?void R.set(!1):(0,C.inView)(M,function(){return R.set(!1),function(){R.set(!0)}},{root:L,rootMargin:"100px"})},[R,$,M,L]),(0,a.useEffect)(function(){if(M&&L){var e=G.current,t=e.get(b);return I&&(t?L.scrollTo(0,t):H(M,{behavior:"instant"})),function(){e.set(b,L.scrollTop)}}},[M,L,G,b,I]);var Y=(0,j.useDistanceFromBottom)(),X=Y.setElement,Q=Y.distanceFromBottom,J=(0,a.useMemo)(function(){return Q.select(function(e){return e<=4})},[Q]);(0,T.useObserver)(J,{next:function(e){e&&(y.current=!0)}});var Z=(0,w.useObservableRef)(J);return(0,a.useEffect)(function(){if(L)return L.addEventListener("wheel",e),L.addEventListener("pointerdown",t),L.addEventListener("pointerup",n),function(){L.removeEventListener("wheel",e),L.removeEventListener("pointerdown",t),L.removeEventListener("pointerup",n)};function e(e){if(e.deltaY<0){y.current=!1;return}}function t(){y.current=!1}function n(){Z.current&&(y.current=!0)}},[L,y,Z]),{showButton:R,anchorRef:O,scrollRef:(0,a.useCallback)(function(e){X(e),B(e)},[X]),scrollEl:L,contentRef:F,scrollToLatest:function(){M&&H(M,{behavior:"smooth"})},scrollSize:K,measurements:q,scrollDirection:W,autoScrolling:$}}({shouldAutoScrollRef:o,scrollCache:d,scrollCacheKey:p,autoScrollBehavior:void 0===m?"instant":m,scrollToEndOnInitialRender:!0}),y=v.showButton,x=v.anchorRef,A=v.scrollRef,R=v.contentRef,P=v.scrollToLatest,M=v.scrollSize,O=v.measurements,N=v.scrollEl,L=v.scrollDirection,B=(0,a.useRef)(null);(0,I.useStyleSet)(B,M,function(e){return(0,s._)({},Q.scrollHeight,e.height+"px")});var V="0";f&&(V="auto 0 0 0");var U=(0,E.useMergeRefs)([A,r],{breadcrumb:"client/components/AutoScroller.tsx"});return(0,i.jsxs)(b.View,{innerRef:B,clsx:X.default.root,style:(0,s._)({},Q.firstChildMargin,V),children:[(0,i.jsxs)(b.View,(0,u._)((0,l._)({clsx:X.default.scroll,grow:!0,shrink:!0,innerRef:U},h),{children:[(0,i.jsx)(b.View,{clsx:X.default.content,grow:!0,innerRef:R,children:t}),(0,i.jsx)(b.View,{innerRef:x}),N?(0,i.jsx)(ee,{shouldAutoScrollRef:o,scrollDirection:L,scrollEl:N,measurements:O}):null]})),(0,i.jsx)(Y,{bottomOffset:void 0===g?0:g,show:y,onClick:P})]})}function ee(e){var t=e.measurements,n=e.scrollDirection,r=e.scrollEl,o=e.shouldAutoScrollRef,l=(0,a.useRef)(null),u=(0,a.useRef)(!1),c=(0,a.useRef)(null),d=(0,a.useRef)(null),p=(0,a.useCallback)(function(){c.current&&clearTimeout(c.current),d.current&&clearTimeout(d.current)},[]),f=(0,a.useCallback)(function(){p(),u.current||(c.current=setTimeout(function(){(0,R.styleSet)(l,(0,s._)({},Q.trackOpacity,"0"))},600),d.current=setTimeout(function(){(0,R.styleSet)(l,(0,s._)({},Q.trackPointerEvents,"none"))},1200))},[p]);(0,a.useEffect)(function(){var e=function(e){var t;"idle"===e?f():(p(),(0,R.styleSet)(l,(t={},(0,s._)(t,Q.trackOpacity,o.current?"0":"1"),(0,s._)(t,Q.trackPointerEvents,"auto"),t)))};e(n.current);var t=n.subscribe(e);return function(){t(),p()}},[n,f,p,o]),(0,I.useStyleSet)(l,t,function(e){var t,n=e.clientHeight,r=e.clientHeight/e.scrollHeight*n,i=e.scrollHeight-e.clientHeight,a=i>0?e.scrollTop/i*(n-r):0,o=e.clientHeight>=e.scrollHeight?0:16;return t={},(0,s._)(t,Q.trackWidth,o+"px"),(0,s._)(t,Q.trackHeight,n+"px"),(0,s._)(t,Q.thumbWidth,o+"px"),(0,s._)(t,Q.thumbHeight,r+"px"),(0,s._)(t,Q.thumbTransform,"translate(0, ".concat(a,"px)")),t});var m=(0,a.useCallback)(function(e){var n=0;o.current=!1;var i=!1;(0,A.measureMouseMove)(e,{start:function(){n=r.scrollTop},move:function(e){var a=e.delta;i||(i=!0,requestAnimationFrame(function(){i=!1;var e=t.current,o=e.clientHeight,s=e.scrollHeight,l=a.y/o;r.scrollTop=n+s*l}))}})},[r,t,o]),g=(0,a.useRef)(!1),h=(0,a.useCallback)(function(e){if(e.target===e.currentTarget){var n=e.currentTarget.getBoundingClientRect(),i=(e.clientY-n.y)/n.height;r.scrollTop=t.current.scrollHeight*i}},[r,t]),v=(0,a.useCallback)(function(e){e.deltaY<0&&(o.current=!1),g.current||(g.current=!0,requestAnimationFrame(function(){g.current=!1,r.scrollTop=r.scrollTop+e.deltaY}))},[r,o]);return(0,i.jsx)(b.View,{innerRef:l,clsx:X.default.track,onMouseEnter:function(){u.current=!0,p()},onMouseLeave:function(){u.current=!1,f()},onWheel:v,onClick:h,children:(0,i.jsx)(b.View,{clsx:X.default.thumb,onPointerDown:m,children:(0,i.jsx)(b.View,{clsx:X.default.thumbUi})})})}e.s(["AutoScroller",()=>Z,"scrollSizeTokens",()=>J],901708);var et=e.i(264661),en=e.i(488174);function er(e){var t,r=e.left,o=e.title,l=e.right,u=e.elevated,c=void 0===u||u,f=e.bordered,m=e.onOpenPane,g=e.openPaneButtonAlt,S=e.children,_=e.renderChildrenOnlyWhenInView,w=void 0!==_&&_,T=e.showOpenPaneButton,j=(0,a.useRef)(null),D=(0,d.useInView)(j,{amount:0}),k=(0,a.useMemo)(function(){return!w||D},[D,w]),C=(0,n._)((0,a.useState)(0),2),E=C[0],A=C[1],I=(0,p.default)(function(e){!w||(!w||D)&&e.height>E&&A(e.height)},{type:"debounce",wait:500});return(0,i.jsxs)(b.View,{clsx:[en.default.root,(t={},(0,s._)(t,en.default.elevated,c),(0,s._)(t,en.default.bordered,void 0===f||f),t)],innerRef:j,children:[(0,i.jsxs)(b.View,{css:en.default.header,py:4,px:6,row:!0,gap:4,align:"center",justify:"space-between",children:[(0,i.jsx)(b.View,{css:en.default.left,align:"center",children:r}),(0,i.jsx)(b.View,{grow:!0,shrink:!0,row:!0,gap:4,align:"center",children:(0,i.jsx)(x.Text,{css:en.default.middleText,children:o})}),(0,i.jsxs)(b.View,{align:"center",row:!0,gap:2,children:[l,m&&(void 0===T||T)?(0,i.jsxs)(i.Fragment,{children:[l?(0,i.jsx)(h.DividerV,{css:en.default.divider}):null,(0,i.jsx)(v.IconButton,{alt:void 0===g?"Open Pane":g,onClick:m,children:(0,i.jsx)(et.default,{})})]}):null]})]}),(0,i.jsx)(y.Surface,{innerRef:I,style:{minHeight:E},elevated:c,children:k?S:null})]})}var ei=(0,m.cssRecord)({content:[(0,s._)({},g.media.max("mobileMax"),[g.rcss.maxHeight("calc(".concat(J.height," - 60px)")),g.rcss.overflowY("auto"),{"&::-webkit-scrollbar":{display:"none"}}])],package:[g.rcss.borderRadius(4),g.rcss.px(8),g.rcss.py(4),g.rcss.width("calc(50% - ".concat(f.tokens.space4,")"))]});function ea(e){var t=e.text,n=e.packageList,r=e.getPackageIcon,a=e.children,o=(0,c._)(e,["text","packageList","getPackageIcon","children"]);return(0,i.jsxs)(er,(0,u._)((0,l._)({renderChildrenOnlyWhenInView:!0},o),{children:[n.length?(0,i.jsx)(b.View,{css:ei.content,p:8,children:(0,i.jsxs)(b.View,{gap:8,children:[(0,i.jsx)(x.Text,{color:"dimmest",children:t}),(0,i.jsx)(b.View,{row:!0,wrap:"wrap",gap:8,children:n.map(function(e,t){return(0,i.jsx)(y.Surface,{css:ei.package,row:!0,gap:8,align:"center",justify:"space-between",elevated:!0,children:(0,i.jsxs)(b.View,{row:!0,gap:4,align:"center",children:[r(e),(0,i.jsx)(x.Text,{children:e})]})},t)})})]})}):null,a]}))}function eo(e){switch(e){case 1:default:return"development";case 2:return"production";case 3:return"shared"}}e.s(["EventPane",()=>er,"EventPaneWithPackages",()=>ea],653412),e.s(["getEnvironmentLabel",()=>eo],80858);var es=e.i(140487),el=e.i(616278),eu=e.i(357399),ec=e.i(495663);function ed(e){var t=e.envVars,n=e.openEnvEditor;return(0,i.jsx)(er,{left:(0,i.jsx)(eu.default,{size:16}),title:"".concat(t.length," environment ").concat(1===t.length?"variable":"variables"," requested"),children:(0,i.jsxs)(b.View,{gap:12,p:12,children:[(0,i.jsx)(b.View,{className:ec.default.envList,gap:4,children:t.map(function(e,t){return(0,i.jsxs)(b.View,{row:!0,align:"center",justify:"space-between",className:ec.default.envItem,gap:4,p:8,children:[(0,i.jsxs)(b.View,{row:!0,align:"center",gap:8,children:[(0,i.jsx)(x.Text,{variant:"small",color:"default",children:e.key}),(0,i.jsxs)(x.Text,{variant:"small",color:"dimmer",children:["(",eo(e.environment),")"]})]}),(0,i.jsx)(el.default,{size:16,color:f.tokens.accentPositiveDefault})]},"".concat(e.key,"-").concat(e.environment,"-").concat(t))})}),(0,i.jsx)(b.View,{children:(0,i.jsx)(es.Button,{onClick:n,variant:"outlined",size:"small",text:"See all environment variables"})})]})})}var ep=e.i(607278),ef=e.i(751273),em=e.i(841691),eg=e.i(90102),eh=e.i(940745),ev=e.i(932708);function ey(e){var s=e.openEnvEditor,l=e.envVars,u=e.onComplete,c=e.waitingOnUser,d=e.sessionId,p=e.addEnvEntries,f=(0,n._)((0,a.useState)(!0),2),m=f[0],g=f[1],h=(0,n._)((0,a.useState)(!1),2),y=h[0],S=h[1],_=(0,n._)((0,a.useState)(function(){return l.map(function(e){return{key:e.key,environment:e.environment,value:""}})}),2),w=_[0],T=_[1],j=(0,a.useCallback)(function(e,t){T((0,o.produce)(function(n){n[e].value=t}))},[]),D=(0,a.useMemo)(function(){return w.every(function(e){return""!==e.value.trim()})},[w]),k=(0,a.useCallback)(function(){return(0,t._)(function(){return(0,r._)(this,function(e){switch(e.label){case 0:if(!D||y)return[2];S(!0),e.label=1;case 1:return e.trys.push([1,,4,5]),[4,p(w)];case 2:return e.sent(),[4,u(w)];case 3:return e.sent(),[3,5];case 4:return S(!1),[7];case 5:return[2]}})})()},[w,D,u,y,p]);return c?(0,i.jsx)(er,{left:(0,i.jsx)(eu.default,{size:16}),title:"Environment Variables",children:(0,i.jsxs)(b.View,{gap:16,p:8,children:[(0,i.jsxs)(b.View,{gap:8,children:[(0,i.jsxs)(b.View,{className:"".concat(ev.default.envRow," ").concat(ev.default.envHeader),children:[(0,i.jsx)(b.View,{children:(0,i.jsx)(x.Text,{variant:"small",color:"dimmer",children:"Key"})}),(0,i.jsx)(b.View,{children:(0,i.jsx)(x.Text,{variant:"small",color:"dimmer",children:"Environment"})}),(0,i.jsxs)(b.View,{row:!0,align:"center",justify:"space-between",children:[(0,i.jsx)(x.Text,{variant:"small",color:"dimmer",children:"Value"}),(0,i.jsx)(ef.Tooltip,{tooltip:m?"Show values":"Hide values",children:(0,i.jsx)(v.IconButton,{alt:m?"Show values":"Hide values",tooltipBehavior:"hidden",onClick:function(){return g(!m)},size:18,children:m?(0,i.jsx)(em.default,{}):(0,i.jsx)(eg.default,{})})})]})]}),w.map(function(e,t){return(0,i.jsxs)(b.View,{className:ev.default.envRow,children:[(0,i.jsx)(b.View,{children:(0,i.jsx)(ep.Input,{value:e.key,disabled:!0,className:ev.default.input})}),(0,i.jsx)(b.View,{children:(0,i.jsx)(ep.Input,{value:eo(e.environment),disabled:!0,className:ev.default.input})}),(0,i.jsx)(b.View,{className:ev.default.envValueRoot,"data-sensitive":m,gap:8,children:(0,i.jsx)(ep.Input,{value:e.value,onChange:function(e){return j(t,e.target.value)},placeholder:"Enter value...",className:ev.default.input,autoComplete:"off"})})]},"".concat(e.key,"-").concat(e.environment))})]}),(0,i.jsxs)(b.View,{row:!0,gap:4,wrap:"wrap",children:[(0,i.jsx)(es.Button,{className:ev.default.primaryButton,onClick:k,disabled:!D,text:"Save Variables",loading:y,iconLeft:y?(0,i.jsx)(eh.default,{size:16}):void 0,colorway:"primary"}),(0,i.jsx)(es.Button,{onClick:s,variant:"outlined",text:"Open Env Editor"})]})]})}):(0,i.jsx)(ed,{envVars:l,openEnvEditor:s,sessionId:d})}e.s(["EnvironmentInput",()=>ey],147721);var ex=e.i(346715),eb=e.i(906368),eS=e.i(678420),e_=e.i(222342);function ew(e){var t=(0,n._)((0,a.useState)(e),2),r=t[0],i=t[1],o=(0,n._)((0,a.useState)(null),2),s=o[0],l=o[1];return e!==r&&(l(r),i(e)),s}e.s(["usePrevious",()=>ew],922463);var eT=e.i(858248),ej=e.i(709485),eD=e.i(509908),ek=e.i(368964),eC=e.i(466640),eE=e.i(207237),eA=e.i(546284),eI=e.i(32967),eR=e.i(127227),eP=e.i(739521),eM=(0,m.cssRecord)({secretName:[g.rcss.fontWeight.medium],secretValueCellHeader:[g.rcss.gap(4),g.rcss.color.foregroundDimmer],tableRow:[g.rcss.flex.column,g.rcss.gap(8)],secretsRow:[g.rcss.gap(8)],checkboxCell:[{flexGrow:0,flexShrink:0,width:f.tokens.space24}],secretValueCell:[g.rcss.flex.column,g.rcss.gap(4),{width:"30%"}],confirmationMessage:[g.rcss.color.accentPositiveStronger,g.rcss.flex.row,g.rcss.align.center,g.rcss.gap(4)]});function eO(e){var t=e.value,r=e.label,o=(0,n._)((0,a.useState)(!1),2),s=o[0],l=o[1],u=(0,a.useCallback)(function(){l(function(e){return!e})},[]);return(0,i.jsxs)(b.View,{css:eM.secretValueCell,children:[(0,i.jsxs)(b.View,{css:eM.secretValueCellHeader,row:!0,align:"center",children:[(0,i.jsx)("span",{children:r}),(0,i.jsx)(v.IconButton,{alt:"Toggle Visibility",onClick:u,children:s?(0,i.jsx)(em.default,{}):(0,i.jsx)(eg.default,{})})]}),(0,i.jsx)(x.Text,{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s?t:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]})}function eN(e){var o=e.existingSecrets,s=e.accountSecrets,l=e.onContinue,u=e.step,c=e.linkedSecrets,d=e.onSecretsUpdated,p=e.replaceAllExternalSecrets,f=e.removeEntries,m=(0,e_.default)(),g=(0,n._)((0,eC.useUpdateSharedSecretsWithCache)(),1)[0],h=(0,eE.default)(),v=(0,n._)((0,eI.useLinkSharedSecretsWithCache)(h,p),1)[0],y=(0,n._)((0,eI.useUnlinkSharedSecretsWithCache)(h,p),1)[0],S=(0,n._)((0,a.useState)(o),2),_=S[0],w=S[1],T=(0,n._)((0,a.useState)(!0),2),j=T[0],D=T[1],k=(0,n._)((0,a.useState)(!1),2),C=k[0],E=k[1],A="done"===u,I=(0,n._)((0,a.useState)(new Set),2),R=I[0],P=I[1],M=(0,n._)((0,a.useState)(!1),2),O=M[0],N=M[1];(0,a.useEffect)(function(){w(o),1===o.length&&P(new Set([o[0].key]))},[o]);var L=(0,a.useCallback)(function(e){P(function(t){var n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},[]),B=(0,a.useMemo)(function(){return new Map(s.map(function(e){return[e.name,e]}))},[s]),V=(0,a.useCallback)(function(){D(!1),l()},[l]),U=(0,a.useCallback)(function(){return(0,t._)(function(){var e,t,n,i,a,o,s,u,p,x;return(0,r._)(this,function(r){switch(r.label){case 0:if(0===R.size)return V(),[2];N(!0),r.label=1;case 1:if(r.trys.push([1,8,,9]),o=_.filter(function(e){return R.has(e.key)}),!((u=((null==c||null==(e=c.getRepl)?void 0:e.__typename)==="Repl"&&null!=(s=c.getRepl.sharedSecretLinks)?s:[]).filter(function(e){return o.some(function(t){return t.key===e.alias})}).map(function(e){return e.id})).length>0))return[3,3];return[4,y({variables:{input:{resourceId:h,resourceType:ek.SharedSecretResourceType.Repl,ids:u}}})];case 2:r.sent(),r.label=3;case 3:return[4,f.apply(void 0,(0,ex._)(o.map(function(e){return e.key})))];case 4:return r.sent(),[4,g({variables:{input:{ownerType:ek.SharedSecretOwnerType.Account,secrets:o.map(function(e){var t,n;return{id:null!=(n=null==(t=B.get(e.key))?void 0:t.id)?n:"",name:e.key,value:e.value}})}}})];case 5:if(p=r.sent(),(0,eT.track)(ej.events.SHARED_SECRETS_USED,{ownerType:"account",action:"update",source:"agent"}),!((null==(t=p.data)?void 0:t.updateSharedSecrets.__typename)==="UpdateSharedSecretsResult"&&(null==(i=p.data)||null==(n=i.updateSharedSecrets)?void 0:n.updatedSecrets)))return[3,7];return[4,v({variables:{input:{resourceId:h,resourceType:ek.SharedSecretResourceType.Repl,secrets:p.data.updateSharedSecrets.updatedSecrets.map(function(e){return{secretId:e.id,alias:e.name}})}}})];case 6:r.sent(),(0,eT.track)(ej.events.SHARED_SECRETS_USED,{ownerType:"account",action:"link",source:"agent",count:p.data.updateSharedSecrets.updatedSecrets.length}),r.label=7;case 7:return D(!1),N(!1),E(!0),l(),(null==(a=p.data)?void 0:a.updateSharedSecrets.__typename)==="UpdateSharedSecretsResult"&&(null==d||d(o.map(function(e){return{key:e.key,selectedKey:e.key}}))),[3,9];case 8:return x=r.sent(),eb.captureException(x),m.showError("Something went wrong. Please try again."),N(!1),[3,9];case 9:return[2]}})})()},[g,y,_,R,l,V,B,m,v,h,c,d,f]),F=_.length,H=(0,eA.default)("Secret",F),G=1===F?"it":"them",z=R.size,q=(0,eA.default)("Secret",z),W=(0,a.useMemo)(function(){return 1===_.length?_[0]:null},[_]);return 0===F||"savingExistingSecrets"!==u&&"done"!==u?null:W?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(x.Text,{children:['A Secret named "',W.key,'" already exists in your Account Secrets. Would you like to replace it with the new value?']}),(0,i.jsxs)(b.View,{row:!0,gap:4,children:[(0,i.jsx)(es.Button,{text:"Replace Account Secret",onClick:U,loading:O,disabled:A}),(0,i.jsx)(es.Button,{text:"Not now",variant:"outlined",onClick:V,loading:O,disabled:A})]}),A&&C&&(0,i.jsxs)(b.View,{css:eM.confirmationMessage,children:[(0,i.jsx)(el.default,{size:16}),"Secret updated and linked"]})]}):(0,i.jsx)(eP.Modal,{isOpen:j,onRequestClose:V,children:(0,i.jsxs)(b.View,{gap:16,children:[(0,i.jsxs)(x.Header,{level:3,variant:"subheadDefault",children:[F," matching ",H," already exist",1===F?"s":""," in your account.",(0,i.jsx)("br",{}),"Would you like to replace ",G,"?"]}),(0,i.jsx)(b.View,{gap:8,children:_.map(function(e){var t=s.find(function(t){return t.name===e.key});return(0,i.jsxs)(b.View,{css:eM.tableRow,p:6,children:[(0,i.jsx)(b.View,{row:!0,align:"center",children:(0,i.jsx)(x.Text,{css:eM.secretName,children:e.key})}),(0,i.jsxs)(b.View,{css:eM.secretsRow,row:!0,align:"center",children:[(0,i.jsx)(b.View,{css:eM.checkboxCell,children:(0,i.jsx)(eR.Checkbox,{checked:R.has(e.key),onChange:function(){return L(e.key)}})}),(0,i.jsx)(eO,{label:"Existing",value:(null==t?void 0:t.value)||""}),(0,i.jsx)(eO,{label:"New",value:e.value})]})]},e.key)})}),(0,i.jsxs)(b.View,{row:!0,gap:4,children:[(0,i.jsx)(es.Button,{text:"Cancel",onClick:V,disabled:O}),(0,i.jsx)(es.Button,{colorway:"primary",text:"Replace ".concat(z," ").concat(q),onClick:U,loading:O})]})]})})}var eL=e.i(952030),eB=(0,m.cssRecord)({confirmationMessage:[g.rcss.color.accentPositiveStronger,g.rcss.flex.row,g.rcss.align.center,g.rcss.gap(4)]});function eV(e){var o=e.newSecrets,s=e.step,l=e.onContinue,u=e.linkSecrets,c=e.unlinkSecrets,d=e.linkedSecrets,p=e.onSecretsUpdated,f=e.removeEntries,m=(0,e_.default)(),g=(0,n._)((0,a.useState)(!1),2),h=g[0],v=g[1],y=(0,n._)((0,eC.useCreateSharedSecretsWithCache)(),1)[0],S=(0,n._)((0,a.useState)(!1),2),_=S[0],w=S[1],T=(0,a.useCallback)(function(){return(0,t._)(function(){var e,t,n,i,a,s,g;return(0,r._)(this,function(r){switch(r.label){case 0:v(!0),r.label=1;case 1:return r.trys.push([1,8,,9]),[4,y({variables:{input:{ownerType:ek.SharedSecretOwnerType.Account,secrets:o.map(function(e){return{name:e.key,value:e.value}})}}})];case 2:if(!((null==(e=(t=r.sent()).data)?void 0:e.createSharedSecrets)&&"createdSecrets"in t.data.createSharedSecrets&&"CreateSharedSecretsResult"===t.data.createSharedSecrets.__typename&&t.data.createSharedSecrets.createdSecrets))return[3,7];return i=t.data.createSharedSecrets.createdSecrets,[4,f.apply(void 0,(0,ex._)(o.map(function(e){return e.key})))];case 3:if(r.sent(),!((s=((null==d||null==(n=d.getRepl)?void 0:n.__typename)==="Repl"&&null!=(a=d.getRepl.sharedSecretLinks)?a:[]).filter(function(e){return o.some(function(t){return t.key===e.alias})}).map(function(e){return e.id})).length>0))return[3,5];return[4,c(s)];case 4:r.sent(),r.label=5;case 5:return[4,u(i.map(function(e){return{secretId:e.id,alias:e.name}}))];case 6:r.sent(),null==p||p(i.map(function(e){return{key:e.name,selectedKey:e.name}})),(0,eT.track)(ej.events.SHARED_SECRETS_USED,{ownerType:"account",action:"link",source:"agent",count:i.length}),r.label=7;case 7:return(0,eT.track)(ej.events.SHARED_SECRETS_USED,{ownerType:"account",action:"create",source:"agent"}),w(!0),l(),[3,9];case 8:return g=r.sent(),eb.captureException(g),m.showError("Something went wrong."),[3,9];case 9:return v(!1),[2]}})})()},[o,l,y,m,u,c,d,p,f]);return 0===o.length?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(x.Text,{children:["Would you like to save"," ",1===o.length?"this Secret":"these Secrets"," to your Account Secrets so you can easily access"," ",1===o.length?"it":"them"," in other Apps?"]}),o.length>1&&(0,i.jsx)(x.Text,{color:"dimmest",children:o.map(function(e){return e.key}).join(", ")}),(0,i.jsxs)(b.View,{row:!0,gap:4,children:[(0,i.jsx)(es.Button,{text:"Add to Account Secrets",onClick:T,iconLeft:(0,i.jsx)(eL.default,{}),loading:h,disabled:"savingNewSecrets"!==s||_}),(0,i.jsx)(es.Button,{text:"Not now",variant:"outlined",onClick:l,disabled:"savingNewSecrets"!==s||_,loading:h})]}),_&&(0,i.jsxs)(b.View,{css:eB.confirmationMessage,children:[(0,i.jsx)(el.default,{size:16}),(0,eA.default)("Secret",o.length)," saved to account"]})]})}var eU=e.i(292642),eF=e.i(530310),eH=e.i(504908),eG=e.i(272643);function ez(e){var t,r=e.watch,o=(0,n._)((0,a.useState)(new Map),2),s=o[0],l=o[1];return(0,a.useEffect)(function(){return r(l)},[r]),(0,i.jsx)(b.View,{clsx:eG.default.root,gap:4,children:(0,i.jsxs)(b.View,{gap:4,children:[(0,i.jsx)(b.View,{row:!0,align:"center",gap:6,justify:"space-between",children:(0,i.jsxs)(b.View,{row:!0,align:"center",gap:6,children:[(0,i.jsx)(eF.default,{color:f.tokens.foregroundDimmer}),(0,i.jsxs)(x.Text,{color:"dimmer",children:[(0,eA.default)("secrets",null==(t=e.keys)?void 0:t.length,!0)," requested"]}),(0,i.jsx)(x.Text,{variant:"small",multiline:!1,color:"dimmest",children:"â€¢"}),(0,i.jsx)(es.Button,{clsx:eG.default.seeAllButton,variant:"underlinedOnHover",text:"See all secrets",onClick:e.openSecerets})]})}),(0,i.jsx)(b.View,{clsx:eG.default.requestedSecretsList,gap:6,row:!0,children:e.keys.map(function(e){return(0,i.jsxs)(b.View,{align:"center",row:!0,gap:4,clsx:eG.default.requestedSecretsListItem,p:4,children:[(null==s?void 0:s.get(e))?(0,i.jsx)(eU.default,{color:f.tokens.foregroundDimmer,size:12}):(0,i.jsx)(eH.default,{color:f.tokens.foregroundDimmest,size:12}),(0,i.jsx)(x.Text,{variant:"small",color:"dimmer",children:e})]},e)})})]})})}var eq=e.i(606867);function eW(e){return(0,i.jsxs)(eq.default,(0,u._)((0,l._)({viewBox:"0 0 16 16"},e),{children:[(0,i.jsx)("path",{fillRule:"evenodd",d:"M6.95 2a2.85 2.85 0 1 0 0 5.7 2.85 2.85 0 0 0 0-5.7M5 4.85a1.95 1.95 0 1 1 3.9 0 1.95 1.95 0 0 1-3.9 0",clipRule:"evenodd"}),(0,i.jsx)("path",{d:"M4.55 9.2a2.85 2.85 0 0 0-2.85 2.85v1.2a.45.45 0 0 0 .9 0v-1.2a1.95 1.95 0 0 1 1.95-1.95h3.902a1.62 1.62 0 0 1 .322-.9z"}),(0,i.jsx)("path",{fillRule:"evenodd",d:"M11.783 7.05c-.384 0-.748.136-1.012.371a1.15 1.15 0 0 0-.404.86v.936H13.2v-.935c0-.317-.141-.627-.404-.86a1.53 1.53 0 0 0-1.013-.372M13.7 9.225v-.943c0-.47-.21-.913-.572-1.235a2.03 2.03 0 0 0-1.345-.497c-.5 0-.983.176-1.344.497a1.65 1.65 0 0 0-.572 1.235v.943a.73.73 0 0 0-.469.31 1.14 1.14 0 0 0-.198.66v2.545c0 .246.07.48.198.66a.7.7 0 0 0 .57.317h3.63c.245 0 .443-.14.57-.318.128-.179.199-.412.199-.66v-2.545c0-.247-.071-.48-.199-.66a.73.73 0 0 0-.468-.309m-3.732.492c-.04 0-.102.023-.163.108a.64.64 0 0 0-.105.37v2.545c0 .155.045.284.105.369.061.085.122.108.163.108h3.63c.041 0 .102-.023.163-.108a.64.64 0 0 0 .106-.37v-2.545a.64.64 0 0 0-.106-.369c-.06-.085-.122-.108-.163-.108z",clipRule:"evenodd"}),(0,i.jsx)("path",{fillRule:"evenodd",d:"M10.356 6.954c.385-.343.9-.529 1.427-.529.528 0 1.043.186 1.428.529.387.344.614.82.614 1.328v.845c.19.06.34.189.445.335.144.202.222.462.222.732v2.546c0 .27-.078.53-.222.732-.143.2-.376.37-.672.37h-3.63c-.296 0-.528-.17-.672-.37a1.27 1.27 0 0 1-.221-.732v-2.546c0-.27.077-.53.221-.732a.88.88 0 0 1 .446-.335v-.845c0-.508.227-.984.614-1.328m1.427-.279c-.47 0-.925.166-1.261.466-.338.3-.53.71-.53 1.14v.944a.125.125 0 0 1-.105.124.6.6 0 0 0-.387.258c-.11.156-.175.363-.175.587v2.546c0 .223.064.431.175.586.11.156.275.266.468.266h3.63c.194 0 .358-.11.468-.266.111-.155.176-.363.176-.586v-2.546c0-.224-.065-.431-.176-.587a.6.6 0 0 0-.386-.258.125.125 0 0 1-.105-.124v-.943c0-.431-.193-.841-.53-1.141s-.791-.466-1.262-.466m0 .5c-.356 0-.69.126-.93.34a1.03 1.03 0 0 0-.361.767v.81h2.583v-.81c0-.279-.124-.556-.362-.768a1.4 1.4 0 0 0-.93-.339m-1.095.153a1.65 1.65 0 0 1 1.095-.403c.414 0 .808.146 1.096.403.288.255.446.6.446.954v.935a.125.125 0 0 1-.125.125h-2.833a.125.125 0 0 1-.125-.125v-.935c0-.355.158-.699.446-.954m-.719 2.514c-.004 0-.028.008-.062.056a.5.5 0 0 0-.082.296v2.546a.5.5 0 0 0 .082.296c.034.048.058.055.062.056h3.628c.005 0 .028-.008.062-.056a.5.5 0 0 0 .083-.296v-2.546a.5.5 0 0 0-.083-.296c-.034-.048-.057-.055-.062-.056zm-.265-.09c.078-.109.173-.16.264-.16h3.63c.091 0 .187.051.265.16a.77.77 0 0 1 .129.442v2.546a.77.77 0 0 1-.129.441c-.078.11-.174.161-.265.161h-3.63c-.09 0-.186-.051-.264-.16a.77.77 0 0 1-.13-.442v-2.546c0-.178.053-.333.13-.441",clipRule:"evenodd"})]}))}var eK=e.i(880321),e$=e.i(85742),eY=(0,m.cssRecord)({root:[g.rcss.flex.row,g.rcss.justify.spaceBetween,g.rcss.align.center],metadata:[g.rcss.flex.column,g.rcss.gap(8),g.rcss.width("100%")],label:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},value:{'&[data-sensitive="true"]':{fontFamily:"text-security-disc"},whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},comboBox:[{"& > * > *":{backgroundColor:"".concat(f.tokens.backgroundDefault," !important")}}]}),eX=(0,a.forwardRef)(function(e,t){var n=e.secretKey,r=e.secretValue,a=e.isSensitive,o=(0,c._)(e,["secretKey","secretValue","isSensitive"]);return(0,i.jsx)(e$.BaseListBoxItem,(0,u._)((0,l._)({},o),{ref:t,textValue:n,css:eY.root,children:(0,i.jsxs)("div",{css:eY.metadata,children:[(0,i.jsx)(x.Text,{color:"dimmer",variant:"small",css:eY.label,children:n}),(0,i.jsx)(x.Text,{variant:"small",css:eY.value,"data-sensitive":a,children:a?"********":r})]})}))}),eQ=(0,a.forwardRef)(function(e,t){var n=e.accountSecrets,r=e.onChange,o=e.onSelectionChange,s=e.value,l=e.isSensitive,u=e.readOnly,c=e.keyName,d=e.selectedKey,p=(0,a.useRef)(!1);return(0,i.jsx)(eK.ComboBox,{ref:t,triggerIcon:(0,i.jsx)(eW,{}),css:eY.comboBox,maxHeight:200,menuTrigger:"focus","aria-label":"".concat(c," Value"),isRequired:!0,isDisabled:u,allowsEmptyCollection:!1,selectedKey:d,onSelectionChange:function(e){if(e){p.current=!0;var t,i=n.find(function(t){return t.name===e});r(null!=(t=null==i?void 0:i.value)?t:""),o(e),setTimeout(function(){p.current=!1},50)}},onInputChange:function(e){p.current||(r(e),o(null))},inputValue:s,isInvalid:!1,allowsCustomValue:!0,formValue:"text",children:n.map(function(e){return(0,i.jsx)(eX,{isSensitive:l,secretKey:e.name,secretValue:e.value,label:e.name,id:e.name},e.name)})})}),eJ=e.i(967629),eZ=e.i(216373),e0=(0,eJ.css)({display:"grid",gridTemplateColumns:"minmax(0, 2fr) minmax(0, 3fr)",gridAutoFlow:"row",gap:f.tokens.space8,"> *":{height:"fit-content"}}),e1=(0,m.cssRecord)({root:[e0]}),e2=(0,m.cssRecord)({actions:[g.rcss.gap(4),g.rcss.flex.wrap],secretHeader:[e0,g.rcss.mb(4),g.rcss.fontSize("small"),g.rcss.color.foregroundDimmer,{lineHeight:f.tokens.lineHeightSmall,"> div":[g.rcss.gap(4),{display:"flex",alignItems:"center",flexDirection:"row"}]}],secretValueRoot:[g.rcss.gap(8),{'&[data-sensitive="true"] input':{fontFamily:"text-security-disc"}}],secretValueInput:[g.rcss.flex.column,g.rcss.flex.growAndShrink(1)],input:[{backgroundColor:f.tokens.backgroundDefault}],secretValueFooter:[g.rcss.p(4),{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"}]}),e4=(0,a.forwardRef)(function(e,t){var n=e.keyName,r=e.value,o=e.onChange,s=e.readOnly,l=e.accountSecrets,u=e.isSensitive,c=e.selectedKey,d=e.onSelectedKeyChange,p=(0,a.useMemo)(function(){return(0,ex._)(l).sort(function(e,t){return e.name===n?-1:+(t.name===n)})},[l,n]);return(0,i.jsxs)(b.View,{css:e1.root,children:[(0,i.jsx)(b.View,{children:(0,i.jsx)(ep.Input,{value:n,disabled:!0,css:e2.input})}),(0,i.jsx)(b.View,{css:e2.secretValueRoot,row:!0,align:"start","data-sensitive":u,children:(0,i.jsxs)(b.View,{css:e2.secretValueInput,children:[(0,i.jsx)(eQ,{ref:t,accountSecrets:p,onChange:o,onSelectionChange:d,value:r,isSensitive:u,readOnly:s,keyName:n,selectedKey:c}),c?(0,i.jsxs)(b.View,{row:!0,gap:4,align:"center",children:[(0,i.jsx)(ef.Tooltip,{tooltip:"Link Account Secret to this Repl",children:(0,i.jsx)(eU.default,{color:f.tokens.accentPrimaryStronger})}),(0,i.jsxs)(x.Text,{variant:"small",color:"dimmer",css:e2.secretValueFooter,children:["Using ",c]})]}):null]})})]})});function e8(e){var s=e.keys,c=e.addEntries,d=e.removeEntries,p=e.onComplete,f=e.sessionId,m=e.waitingOnUser,g=e.replId,h=e.linkSecrets,y=e.unlinkSecrets,x=e.replaceAllExternalSecrets,S=e.watch,_=e.openSecrets,w=(0,e_.default)(),T=(0,n._)((0,a.useState)(!1),2),j=T[0],D=T[1],k=(0,n._)((0,a.useState)(!0),2),C=k[0],E=k[1],A=(0,eS.useWorkspaceSecretsQuery)({fetchPolicy:"cache-and-network",ssr:!1}).data,I=(0,a.useMemo)(function(){var e;return(null==A||null==(e=A.currentUser)?void 0:e.secrets.__typename)==="SharedSecretConnection"?A.currentUser.secrets.items:[]},[A]),R=(0,eS.useReplLinkedSecretsQuery)({variables:{replId:g}}).data,P=(0,n._)((0,a.useState)(s.map(function(e){return{key:e,value:""}})),2),M=P[0],O=P[1],N=(0,n._)((0,a.useState)(new Map),2),L=N[0],B=N[1];(0,a.useEffect)(function(){I&&M.every(function(e){return""===e.value})&&(O((0,o.produce)(function(e){e.forEach(function(e){var t=I.find(function(t){return t.name===e.key});t&&(e.value=t.value)})})),B((0,o.produce)(function(e){s.forEach(function(t){var n=I.find(function(e){return e.name===t});n&&e.set(t,n.name)})})))},[I,s,M]);var V=(0,n._)((0,a.useState)(m?"selecting":"done"),2),U=V[0],F=V[1],H=(0,n._)((0,a.useState)([]),2),G=H[0],z=H[1],q=(0,n._)((0,a.useState)([]),2),W=q[0],K=q[1],$=(0,n._)((0,a.useState)([]),2),Y=($[0],$[1]),X=(0,a.useRef)(!1);(0,a.useEffect)(function(){!X.current&&s&&((0,eD.trackAgentAnalyticsEvent)({action:"secrets_requested",secretsRequested:s,sessionId:f}),X.current=!0)},[s,f]);var Q=(0,a.useMemo)(function(){return M.every(function(e){return!!e.value})},[M]),J=(0,a.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nextNewSecrets,n=e.nextExistingEntries,r=e.nextMatchingEntries;t&&z(t),n&&K(n),r&&Y(r);var i=null!=t?t:G,a=null!=n?n:W,o={selecting:function(){return i.length>0?"savingNewSecrets":a.length>0?"savingExistingSecrets":"done"},savingNewSecrets:function(){return a.length>0?"savingExistingSecrets":"done"},savingExistingSecrets:"done",done:"done"};U in o&&F("function"==typeof o[U]?o[U]():o[U])},[W,G,U]),Z=ew(U),ee=(0,a.useRef)("done"===U);(0,a.useEffect)(function(){"selecting"===U||ee.current||(L.size>0&&(0,eT.track)(ej.events.SHARED_SECRETS_USED,{ownerType:"account",action:"copy",source:"agent",size:L.size}),ee.current=!0,p().catch(function(e){eb.captureException(e),w.showError("Something went wrong. Please try again."),ee.current=!1,Z&&F(Z)}))},[p,U,L,w,Z]);var et=(0,a.useRef)(null),en=(0,a.useRef)(null),ei=(0,a.useCallback)(function(){en.current&&en.current.focus()},[]);return(0,i.jsxs)(b.View,{gap:8,children:[m?(0,i.jsx)(er,{left:(0,i.jsx)(eF.default,{size:16}),title:"Secrets",children:(0,i.jsxs)(b.View,{p:8,children:[(0,i.jsxs)(b.View,{css:e2.secretHeader,children:[(0,i.jsx)(b.View,{children:"Key"}),(0,i.jsxs)(b.View,{children:["Value",(0,i.jsx)(v.IconButton,{alt:"Toggle Visibility",tooltipBehavior:"hidden",onClick:function(){return E(!C)},size:18,children:C?(0,i.jsx)(em.default,{}):(0,i.jsx)(eg.default,{})})]})]}),(0,i.jsxs)(b.View,{gap:8,innerRef:et,children:[M.map(function(e,t){var n,r=e.key,a=e.value;return(0,i.jsx)(e4,{isSensitive:C,keyName:r,value:a,readOnly:"done"===U,accountSecrets:I,selectedKey:null!=(n=L.get(r))?n:null,onSelectedKeyChange:function(e){B(function(t){var n=new Map(t);return e?n.set(r,e):n.delete(r),n})},onChange:function(e){O(function(t){return t.map(function(t){return t.key===r?(0,u._)((0,l._)({},t),{value:e}):t})})},ref:t===M.length-1?en:void 0},r)}),(0,i.jsxs)(b.View,{css:e2.actions,row:!0,justify:"space-between",children:[I.length>0&&"selecting"===U?(0,i.jsx)(es.Button,{iconLeft:(0,i.jsx)(eW,{}),text:"Choose from Account Vault",onClick:ei,disabled:"selecting"!==U,loading:j}):(0,i.jsx)("span",{}),(0,i.jsx)(es.Button,{colorway:"primary",iconLeft:j?(0,i.jsx)(eh.default,{}):(0,i.jsx)(eZ.default,{}),text:"Continue",onClick:function(){return(0,t._)(function(){var e,t,n,i,a,o,s,l,u;return(0,r._)(this,function(r){switch(r.label){case 0:D(!0),r.label=1;case 1:if(r.trys.push([1,8,,9]),e=new Map(I.map(function(e){return[e.name,e]})),n=(t=M.reduce(function(t,n){var r=e.get(n.key);return r?r.value===n.value?t.matchingEntries.push(n):t.existingEntries.push(n):t.newEntries.push(n),t},{newEntries:[],existingEntries:[],matchingEntries:[]})).newEntries,i=t.existingEntries,!((a=t.matchingEntries).length>0||i.length>0||n.length>0))return[3,7];if(!((o=(0,ex._)(a).concat((0,ex._)(i),(0,ex._)(n)).map(function(e){return e.key})).length>0))return[3,3];return[4,d.apply(void 0,(0,ex._)(o.map(function(e){return e})))];case 2:r.sent(),r.label=3;case 3:if(s=(0,ex._)(a).concat((0,ex._)(i),(0,ex._)(n)).map(function(e){var t=e.key,n=L.get(t);if(n){var r=I.find(function(e){return e.name===n});if(r)return{secretId:r.id,alias:t}}return null}).filter(function(e){return null!==e}),l=(0,ex._)(a).concat((0,ex._)(i),(0,ex._)(n)).filter(function(e){return!L.has(e.key)}),!(s.length>0))return[3,5];return[4,h(s)];case 4:r.sent(),r.label=5;case 5:if(!(l.length>0))return[3,7];return[4,c(l)];case 6:r.sent(),r.label=7;case 7:return J({nextNewSecrets:n,nextExistingEntries:i,nextMatchingEntries:a}),[3,9];case 8:return u=r.sent(),eb.captureException(u),w.showError("Something went wrong. Please try again."),[3,9];case 9:return D(!1),[2]}})})()},loading:j,disabled:"selecting"!==U||!Q||j})]})]})]})}):(0,i.jsx)(ez,{openSecerets:_,watch:S,keys:s}),(0,i.jsx)(eV,{removeEntries:d,newSecrets:G,step:U,onContinue:J,linkSecrets:h,unlinkSecrets:y,linkedSecrets:R,onSecretsUpdated:function(e){B(function(t){var n=new Map(t);return e.forEach(function(e){var t=e.key,r=e.selectedKey;n.set(t,r)}),n})}}),(0,i.jsx)(eN,{removeEntries:d,replaceAllExternalSecrets:x,existingSecrets:W,accountSecrets:I,onContinue:J,step:U,linkedSecrets:R,onSecretsUpdated:function(e){B(function(t){var n=new Map(t);return e.forEach(function(e){var t=e.key,r=e.selectedKey;n.set(t,r)}),n})}})]})}function e3(e){var n=e.sendAskUserForActionResponse,i=e.requestedEnvVars,o=e.eventId;return{handleCompleteEnvironmentConfigRequest:(0,a.useCallback)(function(e){return(0,t._)(function(){return(0,r._)(this,function(t){switch(t.label){case 0:if(!i||0===i.length)return[2];return[4,n({type:"envVarsResponse",requestEventId:o,providedEnvVars:e.map(function(e){return{key:e.key,value:e.value,environment:e.environment}})})];case 1:return t.sent(),[2]}})})()},[n,i,o])}}e.s(["SecretInput",()=>e8,"SecretItem",()=>e4],245329),e.s(["useHandleCompleteEnvironmentConfigRequest",()=>e3],822229);var e6=e.i(541793),e5=e.i(924908),e7=(0,e6.atom)(new Set);function e9(){var e=(0,e5.useValue)(e7);return(0,a.useCallback)(function(t){return!!t&&e.has(t)},[e])}function te(){var e=(0,e5.useSet)(e7);return(0,a.useCallback)(function(t){e(function(e){if(e.has(t))return e;var n=new Set(e);return n.add(t),n})},[e])}e.s(["useDismissActionRequest",()=>te,"useIsActionRequestDismissed",()=>e9],613909);var tt=(0,e6.atom)(void 0);function tn(){return(0,e5.useValue)(tt)}function tr(){var e=(0,e5.useGet)(tt);return(0,a.useCallback)(function(){return e()},[e])}function ti(){var e=(0,e5.useSet)(tt);return(0,a.useCallback)(function(t){return e(t)},[e])}function ta(){var e=(0,e5.useSet)(tt);return(0,a.useCallback)(function(){return e(void 0)},[e])}e.s(["useClearInitialBuildApprovalUserSecretsResponse",()=>ta,"useGetInitialBuildApprovalUserSecretsResponse",()=>tr,"useInitialBuildApprovalUserSecretsResponse",()=>tn,"useSetInitialBuildApprovalUserSecretsResponse",()=>ti],593366)},231346,e=>{"use strict";e.i(877212);var t=e.i(924908);e.i(925218);var n=e.i(267103),r=e.i(641555);function i(e){var n=(0,t.useChatter)(),i=(0,r.useObservableMemo)(function(){return n.sessions.agent.all.list.map(function(e){return e[e.length-1]})},[n.sessions],{default:void 0});return null!=e&&null!=i&&i.id===e}function a(){var e,r=(0,t.useChatter)(),a=(0,n.useObservable)(r.sessions.agent.current);return i(null!=(e=null==a?void 0:a.id)?e:null)}e.s(["useIsCurrentSessionInitialAgentSession",()=>a,"useIsInitialAgentSession",()=>i])},858404,e=>{e.v({"border-rotate":"index-module__FzfM4q__border-rotate",content:"index-module__FzfM4q__content","fallback-animation":"index-module__FzfM4q__fallback-animation",highlightBackground:"index-module__FzfM4q__highlightBackground",inner:"index-module__FzfM4q__inner",root:"index-module__FzfM4q__root"})},68612,727894,39411,782416,502305,471458,621929,872069,e=>{"use strict";var t=e.i(297083),n=e.i(817556),r=e.i(276385),i=e.i(389959),a=e.i(207237),o=e.i(927158),s=e.i(147721),l=e.i(245329),u=e.i(822229),c=e.i(986194),d=e.i(188507);e.i(877212);var p=e.i(924908),f=e.i(613909),m=e.i(593366);e.i(925218);var g=e.i(641555),h=e.i(374106),v=e.i(231346),y={direction:"forward",state:{phase:null},reducer:function(e,t){(0,h.isEventContentsKind)(e,"initialBuildStateUpdateEventContents")&&(t.phase=e.contents.contents.initialBuildStateUpdateEventContents.phase)}};function x(e){var t,n=(0,v.useIsInitialAgentSession)(null!=(t=null==e?void 0:e.id)?t:null);return(0,g.useObservableMemo)(function(){return n?null==e?void 0:e.reduce(y,100):void 0},[e,n],{default:void 0})}function b(e){return!!e&&[d.InitialBuildPhase.INITIAL_BUILD_PHASE_VISUAL_STARTED,d.InitialBuildPhase.INITIAL_BUILD_PHASE_VISUAL_COMPLETE_PENDING_REVIEW,d.InitialBuildPhase.INITIAL_BUILD_PHASE_MVP_STARTED,d.InitialBuildPhase.INITIAL_BUILD_PHASE_MVP_COMPLETE_PENDING_REVIEW].includes(e)}function S(e){var t=x(e),n=(0,g.useObservableMemo)(function(){return null==e?void 0:e.reduce(_,100)},[e],{default:null});return(0,i.useMemo)(function(){if(!n)return null;var e=n.content;return(0,c.isKind)(e,"approveInitialBuildVisualPhaseRequest")&&(null==t?void 0:t.phase)!==d.InitialBuildPhase.INITIAL_BUILD_PHASE_VISUAL_COMPLETE_PENDING_REVIEW||(0,c.isKind)(e,"approveInitialBuildMvpRequest")&&(null==t?void 0:t.phase)!==d.InitialBuildPhase.INITIAL_BUILD_PHASE_MVP_COMPLETE_PENDING_REVIEW?null:n},[n,null==t?void 0:t.phase])}e.s(["isInitialBuildStarted",()=>b,"useInitialBuildState",()=>x],727894);var _={direction:"reverse",state:{content:null,eventId:null,respondedEventIds:new Set,hasAcknowledgedUserMessage:!1,isResponseInProgress:!1},map:function(e){return{content:e.content,eventId:e.eventId,isResponseInProgress:e.isResponseInProgress}},reducer:function(e,t){if(((0,c.isKind)(e.contents.contents,"acknowledgeUserMessage")||(0,h.isEventAgentToolDataKind)(e,"acknowledgeUserMessage"))&&(t.hasAcknowledgedUserMessage=!0),(0,h.isEventContentsKind)(e,"agentAskUserForActionResponse")){var n=(0,c.unkind)(e.contents.contents),r=n.response,i=n.requestEventId;if(r&&(t.respondedEventIds.add(i),(0,c.isKind)(r,"approveBlueprintResponse")))return!1}if((0,h.isEventContentsKind)(e,"agentAskUserForActionRequest")){var a=(0,c.unkind)(e.contents.contents).request,o=t.respondedEventIds.has(e.id),s=o&&!t.hasAcknowledgedUserMessage;if(a&&(0,c.isKind)(a,"approveTaskListRequest")&&(!o||s))return t.content=(0,c.withKind)("approveTaskListRequest",a.approveTaskListRequest),t.eventId=e.id,t.isResponseInProgress=s,!1;if(a&&(0,c.isKind)(a,"approveInitialBuildVisualPhaseRequest")&&(!o||s))return t.content=(0,c.withKind)("approveInitialBuildVisualPhaseRequest",a.approveInitialBuildVisualPhaseRequest),t.eventId=e.id,t.isResponseInProgress=s,!1;if(a&&(0,c.isKind)(a,"approveInitialBuildMvpRequest")&&(!o||s))return t.content=(0,c.withKind)("approveInitialBuildMvpRequest",a.approveInitialBuildMvpRequest),t.eventId=e.id,t.isResponseInProgress=s,!1;if(a&&(0,c.isKind)(a,"approveBlueprintRequest")&&(!o||s))return t.content=(0,c.withKind)("approveBlueprintRequest",a.approveBlueprintRequest),t.eventId=e.id,t.isResponseInProgress=s,!1;if(a&&(0,c.isKind)(a,"queryRequest")&&(!o||s))return t.content=(0,c.withKind)("queryRequest",a.queryRequest),t.eventId=e.id,t.isResponseInProgress=s,!1}}};function w(e){var r=e.sessionId,a=e.sendAskUserForActionResponse,o=e.requestedSecrets,s=e.eventId,l=(0,p.useChatter)(),u=(0,g.useObservableMemo)(function(){return r?l.sessions.get(r):null},[l,r]),h=x(u),v=b(null==h?void 0:h.phase),y=S(u),_=(0,f.useIsActionRequestDismissed)(),w=(null==y?void 0:y.content)&&((0,c.isKind)(y.content,"approveInitialBuildVisualPhaseRequest")||(0,c.isKind)(y.content,"approveInitialBuildMvpRequest"))&&!_(y.eventId),T=(0,m.useInitialBuildApprovalUserSecretsResponse)(),j=(0,m.useSetInitialBuildApprovalUserSecretsResponse)(),D=v&&(null==T?void 0:T.secretsRequestEventId)===s;return{handleCompleteSecretsRequest:(0,i.useCallback)(function(){return(0,t._)(function(){var e;return(0,n._)(this,function(t){switch(t.label){case 0:if(!o||0===o.length)return[2];if(v&&w)return j({providedSecrets:o.map(function(e){return{key:e.key,status:d.UserSecretResponseStatus.SECRET_COMPLETED}}),secretsRequestEventId:s}),[2];return[4,a({type:"userSecretsResponse",requestEventId:s,providedSecretKeys:null!=(e=null==o?void 0:o.map(function(e){return e.key}))?e:[]})];case 1:return t.sent(),[2]}})})()},[a,o,v,s,j,w]),isThisSecretsResponseStagedForInitialBuildApproval:D}}e.s(["useAgentAskUserForActionRequest",()=>S],39411),e.s(["useHandleCompleteSecretsRequest",()=>w],782416);var T=e.i(462995),j=e.i(878420),D=e.i(64386),k="file://";function C(e){var t=e;return e.startsWith(k)&&(t=e.slice(k.length)),t.startsWith("/")&&(t=t.slice(1)),t}e.s(["trimFileUrlPrefix",()=>C],502305);var E=e.i(828224),A="rag://rag_source_";function I(e){var t=e.openWebview,n=e.ragSources;return(0,i.useMemo)(function(){return function(e){var a,o=null==(a=e.node.properties)?void 0:a.href,s=(0,i.useMemo)(function(){if(t&&"string"==typeof o)try{var e=new URL(o);if("0.0.0.0"===e.hostname||"localhost"===e.hostname)return function(n){n.preventDefault(),t(e.pathname,parseInt(e.port,10))}}catch(e){return}},[o]);if("string"==typeof o&&o.startsWith(A)){var l=o.slice(A.length),u=null==n?void 0:n.find(function(e){return e.id===l});if(!u)return(0,r.jsxs)(i.Fragment,{children:["[",e.children,"]"]});var c=C(u.url);return(0,r.jsx)(E.default,(0,D._)((0,j._)({},e),{href:"#"+c,filePath:"",target:""}))}return(0,r.jsx)(E.default,(0,D._)((0,j._)({},e),{type:void 0!==s?"button":e.type,href:void 0!==s?"#":e.href,onClick:s}))}},[t,n])}e.s(["default",()=>I],471458);var R=e.i(80858),P=e.i(625484),M=e.i(858404);function O(e){var c=e.openPane,d=e.sessionId,p=e.sendAskUserForActionResponse,f=e.requestedSecrets,m=e.requestedEnvVars,g=e.eventId,h=e.message,v=e.state,y=e.secrets,x=e.waitingOnUser,b=e.linkSecrets,S=e.unlinkSecrets,_=I({openWebview:(0,i.useCallback)(function(e,t){return c({type:"webview",data:{ports:{path:e,port:t,type:"local"}}})},[c])}),j=(0,i.useCallback)(function(){return c({type:"envEditor"})},[c]),D=(0,a.default)(),k=w({sessionId:d,sendAskUserForActionResponse:p,requestedSecrets:f,eventId:g}),C=k.handleCompleteSecretsRequest,E=k.isThisSecretsResponseStagedForInitialBuildApproval,A=(0,u.useHandleCompleteEnvironmentConfigRequest)({sendAskUserForActionResponse:p,requestedEnvVars:m,eventId:g}).handleCompleteEnvironmentConfigRequest,O=(0,o.usePid2Callback)(function(e){return function(r){return(0,t._)(function(){var t;return(0,n._)(this,function(n){switch(n.label){case 0:return t=r.map(function(e){return{key:e.key,value:e.value,env:(0,R.getEnvironmentLabel)(e.environment)}}),[4,e.environment.setEnvVars.rpc(t)];case 1:return n.sent(),[2]}})})()}});return(0,r.jsx)(P.View,{clsx:M.default.root,justify:"space-between",children:(0,r.jsxs)(P.View,{clsx:M.default.inner,children:[(0,r.jsx)(P.View,{align:"center",justify:"center",clsx:M.default.highlightBackground,children:(0,r.jsx)(P.View,{})}),(0,r.jsxs)(P.View,{clsx:M.default.content,gap:8,children:[(0,r.jsx)(T.MessageMarkdown,{messageState:v,text:h,linkComponent:_}),f?(0,r.jsx)(l.SecretInput,{openSecrets:j,replId:D,keys:f.map(function(e){return e.key}),addEntries:y.addEntries,removeEntries:y.removeEntries,watch:y.watch,replaceAllExternalSecrets:y.replaceAllExternalSecrets,onComplete:C,sessionId:d,waitingOnUser:x&&!E,linkSecrets:b,unlinkSecrets:S}):null,m&&O?(0,r.jsx)(s.EnvironmentInput,{openEnvEditor:j,envVars:m,onComplete:A,sessionId:d,waitingOnUser:x,addEnvEntries:O}):null]})]})})}e.s(["AgentMessage",()=>O],68612);var N=e.i(569384),L=e.i(973245),B=e.i(951262);function V(){var e=(0,N._)(["\n  mutation RecordTipInteraction(\n    $tipId: String!\n    $interactionType: TipInteractionType!\n    $interactionContext: String\n    $recommendedReason: String\n  ) {\n    recordTipInteraction(\n      tipId: $tipId\n      interactionType: $interactionType\n      interactionContext: $interactionContext\n      recommendedReason: $recommendedReason\n    ) {\n      __typename\n      ... on RecordTipInteractionResult {\n        tipState {\n          id\n          title\n          description\n          content\n          tags\n          priority\n          timeRecommended\n          timeCompleted\n          timeDismissed\n          timeInteracted\n          externalUrl\n        }\n        success\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return V=function(){return e},e}var U={},F=(0,L.gql)(V());function H(e){var t=(0,j._)({},U,e);return B.useMutation(F,t)}e.s(["useRecordTipInteractionMutation",()=>H],621929);var G=e.i(908410),z=e.i(134628),q=e.i(479407);function W(e){var t=e.type,n=e.onComplete;return(0,i.useEffect)(function(){var e=function(e){return(0,q.tourBridgeMessageHandler)(e,function(e){var r=e.tour;"complete"===r.action&&r.type===t&&n()})};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}},[n,t]),{showTour:(0,i.useCallback)(function(){(0,q.sendMessage)({messageType:z.BridgeMessageType.TOUR,tour:{type:t,action:"show"}},(0,G.nanoid)())},[t])}}e.s(["default",()=>W],872069)},492267,e=>{"use strict";var t=e.i(878420),n=e.i(569384),r=e.i(973245),i=e.i(304277);function a(){var e=(0,n._)(["\n  query IsAgentStackRepl($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          isAgentStack\n        }\n      }\n    }\n  }\n"]);return a=function(){return e},e}e.i(566901);var o={},s=(0,r.gql)(a()),l=e.i(207237);function u(){var e,n,r,a,u,c=(a={variables:{replId:(0,l.default)()}},u=(0,t._)({},o,a),i.useQuery(s,u)),d=c.data,p=c.loading,f=c.refetch;return{isAgentStackRepl:(null==d||null==(e=d.getRepl)?void 0:e.__typename)==="Repl"&&null!=(r=null==(n=d.getRepl.config)?void 0:n.isAgentStack)&&r,loading:p,refetch:f}}e.s(["useIsAgentStackRepl",()=>u],492267)},585956,e=>{e.v({bodyCell:"TipRecommendation-module__Bzwv4q__bodyCell",headerCell:"TipRecommendation-module__Bzwv4q__headerCell",iconCell:"TipRecommendation-module__Bzwv4q__iconCell",iconCellExpanded:"TipRecommendation-module__Bzwv4q__iconCellExpanded",root:"TipRecommendation-module__Bzwv4q__root"})},995253,e=>{e.v({root:"AskUserForAction-module__Uw2Y3a__root"})},191654,731532,840732,e=>{"use strict";var t=e.i(297083),n=e.i(530658),r=e.i(817556),i=e.i(276385),a=e.i(389959),o=e.i(621929),s=e.i(180703),l=e.i(207237),u=e.i(441329),c=e.i(952521),d=e.i(872069),p=e.i(492267),f=e.i(858248),m=e.i(709485);function g(e){var t=e.interactionType.toLowerCase(),n={tipId:e.tip.id,tipTitle:e.tip.title,action:t,context:e.context,replId:e.replId,sessionId:e.sessionId,eventId:e.eventId};e.tip.recommendedReason&&(n.recommendedReason=e.tip.recommendedReason),e.tipTags&&(n.tipTags=e.tipTags),void 0!==e.tipPriority&&(n.tipPriority=e.tipPriority),void 0!==e.wasInitiallyExpanded&&(n.wasInitiallyExpanded=e.wasInitiallyExpanded),void 0!==e.hasInteractedBefore&&(n.hasInteractedBefore=e.hasInteractedBefore),e.externalUrl&&(n.externalUrl=e.externalUrl),e.ctaTrigger&&(n.ctaTrigger=e.ctaTrigger),void 0!==e.isInteractive&&(n.isInteractive=e.isInteractive),(0,f.track)(m.events.TIP_SYSTEM_USED,n)}var h=e.i(480028),v=e.i(140487),y=e.i(91720),x=e.i(960178),b=e.i(625484),S=e.i(576073),_=e.i(903283),w=e.i(585956);function T(e,t,n){var r;return(null==e?void 0:e.id)===(null==t||null==(r=t.tip)?void 0:r.id)?"Bonsai tour tip override":n}function j(e){var t=e.tip,n=e.expanded,r=e.onToggleExpanded,a=e.onLearnMoreClick,o=e.loading,s=void 0!==o&&o;return(0,i.jsx)(b.View,{py:8,children:(0,i.jsxs)(b.View,{clsx:w.default.root,p:12,gap:8,style:n?void 0:{cursor:"pointer"},onClick:n?void 0:r,children:[(0,i.jsx)(b.View,{clsx:[w.default.iconCell,n&&w.default.iconCellExpanded],children:(0,i.jsx)(_.default,{size:16,color:h.tokens.foregroundDimmer})}),(0,i.jsxs)(b.View,{gap:8,clsx:w.default.headerCell,style:n?{cursor:"pointer"}:void 0,onClick:n?r:void 0,children:[(0,i.jsxs)(x.Text,{variant:"small",color:"dimmer",children:["Tip: ",t.title]}),(0,i.jsx)(S.default,{color:h.tokens.foregroundDimmer,rotate:180*!!n})]}),n?(0,i.jsxs)(b.View,{clsx:w.default.bodyCell,gap:4,children:[t.description?(0,i.jsx)(x.Text,{multiline:!0,children:t.description}):null,t.externalUrl||t.ctaTrigger?(0,i.jsx)(b.View,{row:!0,pt:4,children:t.externalUrl?(0,i.jsx)(y.ButtonLink,{variant:"outlined",text:t.ctaLabel||"Learn more",onClick:a,href:t.externalUrl,target:"_blank",disabled:s}):t.ctaTrigger?(0,i.jsx)(v.Button,{variant:"outlined",text:t.ctaLabel||"Learn more",onClick:a,disabled:s}):null}):null]}):null]})})}function D(e){var f,m,h,v,y,x,b,S,_,w,D,k,C,E,A,I,R,P,M,O,N,L,B=e.event,V=e.onDismiss,U=e.tipData,F=e.bonsaiTourTipInfo,H=e.openPane,G=e.onNewSession,z=(0,l.default)(),q=(0,p.useIsAgentStackRepl)(),W=(f=U.allTipsById,m=B.tip,(0,a.useMemo)(function(){return f.get(m.id)},[f,m.id])),K=(y=(v=(0,n._)((0,s.default)("bonsai-tour-tip-override-event-id",null),2))[0],x=v[1],S=(b=(0,c.useMemoedDismissibleElement)("bonsai-ws-agent-onboarding")).isDone,_=b.setAsDone,w=(0,u.useDoesBonsaiSupportFeatureFlag)("flag-mb-ws-agent-onboard"),D=(0,a.useMemo)(function(){if(y===B.id&&(null==F?void 0:F.tip))return F.tip;if(null==W?void 0:W.timeRecommended)return W;var e,t=null==F||null==(e=F.tip)?void 0:e.timeRecommended,n=!!y;return(null==F?void 0:F.isInBonsaiWebview)&&!S&&F.tip&&(!W||W.id!==F.tip.id)&&w&&!(t&&n)?F.tip:W},[y,B.id,F,W,S,w]),(0,a.useEffect)(function(){var e;(null==D?void 0:D.id)===(null==F||null==(e=F.tip)?void 0:e.id)&&y!==B.id&&x(B.id)},[null==D?void 0:D.id,null==F||null==(h=F.tip)?void 0:h.id,y,B.id,x]),k=(0,a.useMemo)(function(){return!U.recommendedTips.has((null==D?void 0:D.id)||"")},[U.recommendedTips,null==D?void 0:D.id]),{tip:D,setBonsaiTourAsDone:_,shouldRecordRecommendation:k}),$=K.tip,Y=K.setBonsaiTourAsDone,X=K.shouldRecordRecommendation,Q=(0,a.useMemo)(function(){return!!$&&(!!(U.recommendedTips.size<5||U.recommendedTips.has($.id))||!!$.timeInteracted&&!$.timeCompleted||U.latestTipId===$.id&&!!U.anyLatestFiveInteracted)},[$,U]),J=(C=U.hasInteractedBefore,A=(E=(0,n._)((0,o.useRecordTipInteractionMutation)(),2))[0],I=E[1].loading,R=(0,l.default)(),P=(0,a.useRef)(null),M=(0,a.useMemo)(function(){return $?"".concat(B.id,"-").concat($.id):null},[B.id,$]),(0,a.useEffect)(function(){if($&&!$.timeRecommended&&!I&&X&&M&&P.current!==M){P.current=M;var e,t,n,r=T($,F,B.tip.recommendedReason);g({tip:{id:$.id,title:$.title,recommendedReason:r},interactionType:"recommended",context:"agent_chat",replId:R,sessionId:B.sessionId,eventId:B.id,tipTags:null==(e=$.tags)?void 0:e.filter(Boolean),tipPriority:$.priority,wasInitiallyExpanded:Q,hasInteractedBefore:C,externalUrl:null!=(t=null==$?void 0:$.externalUrl)?t:null,ctaTrigger:null!=(n=null==$?void 0:$.ctaTrigger)?n:null,isInteractive:!!((null==$?void 0:$.externalUrl)||(null==$?void 0:$.ctaTrigger))}),A({variables:{tipId:$.id,interactionType:"RECOMMENDED",recommendedReason:r}})}},[$,I,X,B,R,Q,C,A,M,F]),{recordTipInteractionMutation:A,loading:I}),Z=J.recordTipInteractionMutation,ee=J.loading,et=(0,d.default)({type:"agent",onComplete:function(){null==V||V()}}).showTour,en=(0,n._)((0,a.useState)(!1),2),er=en[0],ei=en[1];(0,a.useEffect)(function(){ei(Q)},[Q]),O=U.hasInteractedBefore,N=(0,a.useRef)(!1),L=(0,l.default)(),(0,a.useEffect)(function(){N.current=!1},[B.tip.id]),(0,a.useEffect)(function(){var e=Date.now(),t=B.created?new Date(B.created).getTime():e;"none"===B.tip.id&&!N.current&&e-t<=5e3&&(N.current=!0,g({tip:B.tip,interactionType:"no_tip_recommended",context:"agent_chat",replId:L,sessionId:B.sessionId,eventId:B.id,hasInteractedBefore:O,externalUrl:null,ctaTrigger:null,isInteractive:!1}))},[B,L,O]);var ea=(0,a.useCallback)(function(){var e,t,n,r=!er;ei(r),g({tip:{id:(null==$?void 0:$.id)||B.tip.id,title:(null==$?void 0:$.title)||B.tip.title,recommendedReason:T($,F,B.tip.recommendedReason)},interactionType:r?"accordion_opened":"accordion_closed",context:"agent_chat",replId:z,sessionId:B.sessionId,eventId:B.id,tipTags:null==$||null==(e=$.tags)?void 0:e.filter(Boolean),tipPriority:null==$?void 0:$.priority,wasInitiallyExpanded:Q,hasInteractedBefore:U.hasInteractedBefore,externalUrl:null!=(t=null==$?void 0:$.externalUrl)?t:null,ctaTrigger:null!=(n=null==$?void 0:$.ctaTrigger)?n:null,isInteractive:!!((null==$?void 0:$.externalUrl)||(null==$?void 0:$.ctaTrigger))})},[er,B.tip,z,B.sessionId,B.id,$,Q,U.hasInteractedBefore,F]);return!$||q?null:(0,i.jsx)(j,{tip:$,expanded:er,onToggleExpanded:ea,onLearnMoreClick:function(){return(0,t._)(function(){var e,t,n;return(0,r._)(this,function(r){switch(r.label){case 0:if(!$||ee)return[2];return g({tip:{id:$.id,title:$.title,recommendedReason:B.tip.recommendedReason},interactionType:"interacted",context:"agent_chat",replId:z,sessionId:B.sessionId,eventId:B.id,tipTags:null==(e=$.tags)?void 0:e.filter(Boolean),tipPriority:$.priority,wasInitiallyExpanded:Q,hasInteractedBefore:U.hasInteractedBefore,externalUrl:null!=(t=null==$?void 0:$.externalUrl)?t:null,ctaTrigger:null!=(n=null==$?void 0:$.ctaTrigger)?n:null,isInteractive:!!((null==$?void 0:$.externalUrl)||(null==$?void 0:$.ctaTrigger))}),[4,Z({variables:{tipId:$.id,interactionType:"INTERACTED",interactionContext:"agent_chat"}})];case 1:if(r.sent(),$.ctaTrigger)switch($.ctaTrigger){case"bonsai_tour":Y(),et();break;case"auth_pane":null==H||H({type:"replitAuth"});break;case"database_pane":null==H||H({type:"neon"});break;case"create_new_chat":null==G||G();break;case"security_scan_pane":null==H||H({type:"securityScan"})}return[2]}})})()},loading:ee})}e.s(["TipRecommendation",()=>D],191654);var k=e.i(878420),C=e.i(346715),E=e.i(245329),A=e.i(782416),I=e.i(462995);function R(e){var t=e.items,r=e.maxVisibleItems,i=e.reverse,o=(0,n._)((0,a.useState)(!1),2),s=o[0],l=o[1],u=t.length-r,c=u>1,d=(0,a.useMemo)(function(){var e=i?(0,C._)(t).reverse():t;return c&&!s?i?e.slice(0,r):e.slice(-r):e},[t,c,s,r,i]);return{isExpanded:s,setIsExpanded:l,maxItemsReached:c,visibleItems:d,hiddenItemsCount:u}}e.s(["useExpandableItems",()=>R],731532);var P=e.i(616278),M=e.i(995253),O=(0,a.memo)(function(e){var t,n,r=e.newFeatureRequests,a=e.secretsRequest,o=e.addingIntegrationRequest;return(null==r?void 0:r.length)&&r.length>0?(0,i.jsx)(L,(0,k._)({},e)):(null==a||null==(t=a.secrets)?void 0:t.length)&&a.secrets.length>0?(0,i.jsx)(N,(0,k._)({},e)):((null==o||null==(n=o.connectionIds)?void 0:n.length)&&o.connectionIds.length,null)});function N(e){var t,n=e.eventId,r=e.sessionId,o=e.message,s=e.state,u=e.secretsRequest,c=e.openPane,d=e.sendAskUserForActionResponse,p=e.secrets,f=e.linkSecrets,m=e.unlinkSecrets,g=e.isSecretsRequestFulfilled,h=(0,A.useHandleCompleteSecretsRequest)({eventId:n,sessionId:r,requestedSecrets:null==u?void 0:u.secrets,sendAskUserForActionResponse:d}),v=h.handleCompleteSecretsRequest,y=h.isThisSecretsResponseStagedForInitialBuildApproval,x=(0,a.useCallback)(function(){return c({type:"envEditor"})},[c]),S=(0,l.default)();return(0,i.jsxs)(b.View,{p:8,gap:8,children:[(0,i.jsx)(I.MessageMarkdown,{messageState:s,text:o}),(0,i.jsx)(E.SecretInput,{openSecrets:x,replId:S,keys:null!=(t=null==u?void 0:u.secrets.map(function(e){return e.key}))?t:[],addEntries:p.addEntries,removeEntries:p.removeEntries,watch:p.watch,replaceAllExternalSecrets:p.replaceAllExternalSecrets,onComplete:v,sessionId:r,waitingOnUser:!y&&!g,linkSecrets:f,unlinkSecrets:m})]})}function L(e){var t=e.eventId,n=e.message,r=e.state,a=e.newFeatureRequests,o=e.sendAskUserForActionResponse,s=null==a?void 0:a.find(function(e){return e.isSelected}),l=s&&a?(0,C._)(a.filter(function(e){return e!==s})).concat([s]):null!=a?a:[],u=!!s,c=R({items:l,maxVisibleItems:2,reverse:!1}),d=c.visibleItems,p=c.isExpanded,f=c.hiddenItemsCount,m=c.setIsExpanded,g=c.maxItemsReached;return(0,i.jsxs)(b.View,{clsx:M.default.root,gap:6,children:[(0,i.jsx)(I.MessageMarkdown,{text:n,messageState:r}),d.length?(0,i.jsxs)(b.View,{row:!0,style:{flexWrap:"wrap",gap:8},children:[d.map(function(e){return(0,i.jsx)(v.Button,{shrink:!0,iconLeft:e.isSelected?(0,i.jsx)(P.default,{}):void 0,disabled:u,colorway:e.isSelected?"primary":void 0,size:"small",variant:"outlined",onClick:function(){return o({type:"nextStepResponse",data:e,requestEventId:t})},text:e.featureName},e.id)}),g?(0,i.jsx)(v.Button,{iconLeft:(0,i.jsx)(S.default,{rotate:180*!!p}),size:"small",onClick:function(){return m(!p)},text:p?"Show less":"Show ".concat(f," more")}):null]}):null]})}e.s(["AskUserForAction",()=>O],840732)},546469,e=>{"use strict";var t,n=((t={}).Starter="starter",t.Paid="paid",t);e.s(["UsageIndicatorVariant",()=>n])},915711,e=>{e.v({strikethrough:"WorkMetricsSummary-module__gRDgYa__strikethrough"})},875797,e=>{e.v({breakdownDescription:"AgentWorkMetrics-module__ZNlk0W__breakdownDescription",container:"AgentWorkMetrics-module__ZNlk0W__container",hasUsageCostBreakdown:"AgentWorkMetrics-module__ZNlk0W__hasUsageCostBreakdown",header:"AgentWorkMetrics-module__ZNlk0W__header",strikethrough:"AgentWorkMetrics-module__ZNlk0W__strikethrough",textContainer:"AgentWorkMetrics-module__ZNlk0W__textContainer",usageCostItemLabel:"AgentWorkMetrics-module__ZNlk0W__usageCostItemLabel"})},44660,659131,374358,e=>{"use strict";var t=e.i(721281),n=e.i(878420),r=e.i(64386),i=e.i(530658),a=e.i(276385),o=e.i(389959),s=e.i(629536),l=e.i(993796),u=e.i(649960),c=e.i(546284);function d(e){if(e<60)return(0,c.default)("second",e,!0);if(e<3600){var t=Math.floor(e/60);return(0,c.default)("minute",t,!0)}var n=Math.floor(e/3600),r=Math.floor(e%3600/60);return r>0?"".concat(n,"h ").concat(r,"m"):"".concat(n,"h")}e.s(["humanizeDuration",()=>d],659131);var p=e.i(960178),f=e.i(751273),m=e.i(625484),g=e.i(651499),h=e.i(915711);function v(e){var t=e.durationPrefix,n=e.usageCents,r=e.workDurationSeconds,i=e.isRefunded,o=e.isInProgress,s=e.tooltipPlacement,l=e.preDiscountsUsageCents;if(void 0===r)return null;var u="".concat(void 0===t?"Worked for":t," ").concat(d(Math.max(r,1))),c="";return void 0!==i&&i?c="You have been refunded for this checkpoint":!(void 0!==o&&o)&&void 0!==n&&n>0&&(c=void 0!==l&&l>0?(0,a.jsxs)(a.Fragment,{children:["This work cost"," ",(0,a.jsxs)(p.Text,{className:h.default.strikethrough,variant:"small",color:"dimmer",children:["$",(l/100).toFixed(2)]}),(0,a.jsxs)(p.Text,{variant:"small",color:"dimmer",children:["$",(n/100).toFixed(2)]})]}):"This work cost $".concat((n/100).toFixed(2))),(0,a.jsx)(f.Tooltip,{tooltip:c,placement:void 0===s?"bottom-start":s,isDisabled:!c,children:(0,a.jsxs)(m.View,{row:!0,gap:8,align:"center",children:[(0,a.jsx)(g.default,{size:16}),(0,a.jsx)(p.Text,{color:"dimmer",variant:"small",children:u})]})})}e.s(["WorkMetricsSummary",()=>v],374358);var y=e.i(613355),x={timeWorked:{title:"Time worked"},workDone:{title:"Work done"},itemsRead:{title:"Items read"},codeChanged:{title:"Code changed"},agentUsage:{title:"Agent Usage"},extendedThinking:{title:"Extended thinking"},highPowerModel:{title:"High power model"}};function b(e){var t=e.type,r=e.description,i=e.maxWidth,o=e.whiteSpace,s=x[t],l=(0,n._)({},i&&{maxWidth:i}),u=(0,n._)({},o&&{whiteSpace:o});return(0,a.jsxs)(m.View,{gap:4,style:l,children:[(0,a.jsx)(p.Text,{variant:"small",css:y.rcss.fontWeight.medium,children:s.title}),r?(0,a.jsx)(p.Text,{variant:"small",style:u,children:r}):null]})}var S=e.i(480028),_=e.i(396776),w=e.i(929872),T=e.i(14007),j=e.i(576073),D=e.i(462783),k=e.i(744895),C=e.i(363201),E=e.i(875797),A=new Date("2025-12-08T22:00:00Z");function I(e){var t=e.workDurationSeconds,s=e.usageCents,l=e.defaultExpanded,u=e.isFreemiumRepl,c=e.ubbV2,d=void 0===c||c,h=e.refunded,x=e.workType,b=e.isInProgress,_=void 0!==b&&b,T=e.preDiscountsUsageCents,j=(0,i._)((0,o.useState)(void 0!==l&&l),2),k=j[0],A=j[1],I=T===s?void 0:T,P=(0,o.useMemo)(function(){var e,t,n;return e=s,t=u,n=d,void 0===e?25:n?e:25*!t},[s,u,d]);if(!d){var M="";return _||(M=u?"This ".concat(x," cost $0"):"This ".concat(x," cost $0.25")),(0,a.jsx)(w.Surface,{clsx:E.default.container,children:(0,a.jsx)(m.View,{row:!0,align:"center",p:8,children:(0,a.jsx)(m.View,{clsx:E.default.textContainer,children:(0,a.jsxs)(m.View,{row:!0,gap:8,align:"center",pl:4,children:[(0,a.jsx)(g.default,{size:16}),(0,a.jsx)(p.Text,{color:"dimmer",variant:"small",children:M})]})})})})}return(0,a.jsxs)(w.Surface,{clsx:E.default.container,elevated:!0,children:[(0,a.jsxs)(m.View,{clsx:E.default.header,row:!0,align:"center",p:8,onClick:function(){return A(!k)},children:[(0,a.jsx)(m.View,{clsx:E.default.textContainer,children:k?(0,a.jsx)(p.Text,{variant:"small",color:"dimmer",children:(0,a.jsxs)(m.View,{row:!0,gap:8,align:"center",children:[(0,a.jsx)(g.default,{size:16}),(0,a.jsx)(p.Text,{color:"dimmer",variant:"small",children:"Show less"})]})}):(0,a.jsx)(v,{workDurationSeconds:t,usageCents:P,isInProgress:_,isRefunded:h,tooltipPlacement:"bottom-start",preDiscountsUsageCents:I})}),(0,a.jsxs)(m.View,{row:!0,align:"center",gap:8,children:[h&&!k?(0,a.jsx)(f.Tooltip,{tooltip:"This checkpoint was affected by an incident. No progress was lost, and the cost has been refunded. Check your email for more information.",children:(0,a.jsx)(C.default,{size:16,color:S.tokens.foregroundDimmest})}):null,(0,a.jsx)(D.default,{size:16,color:S.tokens.foregroundDimmest,rotate:180*!k,css:y.rcss.transition.snappy})]})]}),k?(0,a.jsx)(R,(0,r._)((0,n._)({},e),{costToShow:P,preDiscountsUsageCents:I})):null]})}function R(e){var n,r,g,h,v=e.workDurationSeconds,x=e.toolCalls,w=e.addedLinesOfCode,D=e.removedLinesOfCode,I=e.usageCents,R=e.preDiscountsUsageCents,P=e.capabilityUsage,M=e.relatedEffortBreakdowns,O=e.numLocRead,N=e.numFilesRead,L=e.costToShow,B=e.refunded,V=e.workType,U=e.isFreeQuickEditRun,F=e.eventCreated,H=(0,i._)((0,o.useState)(!1),2),G=H[0],z=H[1],q=(0,u.default)(function(e){z(e.width<240)}),W=null!=O?O:0,K=null!=N?N:0,$=(void 0!==w||void 0!==D)&&(null!=w?w:0)+(null!=D?D:0)>0,Y=M&&M.length>0,X=(0,i._)((0,o.useState)(!1),2),Q=X[0],J=X[1],Z=(0,l.useFlag)({controlName:"flag-high-power-model-rollout",default:!1}),ee=(null!=(r=null==P?void 0:P.advancedModelProfileLlmCalls)?r:0)>0&&(!Z||F&&F<A);return(0,a.jsxs)(m.View,{px:12,pt:4,pb:12,gap:8,innerRef:q,children:[void 0!==v&&v>0?(0,a.jsxs)(m.View,{row:!0,align:"center",justify:G?void 0:"space-between",children:[!G&&(0,a.jsx)(p.Text,{variant:"small",color:"default",children:"Time worked"}),(0,a.jsx)(f.Tooltip,{tooltip:(n=v<60?(0,c.default)("second",v,!0):"".concat((0,c.default)("minute",Math.floor(v/60),!0)," and ").concat((0,c.default)("second",v%60,!0)),G?(0,a.jsx)(b,{type:"timeWorked",description:n}):n),children:(0,a.jsx)(p.Text,{variant:"small",children:d(v)})})]}):null,void 0!==x&&x>0?(0,a.jsxs)(m.View,{row:!0,align:"center",justify:G?void 0:"space-between",children:[!G&&(0,a.jsx)(p.Text,{variant:"small",color:"default",children:"Work done"}),(0,a.jsx)(f.Tooltip,{tooltip:G?(0,a.jsx)(b,{type:"workDone",description:"Number of actions taken by Agent"}):"Number of actions taken by Agent",children:(0,a.jsx)(p.Text,{variant:"small",children:(0,c.default)("action",x,!0)})})]}):null,W>0||K>0?(0,a.jsxs)(m.View,{row:!0,align:"center",justify:G?void 0:"space-between",children:[!G&&(0,a.jsx)(p.Text,{variant:"small",color:"default",children:"Items read"}),(0,a.jsx)(f.Tooltip,{tooltip:G?(0,a.jsx)(b,{type:"itemsRead",description:"".concat((0,c.default)("line",W,!0)," and ").concat((0,c.default)("file",K,!0))}):"".concat((0,c.default)("line",W,!0)," and ").concat((0,c.default)("file",K,!0)),children:(0,a.jsx)(p.Text,{variant:"small",children:W>K?(0,c.default)("line",W,!0):(0,c.default)("file",K,!0)})})]}):null,$?(0,a.jsxs)(m.View,{row:!0,align:"center",justify:G?void 0:"space-between",children:[!G&&(0,a.jsx)(p.Text,{variant:"small",color:"default",children:"Code changed"}),(0,a.jsx)(f.Tooltip,{tooltip:G?(0,a.jsx)(b,{type:"codeChanged",description:"".concat((0,c.default)("line",null!=w?w:0,!0)," added and ").concat((0,c.default)("line",null!=D?D:0,!0)," removed")}):"".concat((0,c.default)("line",null!=w?w:0,!0)," added and ").concat((0,c.default)("line",null!=D?D:0,!0)," removed"),children:(0,a.jsxs)(m.View,{row:!0,gap:4,children:[(0,a.jsxs)(p.Text,{variant:"small",children:["+",w]}),(0,a.jsxs)(p.Text,{color:"dimmer",variant:"small",children:["-",D]})]})})]}):null,void 0!==I&&I>0?(0,a.jsxs)(m.View,{gap:8,children:[(0,a.jsxs)(m.View,{row:!0,align:"center",justify:G?void 0:"space-between",children:[!G&&(0,a.jsxs)(m.View,{row:!0,align:"center",onClick:function(){return Y?J(!Q):void 0},clsx:[E.default.usageCostItemLabel,(0,t._)({},E.default.hasUsageCostBreakdown,Y)],gap:8,children:[(0,a.jsxs)(p.Text,{variant:"small",color:"default",children:[s.AGENT_NAME," Usage"]}),Y?(0,a.jsx)(j.default,{size:16,color:S.tokens.foregroundDimmest,rotate:180*!!Q,css:y.rcss.transition.snappy}):null]}),(0,a.jsxs)(m.View,{row:!0,align:"center",gap:8,children:[!G&&(0,a.jsxs)(m.View,{row:!0,align:"center",gap:8,children:[(null!=(g=null==P?void 0:P.thinkingEnabledLlmCalls)?g:0)>0&&(0,a.jsx)(f.Tooltip,{tooltip:(0,a.jsx)(b,{type:"extendedThinking",description:"Increased cost by about 1.25x"}),children:(0,a.jsx)(T.default,{size:12,color:S.tokens.foregroundDimmer})}),ee?(0,a.jsx)(f.Tooltip,{tooltip:(0,a.jsx)(b,{type:"highPowerModel"}),children:(0,a.jsx)(k.default,{size:12,color:S.tokens.foregroundDimmer})}):null]}),(0,a.jsx)(f.Tooltip,{tooltip:G?(0,a.jsx)(b,{type:"agentUsage",description:"Usage is first deducted from your monthly credit",maxWidth:200,whiteSpace:"normal"}):"Usage is first deducted from your monthly credit",children:(0,a.jsxs)(m.View,{row:!0,gap:8,children:[void 0!==R&&R>0?(0,a.jsxs)(p.Text,{className:E.default.strikethrough,variant:"small",color:"dimmer",children:["$",(R/100).toFixed(2)]}):null,(0,a.jsxs)(p.Text,{variant:"small",children:["$",(L/100).toFixed(2)]})]})}),G?(0,a.jsxs)(m.View,{row:!0,align:"center",gap:8,children:[(null!=(h=null==P?void 0:P.thinkingEnabledLlmCalls)?h:0)>0&&(0,a.jsx)(f.Tooltip,{tooltip:(0,a.jsx)(b,{type:"extendedThinking",description:"Increased cost by about 1.25x"}),children:(0,a.jsx)(T.default,{size:12,color:S.tokens.foregroundDimmer})}),ee?(0,a.jsx)(f.Tooltip,{tooltip:(0,a.jsx)(b,{type:"highPowerModel"}),children:(0,a.jsx)(k.default,{size:12,color:S.tokens.foregroundDimmer})}):null]}):null]})]}),Y&&Q?(0,a.jsx)(m.View,{pl:20,gap:8,children:M.map(function(e,t){return(0,a.jsxs)(m.View,{row:!0,gap:4,align:"center",justify:"space-between",children:[(0,a.jsx)(p.Text,{variant:"small",color:"dimmest",clsx:E.default.breakdownDescription,children:function(e){var t,n,r;if((null==(t=e.effortType)?void 0:t.$kind)==="task"&&(null==(n=e.effortType.task)?void 0:n.taskId))return e.effortType.task.description;switch(null==(r=e.effortType)?void 0:r.$kind){case"task":return"Task execution";case"general":return"General work";case"initialization":return"Agent initialization";case"discountedEffort":return"Promo: High power model at no extra cost";default:return"Work completed"}}(e)}),(0,a.jsxs)(p.Text,{variant:"small",color:"dimmest",children:[e.usageCents<0?"-":"","$",(Math.abs(e.usageCents)/100).toFixed(2)]})]},t)})}):null]}):null,U?(0,a.jsxs)(m.View,{row:!0,align:"center",justify:"space-between",gap:8,children:[(0,a.jsxs)(p.Text,{variant:"small",color:"default",children:[s.AGENT_NAME," Usage"]}),(0,a.jsx)(f.Tooltip,{tooltip:"Fast edits are free for a limited time",children:(0,a.jsx)(p.Text,{variant:"small",style:{color:S.tokens.accentPositiveStronger},children:"Free"})})]}):null,B?(0,a.jsx)(_.StatusBanner,{icon:(0,a.jsx)(C.default,{}),text:"You have been refunded for this ".concat(V),colorway:"blue"}):null]})}e.s(["AgentWorkMetrics",()=>I],44660)},611159,(e,t,n)=>{"use strict";var r=e.e&&e.e.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(n,"__esModule",{value:!0}),n.isValidCron=void 0;var i=function(e){return/^\d+$/.test(e)?Number(e):NaN},a=function(e){return"?"===e},o=function(e,t,n){return e>=t&&e<=n},s=function(e,t,n){var r=e.split("-");switch(r.length){case 1:return"*"===e||o(i(e),t,n);case 2:var a=r.map(function(e){return i(e)}),s=a[0],l=a[1];return s<=l&&o(s,t,n)&&o(l,t,n);default:return!1}},l=function(e,t,n){return -1===e.search(/[^\d-,\/*]/)&&e.split(",").every(function(e){var r=e.split("/");if(e.trim().endsWith("/")||r.length>2)return!1;var a=r[0],o=r[1];return s(a,t,n)&&(void 0===o||-1===o.search(/[^\d]/)&&i(o)>0)})},u={jan:"1",feb:"2",mar:"3",apr:"4",may:"5",jun:"6",jul:"7",aug:"8",sep:"9",oct:"10",nov:"11",dec:"12"},c={sun:"0",mon:"1",tue:"2",wed:"3",thu:"4",fri:"5",sat:"6"},d={alias:!1,seconds:!1,allowBlankDay:!1,allowSevenAsSunday:!1};n.isValidCron=function(e,t){t=r(r({},d),t);var n,i,o,s,p=e.trim().split(/\s+/);if(p.length>(t.seconds?6:5)||p.length<5)return!1;var f=[];if(6===p.length){var m=p.shift();m&&f.push(l(m,0,59))}var g=p[0],h=p[1],v=p[2],y=p[3],x=p[4];return f.push(l(g,0,59)),f.push(l(h,0,23)),f.push(t.allowBlankDay&&a(v)||l(v,1,31)),f.push((n=t.alias,-1===y.search(/\/[a-zA-Z]/)&&(n?l(y.toLowerCase().replace(/[a-z]{3}/g,function(e){return void 0===u[e]?e:u[e]}),1,12):l(y,1,12)))),f.push((i=t.alias,o=t.allowBlankDay,s=t.allowSevenAsSunday,!!(o&&a(x))||!(!o&&a(x))&&-1===x.search(/\/[a-zA-Z]/)&&(i?l(x.toLowerCase().replace(/[a-z]{3}/g,function(e){return void 0===c[e]?e:c[e]}),0,s?7:6):l(x,0,s?7:6)))),f.push(!(t.allowBlankDay&&a(v)&&a(x))),f.every(Boolean)}},933572,(e,t,n)=>{var r,i,a=e.r(365738),o=1/0,s=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,l=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,u="\ud800-\udfff",c="\\u2700-\\u27bf",d="a-z\\xdf-\\xf6\\xf8-\\xff",p="A-Z\\xc0-\\xd6\\xd8-\\xde",f="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",m="['â€™]",g="["+f+"]",h="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",v="["+d+"]",y="[^"+u+f+"\\d+"+c+d+p+"]",x="(?:\ud83c[\udde6-\uddff]){2}",b="[\ud800-\udbff][\udc00-\udfff]",S="["+p+"]",_="(?:"+v+"|"+y+")",w="(?:"+S+"|"+y+")",T="(?:"+m+"(?:d|ll|m|re|s|t|ve))?",j="(?:"+m+"(?:D|LL|M|RE|S|T|VE))?",D="(?:"+h+"|\ud83c[\udffb-\udfff])?",k="[\\ufe0e\\ufe0f]?",C="(?:\\u200d(?:"+["[^"+u+"]",x,b].join("|")+")"+k+D+")*",E="(?:"+["["+c+"]",x,b].join("|")+")"+(k+D+C),A=RegExp(m,"g"),I=RegExp(h,"g"),R=RegExp([S+"?"+v+"+"+T+"(?="+[g,S,"$"].join("|")+")",w+"+"+j+"(?="+[g,S+_,"$"].join("|")+")",S+"?"+_+"+"+T,S+"+"+j,"\\d+",E].join("|"),"g"),P=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,M="object"==a._(e.g)&&e.g&&e.g.Object===Object&&e.g,O=("undefined"==typeof self?"undefined":a._(self))=="object"&&self&&self.Object===Object&&self,N=M||O||Function("return this")(),L=(r={Ã€:"A",Ã:"A",Ã‚:"A",Ãƒ:"A",Ã„:"A",Ã…:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã‡:"C",Ã§:"c",Ã:"D",Ã°:"d",Ãˆ:"E",Ã‰:"E",ÃŠ:"E",Ã‹:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",ÃŒ:"I",Ã:"I",ÃŽ:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã‘:"N",Ã±:"n",Ã’:"O",Ã“:"O",Ã”:"O",Ã•:"O",Ã–:"O",Ã˜:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã™:"U",Ãš:"U",Ã›:"U",Ãœ:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã†:"Ae",Ã¦:"ae",Ãž:"Th",Ã¾:"th",ÃŸ:"ss",Ä€:"A",Ä‚:"A",Ä„:"A",Ä:"a",Äƒ:"a",Ä…:"a",Ä†:"C",Äˆ:"C",ÄŠ:"C",ÄŒ:"C",Ä‡:"c",Ä‰:"c",Ä‹:"c",Ä:"c",ÄŽ:"D",Ä:"D",Ä:"d",Ä‘:"d",Ä’:"E",Ä”:"E",Ä–:"E",Ä˜:"E",Äš:"E",Ä“:"e",Ä•:"e",Ä—:"e",Ä™:"e",Ä›:"e",Äœ:"G",Äž:"G",Ä :"G",Ä¢:"G",Ä:"g",ÄŸ:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å€:"l",Å‚:"l",Åƒ:"N",Å…:"N",Å‡:"N",ÅŠ:"N",Å„:"n",Å†:"n",Åˆ:"n",Å‹:"n",ÅŒ:"O",ÅŽ:"O",Å:"O",Å:"o",Å:"o",Å‘:"o",Å”:"R",Å–:"R",Å˜:"R",Å•:"r",Å—:"r",Å™:"r",Åš:"S",Åœ:"S",Åž:"S",Å :"S",Å›:"s",Å:"s",ÅŸ:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å’:"Oe",Å“:"oe",Å‰:"'n",Å¿:"ss"},function(e){return null==r?void 0:r[e]}),B=Object.prototype.toString,V=N.Symbol,U=V?V.prototype:void 0,F=U?U.toString:void 0;function H(e){return null==e?"":function(e){if("string"==typeof e)return e;if(function(e){return(void 0===e?"undefined":a._(e))=="symbol"||!!e&&(void 0===e?"undefined":a._(e))=="object"&&"[object Symbol]"==B.call(e)}(e))return F?F.call(e):"";var t=e+"";return"0"==t&&1/e==-o?"-0":t}(e)}t.exports=(i=function(e,t,n){return e+(n?"-":"")+t.toLowerCase()},function(e){var t;return function(e,t,n,r){for(var i=-1,a=e?e.length:0;++i<a;)n=t(n,e[i],i,e);return n}(function(e,t,n){if(e=H(e),void 0===t){var r;return(r=e,P.test(r))?e.match(R)||[]:e.match(s)||[]}return e.match(t)||[]}(((t=H(t=e))&&t.replace(l,L).replace(I,"")).replace(A,"")),i,"")})},403934,196127,165349,967963,262664,850834,783992,424746,483820,830597,265957,68893,914279,271047,233693,165550,e=>{"use strict";var t,n,r,i,a,o=e.i(878420),s=e.i(569384),l=e.i(973245),u=e.i(304277),c=e.i(566901),d=e.i(613141),p=e.i(951262);function f(){var e=(0,s._)(["\n  fragment WorkspaceNeonDatabase on NeonDatabase {\n    id\n    type\n    databaseId\n    databaseName\n    projectId\n    connectionString\n    isFrozen\n    frozenReason\n    isEphemeral\n    scheduledFreezeTime\n    scheduledDeletionTime\n    quotaLogicalSizeBytes\n    minComputeUnits\n    maxComputeUnits\n    historyRetentionSeconds\n    timeCreated\n  }\n"]);return f=function(){return e},e}function m(){var e=(0,s._)(["\n  mutation CreateNeonDatabase($input: CreateNeonDatabaseInput!) {\n    createNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on CreateNeonDatabaseResult {\n        database {\n          id\n          ...WorkspaceNeonDatabase\n        }\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,s._)(["\n  mutation DeleteNeonDatabase($input: DeleteNeonDatabaseInput!) {\n    deleteNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on DeleteNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return g=function(){return e},e}function h(){var e=(0,s._)(["\n  mutation UnfreezeNeonDatabase($input: UnfreezeNeonDatabaseInput!) {\n    unfreezeNeonDatabase(input: $input) {\n      ... on UnfreezeNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return h=function(){return e},e}var v={},y=(0,l.gql)(f()),x=(0,l.gql)(m(),y);function b(e){var t=(0,o._)({},v,e);return p.useMutation(x,t)}var S=(0,l.gql)(g());function _(e){var t=(0,o._)({},v,e);return p.useMutation(S,t)}var w=(0,l.gql)(h());function T(e){var t=(0,o._)({},v,e);return p.useMutation(w,t)}e.s(["WorkspaceNeonDatabaseFragmentDoc",()=>y,"useCreateNeonDatabaseMutation",()=>b,"useDeleteNeonDatabaseMutation",()=>_,"useUnfreezeNeonDatabaseMutation",()=>T],196127);var j=e.i(963084);function D(){var e=(0,s._)(["\n  fragment DeploymentSessionCurrentUser on CurrentUser {\n    id\n    isSubscribed\n  }\n"]);return D=function(){return e},e}function k(){var e=(0,s._)(["\n  fragment DeploymentSessionOrg on Org {\n    id\n    type\n  }\n"]);return k=function(){return e},e}function C(){var e=(0,s._)(["\n  fragment DeploymentSessionHostingDeployment on HostingDeployment {\n    ...TargetHostingDeployment\n    currentBuild {\n      ...CurrentBuild2\n    }\n    inProgressBuild {\n      ...CurrentBuild2\n    }\n  }\n  ","\n  ","\n"]);return C=function(){return e},e}function E(){var e=(0,s._)(["\n  fragment DeploymentAuthorization on ReplAuthorization {\n    isAuthorized\n    code\n    message\n  }\n"]);return E=function(){return e},e}function A(){var e=(0,s._)(["\n  fragment DeploymentAuthorizations on Repl {\n    id\n    authorizations {\n      createAutoscaleDeployment: createDeployment(\n        provider: cloud_run\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      createAutoscaleDeploymentPrivate: createDeployment(\n        provider: cloud_run\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      createRvmDeployment: createDeployment(provider: gce, isPrivate: false) {\n        ...DeploymentAuthorization\n      }\n      createRvmDeploymentPrivate: createDeployment(\n        provider: gce\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      createScheduledDeployment: createDeployment(\n        provider: cron\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      createStaticDeployment: createDeployment(\n        provider: static\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      createStaticDeploymentPrivate: createDeployment(\n        provider: static\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployAutoscaleDeployment: redeployDeployment(\n        provider: cloud_run\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployAutoscaleDeploymentPrivate: redeployDeployment(\n        provider: cloud_run\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployRvmDeployment: redeployDeployment(\n        provider: gce\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployRvmDeploymentPrivate: redeployDeployment(\n        provider: gce\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployScheduledDeployment: redeployDeployment(\n        provider: cron\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployStaticDeployment: redeployDeployment(\n        provider: static\n        isPrivate: false\n      ) {\n        ...DeploymentAuthorization\n      }\n      redeployStaticDeploymentPrivate: redeployDeployment(\n        provider: static\n        isPrivate: true\n      ) {\n        ...DeploymentAuthorization\n      }\n      useDeploymentDebugSummaries {\n        ...DeploymentAuthorization\n      }\n      useFreeTierCloudServices {\n        ...DeploymentAuthorization\n      }\n    }\n  }\n  ","\n"]);return A=function(){return e},e}function I(){var e=(0,s._)(["\n  fragment DeploymentSessionRepl on Repl {\n    id\n    __typename\n    slug\n    lastUsedSubdomain\n    config {\n      isVnc\n    }\n    source {\n      release {\n        repl {\n          title\n        }\n      }\n    }\n    org {\n      ...DeploymentSessionOrg\n    }\n    owner {\n      __typename\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        ...DeploymentSessionHostingDeployment\n      }\n      ... on Error {\n        message\n      }\n    }\n    hostingDeploymentPermissions {\n      hasNeonProductionDatabasesEnabled\n    }\n    ...DeploymentAuthorizations\n  }\n  ","\n  ","\n  ","\n"]);return I=function(){return e},e}function R(){var e=(0,s._)(["\n  query DeploymentSession($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentSessionRepl\n      }\n      ... on Error {\n        message\n      }\n    }\n    currentUser {\n      ...DeploymentSessionCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return R=function(){return e},e}function P(){var e=(0,s._)(["\n  subscription DeploymentSessionBuildDeployActionUpdates(\n    $input: HostingBuildDeployActionUpdatesInput!\n  ) {\n    hostingBuildDeployActionUpdates(input: $input) {\n      ... on HostingBuildDeployLogAction {\n        log\n      }\n      ... on HostingBuildDeployStatusAction {\n        status\n        message\n        debugSummary {\n          ...BuildDebugSummary\n        }\n      }\n    }\n  }\n  ","\n"]);return P=function(){return e},e}function M(){var e=(0,s._)(["\n  mutation DeploymentSessionDeployBuild($input: DeployHostingBuild2Input!) {\n    deployHostingBuild2(input: $input) {\n      ... on DeployHostingBuild2Result {\n        build {\n          ...CurrentBuild2\n        }\n        targetDeployment {\n          ...TargetHostingDeployment\n        }\n        targetDatabase {\n          ...WorkspaceNeonDatabase\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return M=function(){return e},e}function O(){var e=(0,s._)(["\n  mutation DeploymentSessionSendDeploymentLifecycleCommand(\n    $input: SendDeploymentLifecycleCommandInput!\n  ) {\n    sendDeploymentLifecycleCommand(input: $input) {\n      ... on SendDeploymentLifecycleCommandResult {\n        repl {\n          id\n          isFreeUserWithStaticDeployment\n          hostingDeployment {\n            ... on HostingDeployment {\n              ...DeploymentSessionHostingDeployment\n            }\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return O=function(){return e},e}function N(){var e=(0,s._)(["\n  mutation DeploymentSessionCancelInProgressDeploymentsBuild(\n    $input: FailHostingBuildInput!\n  ) {\n    failHostingBuild(input: $input) {\n      ... on FailHostingBuildResult {\n        build {\n          ...CurrentBuild2\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return N=function(){return e},e}function L(){var e=(0,s._)(["\n  query DeploymentGetIgnoredSecretsHostingDeployment($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            ignoredSecrets\n          }\n          ... on Error {\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return L=function(){return e},e}function B(){var e=(0,s._)(["\n  query DeploymentGetEnvVarsHostingDeployment($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            currentBuild {\n              id\n              envVars {\n                name\n              }\n            }\n          }\n          ... on Error {\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return B=function(){return e},e}var V={},U=(0,l.gql)(D()),F=(0,l.gql)(k()),H=(0,l.gql)(C(),j.TargetHostingDeploymentFragmentDoc,j.CurrentBuild2FragmentDoc),G=(0,l.gql)(E()),z=(0,l.gql)(A(),G),q=(0,l.gql)(I(),F,H,z),W=(0,l.gql)(R(),q,U);function K(e){var t=(0,o._)({},V,e);return c.useLazyQuery(W,t)}var $=(0,l.gql)(P(),j.BuildDebugSummaryFragmentDoc);function Y(e){var t=(0,o._)({},V,e);return d.useSubscription($,t)}var X=(0,l.gql)(M(),j.CurrentBuild2FragmentDoc,j.TargetHostingDeploymentFragmentDoc,y);function Q(e){var t=(0,o._)({},V,e);return p.useMutation(X,t)}var J=(0,l.gql)(O(),H),Z=(0,l.gql)(N(),j.CurrentBuild2FragmentDoc),ee=(0,l.gql)(L());function et(e){var t=(0,o._)({},V,e);return c.useLazyQuery(ee,t)}var en=(0,l.gql)(B());function er(){var e=(0,s._)(["\n  fragment HostingActivityLogBuild on HostingBuild {\n    id\n    status\n    hasDeployLogs\n    provider\n    timeCreated\n    user {\n      id\n      displayName\n      username\n      fullName\n      image\n    }\n    debugSummary {\n      ...BuildDebugSummary\n    }\n    rollbackSourceBuildId\n    envVars {\n      name\n      value\n    }\n  }\n  ","\n"]);return er=function(){return e},e}function ei(){var e=(0,s._)(["\n  fragment HostingActivityLogLine2 on HostingActivityLog {\n    id\n    build {\n      ...HostingActivityLogBuild\n    }\n    type\n    user {\n      id\n      displayName\n    }\n    timeCreated\n    isRollbackCandidate\n  }\n  ","\n"]);return ei=function(){return e},e}function ea(){var e=(0,s._)(["\n  query HostingDeploymentActivityLogs2(\n    $replId: String!\n    $after: String\n    $count: Int\n  ) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            currentBuild {\n              id\n              rollbackSourceBuildId\n              envVars {\n                name\n                value\n              }\n            }\n            activityLogs(after: $after, count: $count) {\n              items {\n                ...HostingActivityLogLine2\n              }\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n            }\n          }\n          ... on Error {\n            message\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return ea=function(){return e},e}function eo(){var e=(0,s._)(["\n  query HostingActivityLogBuildHistory(\n    $input: HostingBuildDeployActionHistoryInput!\n  ) {\n    hostingBuildDeployActionHistory(input: $input) {\n      ... on HostingBuildDeployActionHistoryResults {\n        results {\n          ... on HostingBuildDeployStatusAction {\n            status\n            message\n          }\n          ... on HostingBuildDeployLogAction {\n            log\n          }\n        }\n      }\n    }\n  }\n"]);return eo=function(){return e},e}function es(){var e=(0,s._)(["\n  mutation RollbackHostingBuild($input: RollbackHostingBuildInput!) {\n    rollbackHostingBuild(input: $input) {\n      ... on RollbackHostingBuildResult {\n        build {\n          ...CurrentBuild2\n        }\n        targetDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return es=function(){return e},e}e.s(["DeploymentGetEnvVarsHostingDeploymentDocument",()=>en,"DeploymentGetIgnoredSecretsHostingDeploymentDocument",()=>ee,"DeploymentSessionCancelInProgressDeploymentsBuildDocument",()=>Z,"DeploymentSessionSendDeploymentLifecycleCommandDocument",()=>J,"useDeploymentGetIgnoredSecretsHostingDeploymentLazyQuery",()=>et,"useDeploymentSessionBuildDeployActionUpdatesSubscription",()=>Y,"useDeploymentSessionDeployBuildMutation",()=>Q,"useDeploymentSessionLazyQuery",()=>K],403934);var el={},eu=(0,l.gql)(er(),j.BuildDebugSummaryFragmentDoc),ec=(0,l.gql)(ei(),eu),ed=(0,l.gql)(ea(),ec);function ep(e){var t=(0,o._)({},el,e);return u.useQuery(ed,t)}var ef=(0,l.gql)(eo());function em(e){var t=(0,o._)({},el,e);return u.useQuery(ef,t)}var eg=(0,l.gql)(es(),j.CurrentBuild2FragmentDoc,j.TargetHostingDeploymentFragmentDoc);function eh(e){var t=(0,o._)({},el,e);return p.useMutation(eg,t)}e.s(["HostingActivityLogLine2FragmentDoc",()=>ec,"useHostingActivityLogBuildHistoryQuery",()=>em,"useHostingDeploymentActivityLogs2Query",()=>ep,"useRollbackHostingBuildMutation",()=>eh],165349),e.i(439725);var ev=e.i(119468),ey=e.i(933572),ex=e.i(761201),eb=function(e){return"string"==typeof e&&""!==e.trim()},eS=function(e){return e.includes("pane to configure your run command. For more info, see:")},e_=function(e){return(void 0===e?"undefined":(0,ev._)(e))==="object"&&"string"==typeof e.name&&"string"==typeof e.value&&""!==e.name};function ew(e){var t=e.replSlug,n=e.username,r=t;"xn"===r&&(r="x-n");var i=n?"--".concat(n):"",a=ex.REPLIT_APP_SUBDOMAIN_MAX_LENGTH-(0+i.length);if(a>0){r=(0,ey.default)(r).slice(0,a);var o="".concat("").concat(r).concat(i);if(o.length<=ex.REPLIT_APP_SUBDOMAIN_MAX_LENGTH)return o}return"".concat("").concat((0,ey.default)(r)).concat(i)}e.s(["getQualifiedReplSubdomain",()=>ew,"hasCommand",()=>eb,"hasInvalidRunCommand",()=>eS,"isValidEnvVar",()=>e_],967963);var eT=e.i(297083),ej=e.i(530658),eD=e.i(817556),ek=e.i(389959),eC=e.i(299798),eE=e.i(927158);function eA(){var e=(0,ej._)((0,ek.useState)(!0),2),t=e[0],n=e[1],r=(0,ej._)((0,ek.useState)(void 0),2),i=r[0],a=r[1];(0,eC.usePid2)(function(e){return(0,eT._)(function(){var t;return(0,eD._)(this,function(r){switch(r.label){case 0:return[4,e.helium.getHeliumInfo.rpc({})];case 1:return(t=r.sent()).ok&&t.payload.isHeliumEnabled&&"USING_HELIUM"===t.payload.heliumMigrationState&&a({kind:"helium",connectionString:t.payload.databaseUrl,databaseId:435486,maxSizeBytes:0x280000000}),n(!1),[2]}})})()},[]);var o=(0,eE.usePid2Callback)(function(e){return function(){return(0,eT._)(function(){var t;return(0,eD._)(this,function(n){switch(n.label){case 0:if(!i)throw Error("No helium development database found");return[4,e.database.getPgMajorVersion.rpc({connectionString:i.connectionString})];case 1:if(!(t=n.sent()).ok)throw Error("Failed to fetch PostgreSQL major version for development database");return[2,t.payload.majorVersion]}})})()}},[i]),s=(0,eE.usePid2Callback)(function(e){return function(){return(0,eT._)(function(){var t;return(0,eD._)(this,function(n){switch(n.label){case 0:if(!i)throw Error("No helium development database found");return[4,e.database.getTables.rpc({connectionString:i.connectionString})];case 1:if(!(t=n.sent()).ok)throw Error("Failed to fetch table count for development database");return[2,t.payload.tables.length]}})})()}},[i]);return{loading:t,database:i,getPgVersion:o,getTableCount:s}}e.s(["useHeliumDevelopmentDatabase",()=>eA],262664);var eI=e.i(64386);function eR(){var e=(0,s._)(["\n  query GetNeonDatabases($input: GetNeonDatabasesInput!) {\n    getNeonDatabases(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on GetNeonDatabasesResult {\n        databases {\n          id\n          ...WorkspaceNeonDatabase\n        }\n      }\n    }\n  }\n  ","\n"]);return eR=function(){return e},e}var eP={},eM=(0,l.gql)(eR(),y);function eO(e){var t=(0,o._)({},eP,e);return u.useQuery(eM,t)}e.s(["GetNeonDatabasesDocument",()=>eM,"useGetNeonDatabasesQuery",()=>eO],850834);var eN=e.i(207237),eL=function(e){return null!=e.connectionString&&null!=e.databaseId&&null!=e.databaseName&&null!=e.projectId};function eB(e){return(null==e?void 0:e.getNeonDatabases.__typename)==="GetNeonDatabasesResult"&&e.getNeonDatabases.databases.filter(eL)||[]}function eV(e){var t=e.fetchPolicy,n=e.skip,r=e.type,i=e.onDatabasesLoaded,a=(0,eN.default)(),s=eO((0,eI._)((0,o._)({variables:{input:{replId:a}}},"cache-first"===(void 0===t?"cache-first":t)?{fetchPolicy:"cache-first"}:{fetchPolicy:"network-only",ssr:!0}),{skip:void 0===n?void 0:n,onCompleted:function(e){eB(e).length>0&&(null==i||i())}})),l=s.data,u=s.loading,c=s.error,d=s.refetch;return{database:eB(l).find(function(e){return e.type===r}),loading:u,error:c,refetch:d}}function eU(e){return{refetch:eV({fetchPolicy:"network-only",skip:!0,type:e}).refetch}}function eF(e){return eV({type:"development",onDatabasesLoaded:e})}function eH(e){return eV({type:"production",onDatabasesLoaded:e})}e.s(["isValidNeonDatabase",()=>eL],783992),e.s(["useNeonDevelopmentDatabase",()=>eF,"useNeonProductionDatabase",()=>eH,"useRefetchDatabasesLazy",()=>eU],424746);var eG=e.i(399119),ez=e.i(904851),eq=e.i(721281),eW=e.i(445789),eK=e.i(463348),e$=function(e){function t(){var e;return(0,ez._)(this,t),e=(0,eG._)(this,t,arguments),(0,eq._)(e,"name","DeploymentNotFoundError"),(0,eq._)(e,"message","Could not find existing deployment"),e}return(0,eW._)(t,e),t}((0,eK._)(Error)),eY=function(e){function t(){var e;return(0,ez._)(this,t),e=(0,eG._)(this,t,arguments),(0,eq._)(e,"name","CurrentBuildNotFoundError"),(0,eq._)(e,"message","Could not find existing current build"),e}return(0,eW._)(t,e),t}((0,eK._)(Error)),eX=function(e){function t(){var e;return(0,ez._)(this,t),e=(0,eG._)(this,t,arguments),(0,eq._)(e,"name","RollbackBuildNotProvidedError"),(0,eq._)(e,"message","Rollback target build not provided"),e}return(0,eW._)(t,e),t}((0,eK._)(Error)),eQ=function(e){function t(){var e;return(0,ez._)(this,t),e=(0,eG._)(this,t,arguments),(0,eq._)(e,"name","RunCommandNotFoundError"),(0,eq._)(e,"message","Could not find run command"),e}return(0,eW._)(t,e),t}((0,eK._)(Error)),eJ=function(e){function t(){var e;return(0,ez._)(this,t),e=(0,eG._)(this,t,arguments),(0,eq._)(e,"name","InvalidRunCommandError"),(0,eq._)(e,"message","Invalid run command"),e}return(0,eW._)(t,e),t}((0,eK._)(Error)),eZ=function(e){function t(){var e;return(0,ez._)(this,t),e=(0,eG._)(this,t,arguments),(0,eq._)(e,"name","SubdomainNotFoundError"),(0,eq._)(e,"message","Could not find subdomain"),e}return(0,eW._)(t,e),t}((0,eK._)(Error)),e0=function(e){function t(){var e;return(0,ez._)(this,t),e=(0,eG._)(this,t,arguments),(0,eq._)(e,"name","AppTypeFoundError"),(0,eq._)(e,"message","Could not find app type"),e}return(0,eW._)(t,e),t}((0,eK._)(Error)),e1=function(e){function t(){var e;return(0,ez._)(this,t),e=(0,eG._)(this,t,arguments),(0,eq._)(e,"name","PublicDirNotFoundError"),(0,eq._)(e,"message","Could not find public directory"),e}return(0,eW._)(t,e),t}((0,eK._)(Error)),e2=function(e){function t(){var e;return(0,ez._)(this,t),e=(0,eG._)(this,t,arguments),(0,eq._)(e,"name","ReplConnectionError"),(0,eq._)(e,"message","An App connection error occurred. App is reconnecting or has been disconnected."),e}return(0,eW._)(t,e),t}((0,eK._)(Error)),e4=function(e){function t(){var e;return(0,ez._)(this,t),e=(0,eG._)(this,t,arguments),(0,eq._)(e,"name","InvalidTimezoneError"),e}return(0,eW._)(t,e),t}((0,eK._)(Error)),e8=function(e){function t(){var e;return(0,ez._)(this,t),e=(0,eG._)(this,t,arguments),(0,eq._)(e,"name","CrontabNotFoundError"),e}return(0,eW._)(t,e),t}((0,eK._)(Error)),e3=function(e){function t(){var e;return(0,ez._)(this,t),e=(0,eG._)(this,t,arguments),(0,eq._)(e,"name","PrivatePasswordError"),e}return(0,eW._)(t,e),t}((0,eK._)(Error));e.s(["AppTypeFoundError",()=>e0,"CurrentBuildNotFoundError",()=>eY,"DeploymentNotFoundError",()=>e$,"InvalidCrontabError",()=>e8,"InvalidRunCommandError",()=>eJ,"InvalidTimezoneError",()=>e4,"PrivatePasswordError",()=>e3,"PublicDirNotFoundError",()=>e1,"ReplConnectionError",()=>e2,"RollbackBuildNotProvidedError",()=>eX,"RunCommandNotFoundError",()=>eQ,"SubdomainNotFoundError",()=>eZ],483820);var e6=e.i(131141),e5=e.i(541793),e7=e.i(15053),e9=e.i(161322),te=e.i(719518),tt=e.i(824359),tn=(0,ek.createContext)(null);function tr(){var e=(0,ek.useContext)(tn);if(!e)throw Error("Expected store in context");return e}function ti(e){return(0,e9.useAtomValue)(e,{store:tr()})}function ta(e){return(0,tt.useObservableAtom)(e,tr())}var to=function(e){return(0,e9.useSetAtom)(e,{store:tr()})};function ts(e){return(0,te.useAtomCallback)((0,ek.useCallback)(function(t){return t(e)},[e]),{store:tr()})}e.s(["DeploymentContext",()=>tn,"useGet",()=>ts,"useObservableValue",()=>ta,"useSet",()=>to,"useValue",()=>ti],830597);var tl=e.i(311106),tu=e.i(368964),tc=e.i(858248),td=e.i(709485);function tp(e,t,n){(0,tc.track)(td.events.DEPLOYMENT_MIGRATION_PREPARATION_COMPLETED,(0,o._)((0,eI._)((0,o._)({},e),{stage:t}),n))}var tf=((t={}).FoundDiff="FoundDiff",t.GeneratingDiffStatements="GeneratingDiffStatements",t.ValidatingDiffStatements="ValidatingDiffStatements",t),tm=((n={}).Completed="completed",n.Running="running",n.Paused="paused",n.Failed="failed",n),tg=((r={}).Building="building",r.Failed="failed",r.Ready="ready",r);function th(e,t){var n=e.get(t);if(n&&n.type===t)return n}var tv=(0,e5.atom)({id:"",deployOptions:void 0,stages:new Map,focusedStage:"FoundDiff"}),ty=(0,e5.atom)(null,function(e,t,n){var r,i=(r=e(tv),(0,e6.produce)(r,function(e){switch(n.type){case"INIT":e.id=(0,e7.v4)(),e.deployOptions=n.deployOptions,e.stages=new Map,e.stages.set("FoundDiff",{type:"FoundDiff",status:"completed"}),e.focusedStage="FoundDiff";var t,i,a,s,l,u,c,d,p,f,m,g,h=(c=(t={deployInputOptions:n.deployOptions.deployInputOptions,deployConfig:n.deployOptions.deployConfig,appType:n.deployOptions.appType,org:n.deployOptions.org}).deployInputOptions,d=t.deployConfig,p=t.appType,m=(f=t.org)&&("team"===f.type||"personal"===f.type)?(null==f?void 0:f.type)==="team"?tu.OrgType.Team:tu.OrgType.Personal:void 0,g=!!c.targetDeploymentId,{provider:null!=(a=c.provider)?a:"unknown",build:null!=(s=c.commands.build)?s:void 0,run:c.commands.run,redeploy:g,env_var_count:null!=(l=null==(i=c.envVars)?void 0:i.length)?l:0,ignore_ports:null===d.ignorePorts?void 0:d.ignorePorts,context:"workspace",app_type:p,machineJob:c.machineJob?{crontab:c.machineJob.crontab,timezone:c.machineJob.timezone}:void 0,orgType:m,hasAgentSession:null!=(u=c.hasAgentSession)&&u});e.trackingProperties=h,(0,tc.track)(td.events.DEPLOYMENT_MIGRATION_PREPARATION_STARTED,(0,o._)({},h));break;case"CANCEL":e.id="",e.deployOptions=void 0,e.stages.clear(),e.focusedStage="FoundDiff",r.trackingProperties&&(v=r.trackingProperties,(0,tc.track)(td.events.DEPLOYMENT_MIGRATION_PREPARATION_CANCELLED,(0,o._)({},v)),e.trackingProperties=void 0);break;case"SET_STAGE":e.stages.set(n.stageState.type,n.stageState);break;case"STAGE_ERROR":var v,y,x,b=e.stages.get(n.stage);b&&(b.status="failed",b.errorMessage=n.errorMessage,e.focusedStage=n.stage,r.trackingProperties&&(y=r.trackingProperties,x=n.stage,(0,tc.track)(td.events.DEPLOYMENT_MIGRATION_PREPARATION_STAGE_ERROR,(0,eI._)((0,o._)({},y),{stage:x})))),(0,tl.sendSentryError)({error:Error(n.errorMessage),context:"prepareDatabase"});break;case"CONFLICT_PROMPT":var S=e.stages.get("GeneratingDiffStatements");if(S&&"GeneratingDiffStatements"===S.type){var _,w,T={type:"GeneratingDiffStatements",status:"paused",conflictPrompt:n.conflictPrompt};e.stages.set(S.type,T),e.focusedStage="GeneratingDiffStatements",r.trackingProperties&&(_=r.trackingProperties,w={kind:n.conflictPrompt.$kind,optionsCount:n.conflictPrompt.result.options.length},(0,tc.track)(td.events.DEPLOYMENT_MIGRATION_PREPARATION_CONFLICT_PROMPT,(0,o._)({},_,w)))}break;case"COMPLETED":var j=th(e.stages,"GeneratingDiffStatements"),D=th(e.stages,"ValidatingDiffStatements");if(j&&"statementsToExecute"in n&&n.statementsToExecute){var k={type:"GeneratingDiffStatements",status:"completed",statementsToExecute:n.statementsToExecute,shouldAskForApprove:n.shouldAskForApprove,maybeNonBackwardsCompatible:n.maybeNonBackwardsCompatible,infoToPrint:n.infoToPrint};e.stages.set(j.type,k),e.focusedStage="GeneratingDiffStatements",r.trackingProperties&&tp(r.trackingProperties,n.stage,{shouldAskForApproval:n.shouldAskForApprove,maybeNonBackwardsCompatible:n.maybeNonBackwardsCompatible,infoToPrintCount:n.infoToPrint.length,statementsCount:n.statementsToExecute.length})}if(D&&"previewId"in D&&D.previewId){var C={type:"ValidatingDiffStatements",status:"completed",previewId:D.previewId};e.stages.set(D.type,C),e.focusedStage="ValidatingDiffStatements",r.trackingProperties&&tp(r.trackingProperties,n.stage)}break;case"MIGRATION_VALIDATION_ERROR":var E=th(e.stages,"ValidatingDiffStatements");if(E&&"previewId"in E&&E.previewId){var A,I={type:"ValidatingDiffStatements",status:"paused",previewId:E.previewId,statementError:n.statementError};e.stages.set(E.type,I),e.focusedStage="ValidatingDiffStatements",r.trackingProperties&&(A=r.trackingProperties,(0,tc.track)(td.events.DEPLOYMENT_MIGRATION_PREPARATION_VALIDATION_ERROR,(0,o._)({},A)))}break;case"SET_PREVIEW_DEPLOY":var R,P,M=th(e.stages,"ValidatingDiffStatements");(null==M?void 0:M.status)==="completed"&&(M.preview=n.preview,r.trackingProperties&&(R=r.trackingProperties,P=n.preview.status,(0,tc.track)(td.events.DEPLOYMENT_MIGRATION_PREPARATION_PREVIEW_DEPLOY,(0,eI._)((0,o._)({},R),{status:P}))));break;case"APPROVE_AND_DEPLOY":var O,N,L,B=th(e.stages,"ValidatingDiffStatements"),V=th(e.stages,"GeneratingDiffStatements");(null==V?void 0:V.status)==="completed"&&(((null==B?void 0:B.status)==="completed"||(null==B?void 0:B.status)==="paused")&&(B.approved=!0),r.trackingProperties&&(O=r.trackingProperties,N=n.approved,L={shouldAskForApproval:V.shouldAskForApprove,maybeNonBackwardsCompatible:V.maybeNonBackwardsCompatible,infoToPrintCount:V.infoToPrint.length,statementsCount:V.statementsToExecute.length},(0,tc.track)(td.events.DEPLOYMENT_MIGRATION_PREPARATION_APPROVED,(0,o._)((0,eI._)((0,o._)({},O),{approved:N}),L))))}}));t(tv,i)});function tx(){return{state:ti(tv),dispatch:to(ty),getState:ts(tv)}}e.s(["PrepareDatabaseBaseStageStateStatus",()=>tm,"PrepareDatabasePreviewDeployStatus",()=>tg,"PrepareDatabaseStageType",()=>tf,"getStageByType",()=>th,"usePrepareDatabaseState",()=>tx],265957);var tb=((i={}).Loading="Loading",i.Ready="Ready",i.Preparing="Preparing",i.PreparingDatabase="PreparingDatabase",i.Deploying="Deploying",i.ProcessingLifecycleCommand="ProcessingLifecycleCommand",i.Suspended="Paused",i);e.s(["DeploymentMode",()=>tb],68893);var tS=(0,e5.atom)(tb.Loading);function t_(){return ti(tS)}function tw(){var e=to(tS);return(0,ek.useCallback)(function(t){e(t)},[e])}function tT(){var e=tx().dispatch,t=to(tS);return{requiresDatabasePreparation:(0,eE.usePid2Callback)(function(n){return function(r){var i=r.heliumDevelopmentDatabase,a=r.neonDevelopmentDatabase,o=r.neonProductionDatabase,s=r.deployConfig,l=r.deployInputOptions,u=r.context,c=r.appType,d=r.org;return(0,eT._)(function(){var r,p;return(0,eD._)(this,function(f){switch(f.label){case 0:if(!a&&!i)throw Error("Neon development database not found.");if(!(r=i?i.connectionString:null==a?void 0:a.connectionString))throw Error("Development database connection string not found.");return[4,n.prepareDatabaseMigrations.hasDiff.rpc({sourceConnectionString:r,targetConnectionString:null==o?void 0:o.connectionString})];case 1:if(!(p=f.sent()).ok)throw Error("Failed to check for database diff: ".concat(p.payload.message));if(p.payload.hasDiff)return t(tb.PreparingDatabase),e({type:"INIT",deployOptions:{deployConfig:s,deployInputOptions:l,context:u,appType:c,org:d}}),[2,!0];return[2]}})})()}},[t,e])}}e.s(["deploymentModeAtom",()=>tS,"useDeploymentMode",()=>t_,"useSetDeploymentMode",()=>tw],914279),e.s(["useHostingBuildRequiresDatabasePreparation",()=>tT],271047);var tj=e.i(173738);function tD(e){return(0,eT._)(function(e){var t,n,r,i,a,o,s,l,u,c,d,p;return(0,eD._)(this,function(f){switch(f.label){case 0:if(t=e.command,n=e.replId,r=e.buildId,i=e.machineConfigurationId,a=e.maxMachineInstances,o=e.replitBadgeEnabled,!tj.apolloClient)throw Error("expected apolloClient to be initialized");return[4,tj.apolloClient.mutate({mutation:J,variables:{input:{command:t,replId:n,buildId:r,machineConfigurationId:i,maxMachineInstances:a,replitBadgeEnabled:o}}})];case 1:if(null==(s=(c=f.sent()).errors)?void 0:s.length)throw Error(c.errors.map(function(e){return e.message}).join(", "));if((null==(u=c.data)||null==(l=u.sendDeploymentLifecycleCommand)?void 0:l.__typename)!=="SendDeploymentLifecycleCommandResult")throw Error((null==(p=c.data)||null==(d=p.sendDeploymentLifecycleCommand)?void 0:d.message)||"An unexpected error occurred while sending command. Please try again or contact support.");return[2]}})}).apply(this,arguments)}function tk(e){return(0,eT._)(function(e){var t,n,r,i,a,o,s,l;return(0,eD._)(this,function(u){switch(u.label){case 0:if(t=e.buildId,n=e.targetDeploymentId,!tj.apolloClient)throw Error("expected apolloClient to be initialized");return[4,tj.apolloClient.mutate({mutation:Z,variables:{input:{buildId:t,targetDeploymentId:n}}})];case 1:if(null==(r=(o=u.sent()).errors)?void 0:r.length)throw Error(o.errors.map(function(e){return e.message}).join(", "));if((null==(a=o.data)||null==(i=a.failHostingBuild)?void 0:i.__typename)!=="FailHostingBuildResult")throw Error((null==(l=o.data)||null==(s=l.failHostingBuild)?void 0:s.message)||"An unexpected error occurred while trying to cancel. Please try again or contact support.");return[2]}})}).apply(this,arguments)}function tC(e){return(0,eT._)(function(e){var t,n,r,i;return(0,eD._)(this,function(a){switch(a.label){case 0:return t=e.apolloClient,n=e.replId,[4,t.query({query:ee,variables:{replId:n}})];case 1:return[2,"Repl"===(i=a.sent().data).getRepl.__typename&&(null==(r=i.getRepl.hostingDeployment)?void 0:r.__typename)==="HostingDeployment"?i.getRepl.hostingDeployment.ignoredSecrets:[]]}})}).apply(this,arguments)}function tE(e){return(0,eT._)(function(e){var t,n,r,i;return(0,eD._)(this,function(a){switch(a.label){case 0:return t=e.apolloClient,n=e.replId,[4,t.query({query:en,variables:{replId:n}})];case 1:return[2,"Repl"===(i=a.sent().data).getRepl.__typename&&(null==(r=i.getRepl.hostingDeployment)?void 0:r.__typename)==="HostingDeployment"?i.getRepl.hostingDeployment.currentBuild.envVars.map(function(e){return{name:e.name}}):[]]}})}).apply(this,arguments)}e.s(["cancelInProgressDeploymentsBuildMutation",()=>tk,"getDeploymentEnvVars",()=>tE,"getDeploymentIgnoredSecrets",()=>tC,"sendDeploymentLifecycleCommandMutation",()=>tD],233693);var tA=e.i(569910);function tI(e){switch(e){case tu.HostingBuildStatus.Failed:case tu.HostingBuildStatus.Success:case tu.HostingBuildStatus.BuiltAndBundled:return tb.Ready;case tu.HostingBuildStatus.Suspended:return tb.Suspended;case tu.HostingBuildStatus.Suspending:case tu.HostingBuildStatus.Resuming:case tu.HostingBuildStatus.UpdatingTier:return tb.ProcessingLifecycleCommand;case tu.HostingBuildStatus.Pending:case tu.HostingBuildStatus.SecurityScanning:case tu.HostingBuildStatus.Building:case tu.HostingBuildStatus.Running:case tu.HostingBuildStatus.Promoting:return tb.Deploying;default:(0,tA.default)(e)}}function tR(e){switch(e){case tu.SendDeploymentLifecycleCommandType.Destroy:return null;case tu.SendDeploymentLifecycleCommandType.UpdateMachineConfiguration:return tu.HostingBuildStatus.UpdatingTier;case tu.SendDeploymentLifecycleCommandType.Suspend:return tu.HostingBuildStatus.Suspending;case tu.SendDeploymentLifecycleCommandType.Resume:case tu.SendDeploymentLifecycleCommandType.UpdateDeploymentFeatureConfig:return tu.HostingBuildStatus.Resuming;default:(0,tA.default)(e)}}var tP=(a={},(0,eq._)(a,tb.Loading,"loading"),(0,eq._)(a,tb.Preparing,"preparing"),(0,eq._)(a,tb.PreparingDatabase,"preparing database"),(0,eq._)(a,tb.Ready,"ready"),(0,eq._)(a,tb.Suspended,"suspended"),(0,eq._)(a,tb.Deploying,"deploying"),(0,eq._)(a,tb.ProcessingLifecycleCommand,"processing a request"),a);function tM(e){var t=tP[e];return void 0===t?"":t}e.s(["getBuildStatusFromLifecycleCommandType",()=>tR,"getDeploymentModeFromBuildStatus",()=>tI,"getReadableMode",()=>tM],165550)},678317,e=>{"use strict";e.i(671901);var t=function(e){return e&&e.args?(e.args&&e.args.length>=3&&"sh"===e.args[0]&&"-c"===e.args[1]?e.args.slice(2):e.args).join(" "):""};e.s(["execToString",()=>t])},255444,e=>{"use strict";var t=function(e){return{op:"add",path:"run",value:JSON.stringify(e)}},n=function(e){return{op:"add",path:"compile",value:JSON.stringify(e)}},r=function(e){return{op:"remove",path:"string"==typeof e?e:e.join("/"),value:""}},i=function(e){return{op:"add",path:"auth/pageEnabled",value:JSON.stringify(e)}},a=function(e){return{op:"add",path:"auth/buttonEnabled",value:JSON.stringify(e)}},o=function(e){return{path:"deployment/run",op:"add",value:JSON.stringify(["sh","-c",e])}},s=function(e){return{path:"deployment/build",op:"add",value:JSON.stringify(["sh","-c",e])}},l=function(e){return{path:"deployment/ignorePorts",op:"add",value:e.toString()}},u=function(e){return{path:"deployment/deploymentTarget",op:"add",value:JSON.stringify(e)}},c=function(e){return{path:"deployment/publicDir",op:"add",value:JSON.stringify(e)}},d=function(e){return{path:"objectStorage/defaultBucketID",op:"add",value:JSON.stringify(e)}};e.s(["createCompileCommandOp",()=>n,"createDeploymentPublicDirOp",()=>c,"createDeploymentTargetOp",()=>u,"createDeploymentsBuildCommandOp",()=>s,"createDeploymentsIgnorePortsOp",()=>l,"createDeploymentsRunCommandOp",()=>o,"createRunCommandOp",()=>t,"enableAuthButtonOp",()=>a,"enableAuthPageOp",()=>i,"removeFieldOp",()=>r,"setObjectStorageDefaultBucketId",()=>d])},729678,107129,241703,957789,522029,198992,32995,686631,936239,589910,e=>{"use strict";var t,n,r,i,a=e.i(297083),o=e.i(530658),s=e.i(817556),l=e.i(389959),u=e.i(368964),c=e.i(678420),d=e.i(403934),p=e.i(62820),f=e.i(671901),m=e.i(967963),g=e.i(678317),h=e.i(255444),v=e.i(641326),y=e.i(903381),x=e.i(483820);function b(e){var t=e.secrets,n=e.replId,r=(0,o._)((0,c.useWorkspaceAndReplLinkedSecretsLazyQuery)(),1)[0],i=(0,o._)((0,d.useDeploymentGetIgnoredSecretsHostingDeploymentLazyQuery)(),1)[0];return(0,l.useCallback)(function(){return(0,a._)(function(){var e,a,l,u,c,d,p,f,m,g,h,v,y,x,b,S,_,w,T,j,D,k;return(0,s._)(this,function(s){switch(s.label){case 0:return[4,r({variables:{replId:n}})];case 1:return l=s.sent().data,[4,i({variables:{replId:n}})];case 2:if(u=s.sent().data,c=new Map,d=(null==u?void 0:u.getRepl.__typename)==="Repl"&&(null==u||null==(e=u.getRepl.hostingDeployment)?void 0:e.__typename)==="HostingDeployment"?u.getRepl.hostingDeployment.ignoredSecrets:[],(null==l?void 0:l.getRepl.__typename)==="Repl"&&l.getRepl.sharedSecretLinks&&(null==(a=l.currentUser)?void 0:a.secrets.__typename)==="SharedSecretConnection"){p=l.currentUser.secrets.items,f=!0,m=!1,g=void 0;try{for(h=function(){var e,t=y.value,n=p.find(function(e){return e.id===t.secret.id});c.set(t.alias,null!=(e=null==n?void 0:n.value)?e:"")},v=l.getRepl.sharedSecretLinks[Symbol.iterator]();!(f=(y=v.next()).done);f=!0)h()}catch(e){m=!0,g=e}finally{try{f||null==v.return||v.return()}finally{if(m)throw g}}}return[4,t.read()];case 3:x=s.sent(),b=!0,S=!1,_=void 0;try{for(w=x.entries()[Symbol.iterator]();!(b=(T=w.next()).done);b=!0)D=(j=(0,o._)(T.value,2))[0],k=j[1],d.includes(D)||c.set(D,k)}catch(e){S=!0,_=e}finally{try{b||null==w.return||w.return()}finally{if(S)throw _}}return[2,Array.from(c,function(e){var t=(0,o._)(e,2);return{name:t[0],value:t[1]}})]}})})()},[t,i,r,n])}function S(e){return(0,a._)(function(){var t,n,r,i,o,l,c,d,p,m,h,y,x,b;return(0,s._)(this,function(S){switch(S.label){case 0:return t=null,n=null,r=null,i=null,o=null,l=null,[4,(0,a._)(function(){var t,n,r;return(0,s._)(this,function(i){switch(i.label){case 0:return[4,e.getConfig()];case 1:if(n=(t=i.sent()).config,(r=t.error)===v.DotReplitErrors.NotFound)return[2];if(r)throw Error("Failed to get .replit config with Error: "+r);return[2,n]}})})()];case 1:if(!(c=S.sent()))return[2,{buildCommand:t,runCommand:n,ignorePorts:r,appType:i,publicDir:o,providerFromTarget:l}];if(!c.deployment)return[3,2];switch(p=(d=c.deployment).build,m=d.run,h=d.ignorePorts,y=d.target,x=d.publicDir,p&&(t=(0,g.execToString)(p)),m&&(n=(0,g.execToString)(m)),null!=h&&(r=h),y){case f.api.DeploymentConfig.Target.VM:case f.api.DeploymentConfig.Target.GCE:l=u.HostingBuildProvider.Gce,i=r?u.DeployHostingBuildAppType.Worker:u.DeployHostingBuildAppType.Server;break;case f.api.DeploymentConfig.Target.AUTOSCALE:case f.api.DeploymentConfig.Target.CLOUDRUN:l=u.HostingBuildProvider.CloudRun,i=u.DeployHostingBuildAppType.CloudRun;break;case f.api.DeploymentConfig.Target.STATIC:l=u.HostingBuildProvider.Static,i=u.DeployHostingBuildAppType.Static;break;case f.api.DeploymentConfig.Target.SCHEDULED:l=u.HostingBuildProvider.Cron,i=u.DeployHostingBuildAppType.Cron}return x&&(o=x),[3,4];case 2:return[4,e.getRunConfig()];case 3:b=S.sent(),c.compile&&(t=(0,g.execToString)(c.compile)),b.run?n=(0,g.execToString)(b.run.run):c.run&&(n=(0,g.execToString)(b.run)),S.label=4;case 4:return[2,{buildCommand:t,runCommand:n,ignorePorts:r,appType:i,publicDir:o,providerFromTarget:l}]}})})()}var _={buildCommand:{delete:function(){return(0,h.removeFieldOp)("deployment/build")},create:function(e){return(0,h.createDeploymentsBuildCommandOp)(e.toString())}},runCommand:{delete:function(){return(0,h.removeFieldOp)("deployment/run")},create:function(e){return(0,h.createDeploymentsRunCommandOp)(e.toString())}},ignorePorts:{delete:function(){return(0,h.removeFieldOp)("deployment/ignorePorts")},create:function(e){return(0,h.createDeploymentsIgnorePortsOp)(!!e)}},appType:{delete:function(){return(0,h.removeFieldOp)("deployment/deploymentTarget")},create:function(e){var t=null;switch(e){case u.DeployHostingBuildAppType.Server:case u.DeployHostingBuildAppType.Worker:t="gce";break;case u.DeployHostingBuildAppType.CloudRun:t="cloudrun";break;case u.DeployHostingBuildAppType.Static:t="static";break;case u.DeployHostingBuildAppType.Cron:t="scheduled"}return t?(0,h.createDeploymentTargetOp)(t):null}},publicDir:{delete:function(){return(0,h.removeFieldOp)("deployment/publicDir")},create:function(e){return(0,h.createDeploymentPublicDirOp)(e.toString())}},providerFromTarget:{delete:function(){return(0,h.removeFieldOp)("deployment/deploymentTarget")},create:function(e){var t=null;switch(e){case u.HostingBuildProvider.Gce:t="gce";break;case u.HostingBuildProvider.CloudRun:t="cloudrun";break;case u.HostingBuildProvider.Static:t="static";break;case u.HostingBuildProvider.Cron:t="scheduled";break;case u.HostingBuildProvider.Extension:case u.HostingBuildProvider.AzureContainerApp:case u.HostingBuildProvider.AzureVm:return null}return t?(0,h.createDeploymentTargetOp)(t):null}}};function w(e,t,n){return(0,a._)(function(e,t,n){var r,i,a,o,l,u,c,d,f,g,h,v,b,S,w,T;return(0,s._)(this,function(s){switch(s.label){case 0:r=n.fs,i=n.container,a=n.dotReplit,o=[],l=!0,u=!1,c=void 0;try{for(d=Object.keys(e)[Symbol.iterator]();!(l=(f=d.next()).done);l=!0)h=e[g=f.value],v=t[g],b=_[g],h!==v&&("string"==typeof h&&(0,m.hasCommand)(h)||"boolean"==typeof h&&h?(S=b.create(h))&&o.push(S):o.push(b.delete()))}catch(e){u=!0,c=e}finally{try{l||null==d.return||d.return()}finally{if(u)throw c}}if(i.getConnectionState()!==p.ConnectionState.CONNECTED)throw new x.ReplConnectionError;if(!o.length)return[3,2];return[4,a.updateDotReplit(o)];case 1:if(w=s.sent().error)throw Error(w);s.label=2;case 2:return T=null,[4,new Promise(function(e){r.getStatus()!==y.FsStatus.Syncing&&e(!0),T=setInterval(function(){r.getStatus()!==y.FsStatus.Syncing&&e(!0)},1e3)})];case 3:return s.sent(),T&&clearInterval(T),[2]}})}).apply(this,arguments)}e.s(["getDotReplitDeploymentConfig",()=>S,"setDotReplitDeploymentConfig",()=>w,"useGetSecretsAsDeploymentEntries",()=>b],729678),e.s(["AutoscaleMachineConfiguration",()=>tK,"getMachineConfigurationBySlug",()=>tq,"useAutoscaleConfigurations",()=>tW],589910);var T=e.i(276385),j=e.i(161322),D=e.i(878420),k=e.i(569384),C=e.i(973245),E=e.i(304277);e.i(566901);var A=e.i(963084);function I(){var e=(0,k._)(["\n  query AutoscaleMachineConfigurations {\n    hostingMachineConfigurations(input: { provider: cloud_run }) {\n      __typename\n      ... on HostingMachineConfigurationsResults {\n        results {\n          ...MachineConfiguration\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return I=function(){return e},e}var R={},P=(0,C.gql)(I(),A.MachineConfigurationFragmentDoc),M=e.i(761201),O=e.i(399344),N=e.i(914279),L=e.i(68893),B=e.i(858248),V=e.i(709485),U=function(e){var t=e.context;(0,B.track)(V.events.DEPLOYMENT_SECTION_VIEWED,{context:t})},F=function(e,t){(0,B.track)(V.events.DEPLOYMENT_DEBUG_SUMMARY_USED,{action:e,context:t})},H=function(e){(0,B.track)(V.events.DEPLOYMENT_ADD_SECRET_CLICKED,{context:e})};e.s(["trackDebugSummaryUsed",()=>F,"trackDeploymentAddSecretClicked",()=>H,"trackDeploymentSectionViewed",()=>U],107129);var G=((t={}).Intro="intro",t.Deployment="deployment",t.DeploymentInProgress="deployment_in_progress",t.Analytics="analytics",t.Logs="logs",t.Settings="settings",t.Schedule="schedule",t.ResourceMonitoring="resource_monitoring",t.Domains="domains",t.ReservedVMTierSelection="reserved_vm_tier_selection",t.AutoscaleMachineConfiguration="autoscale_machine_configuration",t),z=((n={}).SendDeploymentLifecycleCommand="send_deployment_lifecycle_command",n.ChangeView="change_view",n.OpenPane="open_pane",n);e.s(["ViewActionType",()=>z,"Views",()=>G],241703);var q=e.i(541793),W=e.i(845822),K=e.i(967629),$=e.i(480028),Y=[1,2,4,8],X=(0,q.atom)(W.defaultAutoscaleDeploymentCostDetails),Q=(0,q.atom)(function(e){var t=e(X),n=t.costPerComputeUnitUsd*t.computeUnitsPerCpu;return[n,2*n,4*n,8*n]}),J=[[0,3],[0,4],[2,5],[3,6]],Z=Y.length-1,ee=1/(2*Z),et=(0,q.atom)(2),en=(0,q.atom)(function(e){return Y[e(et)]}),er=(0,q.atom)(function(e){return e(Q)[e(et)]}),ei=(0,q.atom)(function(e){return J[e(et)]}),ea=(0,q.atom)(0),eo=(0,q.atom)(function(e){var t=e(eh)[0]/Z,n=e(eh)[1]/Z,r=0,i=0;return e(ea)<t&&(r=(t-e(ea))/ee,i=t-ee),e(ea)>n&&(r=(e(ea)-n)/ee,i=n+ee),{overage:r,point:i}}),es=(0,q.atom)(0),el=(0,q.atom)(0),eu=[.5,1,2,4,8,16,32],ec=[[0,1],[0,1],[0,2],[0,3],[1,3],[2,3],[3,3]],ed=eu.length-1,ep=1/(2*ed),ef=(0,q.atom)(4),em=(0,q.atom)(function(e){return eu[e(ef)]}),eg=(0,q.atom)(function(e){var t=e(X).costPerComputeUnitUsd;return e(ew)*t}),eh=(0,q.atom)(function(e){return ec[e(ef)]}),ev=(0,q.atom)(0),ey=(0,q.atom)(function(e){var t=e(ei)[0]/ed,n=e(ei)[1]/ed,r=0,i=0;return e(ev)<t&&(r=(t-e(ev))/ep,i=t-ep),e(ev)>n&&(r=(e(ev)-n)/ep,i=n+ep),{overage:r,point:i}}),ex=(0,q.atom)(null,function(e,t){var n=e(et),r=e(eh)[0],i=e(eh)[1];n<r&&t(et,r),n>i&&t(et,i)}),eb=(0,q.atom)(null,function(e,t){var n=e(ef),r=e(ei)[0],i=e(ei)[1];n<r&&t(ef,r),n>i&&t(ef,i)}),eS=(0,q.atom)(function(e){var t=e(eh)[0]/Z,n=e(eh)[1]/Z,r=e(ei)[0]/ed,i=e(ei)[1]/ed;return e(ea)<t?(t-e(ea))/ee:e(ea)>n?(e(ea)-n)/ee:e(ev)<r?(r-e(ev))/ep:e(ev)>i?(e(ev)-i)/ep:0}),e_=(0,q.atom)(function(e){var t;return(1e5*(t={ramCost:e(eg),cpuCost:e(er)}).ramCost+1e5*t.cpuCost)/1e5}),ew=(0,q.atom)(function(e){var t=e(X).computeUnitsPerRam;return e(em)*t}),eT=(0,q.atom)(function(e){var t=e(X).computeUnitsPerCpu;return e(en)*t}),ej=(0,q.atom)(function(e){return e(ew)+e(eT)}),eD=((r={}).None="0ms",r.Normal="200ms",r),ek=["ArrowLeft","ArrowRight","Home","End"],eC=(0,K.css)({position:"relative",height:"16px",width:"100%",touchAction:"none"}),eE=(0,K.css)({position:"absolute",zIndex:2,top:"0",width:"16px",height:"16px",backgroundColor:$.tokens.white,borderRadius:"100%",outline:"none",cursor:"pointer",willChange:"left, transition",boxShadow:"0 0 8px rgba(0,0,0,0.15)",":focus":{outline:"2px solid ".concat($.tokens.accentPrimaryDefault),":not(:focus-visible)":{outlineColor:"transparent"}}});e.s(["CPUValues",()=>Y,"MAX_CPU_INDEX",()=>Z,"MAX_RAM_INDEX",()=>ed,"RAMValues",()=>eu,"SCRUBBING_KEYS",()=>ek,"TransitionTime",()=>eD,"costDetailsAtom",()=>X,"cpuComputeUnitsAtom",()=>eT,"cpuIndexAtom",()=>et,"cpuMulAtom",()=>ea,"cpuRangeOverageAtom",()=>eo,"cpuThumbLeftAtom",()=>es,"cpuValueAtom",()=>en,"ramComputeUnitsAtom",()=>ew,"ramIndexAtom",()=>ef,"ramMulAtom",()=>ev,"ramRangeOverageAtom",()=>ey,"ramThumbLeftAtom",()=>el,"ramValueAtom",()=>em,"scrubberCss",()=>eC,"snapDistanceAtom",()=>eS,"thumbCss",()=>eE,"totalComputeUnitsAtom",()=>ej,"totalCostAtom",()=>e_,"validateCPUAtom",()=>ex,"validateRAMAtom",()=>eb],957789);var eA=[1,2,3,4,5,6,7,8,9,10],eI=eA.length-1,eR=1/(2*eI),eP=(0,q.atom)(2),eM=(0,q.atom)(function(e){return eA[e(eP)]}),eO=(0,q.atom)(function(e){return(e(e_)*e(eM)).toFixed(6)}),eN=(0,q.atom)(function(e){return e(ej)*e(eM)}),eL=(0,q.atom)(0),eB=(0,q.atom)(function(e){var t=0/eI,n=eA.length-1/eI,r=0,i=0;return e(eL)<t&&(r=(t-e(eL))/eR,i=t-eR),e(eL)>n&&(r=(e(eL)-n)/eR,i=n+eR),{overage:r,point:i}}),eV=((i={}).None="0ms",i.Normal="120ms",i),eU=["ArrowLeft","ArrowRight","Home","End"],eF=(0,K.css)({position:"relative",height:"16px",width:"100%",touchAction:"none"}),eH=(0,K.css)({position:"absolute",zIndex:2,top:"0",width:"16px",height:"16px",backgroundColor:$.tokens.white,borderRadius:"100%",outline:"none",cursor:"pointer",willChange:"left, transition",boxShadow:"0 0 8px rgba(0,0,0,0.15)",":focus":{outline:"2px solid ".concat($.tokens.accentPrimaryDefault),":not(:focus-visible)":{outlineColor:"transparent"}}});e.s(["MAX_MAX_INSTANCES_INDEX",()=>eI,"SCRUBBING_KEYS",()=>eU,"TransitionTime",()=>eV,"maxInstancesComputeUnitsAtom",()=>eN,"maxInstancesCostAtom",()=>eO,"maxInstancesIndexAtom",()=>eP,"maxInstancesMulAtom",()=>eL,"maxInstancesRangeOverageAtom",()=>eB,"maxInstancesValueAtom",()=>eM,"maxInstancesValues",()=>eA,"scrubberCss",()=>eF,"thumbCss",()=>eH],522029);var eG=e.i(64386),ez=e.i(886513),eq=e.i(721281),eW=e.i(351981),eW=eW,eK=e.i(446530),e$=e.i(613355),eY=e.i(625484),eX=e$.container.min(600),eQ=(0,eK.cssRecord)({maxWidth:{width:"100%",maxWidth:600,alignSelf:"center"},hiddenOnMobile:[e$.rcss.display.none,(0,eq._)({},eX,e$.rcss.display.flex)],hiddenOnDesktop:[e$.rcss.display.flex,(0,eq._)({},eX,e$.rcss.display.none)]});function eJ(e){var t,n,r,i,a=e.children,s=e.render,u=e.timeout,c=void 0===u?300:u,d=e.initialHeight,p=(0,l.useRef)(null),f=(0,l.useRef)(null),m=(t=f,r=(n=(0,o._)((0,l.useState)(0),2))[0],i=n[1],(0,l.useEffect)(function(){if(t.current){var e=new ResizeObserver(function(e){var t=!0,n=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value.borderBoxSize[0].blockSize;i(s)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}});return e.observe(t.current),function(){return e.disconnect()}}},[r,t]),r),g=m>0?m:d,h={transition:c+"ms ease-out",transitionProperty:"height, opacity",opacity:0,height:0,visibility:"hidden"},v={entering:{opacity:1,height:g},entered:{transitionProperty:"opacity",opacity:1,height:g,visibility:"visible"},exiting:{opacity:0,height:0,visibility:"visible"},exited:{opacity:0,height:0,visibility:"hidden"}};return(0,T.jsx)(eW.default,{nodeRef:p,timeout:c,in:s,children:function(e){return(0,T.jsx)(eY.View,{innerRef:p,style:(0,D._)({},h,v[e]),children:(0,T.jsx)(eY.View,{innerRef:f,children:a})})}})}e.s(["TimelineTransition",()=>eJ,"mobileWidthContainerQuery",()=>eX,"sharedCss",()=>eQ],198992);var eZ=[e$.rcss.width("100%"),e$.rcss.p(8)],e0=[e$.rcss.py(32),e$.rcss.minHeight("100%"),e$.rcss.center],e1=function(e){var t=e.children,n=e.centered,r=e.maxWidth,i=(0,ez._)(e,["children","centered","maxWidth"]),a=[eZ,n&&e0,r&&eQ.maxWidth].filter(Boolean);return(0,T.jsx)(eY.View,(0,eG._)((0,D._)({},i),{css:a,children:t}))};e.s(["PaneSection",()=>e1],32995);var e2=e.i(136540),e4=e.i(396776),e8=e.i(352767),e3=e.i(940745),e6=e.i(42458),e5=[e$.rcss.p(8),e$.rcss.center],e7=function(){return(0,T.jsx)(eY.View,{css:e5,children:(0,T.jsx)(e3.default,{size:24})})},e9=(0,eK.cssRecord)({error:[e$.rcss.flex.grow(0),e$.rcss.mt(0)]}),te=function(e){var t=e.text,n=(0,ez._)(e,["text"]);return(0,T.jsx)(e1,(0,eG._)((0,D._)({css:e9.error},n),{children:(0,T.jsx)(e4.StatusBanner,{colorway:"warning",icon:(0,T.jsx)(e6.default,{}),text:t})}))},tt=function(e){var t=e.onBack;return(0,T.jsx)(eY.View,{row:!0,align:"center",children:(0,T.jsx)(e2.IconButton,{alt:"Back",tooltipBehavior:"hidden",onClick:t,children:(0,T.jsx)(e8.default,{})})})};e.s(["ViewBack",()=>tt,"ViewError",()=>te,"ViewLoading",()=>e7],686631);let tn=(0,l.forwardRef)(function(e,t){var n=(0,o._)((0,j.useAtom)(en),1)[0],r=(0,j.useSetAtom)(es),i=(0,l.useRef)(null),a=(0,l.useRef)(null);return(0,l.useImperativeHandle)(t,function(){return i.current}),n&&i.current&&(i.current.setAttribute("aria-valuemin",String(Y[0])),i.current.setAttribute("aria-valuemax",String(Y[Y.length-1])),i.current.setAttribute("aria-valuenow",String(n))),(0,l.useEffect)(function(){var e=function(){i.current&&(r(parseFloat(getComputedStyle(i.current).getPropertyValue("left"))),a.current=requestAnimationFrame(e))};return e(),function(){a.current&&cancelAnimationFrame(a.current)}},[r]),(0,l.useMemo)(function(){return(0,T.jsx)("div",{ref:i,role:"slider",tabIndex:0,css:[eE,{left:"calc((100% - 16px) * var(--cpu-progress, 0))",transition:"left var(--cpu-transition-time, 100ms) cubic-bezier(0, 0, 0.2, 1)"}]})},[])});var tr=e.i(337761),ti="min(var(--point), var(--position))",ta="max(var(--point), var(--position))";let to=(0,l.forwardRef)(function(e,t){var n=(0,j.useAtomValue)(eo),r=n.overage,i=n.point,a=(0,j.useAtomValue)(ea),o=(0,l.useRef)(null);return(0,l.useEffect)(function(){(0,tr.styleSet)(o,"--opacity",String(r))},[r]),(0,l.useEffect)(function(){(0,tr.styleSet)(o,"--point",String(100*i)+"%")},[i]),(0,l.useEffect)(function(){(0,tr.styleSet)(o,"--position",String(100*a)+"%")},[a]),(0,l.useMemo)(function(){return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,T.jsx)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:$.tokens.interactiveBorder,borderRadius:"2px"},children:(0,T.jsx)("div",{ref:o,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(ti,", \n                  ").concat($.tokens.interactiveBorderHover," ").concat(ti,", \n                  ").concat($.tokens.interactiveBorderHover," ").concat(ta,", \n                  transparent ").concat(ta," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[t])});var ts=(0,eK.cssRecord)({container:{flexDirection:"row",justifyContent:"space-between",height:6,paddingLeft:8,paddingRight:8},mark:{width:1,backgroundColor:$.tokens.outlineStronger}});function tl(e){var t=e.list;return(0,T.jsx)(eY.View,{css:ts.container,children:t.map(function(e){return(0,T.jsx)(eY.View,{css:ts.mark},e)})})}var tu=e$.container.min(320),tc=(0,eK.cssRecord)({container:e$.rcss.colWithGap(4),label:[e$.rcss.flex.column,e$.rcss.pb(4),(0,eq._)({},tu,[e$.rcss.flex.row,e$.rcss.justify.spaceBetween,e$.rcss.pb(0)])],resource:e$.rcss.fontWeight.medium,cost:[e$.rcss.rowWithGap(1),e$.rcss.align.baseline]}),td=e.i(546284),tp=e.i(960178);function tf(e){var t=e.setAttrs,n=(0,o._)((0,j.useAtom)(et),2),r=n[0],i=n[1],a=(0,o._)((0,l.useState)(!1),2),s=a[0],u=a[1],c=(0,l.useRef)(null),d=(0,l.useRef)(null),p=(0,l.useRef)(null),f=(0,l.useCallback)(function(e){t.setTransitionTime(e)},[t]),m=(0,l.useCallback)(function(e){t.setProgress(e)},[t]);return void 0===r||s||(m(r/Z),f(eD.Normal)),(0,l.useEffect)(function(){if(void 0!==r&&d.current&&p.current&&!s){var e=d.current,t=p.current,n=function(n){if(0===n.button){u(!0),t.focus();var r=e.getBoundingClientRect(),a=t.getBoundingClientRect(),o=r.width,s=a.width,l=n.target===e?s/2:n.clientX-a.left,c=null,d=function(e){var t=Math.max(0,Math.min(1,(e-r.left-l)/(o-s)));t!==c&&(c=t,m(t),i(Math.round(t*Z)))};d(n.clientX);var p=function(e){f(eD.None),d(e.clientX),e.preventDefault(),e.stopPropagation()},g=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",g),f(eD.Normal),u(!1)};window.addEventListener("pointermove",p),window.addEventListener("pointerup",g),window.addEventListener("pointercancel",g),n.preventDefault(),n.stopPropagation()}};return e.addEventListener("pointerdown",n),t.addEventListener("pointerdown",n),function(){e.removeEventListener("pointerdown",n),t.removeEventListener("pointerdown",n)}}},[r,s,i,m,f]),(0,l.useEffect)(function(){if(void 0!==r&&p.current&&!s){var e=p.current,t=function(e){if(void 0!==r&&ek.includes(e.key)){var t=Math.max(0,r-1),n=Math.min(Z,r+1),a=null;switch(e.key){case"ArrowLeft":a=t;break;case"ArrowRight":a=n;break;case"Home":a=0;break;case"End":a=Z}null!==a&&(i(a),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",t),function(){e.removeEventListener("keydown",t)}}},[s,r,i]),(0,l.useMemo)(function(){return(0,T.jsxs)(eY.View,{gap:8,children:[(0,T.jsxs)(eY.View,{innerRef:c,css:eC,children:[(0,T.jsx)(to,{ref:d}),(0,T.jsx)(tn,{ref:p})]}),(0,T.jsx)(tl,{list:Y})]})},[])}function tm(e){var t=e.setAttrs,n=(0,o._)((0,j.useAtom)(en),1)[0],r=(0,o._)((0,j.useAtom)(eT),1)[0],i=(0,j.useSetAtom)(eb);return(0,l.useEffect)(function(){i()},[i,n]),(0,T.jsxs)(eY.View,{css:tc.container,children:[(0,T.jsxs)(eY.View,{css:tc.label,children:[(0,T.jsxs)(tp.Text,{css:tc.resource,multiline:!1,children:[n," vCPU",n>1?"s":""]}),(0,T.jsxs)(eY.View,{css:tc.cost,children:[(0,T.jsxs)(tp.Text,{color:"dimmer",multiline:!1,children:[r," ",(0,td.default)("compute unit",r)]}),(0,T.jsx)(tp.Text,{color:"dimmest",variant:"small",multiline:!1,children:"/sec"})]})]}),(0,T.jsx)(tf,{setAttrs:t})]})}let tg=(0,l.forwardRef)(function(e,t){var n=(0,o._)((0,j.useAtom)(em),1)[0],r=(0,j.useSetAtom)(el),i=(0,l.useRef)(null),a=(0,l.useRef)(null);return(0,l.useImperativeHandle)(t,function(){return i.current}),n&&i.current&&(i.current.setAttribute("aria-valuemin",String(eu[0])),i.current.setAttribute("aria-valuemax",String(eu[eu.length-1])),i.current.setAttribute("aria-valuenow",String(n))),(0,l.useEffect)(function(){var e=function(){i.current&&(r(parseFloat(getComputedStyle(i.current).getPropertyValue("left"))),a.current=requestAnimationFrame(e))};return e(),function(){a.current&&cancelAnimationFrame(a.current)}},[r]),(0,l.useMemo)(function(){return(0,T.jsx)("div",{ref:i,role:"slider",tabIndex:0,"data-ram-thumb":!0,css:[eE,{left:"calc((100% - 16px) * var(--ram-progress, 0))",transition:"left var(--ram-transition-time, 100ms) cubic-bezier(0, 0, 0.2, 1)"}]})},[])});var th="min(var(--point), var(--position))",tv="max(var(--point), var(--position))";let ty=(0,l.forwardRef)(function(e,t){var n=(0,j.useAtomValue)(ey),r=n.overage,i=n.point,a=(0,j.useAtomValue)(ev),o=(0,l.useRef)(null);return(0,l.useEffect)(function(){(0,tr.styleSet)(o,"--opacity",String(r))},[r]),(0,l.useEffect)(function(){(0,tr.styleSet)(o,"--point",String(100*i)+"%")},[i]),(0,l.useEffect)(function(){(0,tr.styleSet)(o,"--position",String(100*a)+"%")},[a]),(0,l.useMemo)(function(){return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,T.jsx)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:$.tokens.interactiveBorder,borderRadius:"2px"},children:(0,T.jsx)("div",{ref:o,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(th,", \n                  ").concat($.tokens.interactiveBorderHover," ").concat(th,", \n                  ").concat($.tokens.interactiveBorderHover," ").concat(tv,", \n                  transparent ").concat(tv," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[t])});function tx(e){var t=e.setAttrs,n=(0,o._)((0,j.useAtom)(ef),2),r=n[0],i=n[1],a=(0,o._)((0,l.useState)(!1),2),s=a[0],u=a[1],c=(0,l.useRef)(null),d=(0,l.useRef)(null),p=(0,l.useRef)(null),f=(0,l.useCallback)(function(e){t.setTransitionTime(e)},[t]),m=(0,l.useCallback)(function(e){t.setProgress(e)},[t]);return void 0===r||s||(m(r/ed),f(eD.Normal)),(0,l.useEffect)(function(){if(void 0!==r&&d.current&&p.current&&!s){var e=d.current,t=p.current,n=function(n){if(0===n.button){u(!0),t.focus();var r=e.getBoundingClientRect(),a=t.getBoundingClientRect(),o=r.width,s=a.width,l=n.target===e?s/2:n.clientX-a.left,c=null,d=function(e){var t=Math.max(0,Math.min(1,(e-r.left-l)/(o-s)));t!==c&&(c=t,m(t),i(Math.round(t*ed)))};d(n.clientX);var p=function(e){f(eD.None),d(e.clientX),e.preventDefault(),e.stopPropagation()},g=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",g),f(eD.Normal),u(!1)};window.addEventListener("pointermove",p),window.addEventListener("pointerup",g),window.addEventListener("pointercancel",g),n.preventDefault(),n.stopPropagation()}};return e.addEventListener("pointerdown",n),t.addEventListener("pointerdown",n),function(){e.removeEventListener("pointerdown",n),t.removeEventListener("pointerdown",n)}}},[r,s,i,m,f]),(0,l.useEffect)(function(){if(void 0!==r&&p.current&&!s){var e=p.current,t=function(e){if(void 0!==r&&ek.includes(e.key)){var t=Math.max(0,r-1),n=Math.min(ed,r+1),a=null;switch(e.key){case"ArrowLeft":a=t;break;case"ArrowRight":a=n;break;case"Home":a=0;break;case"End":a=ed}null!==a&&(i(a),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",t),function(){e.removeEventListener("keydown",t)}}},[s,r,i]),(0,l.useMemo)(function(){return(0,T.jsxs)(eY.View,{gap:8,children:[(0,T.jsxs)(eY.View,{innerRef:c,css:eC,children:[(0,T.jsx)(ty,{ref:d}),(0,T.jsx)(tg,{ref:p})]}),(0,T.jsx)(tl,{list:eu})]})},[])}function tb(e){var t=e.setAttrs,n=(0,o._)((0,j.useAtom)(em),1)[0],r=(0,o._)((0,j.useAtom)(ew),1)[0],i=(0,j.useSetAtom)(ex);return(0,l.useEffect)(function(){i()},[i,n]),(0,T.jsxs)(eY.View,{css:tc.container,children:[(0,T.jsxs)(eY.View,{css:tc.label,children:[(0,T.jsxs)(tp.Text,{css:tc.resource,multiline:!1,children:[n," GiB RAM"]}),(0,T.jsxs)(eY.View,{css:tc.cost,children:[(0,T.jsxs)(tp.Text,{color:"dimmer",multiline:!1,children:[r," ",(0,td.default)("compute unit",r)]}),(0,T.jsx)(tp.Text,{color:"dimmest",variant:"small",multiline:!1,children:"/sec"})]})]}),(0,T.jsx)(tx,{setAttrs:t})]})}var tS=(0,eK.cssRecord)({container:[e$.rcss.width("100%"),e$.rcss.position.absolute,e$.rcss.top(60),e$.rcss.bottom(21),e$.rcss.transition.snappy,e$.rcss.zIndex(1),(0,eq._)({},e$.container.min(320),e$.rcss.top(34))],svg:[e$.rcss.width("100%"),e$.rcss.height("100%"),e$.rcss.overflow("visible")],overage:{"--opacity":0,opacity:"var(--opacity)",transition:"opacity 80ms ease-out"}});function t_(){var e,t=(0,j.useAtomValue)(eS),n=(0,l.useRef)(null),r=(0,l.useRef)(null),i=(0,l.useRef)((null==(e=r.current)?void 0:e.offsetWidth)||0),a=(0,j.useAtomValue)(es),o=(0,j.useAtomValue)(el);(0,l.useEffect)(function(){r.current&&(i.current=r.current.offsetWidth)});var s={x1:a/(i.current-16)*100,x2:o/(i.current-16)*100,y1:0,y2:100,strokeWidth:3,vectorEffect:"non-scaling-stroke",shapeRendering:"crisp-edges"};return(0,l.useEffect)(function(){(0,tr.styleSet)(n,"--opacity",String(Math.pow(t,1/3)))},[t]),(0,T.jsx)(eY.View,{css:tS.container,px:8,id:"rope",innerRef:r,children:(0,T.jsxs)("svg",{height:100,viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",css:tS.svg,children:[(0,T.jsx)("line",(0,eG._)((0,D._)({},s),{stroke:$.tokens.outlineDimmer})),(0,T.jsx)("line",(0,eG._)((0,D._)({},s),{stroke:$.tokens.outlineDefault,strokeDasharray:8})),(0,T.jsxs)("g",{ref:n,css:tS.overage,children:[(0,T.jsx)("line",(0,eG._)((0,D._)({},s),{stroke:$.tokens.accentPrimaryDefault})),(0,T.jsx)("line",(0,eG._)((0,D._)({},s),{stroke:$.tokens.accentPrimaryStrongest,strokeDasharray:8}))]})]})})}var tw=e.i(508775),tT=e.i(754873),tj=e.i(140487),tD=e.i(929872),tk=e.i(751273),tC=e.i(33914),tE=e.i(363201),tA=[e$.rcss.borderRadius(8)],tI=(0,eK.cssRecord)({container:[tA],disabled:[tA,{opacity:.5,pointerEvents:"none"}],bottom:[e$.rcss.border({direction:"top",color:$.tokens.outlineDimmer})],edit:tT.interactive.outlined,overviewLine:[e$.rcss.flex.column,(0,eq._)({},e$.container.min(320),[e$.rcss.flex.row,e$.rcss.justify.spaceBetween])],overviewValue:[e$.rcss.fontWeight.medium],cost:[e$.rcss.flex.row,e$.rcss.align.baseline,{gap:1}],builder:[e$.rcss.position.relative,{"--cpu-transition-time":eD.Normal,"--cpu-progress":1,"--ram-transition-time":eD.Normal,"--ram-progress":1,"#rope":{opacity:0}," *":{transitionTimingFunction:"ease"},":hover, :focus-within":{" #rope":{opacity:1}}}]});function tR(e){var t=e.initialMachineConfiguration,n=e.machineConfiguration,r=e.disabled,i=e.toggleEditable,a=void 0===i||i,s=(0,l.useRef)(null),u=(0,o._)((0,l.useState)(!a),2),c=u[0],d=u[1],p=(0,j.useAtomValue)(en),f=(0,j.useAtomValue)(em),m=(0,j.useAtomValue)(eT),g=(0,j.useAtomValue)(ew),h=(0,j.useAtomValue)(e_),v=(0,j.useAtomValue)(ej),y=(0,j.useSetAtom)(X),x=(0,j.useSetAtom)(ea),b=(0,j.useSetAtom)(ev),S=(0,j.useSetAtom)(et),_=(0,j.useSetAtom)(ef);return(0,l.useEffect)(function(){y((0,tw.getDeploymentCostDetails)().autoscaleDeploymentCostDetails)},[y]),(0,l.useEffect)(function(){var e=n||t;if(e){var r=Y.findIndex(function(t){return t.toString()===e.vcpu}),i=eu.findIndex(function(t){return t.toString()===e.memory});S(r),_(i)}},[n,t,S,_]),(0,T.jsxs)(tD.Surface,{elevated:!0,css:r?tI.disabled:tI.container,children:[(0,T.jsxs)(eY.View,{p:16,gap:12,children:[(0,T.jsxs)(eY.View,{row:!0,gap:8,children:[(0,T.jsxs)(eY.View,{grow:!0,shrink:!0,gap:4,children:[(0,T.jsxs)(eY.View,{row:!0,gap:4,align:"center",children:[(0,T.jsx)(tC.default,{}),(0,T.jsx)(tp.Text,{variant:"subheadDefault",multiline:!1,children:"Machine power"})]}),(0,T.jsx)(tp.Text,{multiline:!0,color:"dimmer",children:"The power level for each machine that spins up upon any request"})]}),a?(0,T.jsx)(tj.Button,{text:c?"Done":"Edit",css:tI.edit,onClick:function(){return d(!c)}}):null]}),c?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(eY.View,{css:tI.builder,gap:12,innerRef:s,children:[(0,T.jsx)(t_,{}),(0,T.jsx)(tm,{setAttrs:{setTransitionTime:function(e){(0,tr.styleSet)(s,"--cpu-transition-time",e)},setProgress:function(e){(0,tr.styleSet)(s,"--cpu-progress",e.toString()),x(e)}}}),(0,T.jsx)(tb,{setAttrs:{setTransitionTime:function(e){(0,tr.styleSet)(s,"--ram-transition-time",e)},setProgress:function(e){(0,tr.styleSet)(s,"--ram-progress",e.toString()),b(e)}}})]}),(0,T.jsx)(tp.Text,{color:"dimmer",children:"Only some configurations are valid. When you change one slider, the other one will automatically adjust to remain valid."})]}):(0,T.jsxs)(eY.View,{gap:8,children:[(0,T.jsxs)(eY.View,{css:tI.overviewLine,children:[(0,T.jsxs)(tp.Text,{css:tI.overviewValue,multiline:!1,children:[p," vCPU",p>1?"s":""]}),(0,T.jsxs)(eY.View,{css:tI.cost,children:[(0,T.jsxs)(tp.Text,{multiline:!1,color:"dimmer",children:[m," ",(0,td.default)("compute unit",m)]}),(0,T.jsx)(tp.Text,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]})]}),(0,T.jsxs)(eY.View,{css:tI.overviewLine,children:[(0,T.jsxs)(tp.Text,{css:tI.overviewValue,multiline:!1,children:[f," GiB RAM"]}),(0,T.jsxs)(eY.View,{css:tI.cost,children:[(0,T.jsxs)(tp.Text,{multiline:!1,color:"dimmer",children:[g," ",(0,td.default)("compute unit",g)]}),(0,T.jsx)(tp.Text,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]})]})]})]}),(0,T.jsx)(eY.View,{css:tI.bottom,p:16,children:(0,T.jsxs)(eY.View,{css:tI.overviewLine,children:[(0,T.jsx)(tp.Text,{css:tI.overviewValue,multiline:!1,children:"Total per machine"}),(0,T.jsxs)(eY.View,{shrink:!0,align:"center",row:!0,gap:4,children:[(0,T.jsxs)(eY.View,{css:tI.cost,children:[(0,T.jsxs)(tp.Text,{multiline:!1,children:[v," ",(0,td.default)("compute unit",v)]}),(0,T.jsx)(tp.Text,{variant:"small",color:"dimmer",multiline:!1,children:"/sec"})]}),(0,T.jsx)(tk.Tooltip,{tooltip:(0,T.jsxs)(eY.View,{css:tI.cost,children:[(0,T.jsxs)(tp.Text,{multiline:!1,children:["$",h.toFixed(6)]}),(0,T.jsx)(tp.Text,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]}),children:(0,T.jsx)(tE.default,{color:$.tokens.foregroundDimmest})})]})]})})]})}let tP=(0,l.forwardRef)(function(e,t){var n=(0,o._)((0,j.useAtom)(eM),1)[0],r=(0,l.useRef)(null);return(0,l.useImperativeHandle)(t,function(){return r.current}),n&&r.current&&(r.current.setAttribute("aria-valuemin",String(eA[0])),r.current.setAttribute("aria-valuemax",String(eA[eA.length-1])),r.current.setAttribute("aria-valuenow",String(n))),(0,l.useMemo)(function(){return(0,T.jsx)("div",{ref:r,role:"slider",tabIndex:0,css:[eH,{left:"calc((100% - 16px) * var(--max-instances-progress, 0))",transition:"left var(--max-instances-transition-time, 100ms) ease-out"}]})},[])});var tM="min(var(--point), var(--position))",tO="max(var(--point), var(--position))";let tN=(0,l.forwardRef)(function(e,t){var n=(0,j.useAtomValue)(eB),r=n.overage,i=n.point,a=(0,j.useAtomValue)(eL),o=(0,l.useRef)(null);return(0,l.useEffect)(function(){(0,tr.styleSet)(o,"--opacity",String(r))},[r]),(0,l.useEffect)(function(){(0,tr.styleSet)(o,"--point",String(100*i)+"%")},[i]),(0,l.useEffect)(function(){(0,tr.styleSet)(o,"--position",String(100*a)+"%")},[a]),(0,l.useMemo)(function(){return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,T.jsx)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:$.tokens.interactiveBorder,borderRadius:"2px"},children:(0,T.jsx)("div",{ref:o,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(tM,", \n                  ").concat($.tokens.interactiveBorderHover," ").concat(tM,", \n                  ").concat($.tokens.interactiveBorderHover," ").concat(tO,", \n                  transparent ").concat(tO," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[t])});function tL(e){var t=e.setAttrs,n=(0,o._)((0,j.useAtom)(eP),2),r=n[0],i=n[1],a=(0,o._)((0,l.useState)(!1),2),s=a[0],u=a[1],c=(0,l.useRef)(null),d=(0,l.useRef)(null),p=(0,l.useRef)(null),f=(0,l.useCallback)(function(e){t.setTransitionTime(e)},[t]),m=(0,l.useCallback)(function(e){t.setProgress(e)},[t]);return void 0===r||s||(m(r/eI),f(eV.Normal)),(0,l.useEffect)(function(){if(void 0!==r&&d.current&&p.current&&!s){var e=d.current,t=p.current,n=function(n){if(0===n.button){u(!0),t.focus();var r=e.getBoundingClientRect(),a=t.getBoundingClientRect(),o=r.width,s=a.width,l=n.target===e?s/2:n.clientX-a.left,c=null,d=function(e){var t=Math.max(0,Math.min(1,(e-r.left-l)/(o-s)));t!==c&&(c=t,m(t),i(Math.round(t*eI)))};d(n.clientX);var p=function(e){f(eV.None),d(e.clientX),e.preventDefault(),e.stopPropagation()},g=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",g),f(eV.Normal),u(!1)};window.addEventListener("pointermove",p),window.addEventListener("pointerup",g),window.addEventListener("pointercancel",g),n.preventDefault(),n.stopPropagation()}};return e.addEventListener("pointerdown",n),t.addEventListener("pointerdown",n),function(){e.removeEventListener("pointerdown",n),t.removeEventListener("pointerdown",n)}}},[r,s,i,m,f]),(0,l.useEffect)(function(){if(void 0!==r&&p.current&&!s){var e=p.current,t=function(e){if(void 0!==r&&eU.includes(e.key)){var t=Math.max(0,r-1),n=Math.min(eI,r+1),a=null;switch(e.key){case"ArrowLeft":a=t;break;case"ArrowRight":a=n;break;case"Home":a=0;break;case"End":a=eI}null!==a&&(i(a),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",t),function(){e.removeEventListener("keydown",t)}}},[s,r,i]),(0,l.useMemo)(function(){return(0,T.jsx)(eY.View,{gap:8,children:(0,T.jsxs)(eY.View,{innerRef:c,css:eF,children:[(0,T.jsx)(tN,{ref:d}),(0,T.jsx)(tP,{ref:p})]})})},[])}function tB(e){var t=e.setAttrs,n=(0,o._)((0,j.useAtom)(eM),1)[0],r=(0,o._)((0,j.useAtom)(eO),1)[0],i=(0,o._)((0,j.useAtom)(eN),1)[0];return(0,T.jsxs)(eY.View,{css:tc.container,children:[(0,T.jsxs)(eY.View,{css:tc.label,children:[(0,T.jsxs)(tp.Text,{css:tc.resource,multiline:!1,children:[n," ",(0,td.default)("machine",n)]}),(0,T.jsxs)(eY.View,{shrink:!0,align:"center",row:!0,gap:4,children:[(0,T.jsxs)(eY.View,{css:tc.cost,children:[(0,T.jsxs)(tp.Text,{multiline:!1,children:[i," compute units"]}),(0,T.jsx)(tp.Text,{color:"dimmer",variant:"small",multiline:!1,children:"/s at max traffic"})]}),(0,T.jsx)(tk.Tooltip,{tooltip:(0,T.jsxs)(eY.View,{css:tc.cost,children:[(0,T.jsxs)(tp.Text,{multiline:!1,children:["$",r]}),(0,T.jsx)(tp.Text,{variant:"small",color:"dimmest",multiline:!1,children:"/s"})]}),children:(0,T.jsx)(tE.default,{color:$.tokens.foregroundDimmest})})]})]}),(0,T.jsx)(tL,{setAttrs:t})]})}var tV=e.i(292297),tU=[e$.rcss.colWithGap(12),e$.rcss.borderRadius("container"),e$.rcss.p(16)],tF=(0,eK.cssRecord)({container:[tU],disabled:[tU,{opacity:.5,pointerEvents:"none"}],builder:[e$.rcss.position.relative,{"--max-instances-transition-time":eV.Normal,"--max-instances":1," *":{transitionTimingFunction:"ease"}}]});function tH(e){var t=e.initialMaxMachineInstances,n=e.maxMachineInstances,r=e.disabled,i=e.onError,a=(0,l.useRef)(null),o=(0,j.useSetAtom)(eL),s=(0,j.useSetAtom)(eP);return(0,l.useEffect)(function(){var e=n||t;if(e){var r=eA.indexOf(e);if(-1===r)return void i("An error occurred while setting selected max machine instances.");s(r)}},[t,n,s,i]),(0,T.jsxs)(tD.Surface,{elevated:!0,css:r?tF.disabled:tF.container,children:[(0,T.jsxs)(eY.View,{gap:4,children:[(0,T.jsxs)(eY.View,{row:!0,gap:4,align:"center",children:[(0,T.jsx)(tV.default,{}),(0,T.jsx)(tp.Text,{variant:"subheadDefault",multiline:!1,children:"Max number of machines"})]}),(0,T.jsx)(tp.Text,{multiline:!0,variant:"small",color:"dimmer",children:"The most machines that should ever spin up to handle your highest traffic. More machines means a faster experience for your users."})]}),(0,T.jsx)(eY.View,{css:tF.builder,gap:8,innerRef:a,children:(0,T.jsx)(tB,{setAttrs:{setTransitionTime:function(e){(0,tr.styleSet)(a,"--max-instances-transition-time",e)},setProgress:function(e){(0,tr.styleSet)(a,"--max-instances-progress",e.toString()),o(e)}}})})]})}function tG(e){var t=e.initialMachineConfiguration,n=e.machineConfiguration,r=e.initialMaxMachineInstances,i=e.maxMachineInstances,a=e.disabled,o=void 0!==a&&a,s=e.toggleEditable,l=e.onError;return(0,T.jsxs)(eY.View,{gap:16,children:[(0,T.jsxs)(eY.View,{gap:4,children:[(0,T.jsx)(tp.Text,{variant:"subheadBig",children:"Autoscale machine configuration"}),(0,T.jsx)(tp.Text,{variant:"small",color:"dimmer",children:"Autoscale apps spin up enough machines to meet demand at any point in time. You are billed for the total number of compute units across all machines."})]}),(0,T.jsxs)(eY.View,{gap:16,children:[(0,T.jsx)(tR,{initialMachineConfiguration:t,machineConfiguration:n,disabled:o,toggleEditable:void 0===s||s}),(0,T.jsx)(tH,{initialMaxMachineInstances:r,maxMachineInstances:i,disabled:o,onError:l})]})]})}e.s(["AutoscaleConfigurationBuilder",()=>tG],936239);var tz=e.i(369948);function tq(e){var t=e.slug,n=e.machineConfigurations;if(t&&n)return n.find(function(e){return e.slug===t})}function tW(e){var t,n,r=e.isAzureDeployment,i=e.isFreeUser,a=e.onError,o=(t={onCompleted:function(e){"HostingMachineConfigurationsResults"!==e.hostingMachineConfigurations.__typename&&a("Something went wrong")},onError:function(e){return a(e.message)}},n=(0,D._)({},R,t),E.useQuery(P,n)),s=o.data,u=o.loading,c=(null==s?void 0:s.hostingMachineConfigurations.__typename)==="HostingMachineConfigurationsResults"?s.hostingMachineConfigurations.results:null,d=(0,j.useAtomValue)(en),p=(0,j.useAtomValue)(em),f=(0,j.useAtomValue)(eM),m=(0,l.useMemo)(function(){return function(e){var t=e.autoscaleCpuValue,n=e.autoscaleRamValue,r=e.maxInstances,i=e.autoscaleConfigurations;if(i){var a=i.find(function(e){var r=e.vcpu,i=e.memory;return t.toString()===r&&n.toString()===i});if(a){var o=a.id,s=a.slug;return{configurationId:o,configurationLabel:a.label,configurationSlug:s,maxInstances:r}}}}({autoscaleCpuValue:d,autoscaleRamValue:p,maxInstances:f,autoscaleConfigurations:c})},[d,p,f,c]),g=(0,l.useMemo)(function(){return function(e){var t=e.selectedMachineConfiguration,n=e.machineConfigurations,r=e.isAzureDeployment,i=e.isFreeUser;if(r){var a=null==n?void 0:n.find(function(e){return"cr-4-8"===e.slug});if(!a)return;return{configurationId:a.id,configurationLabel:a.label,configurationSlug:a.slug,maxInstances:2}}if(i){var o=null==n?void 0:n.find(function(e){return"cr-2-4"===e.slug});if(!o)return;return{configurationId:o.id,configurationLabel:o.label,configurationSlug:o.slug,maxInstances:1}}return t}({selectedMachineConfiguration:m,machineConfigurations:c,isAzureDeployment:r,isFreeUser:i})},[m,c,r,i]);return{defaultMachineConfiguration:g,selectedMachineConfiguration:r||i?g:m,machineConfigurations:c,loading:u}}var tK=function(e){var t=e.type,n=e.fetching,r=e.onError,i=e.onConfirm,a=e.onBack,o=(0,N.useDeploymentMode)(),s=(0,O.useDeploymentId)(),u=(0,O.useDeploymentCurrentBuild)(),c=(0,O.useDeploymentInProgressBuild)(),d=(0,O.useFreeTierCloudServices)(),p=void 0!==c,f=!p&&"string"!=typeof s,m="azure_container_app"===t,g=tW({isAzureDeployment:m,isFreeUser:d,onError:r}),h=g.defaultMachineConfiguration,v=g.selectedMachineConfiguration,y=g.machineConfigurations,x=g.loading;(0,l.useEffect)(function(){U({context:G.AutoscaleMachineConfiguration})},[]);var b=(0,l.useCallback)(function(){v?i(v):r("An error occurred trying to validate selected machine configuration")},[v,r,i]),S=x||n||p||o!==L.DeploymentMode.Ready||m||d,_=(0,l.useMemo)(function(){return m?{initialMachineConfiguration:tq({slug:null==h?void 0:h.configurationSlug,machineConfigurations:y}),initialMaxMachineInstances:null==h?void 0:h.maxInstances}:{initialMachineConfiguration:void 0,initialMaxMachineInstances:void 0}},[h,y,m]),w=_.initialMachineConfiguration,j=_.initialMaxMachineInstances;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(e1,{maxWidth:!0,children:(0,T.jsx)(tt,{onBack:function(){a()}})}),(0,T.jsx)(e1,{maxWidth:!0,children:(0,T.jsxs)(eY.View,{gap:16,children:[(0,T.jsx)(tG,{initialMachineConfiguration:w,machineConfiguration:null==u?void 0:u.machineConfiguration,initialMaxMachineInstances:j,maxMachineInstances:null==u?void 0:u.maxMachineInstances,disabled:S,onError:r}),(0,T.jsxs)(eY.View,{gap:8,pt:8,children:[(0,T.jsx)(tj.Button,{colorway:"primary",text:f?"Approve and configure build settings":"Approve and update",iconRight:(0,T.jsx)(tz.default,{}),onClick:b,loading:x}),(0,T.jsxs)(tp.Text,{color:"dimmest",children:["Your published app will utilize any available monthly free allotment before charging for additional resource usage."," ",(0,T.jsx)("a",{href:M.LINKS_DOCS.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})]})]})})]})}},399344,293265,e=>{"use strict";e.s(["Init",()=>eJ,"claimedFreeDomainAtom",()=>es,"containerAtom",()=>q,"determineIgnoredSecretKeys",()=>z,"dotReplitAtom",()=>$,"fsAtom",()=>W,"getPrivacyMode",()=>e8,"hideFreeDomainClaimSectionAtom",()=>eo,"mergeEnvironmentVariables",()=>G,"portsAtom",()=>Y,"secretsAtom",()=>K,"useActiveBuildAction",()=>e$,"useAgentInboxState",()=>eB,"useAvailableDeploymentProviders",()=>eT,"useCancelInProgressDeploymentsBuild",()=>te,"useDeployBuild",()=>e6,"useDeploymentCostDetails",()=>ew,"useDeploymentCurrentBuild",()=>ek,"useDeploymentDeployability",()=>eS,"useDeploymentError",()=>eP,"useDeploymentErrorGetter",()=>eM,"useDeploymentFailedBuild",()=>eI,"useDeploymentId",()=>ea,"useDeploymentInProgressBuild",()=>eE,"useDeploymentProvider",()=>ej,"useDeploymentScheduledDeletionTime",()=>ed,"useDeploymentSecurityScanState",()=>eN,"useDeploymentSessionOrg",()=>en,"useDeploymentSubdomain",()=>eg,"useDeploymentTimeCreated",()=>eu,"useDotReplitService",()=>J,"useFreeTierCloudServices",()=>eb,"useFsService",()=>X,"useIsMaybeVncRepl",()=>ev,"useLatestBuildActionUpdate",()=>eY,"useLatestFinishedDeploymentStatus",()=>ef,"usePortsService",()=>Z,"usePostDeployModal",()=>tn,"useRefetchDeployment",()=>eZ,"useReplitBadgeState",()=>eU,"useSecretsService",()=>Q,"useSendDeploymentLifecycleCommand",()=>e7,"useSetDeploymentTriggerSource",()=>tt],399344);var t=e.i(297083),n=e.i(167626),r=e.i(878420),i=e.i(64386),a=e.i(530658),o=e.i(817556),s=e.i(389959),l=e.i(611159),u=e.i(131141),c=e.i(541793),d=e.i(442121),p=e.i(403934),f=e.i(165349),m=e.i(368964),g=e.i(569910),h=e.i(379334),v=e.i(967963),y=e.i(262664),x=e.i(424746),b=e.i(483820),S=e.i(271047),_=e.i(233693),w=e.i(265957),T=e.i(914279),j=e.i(830597),D=e.i(68893),k=e.i(165550),C=e.i(729678),E=e.i(589910),A=e.i(311106),I=e.i(508775),R=e.i(968783),P=e.i(993796),M=e.i(98816),O=e.i(574203),N=e.i(325990),L=e.i(207237);e.i(653863);var B=e.i(973519),V=e.i(492267),U=e.i(597103);function F(){var e,t=(0,U.useReplConfigAgentStackPlatformTypeQuery)({variables:{replId:(0,L.default)()}}),n=t.data,r=t.loading,i=t.refetch;return{agentStackPlatformType:(null==n||null==(e=n.getRepl)?void 0:e.__typename)==="Repl"&&n.getRepl.config.agentStackPlatformType,loading:r,refetch:i}}e.s(["useAgentStackPlatformType",()=>F],293265);var H=e.i(423111);function G(e){var t=e.currentBuildVars,n=e.workspaceSecrets,r=e.ignoredSecretKeys,i=new Map((null==t?void 0:t.map(function(e){return[e.name,e.value]}))||[]);return n&&n.forEach(function(e){var t=e.name,n=e.value;r.includes(t)||i.set(t,n)}),Array.from(i.entries()).map(function(e){var t=(0,a._)(e,2);return{name:t[0],value:t[1]}})}function z(e){return(0,t._)(function(e){var t,n,r,i,a;return(0,o._)(this,function(o){return(t=e.deploymentTimeCreated,n=e.buildTimeCreated,r=e.ignoreSecretsUntil,i=e.replId,a=e.apolloClient,t&&n&&r>new Date(t)&&r>new Date(n))?[2,(0,_.getDeploymentEnvVars)({replId:i,apolloClient:a}).then(function(e){return e.map(function(e){return e.name})})]:[2,(0,_.getDeploymentIgnoredSecrets)({replId:i,apolloClient:a})]})}).apply(this,arguments)}var q=(0,c.atom)({}),W=(0,c.atom)({}),K=(0,c.atom)({}),$=(0,c.atom)({}),Y=(0,c.atom)({});function X(){return(0,j.useValue)(W)}function Q(){return(0,j.useValue)(K)}function J(){return(0,j.useValue)($)}function Z(){return(0,j.useValue)(Y)}var ee=(0,c.atom)(void 0),et=(0,c.atom)(void 0);function en(){return(0,j.useValue)(et)}var er=(0,c.atom)(void 0),ei=(0,c.atom)(void 0);function ea(){return(0,j.useValue)(ei)}var eo=(0,c.atom)(!1),es=(0,c.atom)(null),el=(0,c.atom)(void 0);function eu(){return(0,j.useValue)(el)}var ec=(0,c.atom)(void 0);function ed(){return(0,j.useValue)(ec)}var ep=(0,c.atom)(void 0);function ef(){return(0,j.useValue)(ep)}var em=(0,c.atom)(void 0);function eg(){return(0,j.useValue)(em)}var eh=(0,c.atom)(void 0);function ev(){return(0,j.useValue)(eh)}var ey=(0,c.atom)(!1),ex=(0,c.atom)(void 0);function eb(){var e,t,n=(0,j.useValue)(ex);return null!=(t=null==n||null==(e=n.useFreeTierCloudServices)?void 0:e.isAuthorized)&&t}function eS(){var e,t,n,r=(0,j.useValue)(ee),i=(0,j.useValue)(ex),o=(0,j.useValue)(eD),s=(0,j.useSet)(eG),l=(0,j.useSet)(e0),u=(0,a._)((0,p.useDeploymentSessionLazyQuery)({fetchPolicy:"no-cache",onCompleted:s,onError:function(e){l(e.message)}}),1)[0],c=function(e,t){if(!e||!i)return{deploy:{__typename:"ReplAuthorization",isAuthorized:!1,code:m.ReplAuthorizationCode.InsufficientPermissions,message:"Loading"},redeploy:{__typename:"ReplAuthorization",isAuthorized:!1,code:m.ReplAuthorizationCode.InsufficientPermissions,message:"Loading"},isIncludedInSubscription:!1};var n=i.createAutoscaleDeployment,r=i.createAutoscaleDeploymentPrivate,a=i.createRvmDeployment,o=i.createRvmDeploymentPrivate,s=i.createScheduledDeployment,l=i.createStaticDeployment,u=i.createStaticDeploymentPrivate,c=i.redeployAutoscaleDeployment,d=i.redeployAutoscaleDeploymentPrivate,p=i.redeployRvmDeployment,f=i.redeployRvmDeploymentPrivate,h=i.redeployScheduledDeployment,v=i.redeployStaticDeployment,y=i.redeployStaticDeploymentPrivate;switch(e){case m.HostingBuildProvider.Static:return{deploy:t?u:l,redeploy:t?y:v,isIncludedInSubscription:!1};case m.HostingBuildProvider.Cron:return{deploy:s,redeploy:h,isIncludedInSubscription:!1};case m.HostingBuildProvider.AzureContainerApp:case m.HostingBuildProvider.CloudRun:return{deploy:t?r:n,redeploy:t?d:c,isIncludedInSubscription:!1};case m.HostingBuildProvider.AzureVm:case m.HostingBuildProvider.Gce:return{deploy:t?o:a,redeploy:t?f:p,isIncludedInSubscription:!1};case m.HostingBuildProvider.Extension:throw Error("Found unexpected provider");default:(0,g.default)(e)}};return{deployability:c(null==o?void 0:o.provider,null!=(t=null==o?void 0:o.isPrivate)?t:void 0),getDeployabilityByProvider:c,refetch:function(){if(r)return u({variables:{replId:r.id}})},hasDebugSummariesAuthorization:null!=(n=null==i||null==(e=i.useDeploymentDebugSummaries)?void 0:e.isAuthorized)&&n}}var e_=(0,c.atom)(I.defaultDeploymentCostDetails);function ew(){var e=(0,j.useValue)(e_),t=(0,s.useCallback)(function(t){return(0,I.getMachineConfigurationCostDetails)(t,e)},[e]);return(0,i._)((0,r._)({},e),{getMachineConfigurationCostDetailsBySlug:t})}function eT(){var e=en(),t=(0,N.useOrgFlag)({controlName:h.flagShowOnlyAzureDeployments,default:!1}),n=(0,P.useFlag)({controlName:h.flagShowOnlyAzureDeployments,default:!1}),r=e?t:n,i=(0,s.useCallback)(function(e){switch(e){case m.DeployHostingBuildAppType.CloudRun:return r?m.HostingBuildProvider.AzureContainerApp:m.HostingBuildProvider.CloudRun;case m.DeployHostingBuildAppType.Worker:case m.DeployHostingBuildAppType.Server:if(r)return m.HostingBuildProvider.AzureVm;return m.HostingBuildProvider.Gce;case m.DeployHostingBuildAppType.Cron:if(r)throw Error("Azure deployments are not supported for Cron jobs");return m.HostingBuildProvider.Cron;case m.DeployHostingBuildAppType.Static:if(r)throw Error("Azure deployments are not supported for Static sites");return m.HostingBuildProvider.Static;default:(0,g.default)(e)}},[r]),a=r?{deploymentProviders:[m.HostingBuildProvider.AzureContainerApp,m.HostingBuildProvider.AzureVm],defaultDeploymentProvider:m.HostingBuildProvider.AzureContainerApp}:{deploymentProviders:[m.HostingBuildProvider.Gce,m.HostingBuildProvider.CloudRun,m.HostingBuildProvider.Static,m.HostingBuildProvider.Cron],defaultDeploymentProvider:m.HostingBuildProvider.CloudRun};return{deploymentProviders:a.deploymentProviders,defaultDeploymentProvider:a.defaultDeploymentProvider,getProviderFromAppType:i}}function ej(e){var n=e.onError,r=e.dotReplitService,i=(0,a._)((0,s.useState)(!0),2),l=i[0],u=i[1],c=(0,a._)((0,s.useState)(void 0),2),d=c[0],p=c[1],f=(0,a._)((0,s.useState)(void 0),2),g=f[0],h=f[1],v=eT(),y=v.defaultDeploymentProvider,x=v.getProviderFromAppType,b=(0,V.useIsAgentStackRepl)().isAgentStackRepl;return(0,s.useEffect)(function(){(0,t._)(function(){var e,t,i;return(0,o._)(this,function(a){switch(a.label){case 0:if(a.trys.push([0,2,3,4]),y===m.HostingBuildProvider.AzureContainerApp)return p(y),h(y),[2];if(b)return p(e=x(m.DeployHostingBuildAppType.CloudRun)),h(e),[2];return[4,(0,C.getDotReplitDeploymentConfig)(r)];case 1:if(null===(t=a.sent()).appType)return p(y),h(y),[2];return p(i=x(t.appType)),h(i),[3,4];case 2:return a.sent(),n("Something went wrong"),[3,4];case 3:return u(!1),[7];case 4:return[2]}})})()},[n,r,y,x,b]),{loading:l,activeProvider:d,setActiveProvider:p,recommendedProvider:g}}var eD=(0,c.atom)(void 0);function ek(){return(0,j.useValue)(eD)}var eC=(0,c.atom)(void 0);function eE(){return(0,j.useValue)(eC)}var eA=(0,c.atom)(void 0);function eI(){return(0,j.useValue)(eA)}var eR=(0,c.atom)(void 0);function eP(){return(0,j.useValue)(eR)}function eM(){return(0,j.useGet)(eR)}var eO=(0,c.atom)(!1);function eN(){var e=(0,j.useValue)(eO),t=(0,j.useSet)(eO),n=(0,R.useCurrentUserStoredOrgContext)().orgId,r=(0,O.default)(n),i=r.requireSecurityScanOnDeployment,a=r.adminOnlySecurityScanOnDeploymentBypass,o=r.isAdmin,l=(0,s.useMemo)(function(){return!!n&&(!!i||!!a&&!o)},[n,i,a,o]),u=!l,c=l||e,d=(0,s.useMemo)(function(){if(l){if(i)return"required";if(a&&!o)return"admin-only-bypass"}},[l,i,a,o]);return{enabled:c,userCanControl:u,isOrgEnforced:l,enforcementReason:d,setDeploymentSecurityScanEnabled:t}}var eL=(0,c.atom)(!1);function eB(){return{enabled:(0,j.useValue)(eL),setAgentInboxEnabled:(0,j.useSet)(eL)}}var eV=(0,c.atom)(null);function eU(){return{enabled:(0,j.useValue)(eV),setReplitBadgeEnabled:(0,j.useSet)(eV)}}var eF=(0,c.atom)(void 0),eH=(0,c.atom)(null,function(e,t){t(ei,void 0),t(el,void 0),t(em,void 0),t(eD,void 0),t(eC,void 0),t(T.deploymentModeAtom,D.DeploymentMode.Ready)}),eG=(0,c.atom)(null,function(e,t,n){var r,i="Repl"===n.getRepl.__typename?n.getRepl:null,a=(null==(r=n.currentUser)?void 0:r.__typename)==="CurrentUser"?n.currentUser:null;i&&a&&t(ex,i.authorizations)}),ez=(0,c.atom)(null,function(e,t,n){var r,i,a,o,s,l,u="Repl"===n.getRepl.__typename?n.getRepl:null,c=(null==(r=n.currentUser)?void 0:r.__typename)==="CurrentUser"?n.currentUser:null;if(u&&c){t(ee,u),t(et,null!=(a=u.org)?a:void 0),t(er,c),t(eG,n),t(e_,(0,I.getDeploymentCostDetails)()),t(eh,!!u.config.isVnc);var d=u.hostingDeployment;if(d){if("HostingDeployment"!==d.__typename)return t(eR,"Unexpected hosting deployment typename: ".concat(d.__typename));if(t(ei,d.id),t(el,d.timeCreated),t(eD,d.currentBuild),t(ec,d.scheduledDeletionTime||void 0),t(eO,d.securityScanEnabled),t(eL,d.agentInboxEnabled),t(eV,null!=(s=d.replitBadgeEnabled)?s:null),t(ep,null!=(l=d.latestBuildStatus)?l:void 0),t(em,d.replitAppSubdomain||u.lastUsedSubdomain||(0,v.getQualifiedReplSubdomain)({replSlug:u.slug,username:null==(o=u.owner)?void 0:o.username})),d.inProgressBuild){t(eC,d.inProgressBuild),t(T.deploymentModeAtom,D.DeploymentMode.Deploying);return}return void t(T.deploymentModeAtom,(0,k.getDeploymentModeFromBuildStatus)(d.currentBuild.status))}t(em,u.lastUsedSubdomain||(0,v.getQualifiedReplSubdomain)({replSlug:u.slug,username:null==(i=u.owner)?void 0:i.username})),t(T.deploymentModeAtom,D.DeploymentMode.Ready)}});function eq(){var e=(0,j.useSet)(ez),t=(0,j.useSet)(e0);return(0,a._)((0,p.useDeploymentSessionLazyQuery)({fetchPolicy:"no-cache",onCompleted:e,onError:function(e){t(e.message)}}),1)[0]}var eW=(0,c.atom)(null,function(e,t,n){if("HostingBuildDeployStatusAction"===n.__typename){var r=e(T.deploymentModeAtom),i=e(eC),a=e(eD),o=n.status;if(r===D.DeploymentMode.Deploying){if(!i)return void t(e0,"No deployment in progress found");t(eC,(0,u.produce)(i,function(e){e.status=o})),(o===m.HostingBuildStatus.Success||o===m.HostingBuildStatus.Failed)&&(o===m.HostingBuildStatus.Failed&&t(eA,(0,u.produce)(i,function(e){e.status=o})),t(eC,void 0),o!==m.HostingBuildStatus.Success&&a||t(eD,(0,u.produce)(i,function(e){e.status=o,e.hasImageTag=i.provider!==m.HostingBuildProvider.Static&&o===m.HostingBuildStatus.Success})))}else if(r===D.DeploymentMode.ProcessingLifecycleCommand){if(!a)return void t(e0,"No current build found");t(eD,(0,u.produce)(a,function(e){e.status=o}))}t(T.deploymentModeAtom,(0,k.getDeploymentModeFromBuildStatus)(o)),n.message&&o===m.HostingBuildStatus.Failed&&t(e0,n.message)}}),eK=(0,c.atom)(null);function e$(){return(0,j.useValue)(eK)}function eY(e){var t=(0,j.useObservableValue)(eK),n=(0,M.default)(e);(0,s.useEffect)(function(){return t.subscribe(function(e){e&&n.current(e)})},[t,n])}var eX=(0,c.atom)(function(e){var t,n;switch(e(T.deploymentModeAtom)){case D.DeploymentMode.Deploying:return null==(t=e(eC))?void 0:t.id;case D.DeploymentMode.ProcessingLifecycleCommand:return null==(n=e(eD))?void 0:n.id;default:return}}),eQ=(0,c.atom)(null,function(e,n,r){var i=r.data.data;return(0,t._)(function(){return(0,o._)(this,function(e){return i&&(n(eW,i.hostingBuildDeployActionUpdates),n(eK,i.hostingBuildDeployActionUpdates)),[2]})})()});function eJ(e){var t,n,r,i,a;return t=e.replId,n=eq(),r=(0,j.useSet)(eQ),i=(0,j.useSet)(e0),(0,s.useEffect)(function(){n({variables:{replId:t}})},[n,t]),a=(0,j.useValue)(eX),(0,p.useDeploymentSessionBuildDeployActionUpdatesSubscription)({variables:{input:{buildId:null!=a?a:""}},skip:!a,onData:r,onError:function(e){i(e.message)}}),null}function eZ(){var e=(0,L.default)(),t=eq(),n=(0,j.useSet)(T.deploymentModeAtom);return(0,s.useCallback)(function(){return n(D.DeploymentMode.Loading),t({variables:{replId:e}})},[t,n,e])}var e0=(0,c.atom)(null,function(e,t,n){t(eR,n)}),e1=(0,c.atom)(null,function(e,t,n){var r,i=n.deployHostingBuild2;if(i){if("DeployHostingBuild2Result"!==i.__typename)return void t(e0,i.message);t(eR,void 0),t(eC,i.build),t(ei,i.targetDeployment.id),t(el,i.targetDeployment.timeCreated),t(em,null!=(r=i.targetDeployment.replitAppSubdomain)?r:void 0),t(T.deploymentModeAtom,D.DeploymentMode.Deploying)}}),e2=(0,c.atom)(null,function(e,t,n){var r,i=n.rollbackHostingBuild;if(i){if("RollbackHostingBuildResult"!==i.__typename)return void t(e0,i.message);t(eC,i.build),t(ei,i.targetDeployment.id),t(el,i.targetDeployment.timeCreated),t(em,null!=(r=i.targetDeployment.replitAppSubdomain)?r:void 0),t(T.deploymentModeAtom,D.DeploymentMode.Deploying)}});function e4(e){var t=e.provider,n=e.ignorePorts;switch(t){case m.HostingBuildProvider.Static:return m.DeployHostingBuildAppType.Static;case m.HostingBuildProvider.CloudRun:case m.HostingBuildProvider.AzureContainerApp:return m.DeployHostingBuildAppType.CloudRun;case m.HostingBuildProvider.Cron:return m.DeployHostingBuildAppType.Cron;case m.HostingBuildProvider.Gce:case m.HostingBuildProvider.AzureVm:case m.HostingBuildProvider.Extension:case void 0:return n?m.DeployHostingBuildAppType.Worker:m.DeployHostingBuildAppType.Server;default:(0,g.default)(t)}}function e8(e){var t=e.isPrivate,n=e.hasPrivatePassword;return t&&n?m.DeployHostingBuildPrivacyMode.Password:t?m.DeployHostingBuildPrivacyMode.Private:m.DeployHostingBuildPrivacyMode.Public}function e3(e){var t=e.selectedPrivacyMode,n=e.shouldRequirePrivateDeployments,r=e.shouldDisablePasswordProtectedDeployments;return n&&t===m.DeployHostingBuildPrivacyMode.Public||r&&t===m.DeployHostingBuildPrivacyMode.Password?m.DeployHostingBuildPrivacyMode.Private:t}function e6(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).openDeploymentsPane,n=(0,L.default)(),u=en(),c=(0,d.useApolloClient)(),_=ea(),k=eu(),I=J(),R=(0,j.useValue)(q),M=X(),N=Q(),B=eb(),V=(0,a._)((0,p.useDeploymentSessionDeployBuildMutation)(),1)[0],U=(0,j.useSet)(e1),F=(0,j.useSet)(e0),W=(0,j.useSet)(e2),K=(0,j.useSet)(T.deploymentModeAtom),$=(0,j.useGet)(eC),Y=(0,j.useSet)(eA),Z=(0,j.useGet)(eF),ee=eN().enabled,et=eB().enabled,er=eU().enabled,ei=ek(),eo=(0,a._)((0,f.useRollbackHostingBuildMutation)(),1)[0],es=(0,y.useHeliumDevelopmentDatabase)(),el=es.database,ec=es.getPgVersion,ed=es.getTableCount,ep=(0,x.useNeonDevelopmentDatabase)().database,ef=(0,x.useNeonProductionDatabase)().database,em=(0,w.usePrepareDatabaseState)(),eg=em.state,eh=em.dispatch,ev=(0,S.useHostingBuildRequiresDatabasePreparation)().requiresDatabasePreparation,ex=(0,x.useRefetchDatabasesLazy)("production").refetch,eS=(0,O.default)(null==u?void 0:u.id),e_=eS.requirePrivateDeployments,ew=eS.adminOnlyPublicDeployments,eT=eS.disablePasswordProtectedDeployments,ej=eS.adminOnlyPasswordProtectedDeploymentsBypass,eD=eS.isAdmin,eE=(0,H.useSetPublishClickedCompleted)(),eI=e_||!eD&&ew,eR=eT||!eD&&ej,eP=(0,s.useCallback)(function(e,t){var n,r,i;if(U(e),t&&!ef&&ex(),(null==(n=e.deployHostingBuild2)?void 0:n.__typename)!=="DeployHostingBuild2Result")throw Error(null!=(i=null==(r=e.deployHostingBuild2)?void 0:r.message)?i:"Unknown error")},[U,ef,ex]),eM=(0,P.useFlag)({controlName:h.flagEnableStandByBuilds,default:!1}),eO=(0,s.useCallback)(function(r){var i=r.envVars,a=r.subdomain,s=r.machineConfigurationId,c=r.maxMachineInstances,d=r.config,p=r.machineJob,f=r.privacyMode,y=r.privatePassword,x=r.hasAgentSession,S=r.ignoredSecrets,w=r.createNeonProductionDatabase,T=r.pushDevelopmentDatabaseObjects,j=r.syncStripe,k=r.enableSecurityScan,E=r.agentInboxEnabled,A=r.replitBadgeEnabled,P=r.provider,O=r.purchaseDomain;return(0,t._)(function(){var t,r,N,L,B,U,H,G,z,q,W,X;return(0,o._)(this,function(o){switch(o.label){case 0:if(eE(!0),Y(void 0),$())return F("Deployment already in progress"),[2];o.label=1;case 1:if(o.trys.push([1,10,,11]),t=d.buildCommand,r=d.runCommand,N=d.publicDir,L=d.ignorePorts,!(B=P?e4({provider:P,ignorePorts:!!L}):d.appType))throw new b.AppTypeFoundError;if(!a)throw new b.SubdomainNotFoundError;switch(B){case m.DeployHostingBuildAppType.Static:if(!(0,v.hasCommand)(N))throw new b.PublicDirNotFoundError;break;case m.DeployHostingBuildAppType.Worker:case m.DeployHostingBuildAppType.Server:case m.DeployHostingBuildAppType.CloudRun:case m.DeployHostingBuildAppType.Cron:if(!(0,v.hasCommand)(r))throw new b.RunCommandNotFoundError;if((0,v.hasInvalidRunCommand)(r))throw new b.InvalidRunCommandError;if(B===m.DeployHostingBuildAppType.Cron){if(!(null==p?void 0:p.crontab)||""===p.crontab)throw new b.InvalidCrontabError("Schedule cannot be empty.");if(!(0,l.isValidCron)(p.crontab))throw new b.InvalidCrontabError("Invalid schedule. Must be a valid cron expression.");if(!(null==p?void 0:p.timezone)||""===p.timezone)throw new b.InvalidTimezoneError("Timezone cannot be empty.");if(!(0,h.isValidTimezone)(p.timezone))throw new b.InvalidTimezoneError("Invalid timezone. Must be valid a timezone abbreviation.")}break;default:(0,g.default)(B)}if(U=e3({selectedPrivacyMode:f,shouldRequirePrivateDeployments:eI,shouldDisablePasswordProtectedDeployments:eR}),void 0!==y&&U===m.DeployHostingBuildPrivacyMode.Password){if(""===y.trim())throw new b.PrivatePasswordError("Password cannot be empty.");if(y.length<5)throw new b.PrivatePasswordError("Password must be 5 or more characters.")}if(H=void 0,!(el&&ec&&ed))return[3,4];return[4,ec()];case 2:if(G=o.sent(),H={connectionString:el.connectionString,pgVersion:G},null!==w)return[3,4];return[4,ed()];case 3:(w=o.sent()>0)||(T=null),o.label=4;case 4:if(K(D.DeploymentMode.Preparing),z=Z(),q={replId:n,targetDeploymentId:_,targetMachineConfigurationId:s,maxMachineInstances:c,commands:{build:t,run:r||""},envVars:i,subdomain:a,provider:P,appType:B,context:"workspace",machineJob:p,privacyMode:U,privatePassword:y,hasAgentSession:x,ignoredSecretKeys:S,createNeonProductionDatabase:w,pushDevelopmentDatabaseObjects:T,syncStripe:j,enableSecurityScan:k,agentInboxEnabled:E,replitBadgeEnabled:null!=A?A:er,heliumDevelopmentDatabase:H,triggerSource:z,purchaseDomain:O},!(!T&&w&&ev))return[3,6];return[4,ev({heliumDevelopmentDatabase:H,neonDevelopmentDatabase:ep,neonProductionDatabase:ef,deployInputOptions:q,deployConfig:d,context:"deployBuild",appType:B,org:u})];case 5:if(o.sent())return e&&e(),[2];o.label=6;case 6:return[4,(0,C.getDotReplitDeploymentConfig)(I)];case 7:return W=o.sent(),[4,(0,C.setDotReplitDeploymentConfig)({buildCommand:t,runCommand:r,appType:B,publicDir:N,ignorePorts:L},W,{dotReplit:I,fs:M,container:R})];case 8:return o.sent(),[4,V({variables:{input:q},onCompleted:function(e){return eP(e,null!=w&&w)}})];case 9:return o.sent(),[3,11];case 10:throw X=o.sent(),K(D.DeploymentMode.Ready),X;case 11:return[2]}})})()},[V,F,K,$,ev,eP,e,ec,el,ed,_,n,ef,ep,R,M,I,eI,eR,u,eE,Y,Z,er]),eL=(0,s.useCallback)(function(e){var r=e.envVars,i=e.subdomain,a=e.machineConfigurationId,s=e.maxMachineInstances,u=e.config,c=e.machineJob,d=e.privacyMode,p=e.privatePassword,f=e.hasAgentSession,y=e.ignoredSecrets,x=e.createNeonProductionDatabase,S=e.pushDevelopmentDatabaseObjects,w=e.syncStripe,T=e.enableSecurityScan,j=e.provider,D=e.purchaseDomain,k=e.replitBadgeEnabled;return(0,t._)(function(){var e,t,C,E,I,R,P,M,O,N;return(0,o._)(this,function(o){switch(o.label){case 0:if(!eM)throw Error("Standby builds are not enabled");if((0,A.sendSentryError)({error:Error("Start standby build"),context:"kickOffStandbyBuild",isDeploymentsPane:!1}),e=u.buildCommand,t=u.runCommand,C=u.publicDir,E=u.ignorePorts,!(I=j?e4({provider:j,ignorePorts:!!E}):u.appType))throw new b.AppTypeFoundError;switch(I){case m.DeployHostingBuildAppType.Static:if(!(0,v.hasCommand)(C))throw new b.PublicDirNotFoundError;break;case m.DeployHostingBuildAppType.Worker:case m.DeployHostingBuildAppType.Server:case m.DeployHostingBuildAppType.CloudRun:case m.DeployHostingBuildAppType.Cron:if(!(0,v.hasCommand)(t))throw new b.RunCommandNotFoundError;if((0,v.hasInvalidRunCommand)(t))throw new b.InvalidRunCommandError;if(I===m.DeployHostingBuildAppType.Cron){if(!(null==c?void 0:c.crontab)||""===c.crontab)throw new b.InvalidCrontabError("Schedule cannot be empty.");if(!(0,l.isValidCron)(c.crontab))throw new b.InvalidCrontabError("Invalid schedule. Must be a valid cron expression.");if(!(null==c?void 0:c.timezone)||""===c.timezone)throw new b.InvalidTimezoneError("Timezone cannot be empty.");if(!(0,h.isValidTimezone)(c.timezone))throw new b.InvalidTimezoneError("Invalid timezone. Must be valid a timezone abbreviation.")}break;default:(0,g.default)(I)}if(R=e3({selectedPrivacyMode:d,shouldRequirePrivateDeployments:eI}),void 0!==p&&R===m.DeployHostingBuildPrivacyMode.Password){if(""===p.trim())throw new b.PrivatePasswordError("Password cannot be empty.");if(p.length<5)throw new b.PrivatePasswordError("Password must be 5 or more characters.")}if(P=void 0,!(el&&ec&&ed))return[3,3];return[4,ec()];case 1:if(M=o.sent(),P={connectionString:el.connectionString,pgVersion:M},null!==x)return[3,3];return[4,ed()];case 2:(x=o.sent()>0)||(S=null),o.label=3;case 3:return O=Z(),N={replId:n,targetDeploymentId:_,targetMachineConfigurationId:a,maxMachineInstances:s,commands:{build:e,run:t||""},envVars:r,subdomain:i,provider:j,appType:I,context:"workspace",machineJob:c,privacyMode:R,hasAgentSession:f,ignoredSecretKeys:y,createNeonProductionDatabase:x,pushDevelopmentDatabaseObjects:S,syncStripe:w,enableSecurityScan:T,replitBadgeEnabled:null!=k?k:er,heliumDevelopmentDatabase:P,triggerSource:O,purchaseDomain:D,skipDeploy:!0},(0,A.sendSentryError)({error:Error("Call deploy mutation for standby build"),context:"kickOffStandbyBuild",isDeploymentsPane:!1}),[4,V({variables:{input:N}})];case 4:return o.sent(),[2]}})})()},[eM,V,ec,el,ed,_,n,Z,eI,er]),eV=(0,C.useGetSecretsAsDeploymentEntries)({secrets:N,replId:n}),eH=(0,E.useAutoscaleConfigurations)({isAzureDeployment:!1,isFreeUser:B,onError:function(){}}).defaultMachineConfiguration,eG=(0,j.useGet)(ey);return{deployBuild:eO,kickOffStandbyBuild:eL,redeployWithNoNewOptions:(0,s.useCallback)(function(r){var i=r.hasAgentSession,a=r.purchaseDomain;return(0,t._)(function(){var t,r,s,l,d,p,f,y,x,S,w,T,j,E,A,R,P,M,O,N,L;return(0,o._)(this,function(o){switch(o.label){case 0:if(Y(void 0),$())return F("Deployment already in progress"),[2];t=function(t){K(D.DeploymentMode.Ready),F(t.message),e&&e()},o.label=1;case 1:return o.trys.push([1,10,,11]),K(D.DeploymentMode.Preparing),[4,eV()];case 2:return r=o.sent(),[4,z({deploymentTimeCreated:k,buildTimeCreated:null==ei?void 0:ei.timeCreated,ignoreSecretsUntil:h.SYNCING_SECRETS_ROLLOUT_DATE,replId:n,apolloClient:c})];case 3:return s=o.sent(),l=G({currentBuildVars:null==ei?void 0:ei.envVars,workspaceSecrets:r,ignoredSecretKeys:s}),[4,(0,C.getDotReplitDeploymentConfig)(I)];case 4:if(p=(d=o.sent()).buildCommand,f=d.runCommand,y=d.publicDir,x=d.ignorePorts,S=d.providerFromTarget,!_)return t(new b.DeploymentNotFoundError),[2];if(!ei)return t(new b.CurrentBuildNotFoundError),[2];if(T=ei.provider,ei.provider===m.HostingBuildProvider.Static&&S===m.HostingBuildProvider.CloudRun&&(T=m.HostingBuildProvider.CloudRun,w=null==eH?void 0:eH.configurationId),(ei.provider===m.HostingBuildProvider.CloudRun||ei.provider===m.HostingBuildProvider.Gce)&&S===m.HostingBuildProvider.Static&&(T=m.HostingBuildProvider.Static,w=void 0),!(j=e4({provider:T,ignorePorts:!!x})))return t(new b.AppTypeFoundError),[2];switch(j){case m.DeployHostingBuildAppType.Static:if(!(0,v.hasCommand)(y))return t(new b.PublicDirNotFoundError),[2];break;case m.DeployHostingBuildAppType.Worker:case m.DeployHostingBuildAppType.Server:case m.DeployHostingBuildAppType.CloudRun:case m.DeployHostingBuildAppType.Cron:if(!(0,v.hasCommand)(f))return t(new b.RunCommandNotFoundError),[2];break;default:(0,g.default)(j)}if(E=void 0,!(el&&ec))return[3,6];return[4,ec()];case 5:A=o.sent(),E={connectionString:el.connectionString,pgVersion:A},o.label=6;case 6:if(R=!!ef,P=e8({isPrivate:ei.isPrivate,hasPrivatePassword:ei.hasPrivatePassword}),M=Z(),O=eG(),N={replId:n,targetDeploymentId:_,commands:{build:p,run:f||""},provider:T,targetMachineConfigurationId:w,appType:j,envVars:l,context:"workspace",privacyMode:P,hasAgentSession:i,ignoredSecretKeys:s,createNeonProductionDatabase:R,enableSecurityScan:ee,agentInboxEnabled:et,replitBadgeEnabled:er,heliumDevelopmentDatabase:E,triggerSource:M,syncStripe:O,purchaseDomain:a},!(R&&ev))return[3,8];return[4,ev({heliumDevelopmentDatabase:E,neonDevelopmentDatabase:ep,neonProductionDatabase:ef,deployConfig:d,deployInputOptions:N,context:"redeployWithNoNewOptions",appType:j,org:u})];case 7:if(o.sent())return e&&e(),[2];o.label=8;case 8:return[4,V({variables:{input:N},onCompleted:function(e){var n;(null==(n=e.deployHostingBuild2)?void 0:n.__typename)==="UserError"?t(Error(e.deployHostingBuild2.message)):eP(e,R)}})];case 9:return o.sent(),[3,11];case 10:return L=o.sent(),t(L),[3,11];case 11:return[2]}})})()},[V,F,K,$,ee,et,er,eV,ev,eP,e,ec,Y,el,_,n,ef,ep,I,ei,k,c,u,Z,eH,eG]),approveAndDeployDatabaseChanges:(0,s.useCallback)(function(e){var n=e.prepareDatabaseStateId,a=e.sqlStatementsToExecute,s=e.pushDevelopmentDatabaseObjects;return(0,t._)(function(){var e,t,l,u,c,d,p;return(0,o._)(this,function(o){switch(o.label){case 0:if(!a&&!s)return F("No SQL statements or push development database objects found"),[2];if(eg.id!==n)return F("Preparing database state ID does not match current preparing database state ID"),[2];if(!(e=eg.deployOptions))return F("No deploy option found in preparing database state"),[2];if($())return F("Deployment already in progress"),[2];if(t=e.deployConfig,l=e.deployInputOptions,u=e.context,c=l,a&&(eh({type:"APPROVE_AND_DEPLOY",approved:"sqlStatementsToExecute"}),c=(0,i._)((0,r._)({},l),{sqlStatementsToExecute:a})),s&&(eh({type:"APPROVE_AND_DEPLOY",approved:s}),c=(0,i._)((0,r._)({},l),{pushDevelopmentDatabaseObjects:s})),"deployBuild"!==u)return[3,3];return[4,(0,C.getDotReplitDeploymentConfig)(I)];case 1:return d=o.sent(),[4,(0,C.setDotReplitDeploymentConfig)(t,d,{dotReplit:I,fs:M,container:R})];case 2:o.sent(),o.label=3;case 3:return o.trys.push([3,5,,6]),[4,V({variables:{input:c},onCompleted:function(e){return eP(e,!0)}})];case 4:return o.sent(),[3,6];case 5:throw p=o.sent(),K(D.DeploymentMode.Ready),p;case 6:return[2]}})})()},[V,K,$,eh,F,eP,R,I,M,eg]),rollbackToPreviousBuild:(0,s.useCallback)(function(e){var r=e.rollbackCandidateBuildId,i=e.envVars;return(0,t._)(function(){var e;return(0,o._)(this,function(t){switch(t.label){case 0:if($())return F("Deployment already in progress"),[2];t.label=1;case 1:if(t.trys.push([1,3,,4]),!r)throw new b.RollbackBuildNotProvidedError;if(!_)throw new b.DeploymentNotFoundError;return K(D.DeploymentMode.Preparing),[4,eo({variables:{input:{targetDeploymentId:_,rollbackCandidateBuildId:r,replId:n,envVars:i}},onCompleted:W})];case 2:return t.sent(),[3,4];case 3:throw e=t.sent(),K(D.DeploymentMode.Ready),e;case 4:return[2]}})})()},[eo,W,F,K,_,n,$])}}var e5=(0,c.atom)(null,function(e,a,s){var l=s.args,c=s.replId;return(0,t._)(function(){var t,s,d,p,f,g,h,v,y,x;return(0,o._)(this,function(o){switch(o.label){case 0:if(t=void 0,(s=l.command)===m.SendDeploymentLifecycleCommandType.UpdateMachineConfiguration){if(!(d=e(eD)))return a(e0,"No current build found"),[2];if(!l.machineConfigurationId)return a(e0,"No machine configuration found"),[2];(p=(0,k.getBuildStatusFromLifecycleCommandType)(s))&&(a(eD,(0,u.produce)(d,function(e){e.status=p})),a(T.deploymentModeAtom,(0,k.getDeploymentModeFromBuildStatus)(p)))}if(s===m.SendDeploymentLifecycleCommandType.Resume||s===m.SendDeploymentLifecycleCommandType.Suspend){if(!(f=e(eD)))return a(e0,"No current build found"),[2];t=f.id,(g=(0,k.getBuildStatusFromLifecycleCommandType)(s))&&(a(eD,(0,u.produce)(f,function(e){e.status=g})),a(T.deploymentModeAtom,(0,k.getDeploymentModeFromBuildStatus)(g)))}if(s===m.SendDeploymentLifecycleCommandType.UpdateDeploymentFeatureConfig){if(!(h=e(eD)))return a(e0,"No current build found"),[2];(v=(0,k.getBuildStatusFromLifecycleCommandType)(s))&&(a(eD,(0,u.produce)(h,function(e){e.status=v})),a(T.deploymentModeAtom,(0,k.getDeploymentModeFromBuildStatus)(v)))}o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(0,_.sendDeploymentLifecycleCommandMutation)((0,i._)((0,r._)({},l),{buildId:t,replId:c}))];case 2:return o.sent(),s===m.SendDeploymentLifecycleCommandType.Destroy&&a(eH),[3,4];case 3:return y=o.sent(),x="Failed to send deployment lifecycle command",(0,n._)(y,Error)?x=y.message:"string"==typeof y&&(x=y),a(e0,x),[3,4];case 4:return[2]}})})()});function e7(){var e=(0,L.default)(),n=(0,j.useSet)(e5);return(0,s.useCallback)(function(r){return(0,t._)(function(){return(0,o._)(this,function(t){switch(t.label){case 0:return[4,n({replId:e,args:r})];case 1:return t.sent(),[2]}})})()},[n,e])}var e9=(0,c.atom)(null,function(e,n){return(0,t._)(function(){var t,r,i;return(0,o._)(this,function(a){switch(a.label){case 0:if(!(t=e(ei)))return n(e0,"No deployment found"),[2];if(!(r=e(eC)))return n(e0,"No deployment in progress found"),[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,_.cancelInProgressDeploymentsBuildMutation)({buildId:r.id,targetDeploymentId:t})];case 2:return a.sent(),[3,4];case 3:return n(e0,a.sent().message),[2];case 4:if(n(eC,void 0),n(T.deploymentModeAtom,D.DeploymentMode.Ready),(i=e(eD))&&(i.status===m.HostingBuildStatus.Success||i.status===m.HostingBuildStatus.Failed))return[2];return n(eD,(0,u.produce)(r,function(e){e.status=m.HostingBuildStatus.Failed})),[2]}})})()});function te(){return(0,j.useSet)(e9)}function tt(){return(0,j.useSet)(eF)}function tn(){var e=(0,B.useGlobalModal)().show,t=ek(),n=eE(),r=en(),i=eg(),a=eu(),o=(0,L.default)(),l=eb(),u=(0,V.useIsAgentStackRepl)().isAgentStackRepl,c=F().agentStackPlatformType,d=(0,M.default)(null==n?void 0:n.id),p=(0,s.useRef)(void 0),f=(null==t?void 0:t.status)===m.HostingBuildStatus.Success,g=(null==t?void 0:t.id)===d.current,h=!!r,v=i?"https://".concat(i,".replit.app"):null;(0,s.useEffect)(function(){f&&g&&(null==t?void 0:t.id)&&p.current!==t.id&&(p.current=t.id,l&&!h&&v&&a?e("FreeDeployExpirationModal",{deploymentUrl:v}):u&&c===m.AgentStackPlatformType.Slack?e("SlackAgentStackPostDeployModal",{replId:o}):u&&c===m.AgentStackPlatformType.TimeBased?e("TimeBasedAgentStackPostDeployModal"):u&&c===m.AgentStackPlatformType.Telegram&&e("TelegramAgentStackPostDeployModal",{replId:o}))},[c,f,null==t?void 0:t.id,a,v,l,u,h,g,o,e])}},115820,613007,331820,e=>{"use strict";var t,n=e.i(297083),r=e.i(530658),i=e.i(817556),a=e.i(389959),o=e.i(199674),s=e.i(878420),l=e.i(569384),u=e.i(973245),c=e.i(951262);function d(){var e=(0,l._)(["\n  mutation CreateAgentRollbackPreview(\n    $input: CreateAgentRollbackPreviewInput!\n  ) {\n    createAgentRollbackPreview(input: $input) {\n      ... on CreateAgentRollbackPreviewResult {\n        preview {\n          id\n          url\n          expiresAt\n        }\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return d=function(){return e},e}var p={},f=(0,u.gql)(d()),m=e.i(613141);function g(){var e=(0,l._)(["\n  subscription GetAgentRollbackPreviewStatus($input: RollbackPreviewInput!) {\n    getAgentRollbackPreviewStatus(input: $input) {\n      __typename\n      ... on RollbackPreviewOutput {\n        status\n        host\n        errorMessage\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n"]);return g=function(){return e},e}var h={},v=(0,u.gql)(g());function y(e){var t=(0,s._)({},h,e);return m.useSubscription(v,t)}e.s(["useGetAgentRollbackPreviewStatusSubscription",()=>y],613007);var x=e.i(791729),b=e.i(424746),S=e.i(399344),_=e.i(678420);function w(e){var t=e.secrets,o=e.replId,s=(0,r._)((0,a.useState)(null),2),l=s[0],u=s[1],c=T({secrets:t,replId:o});return(0,a.useEffect)(function(){(0,n._)(function(){return(0,i._)(this,function(e){switch(e.label){case 0:return[4,c()];case 1:return u.apply(void 0,[e.sent()]),[2]}})})()},[c]),{devSecrets:l}}function T(e){var t=e.secrets,o=e.replId,s=(0,r._)((0,_.useWorkspaceAndReplLinkedSecretsLazyQuery)({variables:{replId:o}}),1)[0];return(0,a.useCallback)(function(){return(0,n._)(function(){var e,n,a,o,l,u,c,d,p,f,m,g,h,v,y,x,b,S,_;return(0,i._)(this,function(i){switch(i.label){case 0:return[4,t.read()];case 1:return n=i.sent(),a=new Map,[4,s()];case 2:if((null==(o=i.sent().data)?void 0:o.getRepl.__typename)==="Repl"&&o.getRepl.sharedSecretLinks&&(null==(e=o.currentUser)?void 0:e.secrets.__typename)==="SharedSecretConnection"){l=o.currentUser.secrets.items,u=!0,c=!1,d=void 0;try{for(p=function(){var e=m.value,t=l.find(function(t){return t.id===e.secret.id});t&&a.set(e.alias,t.value)},f=o.getRepl.sharedSecretLinks[Symbol.iterator]();!(u=(m=f.next()).done);u=!0)p()}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}}g=!0,h=!1,v=void 0;try{for(y=n.entries()[Symbol.iterator]();!(g=(x=y.next()).done);g=!0)S=(b=(0,r._)(x.value,2))[0],_=b[1],a.set(S,_)}catch(e){h=!0,v=e}finally{try{g||null==y.return||y.return()}finally{if(h)throw v}}return[2,a]}})})()},[s,t])}e.s(["useDevSecrets",()=>w,"useGetDevSecrets",()=>T],331820);var j=e.i(311106),D=e.i(222342),k=e.i(207237);(t={}).Idle="idle",t.Building="building",t.Ready="ready",t.Creating="creating";var C=new Map;function E(e){var t,l,u=e.commitId,d=e.enableHelium,m=e.date,g=(0,k.default)(),h=T({secrets:(0,S.useSecretsService)(),replId:g}),v=(0,b.useNeonDevelopmentDatabase)(),_=v.database,w=v.loading,E=_?_.projectId:null,A=(0,D.default)().showError,I=(0,r._)((0,a.useState)(null),2),R=I[0],P=I[1],M=(0,r._)((0,a.useState)(!1),2),O=M[0],N=M[1],L=(0,r._)((0,a.useState)(C.get(u)?{status:"ready",url:null!=(l=C.get(u))?l:""}:{status:"idle"}),2),B=L[0],V=L[1],U=(0,a.useCallback)(function(e,t){(0,j.sendSentryError)({context:"PreviewAgentCheckpointButton",error:null!=t?t:Error(e),extras:{replId:g}}),A(e),P(e)},[g,A]),F=(0,r._)((t=(0,s._)({},p,void 0),c.useMutation(f,t)),1)[0],H=w||"creating"===B.status||"building"===B.status,G=y({variables:{input:{previewID:"building"===B.status?B.previewId:null}},skip:"building"!==B.status||!B.previewId}),z=G.data,q=G.error;(0,a.useEffect)(function(){q&&(V({status:"idle"}),U("Failed to load preview",q))},[q,U]),(0,a.useEffect)(function(){if(null==z?void 0:z.getAgentRollbackPreviewStatus){var e=z.getAgentRollbackPreviewStatus;"RollbackPreviewOutput"===e.__typename?"success"===e.status&&e.host?V({status:"ready",url:e.host.includes(".localhost")?"http://".concat(e.host):"https://".concat(e.host)}):"fail"===e.status&&V({status:"idle"}):("NotFoundError"===e.__typename||"UnauthorizedError"===e.__typename||"UserError"===e.__typename||"ServiceUnavailable"===e.__typename)&&(V({status:"idle"}),U("Failed to load preview",Error(e.message)))}},[z,U]);var W=(0,a.useCallback)(function(){return(0,n._)(function(){var e,t,n,a,o,s,l,c,p,f,v;return(0,i._)(this,function(i){switch(i.label){case 0:if(H)return[2];return[4,h()];case 1:if(t=i.sent(),n=C.get(u))return V({status:"ready",url:n}),[2];return V({status:"creating"}),a=Array.from(t,function(e){var t=(0,r._)(e,2);return{name:t[0],value:t[1]}}),[4,F({variables:{input:{gitSha:u,replId:g,neonProjectId:E,timestamp:m.toISOString(),envVars:a,enableHelium:d}}})];case 2:if((null==(e=(o=i.sent()).data)?void 0:e.createAgentRollbackPreview.__typename)!=="CreateAgentRollbackPreviewResult")return(null==(s=o.data)?void 0:s.createAgentRollbackPreview.__typename)==="UnauthorizedError"&&((null==(l=o.data)?void 0:l.createAgentRollbackPreview.message)===x.isEligibleForUsageExplanationDetail.NEEDS_SUBSCRIPTION||(null==(c=o.data)?void 0:c.createAgentRollbackPreview.message)===x.isEligibleForUsageExplanationDetail.NEEDS_SUBSCRIPTION_OR_PAYMENT_METHOD)?N(!0):U(null!=(f=null==(p=o.data)?void 0:p.createAgentRollbackPreview.message)?f:"Something went wrong."),V({status:"idle"}),[2];return""===(v=o.data.createAgentRollbackPreview.preview.url)?V({status:"building",previewId:o.data.createAgentRollbackPreview.preview.id}):(V({status:"ready",url:v}),C.set(u,v)),[2]}})})()},[H,h,F,g,E,m,U,u,d]);return{ready:!H,isInCache:C.has(u),loading:"creating"===B.status||"building"===B.status,loadPreview:W,showUpgradeModal:O,setShowUpgradeModal:N,previewState:B,previewUrl:"ready"===B.status?B.url:null,error:R,validPreview:6>(0,o.differenceInDays)(new Date,m)}}e.s(["useAgentCheckpointPreview",()=>E],115820)},683736,e=>{"use strict";var t=e.i(878420),n=e.i(569384),r=e.i(973245),i=e.i(304277);function a(){var e=(0,n._)(["\n  query blockDbRollback($replId: String!) {\n    getReplIdBlockDbRollback(input: { replId: $replId }) {\n      __typename\n      ... on GetReplIdBlockDbRollbackOutput {\n        __typename\n        blockAgentCheckpointRollbacks\n        blockDatabasePanePITR\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return a=function(){return e},e}e.i(566901);var o={},s=(0,r.gql)(a()),l=e.i(207237);function u(){var e,n,r,a,u=(r={variables:{replId:(0,l.default)()}},a=(0,t._)({},o,r),i.useQuery(s,a)),c=u.data,d=u.loading;return{blockAgentCheckpointRollbacks:(null==c||null==(e=c.getReplIdBlockDbRollback)?void 0:e.__typename)==="GetReplIdBlockDbRollbackOutput"&&c.getReplIdBlockDbRollback.blockAgentCheckpointRollbacks,blockDatabasePanePITR:(null==c||null==(n=c.getReplIdBlockDbRollback)?void 0:n.__typename)==="GetReplIdBlockDbRollbackOutput"&&c.getReplIdBlockDbRollback.blockDatabasePanePITR,loading:d}}e.s(["useIsDbRollbackBlocked",()=>u],683736)},26118,e=>{e.v({innerCircle:"LoadingSpinner-module__QOuyfW__innerCircle",progressCircle:"LoadingSpinner-module__QOuyfW__progressCircle"})},922084,e=>{e.v({buttonRow:"CheckpointCard-module__1K8xAG__buttonRow",card:"CheckpointCard-module__1K8xAG__card",checkpointStatusText:"CheckpointCard-module__1K8xAG__checkpointStatusText",editableTitle:"CheckpointCard-module__1K8xAG__editableTitle",editableTitleInput:"CheckpointCard-module__1K8xAG__editableTitleInput",inChatFeed:"CheckpointCard-module__1K8xAG__inChatFeed",noDescription:"CheckpointCard-module__1K8xAG__noDescription",previewIcon:"CheckpointCard-module__1K8xAG__previewIcon",previewLoading:"CheckpointCard-module__1K8xAG__previewLoading",previewOverlay:"CheckpointCard-module__1K8xAG__previewOverlay",previewText:"CheckpointCard-module__1K8xAG__previewText",screenshotContainer:"CheckpointCard-module__1K8xAG__screenshotContainer",statusIcon:"CheckpointCard-module__1K8xAG__statusIcon",statusIconFailed:"CheckpointCard-module__1K8xAG__statusIconFailed",statusIconReverted:"CheckpointCard-module__1K8xAG__statusIconReverted"})},195715,e=>{e.v({confirmationModalPreviewTextContainer:"ConfirmRollbackModal-module__aj-a0G__confirmationModalPreviewTextContainer",confirmationModalScreenshot:"ConfirmRollbackModal-module__aj-a0G__confirmationModalScreenshot",confirmationModalScreenshotContainer:"ConfirmRollbackModal-module__aj-a0G__confirmationModalScreenshotContainer",flexGrowAndShrink:"ConfirmRollbackModal-module__aj-a0G__flexGrowAndShrink",lineHeightOffset:"ConfirmRollbackModal-module__aj-a0G__lineHeightOffset",noScreenshotText:"ConfirmRollbackModal-module__aj-a0G__noScreenshotText",rollbackOptionHeading:"ConfirmRollbackModal-module__aj-a0G__rollbackOptionHeading",rollbackOptionsList:"ConfirmRollbackModal-module__aj-a0G__rollbackOptionsList",statusIconLoading:"ConfirmRollbackModal-module__aj-a0G__statusIconLoading"})},190120,984556,344481,548364,1074,e=>{"use strict";var t,n=e.i(721281),r=e.i(530658),i=e.i(276385),a=e.i(389959),o=e.i(379334),s=e.i(596139),l=e.i(399344),u=e.i(414761),c=e.i(993796),d=e.i(973519),p=e.i(115820),f=e.i(546469),m=e.i(297083),g=e.i(817556),h=e.i(789277),v=e.i(302973),y=e.i(968323),x=e.i(262664),b=e.i(424746),S=e.i(683736),_=e.i(597865),w=e.i(480028),T=e.i(26118);function j(e){var t,n=null!=(t=e.size)?t:12,o=(0,r._)((0,a.useState)(0),2),s=o[0],l=o[1],u=n/2,c=2*u*Math.PI;return(0,a.useEffect)(function(){var t,n=Date.now(),r=function(){l(Math.min(1,.9-Math.exp(-1.5*((Date.now()-n)/(1e3*e.estimatedTotalSeconds))))),t=setTimeout(r,100+500*Math.random())};return r(),function(){return clearTimeout(t)}},[e.estimatedTotalSeconds]),(0,i.jsxs)("svg",{width:n,height:n,className:T.default.progressCircle,children:[(0,i.jsx)("circle",{fill:"transparent",stroke:w.tokens.outlineDimmer,strokeWidth:2,r:u-1,cx:u,cy:u}),(0,i.jsx)("circle",{className:T.default.innerCircle,style:{strokeDashoffset:c*(1-s)},stroke:w.tokens.foregroundDimmer,fill:"transparent",strokeWidth:2,strokeDasharray:"".concat(c," ").concat(c),r:u-1,cx:u,cy:u})]})}var D=e.i(878420),k=e.i(232841),C=e.i(94516),E=e.i(569384),A=e.i(973245),I=e.i(304277);e.i(566901);var R=e.i(951262);function P(){var e=(0,E._)(["\n  query DatabaseUsageSectionCurrentUser {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          startDate\n          endDate\n          resources {\n            neonComputeTime {\n              usage\n            }\n            neonDataStorage {\n              usage\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return P=function(){return e},e}function M(){var e=(0,E._)(["\n  mutation RollbackNeonDatabase($input: RollbackNeonDatabaseInput!) {\n    rollbackNeonDatabase(input: $input) {\n      __typename\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on RollbackNeonDatabaseResult {\n        database {\n          id\n        }\n      }\n    }\n  }\n"]);return M=function(){return e},e}function O(){var e=(0,E._)(["\n  mutation SetNeonHistoryRetentionPeriod(\n    $input: SetNeonDatabaseConfigurationInput!\n  ) {\n    setNeonDatabaseConfiguration(input: $input) {\n      __typename\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on SetNeonDatabaseConfigurationResult {\n        database {\n          id\n          historyRetentionSeconds\n        }\n      }\n    }\n  }\n"]);return O=function(){return e},e}var N={},L=(0,A.gql)(P());function B(e){var t=(0,D._)({},N,e);return I.useQuery(L,t)}var V=(0,A.gql)(M());function U(e){var t=(0,D._)({},N,e);return R.useMutation(V,t)}var F=(0,A.gql)(O());function H(e){var t=(0,D._)({},N,e);return R.useMutation(F,t)}e.s(["useDatabaseUsageSectionCurrentUserQuery",()=>B,"useRollbackNeonDatabaseMutation",()=>U,"useSetNeonHistoryRetentionPeriodMutation",()=>H],984556);var G=e.i(17036),z=e.i(207237),q=e.i(906368);function W(e,t,n){return q.withScope(function(r){r.setTag("neon-pane",!0),r.setTag("context",t),n&&r.setExtras(n),q.captureException(e)}),e}var K=e.i(446530),$=e.i(613355),Y=e.i(140487),X=e.i(818503),Q=e.i(85742),J=e.i(739521),Z=e.i(12034),ee=e.i(396776),et=e.i(929872),en=e.i(960178),er=e.i(625484),ei=e.i(292297),ea=e.i(940745),eo=e.i(42458),es=(0,K.cssRecord)({title:$.rcss.pb(8),card:[$.rcss.p(8),$.rcss.borderRadius(8),{outline:"1px solid transparent"}],error:[$.rcss.color.accentNegativeStronger],dialogMessage:[$.rcss.flex.growAndShrink(1)],dialogButtonContainer:[$.rcss.display.flex,$.rcss.flex.row,$.rcss.justify.end],list:[$.rcss.fontSize(12),{li:[$.rcss.pt(1),{"&:before":[$.rcss.mr(4),{content:'"â€¢"'}]}]}]}),el=new k.DateFormatter("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",second:"2-digit",hour12:!0,timeZoneName:"short"});function eu(e){var t=e.timeZone,n=e.validationError,r=e.commitError;return n?(0,i.jsx)(en.Text,{css:es.error,children:n}):r?(0,i.jsx)(en.Text,{css:es.error,children:"Could not determine timestamp from agent rollback"}):(0,i.jsx)(en.Text,{color:"dimmest",children:t})}function ec(e){var t=e.value,n=e.loading,o=e.restored,s=e.error,l=e.validationError,u=e.disabled,c=e.onRestore,d=(0,r._)((0,a.useState)(!1),2),p=d[0],f=d[1];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Y.Button,{text:n?"":o?"Restored":"Restore",loading:n,iconLeft:n?(0,i.jsx)(ea.default,{}):void 0,disabled:!!s||!!l||!t||n||o||u,onClick:function(){return f(!0)},colorway:o?"positive":"primary"}),s&&(0,i.jsx)(en.Text,{css:es.error,children:s}),(0,i.jsx)(J.Modal,{isOpen:p,onRequestClose:function(){return f(!1)},children:(0,i.jsxs)(er.View,{gap:16,children:[(0,i.jsxs)(er.View,{row:!0,gap:8,align:"center",children:[(0,i.jsx)(ei.default,{size:20}),(0,i.jsx)(en.Header,{variant:"subheadDefault",level:1,children:"Restoring your database"})]}),(0,i.jsxs)(er.View,{gap:8,children:[(0,i.jsx)(en.Text,{multiline:!0,css:es.dialogMessage,children:"Your database will be restored to it's past state at:"}),(0,i.jsx)(ee.StatusBanner,{text:t?el.format(t.toDate()):"Could not determine restore date"}),(0,i.jsx)(ee.StatusBanner,{icon:(0,i.jsx)(eo.default,{}),colorway:"warning",text:(0,i.jsxs)(i.Fragment,{children:["This action cannot be undone.",(0,i.jsx)("br",{}),(0,i.jsxs)("ul",{css:es.list,children:[(0,i.jsx)("li",{children:"All current data will be replaced with data from this backup"}),(0,i.jsx)("li",{children:"Any changes made after this backup point will be lost"}),(0,i.jsx)("li",{children:"Connected services may need to be reconfigured"}),(0,i.jsx)("li",{children:"If you've deployed, any production data changed after this time will be lost"})]})]})})]}),(0,i.jsx)(er.View,{css:es.dialogButtonContainer,children:(0,i.jsx)(Y.Button,{colorway:"primary",onClick:function(){f(!1),c(t)},text:"Continue"})})]})})]})}function ed(e){var t=e.value,n=e.loading,r=e.restored,a=e.error,o=e.minValue,s=e.maxValue,l=e.disabled,u=e.validationError,c=e.timeZone,d=e.onChange,p=e.onRestore;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(G.default,{granularity:"second",hourCycle:24,minValue:o,maxValue:s,value:t?(0,h.toCalendarDateTime)(t):void 0,onChange:d,"aria-labelledby":"restore-timestamp",isDisabled:l||n}),(0,i.jsx)(eu,{timeZone:c,validationError:u}),(0,i.jsx)(ec,{value:t,loading:n,onRestore:p,restored:r,error:a,validationError:u,disabled:l})]})}function ep(e){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(X.Label,{variant:"text","aria-label":"restore-timestamp",children:"Timestamp"}),(0,i.jsx)(ed,(0,D._)({},e))]})}function ef(e,t){if(e.isFrozen)return(0,y.Err)("Database is frozen and cannot be restored");var n=(0,v.getLocalTimeZone)(),r=(0,v.now)(n),i=e.historyRetentionSeconds;if(0===i)return(0,y.Err)("History retention is disabled so there are no restore points.");var a=(0,C.parseAbsolute)(new Date(e.timeCreated).toISOString(),n).add({minutes:1}),o=r.subtract({seconds:i}),s=(0,h.toZoned)(a,n),l=(0,h.toZoned)(o,n),u=(0,h.toZoned)(r,n);if(0>t.compare(s)){var c=s.toDate().toLocaleString();return(0,y.Err)("Restore point is before database creation time (".concat(c,")"))}if(0>t.compare(l)){var d=l.toDate().toLocaleString();return(0,y.Err)("Restore point is before the configured database history retention period (".concat(d,")"))}return t.compare(u)>0?(0,y.Err)("Restore point is in the future"):(0,y.Ok)(!0)}function em(e){var t,n,o,s,l,u=e.neonDatabase,c=(0,z.default)(),d=(0,S.useIsDbRollbackBlocked)(),p=d.blockDatabasePanePITR,f=d.loading,m=(0,v.getLocalTimeZone)(),g=(0,v.now)(m),y=u.historyRetentionSeconds,x=0===y,b=(0,C.parseAbsolute)(new Date(u.timeCreated).toISOString(),m).add({minutes:1}),_=g.subtract({seconds:y}),w=(0,r._)((0,a.useState)(),2),T=w[0],j=w[1],D=(0,r._)((0,a.useState)(),2),k=D[0],E=D[1],A=(0,r._)((0,a.useState)(!1),2),I=A[0],R=A[1],P=(0,r._)((0,a.useState)(),2),M=P[0],O=P[1],N=(0,r._)(U({onError:function(e){W(e,"rollbackNeonDatabase",{replId:c,neonProjectId:u.projectId}),O("Something went wrong.")},onCompleted:function(e){"RollbackNeonDatabaseResult"!==e.rollbackNeonDatabase.__typename?O(e.rollbackNeonDatabase.message):R(!0)}}),2),L=N[0],B=N[1].loading,V=u.isFrozen||u.isEphemeral||x||p;return(0,i.jsxs)(er.View,{children:[(0,i.jsx)(en.Text,{variant:"subheadDefault",css:es.title,children:"Restore"}),(0,i.jsxs)(et.Surface,{elevated:!0,css:es.card,gap:6,children:[(0,i.jsx)(er.View,{children:(0,i.jsx)(en.Text,{color:"dimmer",children:"Quickly restore a branch to a point within it's history retention period."})}),f?(0,i.jsx)(ea.default,{}):null,f?null:(0,i.jsx)(ep,{value:T,loading:B,restored:I,error:M,minValue:_>b?_:b,maxValue:g,validationError:k,timeZone:m,onChange:function(e){if(e){I&&(R(!1),O(void 0));var t=(0,h.toZoned)(e,m),n=ef(u,t);n.ok?(E(void 0),j(t)):E(n.error)}},onRestore:function(e){e?L({variables:{input:{neonProjectId:u.projectId,replId:c,timestamp:e.toAbsoluteString()}}}):O("Could not determine restore date")},disabled:V}),V?(0,i.jsx)(ee.StatusBanner,{text:(n=(t={blockDatabasePanePITR:p,isFrozen:u.isFrozen,isEphemeral:u.isEphemeral,hasDisabledHistoryRetention:x}).blockDatabasePanePITR,o=t.isFrozen,s=t.isEphemeral,l=t.hasDisabledHistoryRetention,n?"Database rollbacks are temporarily disabled.":o?"Database is frozen. You cannot restore a database that has been frozen.":s?"Temporary databases created on the free Starter plan do not support restores.":l?"History retention is disabled. You cannot restore a database with history retention disabled.":void 0),colorway:"warning",icon:(0,i.jsx)(eo.default,{})}):null]})]})}var eg=[{value:0,title:"Disabled"},{value:21600,title:"6 Hours"},{value:43200,title:"12 Hours"},{value:86400,title:"1 Day"},{value:172800,title:"2 Days"},{value:432e3,title:"5 Days"},{value:604800,title:"7 Days"}];function eh(e){var t=e.currentRetentionPeriod,n=e.loading,o=e.success,s=e.disabled,l=e.onClick,u=e.error,c=(0,r._)((0,a.useState)(t),2),d=c[0],p=c[1],f=o||d!==t;return(0,i.jsxs)(er.View,{gap:12,children:[(0,i.jsxs)(er.View,{gap:8,children:[(0,i.jsx)(X.Label,{htmlFor:"history-retention-period",children:(0,i.jsx)(en.Text,{children:"History Retention Period"})}),(0,i.jsx)(Z.Select,{id:"history-retention-period","aria-labelledby":"history-retention-period",selectedKey:d,onSelectionChange:function(e){p(parseInt(String(e),10))},items:eg,isDisabled:s,children:function(e){return(0,i.jsx)(Q.ListBoxItem,{id:e.value,label:e.title},e.value)}})]}),f?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(ee.StatusBanner,{text:"Increasing your retention window will increase your project's storage usage. Decreasing your retention window will prevent you from restoring to a point in time older than the new retention window and will delete any historical data that was being retained beyond it.",colorway:"warning",icon:(0,i.jsx)(eo.default,{})}),(0,i.jsx)(Y.Button,{text:n?"":o?"Updated":"Confirm",loading:n,iconLeft:n?(0,i.jsx)(ea.default,{}):void 0,disabled:!!u||n||o,onClick:function(){return l(d)},colorway:o?"positive":"primary"}),u&&(0,i.jsx)(en.Text,{css:es.error,children:u})]}):null]})}function ev(e){var t=e.neonDatabase,n=(0,z.default)(),o=(0,r._)((0,a.useState)(!1),2),s=o[0],l=o[1],u=(0,r._)((0,a.useState)(),2),c=u[0],d=u[1],p=(0,r._)(H({onError:function(e){W(e,"setNeonHistoryRetentionPeriod",{replId:n,neonProjectId:t.projectId}),d("Something went wrong.")},onCompleted:function(e){"SetNeonDatabaseConfigurationResult"!==e.setNeonDatabaseConfiguration.__typename?d(e.setNeonDatabaseConfiguration.message):l(!0)}}),2),f=p[0],m=p[1].loading;return(0,i.jsxs)(er.View,{children:[(0,i.jsx)(en.Text,{variant:"subheadDefault",css:es.title,children:"History Retention"}),(0,i.jsxs)(et.Surface,{elevated:!0,css:es.card,gap:6,children:[(0,i.jsx)(er.View,{children:(0,i.jsx)(en.Text,{color:"dimmer",children:"Maintain a history of changes for a period of time, enabling features like point-in-time restore and restoring a database back to an agent checkpoint."})}),(0,i.jsx)(eh,{currentRetentionPeriod:t.historyRetentionSeconds,loading:m,success:s,disabled:m||t.isFrozen||t.isEphemeral,onClick:function(e){f({variables:{input:{neonProjectId:t.projectId,replId:n,historyRetentionSeconds:e}}})},error:c}),t.isFrozen||t.isEphemeral?(0,i.jsx)(ee.StatusBanner,{text:t.isFrozen?"Database is frozen. You cannot update the history retention of a frozen database.":"Temporary databases created on the free Starter plan do not support configurable history retention.",colorway:"warning",icon:(0,i.jsx)(eo.default,{})}):null]})]})}e.s(["DatabaseSettingsHistoryRetentionSection",()=>ev,"DatabaseSettingsRestoreSection",()=>em,"isValidRestorePoint",()=>ef],344481);var ey=e.i(346715),ex=e.i(368964),eb=e.i(877212),eS=e.i(928838),e_=e.i(914279),ew=e.i(68893),eT=e.i(391222),ej=e.i(222342),eD=e.i(610357),ek=e.i(475032),eC=e.i(529810),eE=e.i(718610),eA=e.i(503536),eI=e.i(987154),eR=[ex.HostingBuildStatus.Building,ex.HostingBuildStatus.Promoting,ex.HostingBuildStatus.Running,ex.HostingBuildStatus.Pending,ex.HostingBuildStatus.Resuming,ex.HostingBuildStatus.Suspending,ex.HostingBuildStatus.UpdatingTier],eP=function(e){var t=eS.buildStatuses[e];if(t)return"".concat(t.title,"...");switch(e){case ex.HostingBuildStatus.Building:return"Building...";case ex.HostingBuildStatus.Promoting:return"Promoting...";case ex.HostingBuildStatus.Running:return"Bundling...";case ex.HostingBuildStatus.Pending:return"Provisioning...";case ex.HostingBuildStatus.Resuming:return"Resuming...";case ex.HostingBuildStatus.Suspending:return"Pausing...";case ex.HostingBuildStatus.UpdatingTier:return"Updating tier...";default:return"Publishing..."}},eM=function(){var e=(0,r._)((0,a.useState)(!1),2),t=e[0],n=e[1];return(0,a.useEffect)(function(){n("undefined"!=typeof navigator&&navigator.share&&"function"==typeof navigator.share)},[]),t},eO=function(e,t,n){return(0,m._)(function(){return(0,g._)(this,function(r){switch(r.label){case 0:if(!(navigator.share&&"function"==typeof navigator.share))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,navigator.share({title:t,text:n,url:e})];case 2:return r.sent(),[2,!0];case 3:return r.sent(),[3,4];case 4:return(0,eD.default)(e),[2,!1]}})})()},eN=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.openDeploymentsPane,n=e.includeSharing,r=void 0!==n&&n,o=!t,s=eM(),c=(0,l.useDeploymentId)(),d=(0,l.useDeployBuild)({openDeploymentsPane:t}).redeployWithNoNewOptions,p=(0,l.useDeploymentCurrentBuild)(),f=(0,l.useDeploymentInProgressBuild)(),h=(0,e_.useDeploymentMode)(),v=(0,l.useDeploymentSubdomain)(),y=(0,ej.default)().showConfirm,x=(0,eb.useSupportsAgent)(),b=(0,eC.default)().container,S=(0,ek.default)(b,{fallbackToReplCo:!0}).url,_=(0,u.useDeploymentLink)(p?{__typename:"HostingDeployment",id:c||"",replitAppSubdomain:v||"",domains2:[],currentBuild:{__typename:"HostingBuild",id:p.id,provider:null==p?void 0:p.provider}}:null).href,T=!p||!c||h!==ew.DeploymentMode.Ready&&h!==ew.DeploymentMode.Suspended&&h!==ew.DeploymentMode.ProcessingLifecycleCommand,j=(0,a.useCallback)(function(){return(0,m._)(function(){return(0,g._)(this,function(e){switch(e.label){case 0:if(!c)return t&&t(),[2];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,d({hasAgentSession:x})];case 2:case 3:return e.sent(),[3,4];case 4:return[2]}})})()},[c,t,d,x]),D=(0,a.useCallback)(function(){if(o&&(!c||!p))return null;if(!c)return o?null:{data:{type:"action",icon:(0,i.jsx)(eA.default,{color:w.tokens.greenStrongest}),label:"Publish",run:t}};if(!p&&f)return{data:{type:"action",icon:(0,i.jsxs)(er.View,{row:!0,gap:4,align:"center",children:[(0,i.jsx)(eT.DeploymentStatusDot,{status:ex.HostingBuildStatus.Building}),(0,i.jsx)(eA.default,{color:w.tokens.foregroundDefault})]}),label:eP(f.status),run:function(){}}};if(!p)return null;var e=!!f,n=eR.includes(p.status),r=e&&f?{isDeploying:!0,buttonText:eP(f.status)}:n?{isDeploying:!0,buttonText:eP(p.status)}:T?{isDeploying:!0,buttonText:"Starting..."}:{isDeploying:!1,buttonText:"Republish"},a=r.isDeploying,s=r.buttonText;return{data:{type:"action",icon:o?(0,i.jsxs)(er.View,{row:!0,gap:4,align:"center",children:[p.status!==ex.HostingBuildStatus.Success||a?(0,i.jsx)(eT.DeploymentStatusDot,{status:a?ex.HostingBuildStatus.Building:p.status}):null,(0,i.jsx)(eA.default,{size:24,color:p.status!==ex.HostingBuildStatus.Success||a?w.tokens.foregroundDefault:w.tokens.greenStrongest})]}):(0,i.jsxs)(er.View,{row:!0,gap:4,align:"center",children:[p.status!==ex.HostingBuildStatus.Success||a?(0,i.jsx)(eT.DeploymentStatusDot,{status:a?ex.HostingBuildStatus.Building:p.status}):null,(0,i.jsx)(eA.default,{color:a?w.tokens.foregroundDefault:w.tokens.greenStrongest})]}),label:s,run:a?function(){}:j}}},[o,c,p,f,t,j,T]),k=(0,a.useCallback)(function(){if(!r)return[];var e=[];return S&&(!o||c&&v)&&e.push({data:{type:"action",icon:(0,i.jsx)(eE.default,{color:w.tokens.foregroundDefault}),label:s?"Share development link":"Copy development link",run:function(){return(0,m._)(function(){return(0,g._)(this,function(e){switch(e.label){case 0:return[4,eO(S,"Check out my Replit development app!","I'm working on this app on Replit!")];case 1:return e.sent()||y("Development URL copied to clipboard"),[2]}})})()}}}),c&&v&&e.push({data:{type:"action",icon:(0,i.jsx)(eI.default,{color:w.tokens.foregroundDefault}),label:s?"Share published link":"Copy published link",run:function(){return(0,m._)(function(){return(0,g._)(this,function(e){switch(e.label){case 0:return[4,eO(_,"Check out my Replit app!")];case 1:return e.sent()||y("Published URL copied to clipboard"),[2]}})})()}}}),e},[c,v,y,o,S,_,r,s]),C=(0,a.useCallback)(function(){var e=k(),t=D();if(o){var n=[];return e.length>0&&n.push({name:"Sharing",commands:e}),t&&n.push({name:"Deployment",commands:[t]}),n}if(!c||!v){var r=(0,ey._)(e);return(t&&r.push(t),r.length>0)?[{name:"Development",commands:r}]:[]}var i=[];return e.length>0&&i.push({name:"Sharing",commands:e}),t&&i.push({name:"Deployment",commands:[t]}),i},[k,D,o,c,v]);return{deploymentId:c,currentBuild:p,inProgressBuild:f,handleDeployCommand:j,getDeploymentCommand:D,getShareCommands:k,getCommandGroups:C,hideRedeploy:T,mode:h}},eL=function(e){var t=e.openDeploymentsPane,n=eN({openDeploymentsPane:t}),r=n.deploymentId,a=n.currentBuild,o=n.inProgressBuild,s=n.handleDeployCommand,l=n.hideRedeploy;if(!r)return(0,i.jsx)(Y.Button,{onClick:t,iconLeft:(0,i.jsx)(eA.default,{color:w.tokens.greenStrongest}),text:"Publish",size:"small"});if(!a&&o)return(0,i.jsx)(Y.Button,{onClick:function(){},iconLeft:(0,i.jsx)(eA.default,{color:w.tokens.foregroundDefault}),text:eP(o.status),size:"small",disabled:!0});if(!a)return null;var u=!!o,c=eR.includes(a.status),d=u&&o?{isDeploying:!0,buttonText:eP(o.status)}:c?{isDeploying:!0,buttonText:eP(a.status)}:l?{isDeploying:!0,buttonText:"Starting..."}:{isDeploying:!1,buttonText:"Republish"},p=d.isDeploying,f=d.buttonText;return(0,i.jsx)(Y.Button,{onClick:s,iconLeft:(0,i.jsx)(eA.default,{color:w.tokens.greenStrongest}),text:f,size:"small",disabled:p})};e.s(["DeployButton",()=>eL,"useDeploymentCommands",()=>eN],548364);var eB=e.i(127227),eV=e.i(257811),eU=e.i(751273),eF=e.i(481088),eH=e.i(211397),eG=e.i(753007),ez=e.i(245225),eq=e.i(243914),eW=e.i(486672),eK=e.i(961874),e$=e.i(922084),eY=e.i(195715);function eX(e){var t=e.setShowConfirmModal,n=e.onRevert,s=e.commitId,l=e.enableHelium,u=e.screenshot,d=e.date,f=(0,p.useAgentCheckpointPreview)({commitId:s,enableHelium:l,date:d}),w=f.loading,T=f.error,D=f.previewUrl,k=f.loadPreview,C=f.validPreview,E=(0,S.useIsDbRollbackBlocked)().blockAgentCheckpointRollbacks,A=(0,c.useFlag)({controlName:o.flagHasAgentCheckpointDatabaseRollbacks,logFlagToAnalytics:!1}),I=(0,c.useFlag)({type:"string",controlName:o.flagNeonRegionsExcludedFromRollback,default:""}).split(","),R=(0,_.default)(function(e){return(0,m._)(function(){return(0,g._)(this,function(t){switch(t.label){case 0:return[4,e.getCommit({commit:s})];case 1:return[2,t.sent()]}})})()},[s]),P=(0,b.useNeonDevelopmentDatabase)(),M=P.database,O=P.loading,N=(0,x.useHeliumDevelopmentDatabase)(),L=N.database,B=N.loading,V=O||B,U=null!=L?L:M,F=eN().deploymentId,H=(0,a.useMemo)(function(){if(V)return(0,y.Ok)(!0);if(!U)return(0,y.Err)("No database found");if(E)return(0,y.Err)("Database rollbacks are temporarily disabled");if(!A)return(0,y.Err)("Database rollbacks are not yet available");if(L)return(0,y.Ok)(!0);if(!M)return(0,y.Err)("No Neon database found");var e,t=(e=M.connectionString.match(/@.*?\.(.+?)\./))&&e[1]?e[1]:null;if(t&&I.includes(t))return(0,y.Err)("Database rollbacks have been temporarily disabled in your database region.");var n=(0,v.getLocalTimeZone)();return ef(M,(0,h.fromDate)(d,n))},[V,U,L,M,d,A,I,E]),G=(0,r._)((0,a.useState)(!F),2),z=G[0],q=G[1];(0,a.useEffect)(function(){H.error&&q(!1)},[H]);var W=(0,i.jsx)(eW.default,{});T?W=(0,i.jsx)(eU.Tooltip,{tooltip:T,children:(0,i.jsx)(eo.default,{})}):w?W=(0,i.jsx)(j,{estimatedTotalSeconds:25}):null!==D?W=(0,i.jsx)(eq.default,{}):C||(W=(0,i.jsx)(eU.Tooltip,{tooltip:"Cannot preview checkpoints older than 7 days",children:(0,i.jsx)(eK.default,{})}));var K="Load interactive preview";return w?K="Loading interactive preview...":D?K="View interactive preview":T?K="Error loading preview":C||(K="Preview expired"),(0,i.jsxs)(er.View,{gap:24,children:[(0,i.jsxs)(er.View,{gap:16,children:[(0,i.jsx)(en.Header,{variant:"subheadBig",level:3,children:"Rollback to checkpoint"}),(0,i.jsxs)(er.View,{gap:24,children:[(0,i.jsx)(er.View,{clsx:eY.default.confirmationModalScreenshotContainer,children:u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(er.View,{clsx:eY.default.confirmationModalScreenshot,children:(0,i.jsx)(eH.default,{src:u,alt:"Screenshot",layout:"fill",objectFit:"cover"})}),(0,i.jsxs)(er.View,{row:!0,align:"center",justify:"space-between",clsx:eY.default.confirmationModalPreviewTextContainer,children:[(0,i.jsx)(en.Text,{color:"dimmer",variant:"small",children:"Screenshot taken by the Agent"}),(0,i.jsx)(Y.Button,{size:"small",variant:"underlinedOnHover",text:K,disabled:w||!C,iconRight:W,onClick:function(){C&&(D?window.open(D,"_blank"):k())}})]})]}):(0,i.jsx)(er.View,{align:"center",justify:"center",clsx:eY.default.noScreenshotText,children:(0,i.jsx)(en.Text,{color:"dimmer",children:"No screenshot available"})})}),(0,i.jsxs)(er.View,{gap:8,children:[(0,i.jsx)(en.Header,{variant:"subheadDefault",level:3,children:"Target checkpoint"}),(0,i.jsx)(eQ,{commitData:R})]}),(0,i.jsxs)(er.View,{gap:8,children:[(0,i.jsx)(en.Header,{variant:"subheadDefault",level:3,children:"What will be rolled back"}),(0,i.jsx)(er.View,{gap:8,children:(0,i.jsxs)("ul",{className:eY.default.rollbackOptionsList,children:[(0,i.jsx)("li",{children:(0,i.jsxs)(er.View,{children:[(0,i.jsx)(en.Text,{className:eY.default.rollbackOptionHeading,children:"Files"}),(0,i.jsx)(en.Text,{color:"dimmest",variant:"small",children:"All files in your app will be restored to the state they were in at the time of this checkpoint."})]})}),(0,i.jsx)("li",{children:(0,i.jsxs)(er.View,{children:[(0,i.jsx)(en.Text,{className:eY.default.rollbackOptionHeading,children:"Agent memory"}),(0,i.jsx)(en.Text,{color:"dimmest",variant:"small",children:"The Agent's memory will reset to what it knew about your app at the time of this checkpoint."})]})})]})})]}),U?(0,i.jsxs)(er.View,{gap:12,children:[(0,i.jsx)(en.Header,{variant:"subheadDefault",level:3,children:"Additional rollback options"}),(0,i.jsx)(er.View,{gap:8,children:(0,i.jsxs)(er.View,{row:!0,align:"start",gap:8,children:[(0,i.jsx)(eU.Tooltip,{isDisabled:H.ok,tooltip:H.error,children:(0,i.jsx)(eB.Checkbox,{id:"restore-database",name:"restore-database",disabled:!H.ok,checked:z,onChange:function(){return q(!z)}})}),(0,i.jsxs)(X.Label,{htmlFor:"restore-database",variant:"text",clsx:eY.default.flexGrowAndShrink,children:[(0,i.jsx)(en.Text,{children:"Database"}),(0,i.jsxs)(en.Text,{color:"dimmest",variant:"small",children:["Your data will be restored to the time of this checkpoint.",F?" Note that rolling back the database will also affect active deployments.":""]})]})]})})]}):null]})]}),(0,i.jsxs)(er.View,{row:!0,justify:"end",gap:8,children:[(0,i.jsx)(Y.Button,{text:"Cancel",onClick:function(){return t(!1)},variant:"outlined"}),(0,i.jsx)(Y.Button,{text:"Rollback to this checkpoint",loading:V,onClick:function(){n({rollbackDatabaseTimestamp:z?d.toISOString():void 0,rollbackDeploymentBuildId:void 0,rollbackDatabase:z}),t(!1)},colorway:"primary"})]})]})}function eQ(e){var t=e.commitData,n=!t,r=t&&(null==t?void 0:t.error);return n?(0,i.jsxs)(et.Surface,{clsx:[e$.default.root,e$.default.checkpointCard],row:!0,gap:8,children:[(0,i.jsx)(ea.default,{clsx:[eY.default.statusIconLoading,eY.default.lineHeightOffset]}),(0,i.jsx)(er.View,{gap:2,grow:!0,shrink:!0,children:(0,i.jsxs)(eF.default,{speed:2,height:40,backgroundColor:w.tokens.backgroundHighest,foregroundColor:w.tokens.backgroundHigher,children:[(0,i.jsx)("rect",{rx:"2",ry:"2",x:"0",y:"0",width:"200",height:"15"}),(0,i.jsx)("rect",{rx:"2",ry:"2",x:"0",y:"25",width:"300",height:"15"})]})})]}):r?(0,i.jsxs)(et.Surface,{clsx:[e$.default.checkpointCard,e$.default.checkpointFailed],row:!0,gap:8,children:[(0,i.jsx)(ez.default,{clsx:[e$.default.statusIcon,eY.default.lineHeightOffset]}),(0,i.jsxs)(er.View,{gap:2,grow:!0,shrink:!0,children:[(0,i.jsx)(en.Text,{children:"Failed to load commit"}),(0,i.jsx)(en.Text,{color:"dimmer",variant:"small",children:"The commit may have been deleted or is no longer accessible"})]})]}):(0,i.jsxs)(et.Surface,{clsx:[e$.default.root,e$.default.checkpointCard],row:!0,gap:8,children:[(0,i.jsx)(eG.default,{clsx:[e$.default.statusIcon,eY.default.lineHeightOffset]}),(0,i.jsxs)(er.View,{gap:2,grow:!0,shrink:!0,children:[(0,i.jsx)(en.Text,{children:t.subject}),(0,i.jsx)(en.Text,{color:"dimmer",children:t.body||(0,i.jsx)("span",{clsx:e$.default.noDescription,children:"No description provided"})}),(0,i.jsxs)(er.View,{row:!0,gap:6,align:"center",children:[(0,i.jsx)(eV.Timestamp,{date:new Date(t.author.date),textColor:"dimmest",textVariant:"small"}),(0,i.jsx)(en.Text,{color:"dimmest",children:"â€¢"}),(0,i.jsx)(en.Text,{color:"dimmest",variant:"small",children:t.hash.substring(0,8)})]})]})]})}e.s(["ConfirmRollbackModal",()=>eX],1074);var eJ=e.i(443394),eZ=e.i(173703),e0=e.i(607278),e1=e.i(624782),e2=e.i(654521),e4=e.i(283023),e8=e.i(292642),e3=e.i(115357),e6=((t={}).ChatFeedDefault="chatFeedDefault",t.ChatFeedSubtask="chatFeedSubtask",t.SessionList="sessionList",t);function e5(e){var t=e.title,n=e.onRenameTitle,o=e.color,s=e.isTitleLoading,l=(0,r._)((0,a.useState)(!1),2),u=l[0],c=l[1],d=(0,r._)((0,a.useState)(t||""),2),p=d[0],f=d[1];if(s)return(0,i.jsx)(eF.default,{speed:2,backgroundColor:w.tokens.backgroundHighest,foregroundColor:w.tokens.backgroundHigher,width:200,height:22,uniqueKey:"title-skeleton",children:(0,i.jsx)("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"200",height:"22"})});var m=function(){n&&n(p),c(!1)};return u?(0,i.jsx)(e0.Input,{color:o,value:p,onChange:function(e){return f(e.target.value)},onBlur:m,autoFocus:!0,onKeyDown:function(e){"Enter"===e.key&&m()},className:e$.default.editableTitleInput}):(0,i.jsx)(er.View,{row:!0,onClick:function(){return n&&c(!0)},style:{cursor:n?"pointer":"text"},clsx:e$.default.editableTitle,children:(0,i.jsxs)(en.Text,{color:o,children:[p||t||(0,i.jsx)("span",{clsx:e$.default.noDescription,children:"No description provided"}),n?(0,i.jsx)(e4.default,{size:16}):null]})})}function e7(e){var t,s=e.title,d=e.date,p=e.author,f=e.screenshot,m=e.commitId,g=e.enableHelium,h=e.deploymentBuildId,v=e.onRevert,y=e.onOpenCommit,x=e.onRenameTitle,b=e.isInProgress,S=e.isReverting,_=e.isReverted,T=e.costInfo,j=e.variant,D=e.isTimelineListItem,k=e.isLatest,C=void 0!==k&&k,E=e.isDirty,A=void 0===E||E,I=e.hasFurtherNonSummaryEvents,R=void 0!==I&&I,P=e.openPane,M=e.missingAgentState,O=void 0!==M&&M,N=e.beforeReplCreation,L=void 0!==N&&N,B=(0,c.useFlag)({controlName:o.flagHasReplShares}),V=""===m&&!b,U=!m,F=(0,i.jsx)(eK.default,{});S?F=(0,i.jsx)(ea.default,{}):V&&(F=(0,i.jsx)(ez.default,{}));var H=(0,i.jsx)(eG.default,{clsx:e$.default.statusIcon});_?H=(0,i.jsx)(e2.default,{clsx:[e$.default.statusIconReverted,e$.default.statusIcon]}):V?H=(0,i.jsx)(ez.default,{clsx:[e$.default.statusIconFailed,e$.default.statusIcon]}):"chatFeedSubtask"===j&&(H=void 0);var G=null!=v,z=(0,r._)((0,a.useState)(!1),2),q=z[0],W=z[1],K=(0,a.useCallback)(function(){W(!0)},[]),$="Checkpoint made";"chatFeedSubtask"===j&&($="Task completed"),U&&!V&&($="Creating checkpoint"),V&&($="Couldn't make checkpoint");var X=C&&!A&&!R,Q=V||O||L||X,Z="Deployment"===p,ee=(0,l.useDeploymentCurrentBuild)(),et=null==ee||null==(t=ee.repl)?void 0:t.hostingDeployment,ei=et&&"HostingDeployment"===et.__typename?et:null,eo=(0,u.useDeploymentLink)(ei).href,es=!!(eo&&ee),el="sessionList"!==j&&B&&f&&!U&&m&&!Z,eu="chatFeedDefault"===j||"chatFeedSubtask"===j;return(0,i.jsxs)(eZ.ShadesSurface,{br:"container",colorShade:"default",elevate:!!eu&&"2x",background:eu,clsx:[e$.default.card,(0,n._)({},e$.default.inChatFeed,eu)],"data-variant":j,children:[(0,i.jsxs)(er.View,{gap:4,children:[(0,i.jsxs)(er.View,{row:!0,align:"center",gap:6,children:[H,(0,i.jsxs)(er.View,{row:!0,gap:4,children:[(0,i.jsx)(en.Text,{variant:"small",color:"dimmer",clsx:e$.default.checkpointStatusText,children:$}),!b&&(0,i.jsx)(eV.Timestamp,{textVariant:"small",textColor:"dimmer",dateFormat:"switch",live:!0,placement:"top",date:d})]}),(0,i.jsx)(e9,{costInfo:T}),(0,i.jsx)(te,{author:p})]}),(0,i.jsxs)(er.View,{pl:D?24:void 0,row:!0,justify:"space-between",align:"center",gap:12,children:[(0,i.jsxs)(er.View,{gap:4,grow:!0,shrink:!0,children:[V?(0,i.jsx)(en.Text,{multiline:!0,children:"An unexpected error occurred while creating this checkpoint. This is most likely an issue with Replit."}):(0,i.jsx)(e5,{title:s,onRenameTitle:x,color:_?"dimmer":"default",isTitleLoading:!s}),(0,i.jsxs)(er.View,{clsx:e$.default.buttonRow,children:[G&&!U?(0,i.jsx)(eU.Tooltip,{tooltip:V?"This is a failed checkpoint":O?"Checkpoint not made by Agent":L?"Checkpoint created in a different app":X?"Already at this checkpoint":"Reset your app to this version",children:(0,i.jsx)(Y.Button,{size:"small",onClick:K,iconLeft:F,disabled:Q||S,text:"Rollback here"})}):null,G&&U?(0,i.jsx)(eF.default,{speed:2,backgroundColor:w.tokens.backgroundHighest,foregroundColor:w.tokens.backgroundHigher,width:100,height:32,uniqueKey:"rollback-button-skeleton",children:(0,i.jsx)("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"100",height:"32"})}):null,U?(0,i.jsx)(eF.default,{speed:2,backgroundColor:w.tokens.backgroundHighest,foregroundColor:w.tokens.backgroundHigher,width:80,height:32,uniqueKey:"changes-button-skeleton",children:(0,i.jsx)("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"80",height:"32"})}):(0,i.jsx)(Y.Button,{size:"small",onClick:function(){return m&&y(m)},disabled:V,iconLeft:(0,i.jsx)(eE.default,{}),text:"Changes"}),el?(0,i.jsx)(tt,{commitId:m,commitDate:d,enableHelium:null!=g&&g,isFailed:V,isLatest:C,isDirty:A,hasFurtherNonSummaryEvents:R,openPane:P}):null,Z&&es?(0,i.jsx)(Y.Button,{size:"small",onClick:function(){return window.open(eo,"_blank","noopener")},iconLeft:(0,i.jsx)(e8.default,{}),text:"View Published App"}):null]})]}),"sessionList"===j?(0,i.jsx)(i.Fragment,{children:B&&!U&&m&&!Q?(0,i.jsx)(tr,{screenshot:f,commitId:m,commitDate:d,enableHelium:null!=g&&g,isLatest:C,isDirty:A,hasFurtherNonSummaryEvents:R,openPane:P}):(0,i.jsx)(tn,{screenshot:f})}):null]})]}),G?(0,i.jsx)(J.Modal,{isOpen:q,onRequestClose:function(){return W(!1)},centered:!0,children:(0,i.jsx)(eX,{author:p,setShowConfirmModal:W,deploymentBuildId:h,onRevert:v,commitId:m||"",enableHelium:null!=g&&g,screenshot:f,date:d})}):null]})}function e9(e){var t=e.costInfo;if(!t||t.isPaid)return null;var n=t.usageIndicatorVariant===f.UsageIndicatorVariant.Starter?"This didn't use any of your ".concat(s.freePlanName," plan Agent usage. No significant changes were made."):"This checkpoint didn't cost you anything. No significant changes were made.";return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(en.Text,{variant:"small",color:"dimmer",children:"â€¢"}),(0,i.jsx)(eU.Tooltip,{tooltip:n,placement:"top",children:(0,i.jsx)(en.Text,{variant:"small",style:{color:w.tokens.accentPositiveStronger},children:"Free"})})]})}function te(e){var t=e.author;if("Agent"===t||!t)return null;var n="";"User"===t?n="This is a manually created checkpoint":"Deployment"===t&&(n="This checkpoint was created from publishing your App");var r="";return"User"===t?r="User":"Deployment"===t&&(r="Publish"),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(en.Text,{variant:"small",color:"dimmer",children:"â€¢"}),(0,i.jsx)(eU.Tooltip,{tooltip:n,placement:"top",children:(0,i.jsx)(e1.Pill,{variant:"muted",colorway:"blue",text:r,compact:!0})})]})}function tt(e){var t=e.commitId,n=e.commitDate,r=e.enableHelium,o=e.isFailed,l=e.isLatest,u=e.isDirty,c=e.hasFurtherNonSummaryEvents,f=e.openPane,m=(0,d.useGlobalModal)().show,g=(0,eJ.getCurrentUrl)(),h=l&&!u&&!c,v=(0,p.useAgentCheckpointPreview)({commitId:t,enableHelium:r,date:n}),y=v.loadPreview,x=v.loading,b=v.error,S=v.previewUrl,_=v.validPreview,w=v.showUpgradeModal,T=v.setShowUpgradeModal;(0,a.useEffect)(function(){w&&m("MembershipPurchaseModal",{headingText:"Upgrade to preview past checkpoints",subHeadingText:"Upgrade to Replit ".concat(s.corePlanName," to preview past checkpoints"),analyticsContext:{upgrade:{context:"checkpoint_preview"}},onPurchaseComplete:function(){y()},redirectPath:g}).then(function(){T(!1)})},[w,m,y,T,g]);var j=null!==S,D=(0,i.jsx)(eW.default,{});x?D=(0,i.jsx)(ea.default,{}):h?D=(0,i.jsx)(e3.default,{}):j?D=(0,i.jsx)(eq.default,{}):_?b&&(D=(0,i.jsx)(eo.default,{})):D=(0,i.jsx)(ez.default,{});var k="Preview";x?k="Loading...":h||j?k="View preview":_?b&&(k="Failed to load"):k="Preview expired";var C="";return b?C=b:_||(C="Cannot preview checkpoints older than 7 days"),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(eU.Tooltip,{tooltip:C,isDisabled:h||_,children:(0,i.jsx)(Y.Button,{size:"small",onClick:function(){h&&f?f({type:"webview"}):_&&(j?window.open(S,"_blank","noopener"):y())},disabled:o||!h&&!_,iconLeft:D,text:k})})})}function tn(e){var t=e.screenshot;return t?(0,i.jsx)(er.View,{clsx:e$.default.screenshotContainer,children:(0,i.jsx)(eH.default,{layout:"fill",src:t,alt:"Screenshot",objectFit:"cover"})}):null}function tr(e){var t=e.screenshot,o=e.commitId,l=e.enableHelium,u=e.commitDate,c=e.isLatest,f=e.isDirty,m=e.hasFurtherNonSummaryEvents,g=e.openPane,h=(0,d.useGlobalModal)().show,v=(0,eJ.getCurrentUrl)(),y=c&&!f&&!m,x=(0,p.useAgentCheckpointPreview)({commitId:o,enableHelium:l,date:u}),b=x.loadPreview,S=x.loading,_=x.error,w=x.previewUrl,T=x.validPreview,D=x.showUpgradeModal,k=x.setShowUpgradeModal;(0,a.useEffect)(function(){D&&h("MembershipPurchaseModal",{headingText:"Upgrade to preview past checkpoints",subHeadingText:"Upgrade to Replit ".concat(s.corePlanName," to preview past checkpoints"),analyticsContext:{upgrade:{context:"checkpoint_preview"}},onPurchaseComplete:function(){b()},redirectPath:v}).then(function(){k(!1)})},[D,h,b,k,v]);var C=null!==w,E=(0,r._)((0,a.useState)(!1),2),A=E[0],I=E[1];if((0,a.useEffect)(function(){(C||S)&&I(!0)},[C,S]),!t)return null;var R=(0,i.jsx)(eW.default,{clsx:e$.default.previewIcon,size:20});S?R=(0,i.jsx)(j,{estimatedTotalSeconds:25,size:20}):y?R=(0,i.jsx)(e3.default,{clsx:e$.default.previewIcon,size:20}):C?R=(0,i.jsx)(eq.default,{clsx:e$.default.previewIcon,size:16}):T?_&&(R=(0,i.jsx)(eo.default,{clsx:e$.default.previewIcon,size:20})):R=(0,i.jsx)(eK.default,{clsx:e$.default.previewIcon,size:20});var P="Load preview";S?P="Loading...":y||C?P="View preview":T?_&&(P="Failed to load"):P="Preview expired";var M="";return _?M=_:T||(M="Cannot preview checkpoints older than 7 days"),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(er.View,{clsx:e$.default.screenshotContainer,style:{cursor:y||T?"pointer":"default"},onClick:function(){y&&g?g({type:"webview"}):T&&(C?window.open(w,"_blank","noopener"):b())},onMouseLeave:function(){S||I(!1)},children:[(0,i.jsx)(eH.default,{layout:"fill",src:t,alt:"Screenshot",objectFit:"cover"}),(0,i.jsxs)(eU.Tooltip,{placement:"right",tooltip:M,isDisabled:y||T,clsx:[e$.default.previewOverlay,(0,n._)({},e$.default.previewLoading,A)],children:[R,(0,i.jsx)(en.Text,{color:"default",variant:"small",clsx:e$.default.previewText,children:P})]})]})})}e.s(["CheckpointCard",()=>e7,"CheckpointCardVariant",()=>e6],190120)},81143,e=>{"use strict";function t(e){return void 0!==e.workDurationSeconds&&e.workDurationSeconds>0||void 0!==e.addedLinesOfCode&&e.addedLinesOfCode>0||void 0!==e.removedLinesOfCode&&e.removedLinesOfCode>0||void 0!==e.toolCalls&&e.toolCalls>0||void 0!==e.usageCents&&e.usageCents>0||void 0!==e.numLocRead&&e.numLocRead>0||void 0!==e.numFilesRead&&e.numFilesRead>0}e.s(["hasAnyMetric",()=>t])},849954,e=>{"use strict";var t=e.i(297083),n=e.i(817556),r=e.i(389959),i=e.i(188507);e.i(877212);var a=e.i(924908);e.i(925218);var o=e.i(267103),s=e.i(664152),l=e.i(509908);function u(e){return(0,t._)(function(e){var t,r,a,o,l,u,c,d,p,f,m,g;return(0,n._)(this,function(n){switch(n.label){case 0:t=e.chatter,r=e.revertedToSessionId,a=e.revertedToEventId,o=e.commitId,l=e.title,u=e.onSessionChange,c=e.currentSession,d=e.rollbackDatabaseTimestamp,p=e.rollbackDeploymentBuildId,f=e.rollbackDatabase,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,c.agent.update(i.AgentRunState.AGENT_STATE_PAUSED)];case 2:return n.sent(),[3,4];case 3:return n.sent(),s.logger.warn("Failed to stop agent before checkpoint rollback.",{sessionId:c.id,commitId:o,checkpointTitle:l}),[3,4];case 4:return[4,t.sessions.rollback({targetCommitId:o,newSessionTitle:"Revert to: '".concat(l,"'"),originalSessionId:c.id,deploymentBuildId:p,databaseRollbackTimestamp:d,rollbackDatabase:f,RevertedToSessionId:r?{$kind:"revertedToSessionId",revertedToSessionId:r}:void 0,RevertedToEventId:a?{$kind:"revertedToEventId",revertedToEventId:a}:void 0})];case 5:if(!(m=n.sent()).ok)throw Error("failed to revert");return g=m.payload,u(g),[2]}})}).apply(this,arguments)}function c(e){var i=e.checkpoint,s=e.onSessionChange,c=(0,a.useChatter)(),d=(0,o.useObservable)(c.sessions.agent.current);return{onRevert:(0,r.useCallback)(function(e){return(0,t._)(function(){var t;return(0,n._)(this,function(n){switch(n.label){case 0:if(!d)return[2];return(0,l.trackAgentAnalyticsEvent)({action:"revert_started",messageText:"Reverting to checkpoint: '".concat(i.title,"'"),sessionId:i.sessionId}),[4,u({chatter:c,revertedToSessionId:i.sessionId,revertedToEventId:i.parentEventId,commitId:i.commitId,title:i.title,onSessionChange:s,rollbackDatabaseTimestamp:null==e?void 0:e.rollbackDatabaseTimestamp,rollbackDeploymentBuildId:null==e?void 0:e.rollbackDeploymentBuildId,rollbackDatabase:null!=(t=null==e?void 0:e.rollbackDatabase)&&t,currentSession:d})];case 1:return n.sent(),[2]}})})()},[c,d,i,s])}}e.s(["default",()=>c,"revert",()=>u])},51236,e=>{e.v({container:"Checkpoint-module__W0jY0W__container"})},527717,e=>{e.v({root:"EndOfRunSummary-module__ipPvUG__root"})},529675,e=>{e.v({surface:"ErrorMessage-module__tuPsEG__surface"})},645424,e=>{e.v({cancelButton:"AgentPlanningDialogs-module__sqzuCW__cancelButton",dialog:"AgentPlanningDialogs-module__sqzuCW__dialog",disabled:"AgentPlanningDialogs-module__sqzuCW__disabled",editPlanButton:"AgentPlanningDialogs-module__sqzuCW__editPlanButton",grow1:"AgentPlanningDialogs-module__sqzuCW__grow1",hasDrawerAbove:"AgentPlanningDialogs-module__sqzuCW__hasDrawerAbove",initialBuildModeItem:"AgentPlanningDialogs-module__sqzuCW__initialBuildModeItem",initialBuildModeItemContainer:"AgentPlanningDialogs-module__sqzuCW__initialBuildModeItemContainer",initialBuildModeOptions:"AgentPlanningDialogs-module__sqzuCW__initialBuildModeOptions",interactiveLabel:"AgentPlanningDialogs-module__sqzuCW__interactiveLabel",noShades:"AgentPlanningDialogs-module__sqzuCW__noShades",noticeColorway:"AgentPlanningDialogs-module__sqzuCW__noticeColorway",selected:"AgentPlanningDialogs-module__sqzuCW__selected",statusRow:"AgentPlanningDialogs-module__sqzuCW__statusRow"})},857253,e=>{e.v({btnBonsai:"MobileAgentTourNudge-module__aJI9MG__btnBonsai",btnLeft:"MobileAgentTourNudge-module__aJI9MG__btnLeft",btnRight:"MobileAgentTourNudge-module__aJI9MG__btnRight",mobileQr:"MobileAgentTourNudge-module__aJI9MG__mobileQr",root:"MobileAgentTourNudge-module__aJI9MG__root"})},19208,e=>{e.v({surface:"index-module__YdT9ma__surface"})},67760,(e,t,n)=>{var r,i,a=e.r(365738),o=Object.prototype.toString,s=Math.max;t.exports=(r=function(e){if(!(e&&e.length))return[];var t=0;e=function(e,t){for(var n=-1,r=e?e.length:0,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}(e,function(e){var n,r,i,l,u,c,d,p;if((i=n=e)&&(void 0===i?"undefined":a._(i))=="object"&&null!=(r=n)&&"number"==typeof(l=r.length)&&l>-1&&l%1==0&&l<=0x1fffffffffffff&&"[object Function]"!=(d=void 0===(c=u=r)?"undefined":a._(c),p=c&&("object"==d||"function"==d)?o.call(u):"")&&"[object GeneratorFunction]"!=p)return t=s(e.length,t),!0});for(var n=t,r=function(t){return function(e,t){for(var n=-1,r=e?e.length:0,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}(e,function(e){return null==e?void 0:e[t]})},i=-1,l=Array(n);++i<n;)l[i]=r(i);return l},i=s(void 0===i?r.length-1:i,0),function(){for(var e=arguments,t=-1,n=s(e.length-i,0),a=Array(n);++t<n;)a[t]=e[i+t];t=-1;for(var o=Array(i+1);++t<i;)o[t]=e[t];o[i]=a;switch(o.length){case 0:return r.call(this);case 1:return r.call(this,o[0]);case 2:return r.call(this,o[0],o[1]);case 3:return r.call(this,o[0],o[1],o[2])}return r.apply(this,o)})},30305,e=>{e.v({dividerContainer:"RollbackStatus-module__ruRP2q__dividerContainer",dividerLine:"RollbackStatus-module__ruRP2q__dividerLine",dividerText:"RollbackStatus-module__ruRP2q__dividerText",flexShrink:"RollbackStatus-module__ruRP2q__flexShrink",revertIcon:"RollbackStatus-module__ruRP2q__revertIcon",root:"RollbackStatus-module__ruRP2q__root",subtext:"RollbackStatus-module__ruRP2q__subtext"})},885952,e=>{e.v({appIcon:"SetupImport-module__uC9EDa__appIcon",root:"SetupImport-module__uC9EDa__root",statusIcon:"SetupImport-module__uC9EDa__statusIcon"})},918388,e=>{e.v({borderedContainer:"AutoscaleMachineConfiguration2-module__LbpU1a__borderedContainer"})},14428,e=>{e.v({cost:"MachineConfigurationSelector-module__MyGrca__cost","loading-pulse":"MachineConfigurationSelector-module__MyGrca__loading-pulse",loadingState:"MachineConfigurationSelector-module__MyGrca__loadingState",select:"MachineConfigurationSelector-module__MyGrca__select",selectWrapper:"MachineConfigurationSelector-module__MyGrca__selectWrapper"})},759239,(e,t,n)=>{var r=e.r(365738),i=globalThis,a=function(){return function(){"use strict";var e,t,n={949:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CronParser=void 0;var r=n(515);t.CronParser=function(){function e(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!1),this.expression=e,this.dayOfWeekStartIndexZero=t,this.monthStartIndexZero=n}return e.prototype.parse=function(){var e,t,n=null!=(e=this.expression)?e:"";if("@reboot"===n)return["@reboot","","","","","",""];if(n.startsWith("@")){var r=this.parseSpecial(this.expression);t=this.extractParts(r)}else t=this.extractParts(this.expression);return this.normalize(t),this.validate(t),t},e.prototype.parseSpecial=function(e){var t={"@yearly":"0 0 1 1 *","@annually":"0 0 1 1 *","@monthly":"0 0 1 * *","@weekly":"0 0 * * 0","@daily":"0 0 * * *","@midnight":"0 0 * * *","@hourly":"0 * * * *","@reboot":"@reboot"}[e];if(!t)throw Error("Unknown special expression.");return t},e.prototype.extractParts=function(e){if(!this.expression)throw Error("cron expression is empty");for(var t=e.trim().split(/[ ]+/),n=0;n<t.length;n++)if(t[n].includes(",")){var r=t[n].split(",").map(function(e){return e.trim()}).filter(function(e){return""!==e}).map(function(e){return isNaN(Number(e))?e:Number(e)}).filter(function(e){return null!==e&&""!==e});0===r.length&&r.push("*"),r.sort(function(e,t){return null!==e&&null!==t?e-t:0}),t[n]=r.map(function(e){return null!==e?e.toString():""}).join(",")}if(t.length<5)throw Error("Expression has only ".concat(t.length," part").concat(1==t.length?"":"s",". At least 5 parts are required."));if(5==t.length)t.unshift(""),t.push("");else if(6==t.length)/\d{4}$/.test(t[5])||"?"==t[4]||"?"==t[2]?t.unshift(""):t.push("");else if(t.length>7)throw Error("Expression has ".concat(t.length," parts; too many!"));return t},e.prototype.normalize=function(e){var t=this;if(e[3]=e[3].replace("?","*"),e[5]=e[5].replace("?","*"),e[2]=e[2].replace("?","*"),0==e[0].indexOf("0/")&&(e[0]=e[0].replace("0/","*/")),0==e[1].indexOf("0/")&&(e[1]=e[1].replace("0/","*/")),0==e[2].indexOf("0/")&&(e[2]=e[2].replace("0/","*/")),0==e[3].indexOf("1/")&&(e[3]=e[3].replace("1/","*/")),0==e[4].indexOf("1/")&&(e[4]=e[4].replace("1/","*/")),0==e[6].indexOf("1/")&&(e[6]=e[6].replace("1/","*/")),e[5]=e[5].replace(/(^\d)|([^#/\s]\d)/g,function(e){var n=e.replace(/\D/,""),r=n;return t.dayOfWeekStartIndexZero?"7"==n&&(r="0"):r=(parseInt(n)-1).toString(),e.replace(n,r)}),"L"==e[5]&&(e[5]="6"),"?"==e[3]&&(e[3]="*"),e[3].indexOf("W")>-1&&(e[3].indexOf(",")>-1||e[3].indexOf("-")>-1))throw Error("The 'W' character can be specified only when the day-of-month is a single day, not a range or list of days.");var n={SUN:0,MON:1,TUE:2,WED:3,THU:4,FRI:5,SAT:6};for(var r in n)e[5]=e[5].replace(RegExp(r,"gi"),n[r].toString());e[4]=e[4].replace(/(^\d{1,2})|([^#/\s]\d{1,2})/g,function(e){var n=e.replace(/\D/,""),r=n;return t.monthStartIndexZero&&(r=(parseInt(n)+1).toString()),e.replace(n,r)});var i={JAN:1,FEB:2,MAR:3,APR:4,MAY:5,JUN:6,JUL:7,AUG:8,SEP:9,OCT:10,NOV:11,DEC:12};for(var a in i)e[4]=e[4].replace(RegExp(a,"gi"),i[a].toString());"0"==e[0]&&(e[0]=""),!/\*|\-|\,|\//.test(e[2])&&(/\*|\//.test(e[1])||/\*|\//.test(e[0]))&&(e[2]+="-".concat(e[2]));for(var o=0;o<e.length;o++)if(-1!=e[o].indexOf(",")&&(e[o]=e[o].split(",").filter(function(e){return""!==e}).join(",")||"*"),"*/1"==e[o]&&(e[o]="*"),e[o].indexOf("/")>-1&&!/^\*|\-|\,/.test(e[o])){var s=null;switch(o){case 4:s="12";break;case 5:s="6";break;case 6:s="9999";break;default:s=null}if(null!==s){var l=e[o].split("/");e[o]="".concat(l[0],"-").concat(s,"/").concat(l[1])}}},e.prototype.validate=function(e){var t="0-9,\\-*/";this.validateOnlyExpectedCharactersFound(e[0],t),this.validateOnlyExpectedCharactersFound(e[1],t),this.validateOnlyExpectedCharactersFound(e[2],t),this.validateOnlyExpectedCharactersFound(e[3],"0-9,\\-*/LW"),this.validateOnlyExpectedCharactersFound(e[4],t),this.validateOnlyExpectedCharactersFound(e[5],"0-9,\\-*/L#"),this.validateOnlyExpectedCharactersFound(e[6],t),this.validateAnyRanges(e)},e.prototype.validateAnyRanges=function(e){r.default.secondRange(e[0]),r.default.minuteRange(e[1]),r.default.hourRange(e[2]),r.default.dayOfMonthRange(e[3]),r.default.monthRange(e[4],this.monthStartIndexZero),r.default.dayOfWeekRange(e[5],this.dayOfWeekStartIndexZero)},e.prototype.validateOnlyExpectedCharactersFound=function(e,t){var n=e.match(RegExp("[^".concat(t,"]+"),"gi"));if(n&&n.length)throw Error("Expression contains invalid values: '".concat(n.toString(),"'"))},e}()},333:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionDescriptor=void 0;var r=n(823),i=n(949);t.ExpressionDescriptor=function(){function e(t,n){if(this.expression=t,this.options=n,this.expressionParts=[,,,,,],!this.options.locale&&e.defaultLocale&&(this.options.locale=e.defaultLocale),!e.locales[this.options.locale]){var r=Object.keys(e.locales)[0];console.warn("Locale '".concat(this.options.locale,"' could not be found; falling back to '").concat(r,"'.")),this.options.locale=r}this.i18n=e.locales[this.options.locale],void 0===n.use24HourTimeFormat&&(n.use24HourTimeFormat=this.i18n.use24HourTimeFormatByDefault())}return e.toString=function(t,n){var r=void 0===n?{}:n,i=r.throwExceptionOnParseError,a=r.verbose,o=r.dayOfWeekStartIndexZero,s=r.monthStartIndexZero,l=r.use24HourTimeFormat,u=r.locale,c=r.logicalAndDayFields,d={throwExceptionOnParseError:void 0===i||i,verbose:void 0!==a&&a,dayOfWeekStartIndexZero:void 0===o||o,monthStartIndexZero:void 0!==s&&s,use24HourTimeFormat:l,locale:void 0===u?null:u,logicalAndDayFields:void 0!==c&&c};return d.tzOffset&&console.warn("'tzOffset' option has been deprecated and is no longer supported."),new e(t,d).getFullDescription()},e.initialize=function(t,n){void 0===n&&(n="en"),e.specialCharacters=["/","-",",","*"],e.defaultLocale=n,t.load(e.locales)},e.prototype.getFullDescription=function(){var e,t,n="";try{var r=new i.CronParser(this.expression,this.options.dayOfWeekStartIndexZero,this.options.monthStartIndexZero);if(this.expressionParts=r.parse(),"@reboot"===this.expressionParts[0])return(null==(t=(e=this.i18n).atReboot)?void 0:t.call(e))||"Run once, at startup";var a=this.getTimeOfDayDescription(),o=this.getDayOfMonthDescription(),s=this.getMonthDescription(),l=this.getDayOfWeekDescription(),u=this.getYearDescription();n+=a+o+l+s+u,n=(n=this.transformVerbosity(n,!!this.options.verbose)).charAt(0).toLocaleUpperCase()+n.substr(1)}catch(e){if(this.options.throwExceptionOnParseError)throw"".concat(e);n=this.i18n.anErrorOccuredWhenGeneratingTheExpressionD()}return n},e.prototype.getTimeOfDayDescription=function(){var t=this.expressionParts[0],n=this.expressionParts[1],i=this.expressionParts[2],a="";if(r.StringUtilities.containsAny(n,e.specialCharacters)||r.StringUtilities.containsAny(i,e.specialCharacters)||r.StringUtilities.containsAny(t,e.specialCharacters))if(!(!t&&n.indexOf("-")>-1)||n.indexOf(",")>-1||n.indexOf("/")>-1||r.StringUtilities.containsAny(i,e.specialCharacters))if(!t&&i.indexOf(",")>-1&&-1==i.indexOf("-")&&-1==i.indexOf("/")&&!r.StringUtilities.containsAny(n,e.specialCharacters)){var o=i.split(",");a+=this.i18n.at();for(var s=0;s<o.length;s++)a+=" ",a+=this.formatTime(o[s],n,""),s<o.length-2&&(a+=","),s==o.length-2&&(a+=this.i18n.spaceAnd())}else{var l=this.getSecondsDescription(),u=this.getMinutesDescription(),c=this.getHoursDescription();if((a+=l)&&u&&(a+=", "),a+=u,u===c)return a;a&&c&&(a+=", "),a+=c}else{var d=n.split("-");a+=r.StringUtilities.format(this.i18n.everyMinuteBetweenX0AndX1(),this.formatTime(i,d[0],""),this.formatTime(i,d[1],""))}else a+=this.i18n.atSpace()+this.formatTime(i,n,t);return a},e.prototype.getSecondsDescription=function(){var e=this;return this.getSegmentDescription(this.expressionParts[0],this.i18n.everySecond(),function(e){return e},function(t){return r.StringUtilities.format(e.i18n.everyX0Seconds(t),t)},function(t){return e.i18n.secondsX0ThroughX1PastTheMinute()},function(t){return"0"==t?"":20>parseInt(t)?e.i18n.atX0SecondsPastTheMinute(t):e.i18n.atX0SecondsPastTheMinuteGt20()||e.i18n.atX0SecondsPastTheMinute(t)})},e.prototype.getMinutesDescription=function(){var e=this,t=this.expressionParts[0],n=this.expressionParts[2];return this.getSegmentDescription(this.expressionParts[1],this.i18n.everyMinute(),function(e){return e},function(t){return r.StringUtilities.format(e.i18n.everyX0Minutes(t),t)},function(t){return e.i18n.minutesX0ThroughX1PastTheHour()},function(r){try{return"0"==r&&-1==n.indexOf("/")&&""==t?e.i18n.everyHour():20>parseInt(r)?e.i18n.atX0MinutesPastTheHour(r):e.i18n.atX0MinutesPastTheHourGt20()||e.i18n.atX0MinutesPastTheHour(r)}catch(t){return e.i18n.atX0MinutesPastTheHour(r)}})},e.prototype.getHoursDescription=function(){var e=this,t=this.expressionParts[2],n=0,i=[];t.split("/")[0].split(",").forEach(function(e){var t=e.split("-");2===t.length&&i.push({value:t[1],index:n+1}),n+=t.length});var a=0;return this.getSegmentDescription(t,this.i18n.everyHour(),function(t){var n=i.find(function(e){return e.value===t&&e.index===a})&&"0"!==e.expressionParts[1];return a++,n?e.formatTime(t,"59",""):e.formatTime(t,"0","")},function(t){return r.StringUtilities.format(e.i18n.everyX0Hours(t),t)},function(t){return e.i18n.betweenX0AndX1()},function(t){return e.i18n.atX0()})},e.prototype.getDayOfWeekDescription=function(){var e=this,t=this.i18n.daysOfTheWeek();return"*"==this.expressionParts[5]?"":this.getSegmentDescription(this.expressionParts[5],this.i18n.commaEveryDay(),function(n,r){var i=n;n.indexOf("#")>-1?i=n.substring(0,n.indexOf("#")):n.indexOf("L")>-1&&(i=i.replace("L",""));var a=parseInt(i),o=e.i18n.daysOfTheWeekInCase?e.i18n.daysOfTheWeekInCase(r)[a]:t[a];if(n.indexOf("#")>-1){var s=null,l=n.substring(n.indexOf("#")+1),u=n.substring(0,n.indexOf("#"));switch(l){case"1":s=e.i18n.first(u);break;case"2":s=e.i18n.second(u);break;case"3":s=e.i18n.third(u);break;case"4":s=e.i18n.fourth(u);break;case"5":s=e.i18n.fifth(u)}o=s+" "+o}return o},function(t){return 1==parseInt(t)?"":r.StringUtilities.format(e.i18n.commaEveryX0DaysOfTheWeek(t),t)},function(t){var n=t.substring(0,t.indexOf("-"));return"*"!=e.expressionParts[3]?e.i18n.commaAndX0ThroughX1(n):e.i18n.commaX0ThroughX1(n)},function(t){var n=null;if(t.indexOf("#")>-1){var r=t.substring(t.indexOf("#")+1),i=t.substring(0,t.indexOf("#"));n=e.i18n.commaOnThe(r,i).trim()+e.i18n.spaceX0OfTheMonth()}else n=t.indexOf("L")>-1?e.i18n.commaOnTheLastX0OfTheMonth(t.replace("L","")):"*"!=e.expressionParts[3]?e.options.logicalAndDayFields?e.i18n.commaOnlyOnX0(t):e.i18n.commaAndOnX0():e.i18n.commaOnlyOnX0(t);return n})},e.prototype.getMonthDescription=function(){var e=this,t=this.i18n.monthsOfTheYear();return this.getSegmentDescription(this.expressionParts[4],"",function(n,r){return r&&e.i18n.monthsOfTheYearInCase?e.i18n.monthsOfTheYearInCase(r)[parseInt(n)-1]:t[parseInt(n)-1]},function(t){return 1==parseInt(t)?"":r.StringUtilities.format(e.i18n.commaEveryX0Months(t),t)},function(t){return e.i18n.commaMonthX0ThroughMonthX1()||e.i18n.commaX0ThroughX1()},function(t){return e.i18n.commaOnlyInMonthX0?e.i18n.commaOnlyInMonthX0():e.i18n.commaOnlyInX0()})},e.prototype.getDayOfMonthDescription=function(){var e=this,t=null,n=this.expressionParts[3];switch(n){case"L":t=this.i18n.commaOnTheLastDayOfTheMonth();break;case"WL":case"LW":t=this.i18n.commaOnTheLastWeekdayOfTheMonth();break;default:var i=n.match(/(\d{1,2}W)|(W\d{1,2})/);if(i){var a=parseInt(i[0].replace("W","")),o=1==a?this.i18n.firstWeekday():r.StringUtilities.format(this.i18n.weekdayNearestDayX0(),a.toString());t=r.StringUtilities.format(this.i18n.commaOnTheX0OfTheMonth(),o)}else{var s=n.match(/L-(\d{1,2})/);if(s){var l=s[1];t=r.StringUtilities.format(this.i18n.commaDaysBeforeTheLastDayOfTheMonth(l),l)}else{if("*"==n&&"*"!=this.expressionParts[5])return"";t=this.getSegmentDescription(n,this.i18n.commaEveryDay(),function(t){return"L"==t?e.i18n.lastDay():e.i18n.dayX0?r.StringUtilities.format(e.i18n.dayX0(),t):t},function(t){return"1"==t?e.i18n.commaEveryDay():e.i18n.commaEveryX0Days(t)},function(t){return e.i18n.commaBetweenDayX0AndX1OfTheMonth(t)},function(t){return e.i18n.commaOnDayX0OfTheMonth(t)})}}}return t},e.prototype.getYearDescription=function(){var e=this;return this.getSegmentDescription(this.expressionParts[6],"",function(e){return/^\d+$/.test(e)?new Date(parseInt(e),1).getFullYear().toString():e},function(t){return r.StringUtilities.format(e.i18n.commaEveryX0Years(t),t)},function(t){return e.i18n.commaYearX0ThroughYearX1()||e.i18n.commaX0ThroughX1()},function(t){return e.i18n.commaOnlyInYearX0?e.i18n.commaOnlyInYearX0():e.i18n.commaOnlyInX0()})},e.prototype.getSegmentDescription=function(e,t,n,i,a,o){var s=null,l=e.indexOf("/")>-1,u=e.indexOf("-")>-1,c=e.indexOf(",")>-1;if(e)if("*"===e)s=t;else if(l||u||c)if(c){for(var d=e.split(","),p="",f=0;f<d.length;f++)if(f>0&&d.length>2&&(p+=",",f<d.length-1&&(p+=" ")),f>0&&d.length>1&&(f==d.length-1||2==d.length)&&(p+="".concat(this.i18n.spaceAnd()," ")),d[f].indexOf("/")>-1||d[f].indexOf("-")>-1){var m=d[f].indexOf("-")>-1&&-1==d[f].indexOf("/"),g=this.getSegmentDescription(d[f],t,n,i,m?this.i18n.commaX0ThroughX1:a,o);m&&(g=g.replace(", ","")),p+=g}else l?p+=this.getSegmentDescription(d[f],t,n,i,a,o):p+=n(d[f]);s=l?p:r.StringUtilities.format(o(e),p)}else if(l){var d=e.split("/");if(s=r.StringUtilities.format(i(d[1]),d[1]),d[0].indexOf("-")>-1){var h=this.generateRangeSegmentDescription(d[0],a,n);0!=h.indexOf(", ")&&(s+=", "),s+=h}else if(-1==d[0].indexOf("*")){var v=r.StringUtilities.format(o(d[0]),n(d[0]));v=v.replace(", ",""),s+=r.StringUtilities.format(this.i18n.commaStartingX0(),v)}}else u&&(s=this.generateRangeSegmentDescription(e,a,n));else s=r.StringUtilities.format(o(e),n(e));else s="";return s},e.prototype.generateRangeSegmentDescription=function(e,t,n){var i="",a=e.split("-"),o=n(a[0],1),s=n(a[1],2),l=t(e);return i+r.StringUtilities.format(l,o,s)},e.prototype.formatTime=function(e,t,n){var r=parseInt(e)+0,i=parseInt(t)+0;i>=60?(i-=60,r+=1):i<0&&(i+=60,r-=1),r>=24?r-=24:r<0&&(r=24+r);var a="",o=!1;this.options.use24HourTimeFormat||(a=(o=!!(this.i18n.setPeriodBeforeTime&&this.i18n.setPeriodBeforeTime()))?"".concat(this.getPeriod(r)," "):" ".concat(this.getPeriod(r)),r>12&&(r-=12),0===r&&(r=12));var s="";return n&&(s=":".concat(("00"+n).substring(n.length))),"".concat(o?a:"").concat(("00"+r.toString()).substring(r.toString().length),":").concat(("00"+i.toString()).substring(i.toString().length)).concat(s).concat(o?"":a)},e.prototype.transformVerbosity=function(e,t){if(!t&&(e=(e=(e=(e=e.replace(RegExp(", ".concat(this.i18n.everyMinute()),"g"),"")).replace(RegExp(", ".concat(this.i18n.everyHour()),"g"),"")).replace(RegExp(this.i18n.commaEveryDay(),"g"),"")).replace(/\, ?$/,""),this.i18n.conciseVerbosityReplacements))for(var n=0,r=Object.entries(this.i18n.conciseVerbosityReplacements());n<r.length;n++){var i=r[n],a=i[0],o=i[1];e=e.replace(RegExp(a,"g"),o)}return e},e.prototype.getPeriod=function(e){return e>=12?this.i18n.pm&&this.i18n.pm()||"PM":this.i18n.am&&this.i18n.am()||"AM"},e.locales={},e}()},747:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.enLocaleLoader=void 0;var r=n(486);t.enLocaleLoader=function(){function e(){}return e.prototype.load=function(e){e.en=new r.en},e}()},486:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.en=void 0,t.en=function(){function e(){}return e.prototype.atX0SecondsPastTheMinuteGt20=function(){return null},e.prototype.atX0MinutesPastTheHourGt20=function(){return null},e.prototype.commaMonthX0ThroughMonthX1=function(){return null},e.prototype.commaYearX0ThroughYearX1=function(){return null},e.prototype.use24HourTimeFormatByDefault=function(){return!1},e.prototype.anErrorOccuredWhenGeneratingTheExpressionD=function(){return"An error occurred when generating the expression description. Check the cron expression syntax."},e.prototype.everyMinute=function(){return"every minute"},e.prototype.everyHour=function(){return"every hour"},e.prototype.atSpace=function(){return"At "},e.prototype.everyMinuteBetweenX0AndX1=function(){return"Every minute between %s and %s"},e.prototype.at=function(){return"At"},e.prototype.spaceAnd=function(){return" and"},e.prototype.everySecond=function(){return"every second"},e.prototype.everyX0Seconds=function(){return"every %s seconds"},e.prototype.secondsX0ThroughX1PastTheMinute=function(){return"seconds %s through %s past the minute"},e.prototype.atX0SecondsPastTheMinute=function(){return"at %s seconds past the minute"},e.prototype.everyX0Minutes=function(){return"every %s minutes"},e.prototype.minutesX0ThroughX1PastTheHour=function(){return"minutes %s through %s past the hour"},e.prototype.atX0MinutesPastTheHour=function(){return"at %s minutes past the hour"},e.prototype.everyX0Hours=function(){return"every %s hours"},e.prototype.betweenX0AndX1=function(){return"between %s and %s"},e.prototype.atX0=function(){return"at %s"},e.prototype.commaEveryDay=function(){return", every day"},e.prototype.commaEveryX0DaysOfTheWeek=function(){return", every %s days of the week"},e.prototype.commaX0ThroughX1=function(){return", %s through %s"},e.prototype.commaAndX0ThroughX1=function(){return", %s through %s"},e.prototype.first=function(){return"first"},e.prototype.second=function(){return"second"},e.prototype.third=function(){return"third"},e.prototype.fourth=function(){return"fourth"},e.prototype.fifth=function(){return"fifth"},e.prototype.commaOnThe=function(){return", on the "},e.prototype.spaceX0OfTheMonth=function(){return" %s of the month"},e.prototype.lastDay=function(){return"the last day"},e.prototype.commaOnTheLastX0OfTheMonth=function(){return", on the last %s of the month"},e.prototype.commaOnlyOnX0=function(){return", only on %s"},e.prototype.commaAndOnX0=function(){return", and on %s"},e.prototype.commaEveryX0Months=function(){return", every %s months"},e.prototype.commaOnlyInX0=function(){return", only in %s"},e.prototype.commaOnTheLastDayOfTheMonth=function(){return", on the last day of the month"},e.prototype.commaOnTheLastWeekdayOfTheMonth=function(){return", on the last weekday of the month"},e.prototype.commaDaysBeforeTheLastDayOfTheMonth=function(){return", %s days before the last day of the month"},e.prototype.firstWeekday=function(){return"first weekday"},e.prototype.weekdayNearestDayX0=function(){return"weekday nearest day %s"},e.prototype.commaOnTheX0OfTheMonth=function(){return", on the %s of the month"},e.prototype.commaEveryX0Days=function(){return", every %s days"},e.prototype.commaBetweenDayX0AndX1OfTheMonth=function(){return", between day %s and %s of the month"},e.prototype.commaOnDayX0OfTheMonth=function(){return", on day %s of the month"},e.prototype.commaEveryHour=function(){return", every hour"},e.prototype.commaEveryX0Years=function(){return", every %s years"},e.prototype.commaStartingX0=function(){return", starting %s"},e.prototype.daysOfTheWeek=function(){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},e.prototype.monthsOfTheYear=function(){return["January","February","March","April","May","June","July","August","September","October","November","December"]},e.prototype.atReboot=function(){return"Run once, at startup"},e}()},515:function(e,t){var n=function(e,t){if(!e)throw Error(t)};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(){}return e.secondRange=function(e){for(var t=e.split(","),r=0;r<t.length;r++)if(!isNaN(parseInt(t[r],10))){var i=parseInt(t[r],10);n(i>=0&&i<=59,"seconds part must be >= 0 and <= 59")}},e.minuteRange=function(e){for(var t=e.split(","),r=0;r<t.length;r++)if(!isNaN(parseInt(t[r],10))){var i=parseInt(t[r],10);n(i>=0&&i<=59,"minutes part must be >= 0 and <= 59")}},e.hourRange=function(e){for(var t=e.split(","),r=0;r<t.length;r++)if(!isNaN(parseInt(t[r],10))){var i=parseInt(t[r],10);n(i>=0&&i<=23,"hours part must be >= 0 and <= 23")}},e.dayOfMonthRange=function(e){for(var t=e.split(","),r=0;r<t.length;r++)if(!isNaN(parseInt(t[r],10))){var i=parseInt(t[r],10);n(i>=1&&i<=31,"DOM part must be >= 1 and <= 31")}},e.monthRange=function(e,t){for(var r=e.split(","),i=0;i<r.length;i++)if(!isNaN(parseInt(r[i],10))){var a=parseInt(r[i],10);n(a>=1&&a<=12,t?"month part must be >= 0 and <= 11":"month part must be >= 1 and <= 12")}},e.dayOfWeekRange=function(e,t){for(var r=e.split(","),i=0;i<r.length;i++)if(!isNaN(parseInt(r[i],10))){var a=parseInt(r[i],10);n(a>=0&&a<=6,t?"DOW part must be >= 0 and <= 6":"DOW part must be >= 1 and <= 7")}},e}()},823:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtilities=void 0,t.StringUtilities=function(){function e(){}return e.format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return e.replace(/%s/g,function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return t.shift()})},e.containsAny=function(e,t){return t.some(function(t){return e.indexOf(t)>-1})},e}()}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var a=r[e]={exports:{}};return n[e](a,a.exports,i),a.exports}var a={};return Object.defineProperty(a,"__esModule",{value:!0}),a.toString=void 0,e=i(333),t=i(747),e.ExpressionDescriptor.initialize(new t.enLocaleLoader),a.default=e.ExpressionDescriptor,a.toString=e.ExpressionDescriptor.toString,a}()};if("object"===r._(n)&&"object"===r._(t))t.exports=a();else if("function"==typeof define&&define.amd){let t;void 0!==(t=a())&&e.v(t)}else"object"===r._(n)?n.cronstrue=a():i.cronstrue=a()},947592,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){if(t.length<e)throw TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")},t.exports=n.default},693955,(e,t,n)=>{"use strict";var r,i=e.r(954546),a=e.r(365738);Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,o.default)(1,arguments);var t=Object.prototype.toString.call(e);return i._(e,Date)||(void 0===e?"undefined":a._(e))==="object"&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):(("string"==typeof e||"[object String]"===t)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn(Error().stack)),new Date(NaN))};var o=(r=e.r(947592))&&r.__esModule?r:{default:r};t.exports=n.default},48654,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return(0,i.default)(1,arguments),!isNaN((0,r.default)(e))};var r=a(e.r(693955)),i=a(e.r(947592));function a(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},429881,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){var i;if(n=n||{},i="string"==typeof r[e]?r[e]:1===t?r[e].one:r[e].other.replace("{{count}}",t),n.addSuffix)if(n.comparison>0)return"in "+i;else return i+" ago";return i};var r={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};t.exports=n.default},527508,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(t){var n=t||{},r=n.width?String(n.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}},t.exports=n.default},488365,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e.r(527508))&&r.__esModule?r:{default:r};n.default={date:(0,i.default)({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:(0,i.default)({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:(0,i.default)({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},t.exports=n.default},727525,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,i){return r[e]};var r={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};t.exports=n.default},8629,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(t,n){var r,i=n||{};if("formatting"===(i.context?String(i.context):"standalone")&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,o=i.width?String(i.width):a;r=e.formattingValues[o]||e.formattingValues[a]}else{var s=e.defaultWidth,l=i.width?String(i.width):e.defaultWidth;r=e.values[l]||e.values[s]}return r[e.argumentCallback?e.argumentCallback(t):t]}},t.exports=n.default},691958,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e.r(8629))&&r.__esModule?r:{default:r};n.default={ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:(0,i.default)({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:(0,i.default)({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:(0,i.default)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:(0,i.default)({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:(0,i.default)({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},t.exports=n.default},678985,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(t,n){var r=String(t),i=n||{},a=r.match(e.matchPattern);if(!a)return null;var o=a[0],s=r.match(e.parsePattern);if(!s)return null;var l=e.valueCallback?e.valueCallback(s[0]):s[0];return{value:l=i.valueCallback?i.valueCallback(l):l,rest:r.slice(o.length)}}},t.exports=n.default},417644,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(t,n){var r,i=String(t),a=n||{},o=a.width,s=o&&e.matchPatterns[o]||e.matchPatterns[e.defaultMatchWidth],l=i.match(s);if(!l)return null;var u=l[0],c=o&&e.parsePatterns[o]||e.parsePatterns[e.defaultParseWidth];return r="[object Array]"===Object.prototype.toString.call(c)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}(c,function(e){return e.test(u)}):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}(c,function(e){return e.test(u)}),r=e.valueCallback?e.valueCallback(r):r,{value:r=a.valueCallback?a.valueCallback(r):r,rest:i.slice(u.length)}}},t.exports=n.default},207756,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(e.r(678985)),i=a(e.r(417644));function a(e){return e&&e.__esModule?e:{default:e}}n.default={ordinalNumber:(0,r.default)({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:(0,i.default)({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:(0,i.default)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:(0,i.default)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,i.default)({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,i.default)({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},t.exports=n.default},963919,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=l(e.r(429881)),i=l(e.r(488365)),a=l(e.r(727525)),o=l(e.r(691958)),s=l(e.r(207756));function l(e){return e&&e.__esModule?e:{default:e}}n.default={code:"en-US",formatDistance:r.default,formatLong:i.default,formatRelative:a.default,localize:o.default,match:s.default,options:{weekStartsOn:0,firstWeekContainsDate:1}},t.exports=n.default},555023,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)},t.exports=n.default},970266,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return(0,a.default)(2,arguments),new Date((0,i.default)(e).getTime()+(0,r.default)(t))};var r=o(e.r(555023)),i=o(e.r(693955)),a=o(e.r(947592));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},209021,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,a.default)(2,arguments);var n=(0,r.default)(t);return(0,i.default)(e,-n)};var r=o(e.r(555023)),i=o(e.r(970266)),a=o(e.r(947592));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},374369,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){for(var n=Math.abs(e).toString();n.length<t;)n="0"+n;return(e<0?"-":"")+n},t.exports=n.default},474293,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,i=(r=e.r(374369))&&r.__esModule?r:{default:r};n.default={y:function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return(0,i.default)("yy"===t?r%100:r,t.length)},M:function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):(0,i.default)(n+1,2)},d:function(e,t){return(0,i.default)(e.getUTCDate(),t.length)},a:function(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:function(e,t){return(0,i.default)(e.getUTCHours()%12||12,t.length)},H:function(e,t){return(0,i.default)(e.getUTCHours(),t.length)},m:function(e,t){return(0,i.default)(e.getUTCMinutes(),t.length)},s:function(e,t){return(0,i.default)(e.getUTCSeconds(),t.length)},S:function(e,t){var n=t.length,r=Math.floor(e.getUTCMilliseconds()*Math.pow(10,n-3));return(0,i.default)(r,t.length)}},t.exports=n.default},520019,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,i.default)(1,arguments);var t=(0,r.default)(e),n=t.getTime();return t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0),Math.floor((n-t.getTime())/864e5)+1};var r=a(e.r(693955)),i=a(e.r(947592));function a(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},167852,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,i.default)(1,arguments);var t=(0,r.default)(e),n=t.getUTCDay();return t.setUTCDate(t.getUTCDate()-(7*(n<1)+n-1)),t.setUTCHours(0,0,0,0),t};var r=a(e.r(693955)),i=a(e.r(947592));function a(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},596841,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,a.default)(1,arguments);var t=(0,r.default)(e),n=t.getUTCFullYear(),o=new Date(0);o.setUTCFullYear(n+1,0,4),o.setUTCHours(0,0,0,0);var s=(0,i.default)(o),l=new Date(0);l.setUTCFullYear(n,0,4),l.setUTCHours(0,0,0,0);var u=(0,i.default)(l);return t.getTime()>=s.getTime()?n+1:t.getTime()>=u.getTime()?n:n-1};var r=o(e.r(693955)),i=o(e.r(167852)),a=o(e.r(947592));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},57269,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,a.default)(1,arguments);var t=(0,r.default)(e),n=new Date(0);return n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0),(0,i.default)(n)};var r=o(e.r(596841)),i=o(e.r(167852)),a=o(e.r(947592));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},424341,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){(0,o.default)(1,arguments);var t=(0,r.default)(e);return Math.round(((0,i.default)(t).getTime()-(0,a.default)(t).getTime())/6048e5)+1};var r=s(e.r(693955)),i=s(e.r(167852)),a=s(e.r(57269)),o=s(e.r(947592));function s(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},171771,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,a.default)(1,arguments);var n=t||{},o=n.locale,s=o&&o.options&&o.options.weekStartsOn,l=null==s?0:(0,r.default)(s),u=null==n.weekStartsOn?l:(0,r.default)(n.weekStartsOn);if(!(u>=0&&u<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");var c=(0,i.default)(e),d=c.getUTCDay();return c.setUTCDate(c.getUTCDate()-(7*(d<u)+d-u)),c.setUTCHours(0,0,0,0),c};var r=o(e.r(555023)),i=o(e.r(693955)),a=o(e.r(947592));function o(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},247167,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,o.default)(1,arguments);var n=(0,i.default)(e,t),s=n.getUTCFullYear(),l=t||{},u=l.locale,c=u&&u.options&&u.options.firstWeekContainsDate,d=null==c?1:(0,r.default)(c),p=null==l.firstWeekContainsDate?d:(0,r.default)(l.firstWeekContainsDate);if(!(p>=1&&p<=7))throw RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var f=new Date(0);f.setUTCFullYear(s+1,0,p),f.setUTCHours(0,0,0,0);var m=(0,a.default)(f,t),g=new Date(0);g.setUTCFullYear(s,0,p),g.setUTCHours(0,0,0,0);var h=(0,a.default)(g,t);return n.getTime()>=m.getTime()?s+1:n.getTime()>=h.getTime()?s:s-1};var r=s(e.r(555023)),i=s(e.r(693955)),a=s(e.r(171771)),o=s(e.r(947592));function s(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},129705,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,o.default)(1,arguments);var n=t||{},s=n.locale,l=s&&s.options&&s.options.firstWeekContainsDate,u=null==l?1:(0,r.default)(l),c=null==n.firstWeekContainsDate?u:(0,r.default)(n.firstWeekContainsDate),d=(0,i.default)(e,t),p=new Date(0);return p.setUTCFullYear(d,0,c),p.setUTCHours(0,0,0,0),(0,a.default)(p,t)};var r=s(e.r(555023)),i=s(e.r(247167)),a=s(e.r(171771)),o=s(e.r(947592));function s(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},711232,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){(0,o.default)(1,arguments);var n=(0,r.default)(e);return Math.round(((0,i.default)(n,t).getTime()-(0,a.default)(n,t).getTime())/6048e5)+1};var r=s(e.r(693955)),i=s(e.r(171771)),a=s(e.r(129705)),o=s(e.r(947592));function s(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default},175395,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=c(e.r(474293)),i=c(e.r(520019)),a=c(e.r(424341)),o=c(e.r(596841)),s=c(e.r(711232)),l=c(e.r(247167)),u=c(e.r(374369));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),a=r%60;return 0===a?n+String(i):n+String(i)+(t||"")+(0,u.default)(a,2)}function p(e,t){return e%60==0?(e>0?"-":"+")+(0,u.default)(Math.abs(e)/60,2):f(e,t)}function f(e,t){var n=Math.abs(e);return(e>0?"-":"+")+(0,u.default)(Math.floor(n/60),2)+(t||"")+(0,u.default)(n%60,2)}n.default={G:function(e,t,n){var r=+(e.getUTCFullYear()>0);switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var i=e.getUTCFullYear();return n.ordinalNumber(i>0?i:1-i,{unit:"year"})}return r.default.y(e,t)},Y:function(e,t,n,r){var i=(0,l.default)(e,r),a=i>0?i:1-i;if("YY"===t){var o=a%100;return(0,u.default)(o,2)}return"Yo"===t?n.ordinalNumber(a,{unit:"year"}):(0,u.default)(a,t.length)},R:function(e,t){var n=(0,o.default)(e);return(0,u.default)(n,t.length)},u:function(e,t){var n=e.getUTCFullYear();return(0,u.default)(n,t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return(0,u.default)(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return(0,u.default)(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var i=e.getUTCMonth();switch(t){case"M":case"MM":return r.default.M(e,t);case"Mo":return n.ordinalNumber(i+1,{unit:"month"});case"MMM":return n.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(i,{width:"narrow",context:"formatting"});default:return n.month(i,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return(0,u.default)(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var i=(0,s.default)(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):(0,u.default)(i,t.length)},I:function(e,t,n){var r=(0,a.default)(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):(0,u.default)(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):r.default.d(e,t)},D:function(e,t,n){var r=(0,i.default)(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):(0,u.default)(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return(0,u.default)(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getUTCDay(),a=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return(0,u.default)(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return(0,u.default)(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getUTCHours();switch(r=12===i?"noon":0===i?"midnight":i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getUTCHours();switch(r=i>=17?"evening":i>=12?"afternoon":i>=4?"morning":"night",t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var i=e.getUTCHours()%12;return 0===i&&(i=12),n.ordinalNumber(i,{unit:"hour"})}return r.default.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):r.default.H(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):(0,u.default)(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return(0===r&&(r=24),"ko"===t)?n.ordinalNumber(r,{unit:"hour"}):(0,u.default)(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):r.default.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):r.default.s(e,t)},S:function(e,t){return r.default.S(e,t)},X:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return p(i);case"XXXX":case"XX":return f(i);default:return f(i,":")}},x:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return p(i);case"xxxx":case"xx":return f(i);default:return f(i,":")}},O:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+d(i,":");default:return"GMT"+f(i,":")}},z:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+d(i,":");default:return"GMT"+f(i,":")}},t:function(e,t,n,r){var i=Math.floor((r._originalDate||e).getTime()/1e3);return(0,u.default)(i,t.length)},T:function(e,t,n,r){var i=(r._originalDate||e).getTime();return(0,u.default)(i,t.length)}},t.exports=n.default},463849,(e,t,n)=>{"use strict";function r(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}}function i(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.default={p:i,P:function(e,t){var n,a=e.match(/(P+)(p+)?/),o=a[1],s=a[2];if(!s)return r(e,t);switch(o){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",r(o,t)).replace("{{time}}",i(s,t))}},t.exports=n.default},906695,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()},t.exports=n.default},539530,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isProtectedDayOfYearToken=function(e){return -1!==r.indexOf(e)},n.isProtectedWeekYearToken=function(e){return -1!==i.indexOf(e)},n.throwProtectedError=function(e,t,n){if("YYYY"===e)throw RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===e)throw RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===e)throw RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===e)throw RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))};var r=["D","DD"],i=["YY","YYYY"]},628251,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){(0,p.default)(2,arguments);var f=String(t),x=n||{},b=x.locale||i.default,S=b.options&&b.options.firstWeekContainsDate,_=null==S?1:(0,d.default)(S),w=null==x.firstWeekContainsDate?_:(0,d.default)(x.firstWeekContainsDate);if(!(w>=1&&w<=7))throw RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var T=b.options&&b.options.weekStartsOn,j=null==T?0:(0,d.default)(T),D=null==x.weekStartsOn?j:(0,d.default)(x.weekStartsOn);if(!(D>=0&&D<=6))throw RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!b.localize)throw RangeError("locale must contain localize property");if(!b.formatLong)throw RangeError("locale must contain formatLong property");var k=(0,o.default)(e);if(!(0,r.default)(k))throw RangeError("Invalid time value");var C=(0,u.default)(k),E=(0,a.default)(k,C),A={firstWeekContainsDate:w,weekStartsOn:D,locale:b,_originalDate:k};return f.match(g).map(function(e){var t=e[0];return"p"===t||"P"===t?(0,l.default[t])(e,b.formatLong,A):e}).join("").match(m).map(function(n){if("''"===n)return"'";var r=n[0];if("'"===r)return n.match(h)[1].replace(v,"'");var i=s.default[r];if(i)return!x.useAdditionalWeekYearTokens&&(0,c.isProtectedWeekYearToken)(n)&&(0,c.throwProtectedError)(n,t,e),!x.useAdditionalDayOfYearTokens&&(0,c.isProtectedDayOfYearToken)(n)&&(0,c.throwProtectedError)(n,t,e),i(E,n,b.localize,A);if(r.match(y))throw RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return n}).join("")};var r=f(e.r(48654)),i=f(e.r(963919)),a=f(e.r(209021)),o=f(e.r(693955)),s=f(e.r(175395)),l=f(e.r(463849)),u=f(e.r(906695)),c=e.r(539530),d=f(e.r(555023)),p=f(e.r(947592));function f(e){return e&&e.__esModule?e:{default:e}}var m=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,g=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,h=/^'([^]*?)'?$/,v=/''/g,y=/[a-zA-Z]/;t.exports=n.default},792130,e=>{e.v({button:"FreeDomainClaimSection-module__hng7Ia__button",buttonContainer:"FreeDomainClaimSection-module__hng7Ia__buttonContainer",container:"FreeDomainClaimSection-module__hng7Ia__container",content:"FreeDomainClaimSection-module__hng7Ia__content",freeText:"FreeDomainClaimSection-module__hng7Ia__freeText",header:"FreeDomainClaimSection-module__hng7Ia__header",headerText:"FreeDomainClaimSection-module__hng7Ia__headerText",strikethroughPrice:"FreeDomainClaimSection-module__hng7Ia__strikethroughPrice"})},79271,e=>{e.v({container:"FreeDomainUpsellInfoBox-module__uA4uUq__container",header:"FreeDomainUpsellInfoBox-module__uA4uUq__header",withBorder:"FreeDomainUpsellInfoBox-module__uA4uUq__withBorder"})},314535,202975,774671,484921,129928,422145,66373,682872,489172,956002,71834,109644,664219,479373,365692,777373,332822,788401,832550,34912,500179,691302,697859,823166,397094,137737,32144,680250,713547,636567,358637,182492,99276,916973,462216,863753,463202,368487,791134,793203,295745,341734,828454,870078,591069,825811,130356,e=>{"use strict";var t,n,r=e.i(276385),i=e.i(389959),a=e.i(188507),o=e.i(546469),s=e.i(44660),l=e.i(190120),u=e.i(287999),c=e.i(81143),d=e.i(849954),p=e.i(248011),f=e.i(625484),m=e.i(51236),g=(0,i.memo)(function(e){var t=e.checkpoint,n=e.onSessionChange,g=e.onRenameTitle,h=e.eventState,v=t.id,y=t.revert,x=(0,d.default)({checkpoint:t,onSessionChange:n}).onRevert,b=(0,p.useIsFreemiumStarterPlanUsersOwnRepl)().isFreemiumStarterPlanUsersOwnRepl,S=(0,i.useMemo)(function(){return{isPaid:t.isPaid,usageIndicatorVariant:b?o.UsageIndicatorVariant.Starter:o.UsageIndicatorVariant.Paid}},[t.isPaid,b]);return(0,r.jsxs)(f.View,{"data-event-id":v,"data-commit-id":t.commitId,gap:0,clsx:m.default.container,children:[(0,r.jsx)(l.CheckpointCard,{title:t.title,commitId:t.commitId,enableHelium:t.heliumCheckpointCreated,author:(0,u.commitAuthorToCheckpointAuthor)(t.author),onOpenCommit:e.onOpenCommit,date:t.created,screenshot:t.screenshotUrl,isReverting:(null==y?void 0:y.status)==="inflight",isInProgress:h===a.EventState.IN_PROGRESS,costInfo:S,variant:l.CheckpointCardVariant.ChatFeedDefault,onRevert:x,onRenameTitle:g?function(e){return g(t.commitId,e)}:void 0,isLatest:t.isLatest,isDirty:t.isDirty,hasFurtherNonSummaryEvents:t.hasFurtherNonSummaryEvents,openPane:e.openPane}),t.isPaid&&(0,c.hasAnyMetric)(t)?(0,r.jsx)(s.AgentWorkMetrics,{workDurationSeconds:t.workDurationSeconds,addedLinesOfCode:t.addedLinesOfCode,removedLinesOfCode:t.removedLinesOfCode,toolCalls:t.toolCalls,usageCents:t.usageCents,numLocRead:t.numLocRead,numFilesRead:t.numFilesRead,capabilityUsage:t.capabilityUsage,isFreemiumRepl:b,ubbV2:t.ubbV2,refunded:t.refunded,defaultExpanded:t.triggerReason===a.CheckpointTriggerReason.CHECKPOINT_TRIGGER_REASON_RAPID_BUILD_FEEDBACK,workType:"checkpoint",isInProgress:h===a.EventState.IN_PROGRESS,eventCreated:t.created}):null]})});e.s(["Checkpoint",()=>g],314535);var h=e.i(878420),v=e.i(64386),y=e.i(527717);function x(e){var t=e.summary,n=(0,p.useIsFreemiumStarterPlanUsersOwnRepl)().isFreemiumStarterPlanUsersOwnRepl;return(0,c.hasAnyMetric)(t)?(0,r.jsx)(f.View,{"data-event-id":t.id,gap:8,clsx:y.default.root,children:(0,r.jsx)(s.AgentWorkMetrics,(0,v._)((0,h._)({},t),{isFreemiumRepl:n,workType:"run",ubbV2:!0,defaultExpanded:!1,preDiscountsUsageCents:t.preDiscountsUsageCents,eventCreated:t.created}))}):null}e.s(["EndOfRunSummary",()=>x],202975);var b=e.i(530658),S=e.i(480028),_=e.i(754873),w=e.i(929872),T=e.i(960178),j=e.i(916271),D=e.i(576073),k=e.i(42458),C=e.i(529675),E=(0,i.memo)(function(e){var t=(0,b._)((0,i.useState)(!1),2),n=t[0],a=t[1];return(0,r.jsxs)(f.View,{gap:6,children:[(0,r.jsxs)(f.View,{css:_.interactive.nofill,tag:"button",row:!0,px:4,gap:6,align:"center",justify:"space-between",onClick:function(){return a(function(e){return!e})},children:[(0,r.jsxs)(f.View,{row:!0,align:"center",gap:6,style:{flex:"1 1 auto"},children:[(0,r.jsx)(k.default,{color:S.tokens.foregroundDimmer}),(0,r.jsx)(T.Text,{color:"dimmer",children:e.shortMessage||"Agent ran into an error"})]}),(0,r.jsx)(D.default,{color:S.tokens.foregroundDimmer,rotate:180*!!n})]}),n?(0,r.jsx)(w.Surface,{p:8,elevated:!0,clsx:C.default.surface,children:(0,r.jsx)(j.default,{children:e.message})}):null]})});e.s(["ErrorMessage",()=>E],774671);var A=e.i(798790),I=e.i(721281),R=e.i(654647),P=e.i(629536),M=e.i(145864),O=e.i(796674),N=e.i(670413),L=e.i(45442),B=e.i(131614),V="Start building";e.s(["TASK_LIST_START_BUILDING_MESSAGE",()=>V],484921);var U=e.i(509908),F=e.i(262206),H=e.i(926118),G=e.i(907371),z=e.i(173703),q=e.i(696770),W=e.i(140487),K=e.i(127227),$=e.i(818503),Y=e.i(734882),X=e.i(751273),Q=e.i(608263),J=e.i(616278),Z=e.i(452002),ee=e.i(658975),et=e.i(491404),en=e.i(940745),er=e.i(645424),ei="Build functionality",ea="Continue building",eo=[a.StackBlueprint.STACK_BLUEPRINT_FULLSTACK_JS,a.StackBlueprint.STACK_BLUEPRINT_EXPO];function es(e,t){(0,i.useEffect)(function(){if(!t){var n=function(t){"Enter"===t.key&&(0,N.getCmdOrCtrl)(t)&&(t.preventDefault(),e())};return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}}},[e,t])}function el(){return(0,r.jsx)(H.KeyComboBlocks,{keyCombo:(0,F.defaultKeyCombo)({cmdOrCtrl:!0,key:"Enter"}),small:!0,hideBorder:!0})}function eu(e){var t=e.isInMobileWorkspace,n=e.onStartBuilding,o=e.stackBlueprint,s=e.sessionId,l=(0,O.useManagerWhoFlag)(),u=!!o&&eo.includes(o),c=(0,b._)((0,i.useState)(function(){if(l||!u)return a.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_ASYNC}),2),d=c[0],p=c[1];return(0,r.jsx)(ec,{isDesignModeSupported:u,initialBuildMode:d,setInitialBuildMode:p,sessionId:s,stackBlueprint:o,onStartBuilding:n,isInMobileWorkspace:t,flagManagerWho:l})}function ec(e){var t=e.isDesignModeSupported,n=e.initialBuildMode,o=e.setInitialBuildMode,s=e.sessionId,l=e.stackBlueprint,u=e.onStartBuilding,c=e.isInMobileWorkspace,d=e.flagManagerWho,p=n===a.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_SYNC,m="Start building";!d&&p&&(m="Start designing");var g=(0,M.useGetPlanProposalUserSecretsResponse)(),h=(0,M.useClearPlanProposalUserSecretsResponse)(),v=(0,i.useCallback)(function(){n&&(u({initialBuildMode:n,userSecretsResponse:g()}),h())},[u,n,g,h]);es(v,c),(0,i.useEffect)(function(){!t&&p&&o(a.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_ASYNC)},[t,p,o]);var y=(0,M.useSetAgentPlanApprovalState)(),x=(0,i.useCallback)(function(){y("revising"),(0,U.trackAgentPlanningAnalyticsEvent)({action:"plan_revision_initiated",sessionId:s,stackBlueprint:l,skipRapidBuild:!0})},[s,y,l]),S=(0,L.useAgentSettings)(),_=(0,b._)((0,i.useState)(!1),2),w=_[0],j=_[1];return(0,r.jsxs)(eg,{colorShade:"default",children:[(0,r.jsx)(T.Text,{textWrap:"pretty",children:"I've created a feature list based on your request. If everything looks good, we can start building."}),!d&&(0,r.jsx)(T.Text,{textWrap:"pretty",children:"How do you want to continue?"}),(0,r.jsx)(f.View,{gap:8,children:d?(0,r.jsx)(W.Button,{text:m,onClick:v,iconRight:(0,r.jsx)(Q.default,{}),colorway:"primary"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(R.ListBox,{"aria-label":"Initial build mode",selectionMode:"single",clsx:er.default.initialBuildModeOptions,children:[(0,r.jsx)(ed,{mode:a.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_ASYNC,isSelected:n===a.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_ASYNC,onSelect:o,sessionId:s,stackBlueprint:l}),(0,r.jsx)(ed,{mode:a.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_SYNC,disabledReason:t?void 0:"Unavailable with this app type",isSelected:n===a.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_SYNC,onSelect:o,sessionId:s,stackBlueprint:l})]}),(0,r.jsx)(f.View,{children:(0,r.jsx)(X.Tooltip,{tooltip:"Select an option above to continue",isDisabled:void 0!==n,placement:"top",children:(0,r.jsx)(W.Button,{text:m,onClick:v,iconRight:(0,r.jsx)(Q.default,{}),colorway:"primary",disabled:void 0===n})})})]})}),(0,r.jsxs)(f.View,{justify:"space-between",row:!0,gap:8,children:[(0,r.jsx)(W.Button,{clsx:er.default.editPlanButton,size:"small",text:"Edit plan",variant:"nofill",onClick:x}),(0,r.jsx)(B.AgentSettingsDropdown,{agentSettings:S,isOpen:w,onOpenChange:j,buttonText:"Agent tools",isFastModeUnavailable:!0})]})]})}function ed(e){var t,n=e.mode,o=e.isSelected,s=e.disabledReason,l=e.onSelect,u=e.sessionId,c=e.stackBlueprint,d=(0,q.useShadesFlag)(),p=!!s,m=n===a.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_SYNC,g=m?"design":"build",h=m?"Start with a design":"Build the entire app",v=m?"Best if you want to see a design prototype first, then iterate on visuals or features":"Best if you want ".concat(P.AGENT_NAME," to build out the full functionality of your app"),y=(0,i.useCallback)(function(){!p&&(l(n),u&&(0,U.trackAgentPlanningAnalyticsEvent)({action:"plan_initial_build_mode_selected",sessionId:u,stackBlueprint:c,initialBuildMode:n}))},[l,n,p,u,c]),x=(0,G.useCreateInteractive)({variant:"filledAndOutlined"});return(0,r.jsx)(R.ListBoxItem,{clsx:er.default.initialBuildModeItemContainer,id:n,onAction:y,textValue:h,children:(0,r.jsx)(X.Tooltip,{tooltip:s,isDisabled:!p,placement:"top",children:(0,r.jsxs)(z.ShadesSurface,{gap:8,p:8,align:"stretch",border:"regular",br:"container",clsx:[x.clsx,er.default.initialBuildModeItem,(t={},(0,I._)(t,er.default.selected,o),(0,I._)(t,er.default.disabled,p),(0,I._)(t,er.default.noShades,!d),t)],style:x.style,children:[(0,r.jsxs)(f.View,{justify:"space-between",row:!0,align:"start",children:[m?(0,r.jsx)(ee.default,{size:24}):(0,r.jsx)(et.default,{size:24}),(0,r.jsx)(Y.Radio,{id:g,value:g,checked:o})]}),(0,r.jsxs)(f.View,{gap:4,children:[(0,r.jsx)(T.Text,{variant:"subheadDefault",children:h}),(0,r.jsx)(T.Text,{color:"dimmest",children:m?"5-10 mins":"20+ mins"}),(0,r.jsx)(T.Text,{color:"dimmer",children:v})]})]})})},n)}function ep(e){var t=e.onStart,n=e.onRevise,a=e.onCancel,o=e.isInMobileWorkspace,s=e.hasDrawerAbove;es(t,o);var l=(0,L.useAgentSettings)(),u=(0,b._)((0,i.useState)(!1),2),c=u[0],d=u[1];return(0,r.jsxs)(eg,{hasDrawerAbove:void 0!==s&&s,children:[(0,r.jsxs)(T.Text,{textWrap:"pretty",children:[P.AGENT_NAME," has identified a task list to work on. If everything looks good, start building to make these updates to your app."]}),(0,r.jsx)(f.View,{gap:8,children:(0,r.jsxs)(f.View,{row:!0,gap:8,children:[(0,r.jsx)(W.Button,{className:er.default.grow1,text:"Revise plan",onClick:n,iconLeft:(0,r.jsx)(Z.default,{})}),(0,r.jsx)(W.Button,{className:er.default.grow1,text:V,onClick:t,iconLeft:(0,r.jsx)(J.default,{}),iconRight:o?void 0:(0,r.jsx)(el,{}),colorway:"primary"})]})}),(0,r.jsxs)(f.View,{row:!0,gap:8,justify:"space-between",align:"center",wrap:!0,clsx:er.default.statusRow,children:[(0,r.jsx)(f.View,{children:(0,r.jsx)(W.Button,{size:"small",variant:"nofill",text:"Cancel",onClick:a,clsx:er.default.cancelButton})}),(0,r.jsx)(f.View,{row:!0,gap:8,align:"center",children:(0,r.jsx)(B.AgentSettingsDropdown,{agentSettings:l,isOpen:c,onOpenChange:d,buttonText:"Agent tools",isFastModeUnavailable:!0})})]})]})}function ef(e){var t=e.onStart,n=e.onDismiss,a=e.isInMobileWorkspace,o=e.visualPhaseRequestCount,s=e.isApprovalResponseInProgress,l=void 0!==s&&s,u=(0,L.useAgentSettings)(),c=(0,b._)((0,i.useState)(!1),2),d=c[0],p=c[1],m=(0,b._)((0,i.useState)(!1),2),g=m[0],h=m[1];es(t,a);var v=(0,i.useCallback)(function(){n(g)},[n,g]),y=(void 0===o?0:o)>1;return(0,r.jsxs)(eg,{children:[(0,r.jsx)(T.Text,{textWrap:"pretty",children:"I've created a visual preview of your app. If everything looks good to you, I can start building the functionality of your app."}),(0,r.jsxs)(f.View,{gap:8,children:[(0,r.jsxs)(f.View,{row:!0,gap:8,children:[(0,r.jsx)(W.Button,{clsx:er.default.grow1,text:"Keep iterating on design",onClick:v,disabled:l,iconRight:l?(0,r.jsx)(en.default,{}):void 0}),(0,r.jsx)(W.Button,{clsx:er.default.grow1,text:ei,onClick:t,iconRight:(0,r.jsx)(Q.default,{}),colorway:"primary",disabled:l})]}),(0,r.jsxs)(f.View,{row:!0,justify:y?"space-between":"end",children:[y?(0,r.jsxs)(f.View,{row:!0,gap:8,align:"center",children:[(0,r.jsx)(K.Checkbox,{id:"dont-ask-again",checked:g,onChange:h,disabled:l}),(0,r.jsx)($.Label,{htmlFor:"dont-ask-again",children:(0,r.jsx)(T.Text,{variant:"small",color:l?"dimmest":"dimmer",clsx:(0,I._)({},er.default.interactiveLabel,!l),children:"Don't ask again"})})]}):null,(0,r.jsx)(B.AgentSettingsDropdown,{agentSettings:u,isOpen:d,onOpenChange:p,buttonText:"Agent tools",isFastModeUnavailable:!0})]})]})]})}function em(e){var t=e.onStart,n=e.onDismiss,a=e.isInMobileWorkspace,o=e.hasDrawerAbove;es(t,a);var s=(0,L.useAgentSettings)(),l=(0,b._)((0,i.useState)(!1),2),u=l[0],c=l[1];return(0,r.jsxs)(eg,{hasDrawerAbove:void 0!==o&&o,children:[(0,r.jsxs)(T.Text,{textWrap:"pretty",children:["I've created an MVP and identified a task list to work on. If everything looks good, ",ea.toLowerCase()," to make these updates to your app."]}),(0,r.jsx)(f.View,{gap:8,children:(0,r.jsxs)(f.View,{row:!0,gap:8,children:[(0,r.jsx)(W.Button,{clsx:er.default.grow1,text:"Dismiss",onClick:n}),(0,r.jsx)(W.Button,{clsx:er.default.grow1,text:ea,onClick:t,iconRight:(0,r.jsx)(J.default,{}),colorway:"primary"})]})}),(0,r.jsx)(f.View,{row:!0,justify:"end",children:(0,r.jsx)(B.AgentSettingsDropdown,{agentSettings:s,isOpen:u,onOpenChange:c,buttonText:"Agent tools",isFastModeUnavailable:!0})})]})}function eg(e){var t,n=e.colorShade,i=void 0===n?"notice":n,a=e.hasDrawerAbove,o=void 0!==a&&a,s=e.children;return(0,q.useShadesFlag)()?(0,r.jsx)(z.ShadesSurface,{elevate:"1x",border:"regular",colorShade:i,p:8,gap:8,br:o?[0,0,8,8]:8,children:s}):(0,r.jsx)(w.Surface,{clsx:[er.default.dialog,(t={},(0,I._)(t,er.default.noticeColorway,"notice"===i),(0,I._)(t,er.default.hasDrawerAbove,o),t)],gap:8,elevated:!0,children:s})}function eh(e){var t=e.created,n=e.initialBuildPhase,o=e.agentConfig,s=(0,i.useMemo)(function(){return n===a.InitialBuildPhase.INITIAL_BUILD_PHASE_VISUAL_COMPLETE_PENDING_REVIEW?{message:ei,icon:(0,r.jsx)(X.Tooltip,{tooltip:"Design prototype approved",children:(0,r.jsx)(ee.default,{size:12,color:S.tokens.foregroundDimmest})})}:n===a.InitialBuildPhase.INITIAL_BUILD_PHASE_MVP_COMPLETE_PENDING_REVIEW?{message:ea,icon:(0,r.jsx)(X.Tooltip,{tooltip:"Initial prototype approved",children:(0,r.jsx)(et.default,{size:12,color:S.tokens.foregroundDimmest})})}:{message:"",icon:null}},[n]),l=s.message,u=s.icon;return(0,r.jsx)(A.UserMessageContainer,{created:t,agentConfig:o,metaContent:u,children:(0,r.jsx)(A.UserMessageSurface,{agentMode:a.AgentMode.AGENT_MODE_GENERAL,acknowledged:!0,children:(0,r.jsx)(T.Text,{children:l})})})}function ev(e){var t=e.created,n=e.initialBuildMode,o=e.agentConfig,s=(0,i.useMemo)(function(){return n===a.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_ASYNC?{message:"Start building",icon:(0,r.jsx)(X.Tooltip,{tooltip:"Full build selected",children:(0,r.jsx)(et.default,{size:12,color:S.tokens.foregroundDimmest})})}:n===a.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_SYNC?{message:"Start designing",icon:(0,r.jsx)(X.Tooltip,{tooltip:"Design prototype selected",children:(0,r.jsx)(ee.default,{size:12,color:S.tokens.foregroundDimmest})})}:{message:"",icon:null}},[n]),l=s.message,u=s.icon;return(0,r.jsx)(A.UserMessageContainer,{created:t,agentConfig:o,metaContent:u,children:(0,r.jsx)(A.UserMessageSurface,{agentMode:a.AgentMode.AGENT_MODE_GENERAL,acknowledged:!0,children:(0,r.jsx)(T.Text,{children:l})})})}e.s(["AgentInitialBuildMVPReviewDialog",()=>em,"AgentInitialBuildVisualReviewDialog",()=>ef,"AgentPlanApprovalDialog",()=>eu,"AgentTaskListApprovalDialog",()=>ep,"MVP_APPROVAL_MESSAGE",()=>ea,"VISUAL_PROTOTYPE_APPROVAL_MESSAGE",()=>ei],129928),e.s(["InitialBuildPhaseApproval",()=>eh],422145),e.s(["PlanApproval",()=>ev],66373);var ey=e.i(569384),ex=e.i(973245),eb=e.i(304277),eS=e.i(566901);function e_(){var e=(0,ey._)(["\n  query MobileAgentTourNudgeCurrentUser {\n    currentUser {\n      id\n      hasPushDevicesRegistered\n    }\n  }\n"]);return e_=function(){return e},e}var ew={},eT=(0,ex.gql)(e_()),ej=e.i(650587),eD=e.i(441329),ek=e.i(952521),eC=e.i(872069),eE=e.i(604963),eA=e.i(259421),eI=e.i(283110),eR=e.i(618497),eP=e.i(527225),eM=e.i(857253);function eO(e){var t=e.isPlanApproved,n=(0,eD.useIsInBonsaiWebview)();return(0,r.jsx)(f.View,{className:eM.default.root,children:n?(0,r.jsx)(eB,{isPlanApproved:t}):(0,r.jsx)(eL,{})})}function eN(){var e,t,n,r=(0,eD.useIsInBonsaiWebview)(),i=(e=(0,h._)({},ew,void 0),eb.useQuery(eT,e)).data,a=(0,ek.useMemoedDismissibleElement)("agent-mobile-notification-nudge",function(){(0,U.trackAgentAnalyticsEvent)({action:"mobile_download_qr_dismissed"})}),o=a.isDone,s=a.isLoading,l=a.setAsDone,u=null!=(n=null==i||null==(t=i.currentUser)?void 0:t.hasPushDevicesRegistered)&&n;return{isVisible:!r&&!s&&!o&&!u,dismiss:l}}var eL=function(){var e=(0,ej.useIsMobile)(),t=(0,b._)((0,i.useState)(!1),2),n=t[0],a=t[1],o=eN(),s=o.isVisible,l=o.dismiss;if(!s)return null;var u=function(e){(0,U.trackAgentAnalyticsEvent)({action:"mobile_download_qr_clicked"}),window.open(e)},c=(0,r.jsx)(W.Button,{clsx:eM.default.btnLeft,iconLeft:(0,r.jsx)(eP.default,{}),text:"Get notified when your app is ready",variant:"outlined"});return(0,r.jsxs)(r.Fragment,{children:[e?(0,r.jsxs)(eE.PopoverTrigger,{isOpen:n,onOpenChange:function(e){e&&(0,U.trackAgentAnalyticsEvent)({action:"mobile_download_qr_viewed"}),a(e)},label:"Show download Replit mobile app QR",placement:"top",children:[c,(0,r.jsx)(f.View,{clsx:eM.default.mobileQr,children:(0,r.jsx)(eA.default,{source:"agent_plan_timeline",installText:"Tap to install the Replit app",onClick:u})})]}):(0,r.jsx)(X.Tooltip,{placement:"top",colorway:"darker",tooltip:(0,r.jsx)(f.View,{clsx:eM.default.mobileQr,children:(0,r.jsx)(eA.default,{source:"agent_plan_timeline",installText:"Scan to install the Replit app",onClick:u})}),children:c}),(0,r.jsx)(W.Button,{clsx:eM.default.btnRight,iconLeft:(0,r.jsx)(eI.default,{}),text:"",variant:"outlined",onClick:function(){l(),a(!1)}})]})},eB=function(e){var t=e.isPlanApproved,n=(0,ek.useMemoedDismissibleElement)("bonsai-ws-agent-onboarding"),i=n.isDone,a=n.isLoading,o=n.setAsDone,s=(0,eD.useDoesBonsaiSupportFeatureFlag)("flag-mb-ws-agent-onboard"),l=(0,eC.default)({type:"agent",onComplete:o}).showTour;return s?(0,r.jsx)(W.Button,{clsx:eM.default.btnBonsai,iconLeft:(0,r.jsx)(eR.default,{}),colorway:a||i||!t?void 0:"primary",text:"Learn how to create with Agent",onClick:l}):null};e.i(545082);var eV=e.i(423111),eU=e.i(446530),eF=e.i(6338),eH=e.i(613355),eG=e.i(624782),ez=e.i(363201),eq=(0,eU.cssRecord)({item:[eF.loadingStyle.foregroundPulse(),eH.rcss.borderRadius(4),eH.rcss.height(20)]});function eW(){return(0,r.jsx)(f.View,{gap:8,children:(0,r.jsxs)(f.View,{row:!0,gap:8,align:"center",grow:!0,children:[(0,r.jsx)(T.Text,{color:"dimmer",children:"App type"}),(0,r.jsx)(X.Tooltip,{placement:"bottom-start",tooltip:"The primary framework ".concat(P.AGENT_NAME," will use to build the app"),children:(0,r.jsx)(ez.default,{size:12,color:S.tokens.foregroundDimmer})}),(0,r.jsx)(f.View,{row:!0,grow:!0,css:eq.item})]})})}function eK(e){var t=e.stackBlueprint,n=e.blueprints,i=e.isEditable,o=null!=t&&t!==a.StackBlueprint.STACK_BLUEPRINT_NONE&&t!==a.StackBlueprint.STACK_BLUEPRINT_CUSTOM&&t!==a.StackBlueprint.STACK_BLUEPRINT_BEST_EFFORT_FALLBACK,s=n.length>0&&n.some(function(e){return""!==e.displayName.trim()});return o||s?(0,r.jsxs)(f.View,{gap:8,children:[o?(0,r.jsxs)(f.View,{row:!0,gap:8,align:"center",children:[(0,r.jsx)(T.Text,{color:"dimmer",children:"App type"}),(0,r.jsx)(X.Tooltip,{placement:"bottom-start",tooltip:"The primary framework ".concat(P.AGENT_NAME," will use to build the app"),children:(0,r.jsx)(ez.default,{size:12,color:S.tokens.foregroundDimmer})}),(0,r.jsx)(X.Tooltip,{tooltip:P.stackBlueprintDetails[t].description,children:(0,r.jsx)(eG.Pill,{text:P.stackBlueprintDetails[t].displayName,variant:"filled"})})]}):null,s?(0,r.jsxs)(f.View,{row:!0,gap:8,align:"center",wrap:!0,children:[(0,r.jsx)(T.Text,{color:"dimmer",children:"Integrations"}),(0,r.jsx)(X.Tooltip,{placement:"bottom-start",tooltip:"Any relevant integrations for your request",children:(0,r.jsx)(ez.default,{size:12,color:S.tokens.foregroundDimmer})}),(0,r.jsx)(e$,{blueprints:n,isEditable:i})]}):null]}):null}function e$(e){var t=e.blueprints,n=e.isEditable,a=(0,b._)((0,eV.useAuthBlueprint)(),2)[1],o=[],s=!1,l=!0,u=!1,c=void 0;try{for(var d,p=t[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var m=d.value;if(""!==m.displayName.trim()){("javascript_log_in_with_replit"===m.name||"python_log_in_with_replit"===m.name)&&(s=!0);var g=m.name.endsWith("_ai_integrations"),h=g?"".concat(m.displayName," (Replit managed)"):m.displayName,v=g?P.REPLIT_MANAGED_DESCRIPTION:m.description,y=(0,r.jsx)(eG.Pill,{text:h,variant:"filled"});o.push(v?(0,r.jsx)(X.Tooltip,{tooltip:v,children:y},m.name):(0,r.jsx)(f.View,{children:y},m.name))}}}catch(e){u=!0,c=e}finally{try{l||null==p.return||p.return()}finally{if(u)throw c}}return((0,i.useEffect)(function(){s&&!n&&a(!0)},[s,n,a]),0===o.length)?null:(0,r.jsx)(r.Fragment,{children:o})}var eY=e.i(462995),eX=e.i(11235),eQ=(0,eU.cssRecord)({item:[eF.loadingStyle.foregroundPulse(),eH.rcss.borderRadius(4),eH.rcss.height(20)]});function eJ(e){var t=e.features,n=e.eventState===a.EventState.IN_PROGRESS,i=0===t.length;return(0,r.jsxs)(eX.Prose,{children:[(0,r.jsx)("p",{children:"I'll include the following features:"}),i?(0,r.jsx)(f.View,{gap:4,pt:4,children:Array.from({length:3}).map(function(e,t){return(0,r.jsx)(f.View,{css:eQ.item},t)})}):(0,r.jsx)("ul",{children:t.map(function(e){return(0,r.jsx)("li",{children:n?(0,r.jsx)(eY.FadeInTextAnimation,{children:e.name}):e.name},e.id)})})]})}var eZ=e.i(19208);function e0(e){var t=e.stackBlueprint,n=e.blueprints,a=e.features,o=e.objective,s=e.sessionId,l=e.isLatestPlan,u=e.eventState,c=eN().isVisible,d=(0,M.useAgentPlanApprovalState)(),p=l&&"approved"!==d,m=(0,M.useSetAgentPlanApprovalState)(),g=(0,i.useCallback)(function(){m("revising"),(0,U.trackAgentPlanningAnalyticsEvent)({action:"plan_revision_initiated",sessionId:s,stackBlueprint:t,skipRapidBuild:!0})},[s,m,t]);return(0,r.jsxs)(f.View,{gap:12,p:8,children:[void 0===t?(0,r.jsx)(eW,{}):(0,r.jsx)(eK,{blueprints:n,stackBlueprint:t,isEditable:!0}),(0,r.jsx)(f.View,{children:(0,r.jsx)(T.Text,{children:o})}),(0,r.jsxs)(w.Surface,{elevated:p,p:8*!!p,gap:8,clsx:eZ.default.surface,children:[(0,r.jsx)(eJ,{features:a,eventState:u}),l&&"revising"===d?(0,r.jsx)(f.View,{p:4,children:(0,r.jsx)(T.Text,{children:"Send a message below to revise the plan."})}):null,l&&("awaiting-approval"===d||"iterating"===d)?(0,r.jsx)(W.Button,{text:"Change plan",onClick:g,iconLeft:(0,r.jsx)(Z.default,{})}):null]}),c?(0,r.jsx)(f.View,{row:!0,align:"center",justify:"start",children:(0,r.jsx)(eO,{isPlanApproved:!0})}):null]})}e.s(["PlanProposal",()=>e0],682872);var e1=e.i(67760),e2=e.i(986194),e4=e.i(257811);function e8(e){var t=e.queries,n=e.responses,a=e.created,o=(0,e1.default)(t,null!=n?n:[]),s=o.findLastIndex(function(e){return null!=(0,b._)(e,2)[1]});return(0,r.jsx)(f.View,{gap:8,pb:4,children:o.map(function(e,t){var n=(0,b._)(e,2),o=n[0],l=n[1];if(!o)return null;var u=t===s&&null!=l;return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(f.View,{p:6,children:(0,r.jsx)(e3,{query:o})}),l?(0,r.jsx)(f.View,{justify:"end",pl:32,row:!0,gap:8,children:(0,r.jsxs)(f.View,{shrink:!0,align:"end",gap:6,children:[(0,r.jsx)(A.UserMessageSurface,{agentMode:void 0,acknowledged:!0,children:(0,r.jsx)(e6,{query:o,response:l})}),a&&u?(0,r.jsx)(f.View,{children:(0,r.jsx)(e4.Timestamp,{live:!0,date:a,textVariant:"small",textColor:"dimmest",textTransform:"first-letter-capitalized",dateFormat:"switch"})}):null]})}):null]},t)})})}function e3(e){var t=e.query;return(0,e2.isKind)(t.queryType,"booleanQuery")?(0,r.jsx)(eY.MessageMarkdown,{messageState:a.EventState.COMPLETE,text:t.queryType.booleanQuery.question,textColor:"shades"}):(0,e2.isKind)(t.queryType,"choiceQuery")?(0,r.jsx)(eY.MessageMarkdown,{messageState:a.EventState.COMPLETE,text:t.queryType.choiceQuery.question,textColor:"shades"}):(0,e2.isKind)(t.queryType,"textQuery")?(0,r.jsx)(eY.MessageMarkdown,{messageState:a.EventState.COMPLETE,text:t.queryType.textQuery.question,textColor:"shades"}):null}function e6(e){var t=e.query,n=e.response;if((0,e2.isKind)(t.queryType,"booleanQuery")&&(0,e2.isKind)(n.responseType,"booleanResponse")){var i=(0,e2.unkind)(n.responseType),a=i.response,o=i.reason;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.Text,{children:a?t.queryType.booleanQuery.confirmText:t.queryType.booleanQuery.rejectText}),o?(0,r.jsx)(T.Text,{children:o}):null]})}if((0,e2.isKind)(t.queryType,"choiceQuery")&&(0,e2.isKind)(n.responseType,"choiceResponse")){var s=(0,e2.unkind)(n.responseType),l=s.response,u=s.reason;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.Text,{children:l}),u?(0,r.jsx)(T.Text,{children:u}):null]})}if((0,e2.isKind)(t.queryType,"textQuery")&&(0,e2.isKind)(n.responseType,"textResponse")){var c=(0,e2.unkind)(n.responseType).response;return(0,r.jsx)(T.Text,{children:c})}return null}e.s(["QueryRequest",()=>e8],489172);var e5=e.i(297083),e7=e.i(817556);e.i(877212);var e9=e.i(924908),te=e.i(569910),tt=e.i(993796),tn=e.i(857714),tr=e.i(245150),ti=e.i(30305),ta=(0,i.memo)(function(e){var t=(0,e9.useChatter)(),n=(0,tt.useFlag)({controlName:"flag-session-pedigree"}),i=e.event,o=e.onSessionChange,s=i.status!==a.RevertStatus.REVERT_DATA_STAGE_COMPLETE;return(0,r.jsxs)(f.View,{children:[(0,r.jsxs)(w.Surface,{clsx:ti.default.root,"data-event-id":i.id,row:!0,gap:8,children:[s?(0,r.jsx)(en.default,{clsx:ti.default.revertIcon}):(0,r.jsx)(tr.default,{clsx:ti.default.revertIcon}),(0,r.jsxs)(f.View,{gap:6,clsx:ti.default.flexShrink,children:[(0,r.jsx)(f.View,{gap:4,children:(0,r.jsx)(T.Text,{multiline:!0,variant:"text",color:"dimmer",clsx:ti.default.flexShrink,children:function(e){switch(e.status){case a.RevertStatus.REVERT_DATA_STAGE_UNKNOWN:return"Starting rollback...";case a.RevertStatus.REVERT_DATA_STAGE_LOADING_PREVIOUS_STATE:return"Loading previous checkpoint state...";case a.RevertStatus.REVERT_DATA_STAGE_SHUTTING_DOWN_WORKFLOWS:return"Shutting down workflows...";case a.RevertStatus.REVERT_DATA_STAGE_REVERTING_COMMIT:return"Reverting files to previous checkpoint...";case a.RevertStatus.REVERT_DATA_STAGE_RESTARTING_WORKFLOWS:return"Restarting workflows";case a.RevertStatus.REVERT_DATA_STAGE_ROLLING_BACK_DATABASE:return"Rolling back database...";case a.RevertStatus.REVERT_DATA_STAGE_ROLLING_BACK_DEPLOYMENT:return"Rolling back deployment...";case a.RevertStatus.REVERT_DATA_STAGE_COMPLETE:return"Rolled back to '".concat(e.checkpointTitle,"'");default:(0,te.default)(e.status)}}(i)})}),(0,r.jsxs)(f.View,{gap:12,row:!0,clsx:ti.default.subtext,children:[(0,r.jsxs)(f.View,{row:!0,gap:4,children:[(0,r.jsx)(T.Text,{multiline:!1,variant:"small",children:s?"Started":"Finished"}),(0,r.jsx)(e4.Timestamp,{textVariant:"small",live:!0,date:i.revertedAt,dateFormat:"switch"})]}),(0,r.jsx)(W.Button,{size:"small",onClick:function(){return(0,e5._)(function(){return(0,e7._)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,t.sessions.get(i.originalSessionId).once()];case 1:return o(e.sent()),[3,3];case 2:return e.sent(),[3,3];case 3:return[2]}})})()},variant:"underlined",text:"View original chat",iconLeft:(0,r.jsx)(tn.default,{})})]})]})]}),n?null:(0,r.jsxs)(f.View,{clsx:ti.default.dividerContainer,children:[(0,r.jsx)(f.View,{clsx:ti.default.dividerLine}),(0,r.jsx)(T.Text,{clsx:ti.default.dividerText,color:"dimmest",children:"New chat"})]})]})});e.s(["RollbackStatus",()=>ta],956002);var to=e.i(753007),ts=e.i(862615),tl=e.i(523579),tu=e.i(397124),tc=e.i(885952),td=(0,i.memo)(function(e){var t=e.importSource,n=e.state,i=function(e){switch(e){case a.ProjectImportSource.PROJECT_IMPORT_SOURCE_LOVABLE:return{name:"Lovable",icon:null};case a.ProjectImportSource.PROJECT_IMPORT_SOURCE_BOLT:return{name:"Bolt",icon:null};case a.ProjectImportSource.PROJECT_IMPORT_SOURCE_REPLIT:return{name:"Replit",icon:(0,r.jsx)(tu.default,{clsx:tc.default.appIcon})};case a.ProjectImportSource.PROJECT_IMPORT_SOURCE_OTHER_GITHUB:return{name:"GitHub",icon:(0,r.jsx)(tl.default,{clsx:tc.default.appIcon})};case a.ProjectImportSource.PROJECT_IMPORT_SOURCE_FIGMA:return{name:"Figma",icon:(0,r.jsx)(ts.default,{})};case a.ProjectImportSource.PROJECT_IMPORT_SOURCE_UNKNOWN:default:return{name:"",icon:null}}}(t),o=i.name,s=i.icon,l=n===a.EventState.COMPLETE,u=n===a.EventState.IN_PROGRESS,c=(0,r.jsx)(to.default,{clsx:tc.default.statusIcon});return u&&(c=(0,r.jsx)(en.default,{})),(0,r.jsxs)(w.Surface,{elevated:!0,clsx:tc.default.root,row:!0,justify:"space-between",align:"center",children:[(0,r.jsxs)(f.View,{row:!0,align:"center",gap:12,children:[c,(0,r.jsx)(T.Text,{color:"dimmer",children:l?"Successfully imported ".concat(""!==o?"from ".concat(o):"project"):"Setting up your project".concat(""!==o?" from ".concat(o):"","â€¦")})]}),(0,r.jsx)(f.View,{children:s})]})});function tp(){var e=(0,ey._)(["\n  query CheckReplitAppSubdomainAvailability(\n    $subdomain: String!\n    $deploymentId: String\n  ) {\n    replitAppSubdomainAvailability(\n      subdomain: $subdomain\n      deploymentId: $deploymentId\n    ) {\n      __typename\n      ... on ReplitAppSubdomainAvailabilityResult {\n        available\n        message\n      }\n      ... on UserError {\n        errorMessage: message\n      }\n    }\n  }\n"]);return tp=function(){return e},e}e.s(["SetupImport",()=>td],71834);var tf={},tm=(0,ex.gql)(tp());function tg(e){var t=(0,h._)({},tf,e);return eb.useQuery(tm,t)}e.s(["useCheckReplitAppSubdomainAvailabilityQuery",()=>tg],109644);var th=e.i(951262);function tv(){var e=(0,ey._)(["\n  fragment DeploymentsDeployOptionsDeployment on HostingDeployment {\n    id\n    latestBuildStatus\n    replitAppSubdomain\n    ignoredSecrets\n    timeCreated\n    securityScanEnabled\n    currentBuild {\n      timeCreated\n      id\n      provider\n      envVars {\n        name\n        value\n      }\n      machineJob {\n        timezone\n        crontab\n        timeoutSeconds\n        failureNotifications\n      }\n      isPrivate\n      hasPrivatePassword\n    }\n  }\n"]);return tv=function(){return e},e}function ty(){var e=(0,ey._)(["\n  fragment DeploymentsDeployOptionsAuthzRepl on Repl {\n    id\n    authorizations {\n      editDeploymentSecrets {\n        isAuthorized\n        message\n      }\n      editSecrets {\n        isAuthorized\n        message\n      }\n      editDeploymentSubdomain(provider: $provider) {\n        isAuthorized\n        message\n      }\n    }\n  }\n"]);return ty=function(){return e},e}function tx(){var e=(0,ey._)(["\n  mutation DeployOptionsToggleSecretSyncing($input: ToggleSyncingSecretInput!) {\n    toggleSyncingSecret(input: $input) {\n      __typename\n      ... on HostingDeployment {\n        id\n        ignoredSecrets\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return tx=function(){return e},e}function tb(){var e=(0,ey._)(["\n  query DeploymentsDeployOptions($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...DeploymentsDeployOptionsDeployment\n      }\n    }\n  }\n  ","\n"]);return tb=function(){return e},e}function tS(){var e=(0,ey._)(["\n  query DeploymentsDeployOptionsAuthz(\n    $replId: String!\n    $provider: HostingBuildProvider!\n  ) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        ...DeploymentsDeployOptionsAuthzRepl\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return tS=function(){return e},e}var t_={},tw=(0,ex.gql)(tv()),tT=(0,ex.gql)(ty());(0,ex.gql)(tx());var tj=(0,ex.gql)(tb(),tw);function tD(e){var t=(0,h._)({},t_,e);return eb.useQuery(tj,t)}var tk=(0,ex.gql)(tS(),tT);function tC(e){var t=(0,h._)({},t_,e);return eb.useQuery(tk,t)}e.s(["DeploymentsDeployOptionsDeploymentFragmentDoc",()=>tw,"useDeploymentsDeployOptionsAuthzQuery",()=>tC,"useDeploymentsDeployOptionsQuery",()=>tD],664219);var tE=e.i(368964),tA=e.i(58261),tI=e.i(207237);function tR(){var e=(0,tA.useConnectorContext)(),t=e.connections,n=e.loading,r=(0,tI.default)(),i=t.find(function(e){var t;return e.connectorName===tE.ConnectorName.Stripe&&"development"===e.environment&&(null==(t=e.repls)?void 0:t.some(function(e){return e.id===r}))}),a=t.find(function(e){var t;return e.connectorName===tE.ConnectorName.Stripe&&"production"===e.environment&&(null==(t=e.repls)?void 0:t.some(function(e){return e.id===r}))});return{hasStripeSandboxConnection:!!i,hasStripeConnection:!!a,stripeConnection:a,stripeSandboxConnection:i,loading:n}}function tP(e){var t=e.recommendedProvider,n=e.defaultAutoscaleConfiguration,r=e.defaultRvmMachineConfiguration;switch(t){case tE.HostingBuildProvider.CloudRun:case tE.HostingBuildProvider.AzureContainerApp:return n;case tE.HostingBuildProvider.Gce:case tE.HostingBuildProvider.AzureVm:return r;default:return}}e.s(["useStripeConnection",()=>tR],479373),e.s(["getRecommendedProviderMachineConfiguration",()=>tP],365692);var tM=e.i(379334),tO=e.i(392079);function tN(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).provider,t=(0,i.useCallback)(function(e){var t,n,r=e.provider,i=(null==(n=window)||null==(t=n.location)?void 0:t.hostname)!=="replit.com";return(0,tO.getProviderInternalDomain)({provider:r,flaggedInternalDomain:tM.DEPLOYMENTS_DEFAULT_DOMAIN,isStaging:i})},[]);return{internalDomain:(0,i.useMemo)(function(){return e?t({provider:e}):void 0},[t,e]),getInternalDomain:t,isShowingFallback:!1,fallbackDomain:void 0}}function tL(){return(0,r.jsxs)(T.Text,{variant:"small",color:"dimmest",children:["Configure how your production database is created and populated when you publish."," ",(0,r.jsx)("a",{target:"_blank",href:"https://docs.replit.com/cloud-services/storage-and-databases/production-databases",children:"Learn more"})]})}e.s(["useProviderInternalDomain",()=>tN],777373);var tB=e.i(428596);function tV(e){var t=e.value,n=e.setValue,i=e.disabled,a=e.reason,o=(0,tB.useIdSeed)()("createNeonProductionDatabase");return(0,r.jsxs)(f.View,{row:!0,gap:8,align:"start",children:[(0,r.jsx)(K.Checkbox,{id:o,checked:t,disabled:i,onChange:n,"aria-label":"Create production database"}),(0,r.jsxs)(f.View,{shrink:!0,gap:2,children:[(0,r.jsx)("label",{htmlFor:o,children:(0,r.jsx)(T.Text,{variant:"small",color:"default",children:"Create production database"})}),a?(0,r.jsx)(T.Text,{variant:"small",color:"dimmest",children:a}):null]})]})}function tU(e){var t=e.value,n=e.setValue,i=e.disabled,a=(0,tB.useIdSeed)()("pushDevelopmentDatabaseObjects");return(0,r.jsxs)(f.View,{row:!0,gap:8,align:"start",children:[(0,r.jsx)(K.Checkbox,{id:a,checked:"data"===t,disabled:i,onChange:function(e){return n(e?"data":"schema")},"aria-label":"Copy development data to production database"}),(0,r.jsxs)(f.View,{shrink:!0,gap:2,children:[(0,r.jsx)("label",{htmlFor:a,children:(0,r.jsx)(T.Text,{variant:"small",color:"default",children:"Set up your production database with your current development data"})}),(0,r.jsx)(T.Text,{variant:"small",color:"dimmest",children:"This will initialize your production database with the data and schemas from your development database."})]})]})}function tF(e){var t=e.value,n=e.setValue,a=(0,i.useCallback)(function(e){e?n({createDatabase:!0,pushDevelopmentDatabaseObjects:"schema"}):n({createDatabase:!1,pushDevelopmentDatabaseObjects:null})},[n]),o=(0,i.useCallback)(function(e){return t.createDatabase&&n((0,v._)((0,h._)({},t),{pushDevelopmentDatabaseObjects:e}))},[n,t]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tV,{value:t.createDatabase,setValue:a,disabled:!1}),t.createDatabase&&(0,r.jsx)(tU,{value:t.pushDevelopmentDatabaseObjects,setValue:o})]})}function tH(e){var t=e.value,n=e.setValue,i=e.reason;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tV,{value:!0,reason:i,disabled:!0}),(0,r.jsx)(tU,{value:t.pushDevelopmentDatabaseObjects,setValue:function(e){return n((0,v._)((0,h._)({},t),{pushDevelopmentDatabaseObjects:e}))}})]})}function tG(e){var t=e.value,n=e.setValue,i=e.disabled,a=(0,tB.useIdSeed)()("overwriteData");return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(f.View,{row:!0,gap:8,align:"start",children:[(0,r.jsx)(K.Checkbox,{id:a,checked:"overwriteData"===t,disabled:i,onChange:function(e){return n(e?"overwriteData":null)},"aria-label":"Copy development database to production database"}),(0,r.jsxs)(f.View,{shrink:!0,gap:2,children:[(0,r.jsx)("label",{htmlFor:a,children:(0,r.jsx)(T.Text,{variant:"small",multiline:!1,children:"Copy your development database to production database"})}),(0,r.jsxs)(T.Text,{variant:"small",color:"dimmest",children:["This will replace your production database with your development database, overwriting any existing production data. This is a destructive action, but you can always restore your production database,"," ",(0,r.jsx)("a",{href:"https://docs.replit.com/cloud-services/storage-and-databases/sql-database#restore-tool",target:"_blank",children:"learn more."})]})]})]})})}function tz(e){var t=e.value,n=e.setValue;return(0,r.jsx)(tG,{value:t.pushDevelopmentDatabaseObjects,setValue:function(e){return n({createDatabase:!0,pushDevelopmentDatabaseObjects:e})}})}var tq=e.i(396776);function tW(e){var t=e.value,n=e.reason;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tq.StatusBanner,{colorway:"warning",text:n,icon:(0,r.jsx)(k.default,{})}),(0,r.jsx)(tV,{value:t.createDatabase,disabled:!0})]})}function tK(e){var t=e.state;switch(t.$case){case"noProdDbAllowed":return(0,r.jsx)(tW,{value:t.value,reason:t.reason});case"createProdDbIfDevData":return(0,r.jsx)(tH,{value:t.value,setValue:t.setValue,reason:t.reason});case"canCreateProdDb":return(0,r.jsx)(tF,{value:t.value,setValue:t.setValue});case"existingProdDb":return(0,r.jsx)(tz,{value:t.value,setValue:t.setValue});default:(0,te.default)(t)}}var t$=e.i(992785);function tY(e){var t=(0,b._)((0,i.useState)(e),2),n=t[0],r=t[1],a=(0,i.useRef)(e);return(0,i.useEffect)(function(){(0,t$.default)(a.current,e)||(a.current=e,r(e))},[e]),[n,r]}var tX=e.i(965153);function tQ(e){var t=e.state,n=(0,b._)(tY("noProdDbAllowed"===t.$case?!!t.forceExpandToggle:!0===t.value.createDatabase),2),i=n[0],a=n[1];return(0,r.jsx)(tX.AccordionItem,{headerContent:(0,r.jsx)(f.View,{row:!0,gap:8,align:"center",children:(0,r.jsx)(T.Text,{children:"Production database settings"})}),expanded:i,onClick:function(){return a(!i)},children:(0,r.jsxs)(f.View,{gap:8,px:4,pb:6,children:[(0,r.jsx)(tL,{}),(0,r.jsx)(tK,{state:t})]})})}function tJ(e){var t=e.state,n=(0,b._)(tY("noProdDbAllowed"===t.$case&&!!t.forceExpandToggle),2),i=n[0],a=n[1];return"noProdDbAllowed"!==t.$case||t.forceExpandToggle?(0,r.jsx)(tX.AccordionItem,{headerContent:(0,r.jsx)(f.View,{row:!0,gap:8,align:"center",children:(0,r.jsx)(T.Text,{children:"Production database settings"})}),expanded:i,onClick:function(){return a(!i)},children:(0,r.jsxs)(z.ShadesSurface,{p:4,br:"container",gap:12,children:[(0,r.jsx)(tL,{}),(0,r.jsx)(tK,{state:t})]})}):null}e.s(["CreateNeonProductionDatabaseToggleSection",()=>tQ,"SuggestDeployCreateNeonProductionDatabaseToggleSection",()=>tJ],332822);var tZ=e.i(927158);function t0(e){var t=new URL(e.connectionString.replace("postgres://","https://").replace("postgresql://","https://"));return t.pathname="/".concat(e.databaseName),t.search="?sslmode=require",t.toString().replace("https://","postgresql://")}e.i(529810),e.s(["normalizeConnectionString",()=>t0],788401);var t1=function(e){var t=e.connectionString,n=e.skip,r=void 0!==n&&n,a=(0,b._)((0,i.useState)([]),2),o=a[0],s=a[1],l=(0,b._)((0,i.useState)(!1),2),u=l[0],c=l[1],d=(0,tZ.usePid2Callback)(function(e){return function(){return(0,e5._)(function(){var n;return(0,e7._)(this,function(i){switch(i.label){case 0:if(r)return[2];return c(!0),[4,e.database.getTables.rpc({connectionString:t})];case 1:if(!(n=i.sent()).ok)return c(!1),[2];return s(n.payload.tables),c(!1),[2]}})})()}},[t,r]);return(0,i.useEffect)(function(){d&&d()},[d]),{tables:o,loading:u,refetch:d}},t2=function(e){var t=e.connectionString,n=e.skip,r=void 0!==n&&n,a=(0,b._)((0,i.useState)(null),2),o=a[0],s=a[1],l=(0,b._)((0,i.useState)(!1),2),u=l[0],c=l[1],d=(0,tZ.usePid2Callback)(function(e){return function(){return(0,e5._)(function(){var n;return(0,e7._)(this,function(i){switch(i.label){case 0:if(r)return[2];return c(!0),[4,e.database.getPgMajorVersion.rpc({connectionString:t})];case 1:if(!(n=i.sent()).ok)return c(!1),[2];return s(n.payload.majorVersion),c(!1),[2]}})})()}},[t,r]);return(0,i.useEffect)(function(){!r&&d&&d()},[d,r]),{majorVersion:o,loading:u,refetch:d}},t4=function(e){var t=(0,b._)((0,i.useState)(0),2),n=t[0],r=t[1],a=(0,b._)((0,i.useState)(!1),2),o=a[0],s=a[1],l=(0,b._)((0,i.useState)(null),2),u=l[0],c=l[1],d="neon"===e.kind?t0(e):e.connectionString,p=(0,tZ.usePid2Callback)(function(t){return function(){return(0,e5._)(function(){var n;return(0,e7._)(this,function(i){switch(i.label){case 0:if("neon"===e.kind&&e.isFrozen)return r(0),c("Database is frozen"),s(!1),[2];return s(!0),c(null),[4,t.database.getDatabaseSize.rpc({connectionString:d})];case 1:if(!(n=i.sent()).ok)return s(!1),c(n.payload.message),r(0),[2];return r(n.payload.size),c(null),s(!1),[2]}})})()}},[d,e]);return(0,i.useEffect)(function(){p&&p()},[p]),{databaseSize:n,loading:o,error:u,refetch:p}};e.s(["useGetDatabaseSize",()=>t4,"useGetPgMajorVersion",()=>t2,"useGetTables",()=>t1],832550);var t8=function(e){return{$case:"noProdDbAllowed",defaultValue:{createDatabase:!1,pushDevelopmentDatabaseObjects:null},reason:e.reason,forceExpandToggle:e.forceExpandToggle}},t3=function(e){var t=e.reason,n=e.createDatabase;return{$case:"createProdDbIfDevData",defaultValue:{createDatabase:null!=n?n:null,pushDevelopmentDatabaseObjects:"schema"},reason:t}};function t6(e){var t,n=e.isRedeploy,r=e.neonDevelopmentDatabase,a=e.neonProductionDatabase,o=e.heliumDevelopmentDatabase,s=e.hasStripeSandboxConnection,l=void 0!==s&&s,u=null!=(t=null==r?void 0:r.connectionString)?t:null==o?void 0:o.connectionString,c=!o&&!!(null==r?void 0:r.isFrozen),d=t2({connectionString:null!=u?u:"",skip:!u||c}),p=d.majorVersion,f=d.loading,m=(0,i.useMemo)(function(){var e,t,i,s,u,d,f,m;return t=(e={hasNeonProductionDatabase:!!a,hasNeonDevelopmentDatabase:!!r,hasHeliumDevelopmentDatabase:!!o,isRedeploy:n,isFrozen:c,pgMajorVersion:p,hasStripeSandboxConnection:l}).hasNeonProductionDatabase,i=e.hasNeonDevelopmentDatabase,s=e.hasHeliumDevelopmentDatabase,u=e.isRedeploy,d=e.isFrozen,f=e.pgMajorVersion,m=e.hasStripeSandboxConnection,d?t8({reason:"Development database is frozen. Address outstanding invoices to unfreeze it.",forceExpandToggle:!0}):null!==f&&16!==f&&17!==f?t8({reason:"Development database is on PostgreSQL version ".concat(f,". Production databases are only supported on PostgreSQL 16 and 17."),forceExpandToggle:!0}):i||s?t?u?{$case:"existingProdDb",defaultValue:{createDatabase:!0,pushDevelopmentDatabaseObjects:null}}:t8({reason:"An existing production database from a previous published app was found. Delete the existing database via the settings tab in the Database pane and create a new one.",forceExpandToggle:!0}):m?t3({reason:"A production database is required for Stripe integration.",createDatabase:!0}):s?t3({reason:"A production database will only be created if you have data in your development database."}):{$case:"canCreateProdDb",defaultValue:{createDatabase:!1,pushDevelopmentDatabaseObjects:null}}:t8({reason:"A development database is required to create a production database. You can create a development database via the Database pane."})},[a,r,o,n,c,p,l]),g=(0,b._)(tY(m.defaultValue),2),y=g[0],x=g[1];return(0,v._)((0,h._)({},m),{value:y,setValue:x,loading:f})}e.s(["useCreateNeonProductionDatabaseState",()=>t6],34912);var t5=e.i(963084);function t7(){var e=(0,ey._)(["\n  query ReservedVMMachineConfigurations(\n    $provider: HostingMachineConfigurationProvider!\n  ) {\n    hostingMachineConfigurations(input: { provider: $provider }) {\n      __typename\n      ... on HostingMachineConfigurationsResults {\n        results {\n          ...MachineConfiguration\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return t7=function(){return e},e}var t9={},ne=(0,ex.gql)(t7(),t5.MachineConfigurationFragmentDoc),nt=e.i(107129),nn=e.i(241703),nr=e.i(607278),ni=(0,eU.cssRecord)({self:[eH.rcss.colWithGap(8)],selfGrow:[eH.rcss.colWithGap(8),eH.rcss.flex.grow(1)],label:[eH.rcss.maxWidth("100%")],labelText:[eH.rcss.flex.growAndShrink(1),{textOverflow:"ellipsis"}],labelTextWarning:[eH.rcss.flex.growAndShrink(1),eH.rcss.color.orangeStrongest,{textOverflow:"ellipsis"}],header:[eH.rcss.display.flex,eH.rcss.flex.row,eH.rcss.justify.spaceBetween,eH.rcss.align.center],labelLoading:[eF.loadingStyle.foregroundPulse(),eH.rcss.width(200),eH.rcss.borderRadius(8)],inputLoading:[eF.loadingStyle.foregroundPulse(),eH.rcss.borderRadius(8)]}),na=function(e){var t=e.id,n=e.title,i=e.information,a=e.optional,o=e.detail,s=e.warning,l=e.actions,u=e.children,c=e.grow;return(0,r.jsxs)(f.View,{css:void 0!==c&&c?ni.selfGrow:ni.self,children:[(0,r.jsxs)(f.View,{css:ni.header,children:[(0,r.jsxs)(f.View,{tag:"label",htmlFor:t,css:ni.label,row:!0,gap:8,align:"center",children:[(0,r.jsx)(T.Text,{color:"dimmer",multiline:!1,children:n}),(0,r.jsx)(X.Tooltip,{tooltip:i,children:(0,r.jsx)(ez.default,{color:S.tokens.foregroundDimmest})}),void 0!==a&&a?(0,r.jsx)(T.Text,{css:ni.labelText,variant:"small",color:"dimmest",multiline:!1,children:"optional"}):null,o?(0,r.jsx)(T.Text,{css:ni.labelText,variant:"small",color:"dimmest",multiline:!1,children:o}):null,s?(0,r.jsx)(T.Text,{css:ni.labelTextWarning,variant:"small",multiline:!1,children:s}):null]}),l?(0,r.jsx)(f.View,{row:!0,gap:4,children:l}):null]}),u]})},no=function(){return(0,r.jsxs)(f.View,{gap:8,children:[(0,r.jsx)(f.View,{css:ni.header,children:(0,r.jsx)(f.View,{css:ni.labelLoading,row:!0,gap:8,align:"center",children:(0,r.jsx)(T.Text,{color:"dimmer",multiline:!1,children:"Â "})})}),(0,r.jsx)(f.View,{css:ni.inputLoading,children:(0,r.jsx)(nr.Input,{disabled:!0})})]})};e.s(["LabeledSectionWithHover",()=>na,"LabeledSectionWithHoverLoading",()=>no],500179);var ns=e.i(32995),nl=e.i(686631),nu=e.i(761201),nc=e.i(399344),nd=e.i(161322),np=e.i(957789),nf=e.i(589910),nm=e.i(369948),ng=e.i(918388),nh=function(e){var t=e.size,n=void 0===t?16:t,i=e.style;return(0,r.jsxs)("svg",{width:n,height:n,style:i,viewBox:"0 0 96 96",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",children:[(0,r.jsxs)("defs",{children:[(0,r.jsxs)("linearGradient",{id:"e399c19f-b68f-429d-b176-18c2117ff73c",x1:"-1032.172",x2:"-1059.213",y1:"145.312",y2:"65.426",gradientTransform:"matrix(1 0 0 -1 1075 158)",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{offset:"0","stop-color":"#114a8b"}),(0,r.jsx)("stop",{offset:"1","stop-color":"#0669bc"})]}),(0,r.jsxs)("linearGradient",{id:"ac2a6fc2-ca48-4327-9a3c-d4dcc3256e15",x1:"-1023.725",x2:"-1029.98",y1:"108.083",y2:"105.968",gradientTransform:"matrix(1 0 0 -1 1075 158)",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{offset:"0","stop-opacity":".3"}),(0,r.jsx)("stop",{offset:".071","stop-opacity":".2"}),(0,r.jsx)("stop",{offset:".321","stop-opacity":".1"}),(0,r.jsx)("stop",{offset:".623","stop-opacity":".05"}),(0,r.jsx)("stop",{offset:"1","stop-opacity":"0"})]}),(0,r.jsxs)("linearGradient",{id:"a7fee970-a784-4bb1-af8d-63d18e5f7db9",x1:"-1027.165",x2:"-997.482",y1:"147.642",y2:"68.561",gradientTransform:"matrix(1 0 0 -1 1075 158)",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{offset:"0","stop-color":"#3ccbf4"}),(0,r.jsx)("stop",{offset:"1","stop-color":"#2892df"})]})]}),(0,r.jsx)("path",{fill:"url(#e399c19f-b68f-429d-b176-18c2117ff73c)",d:"M33.338 6.544h26.038l-27.03 80.087a4.152 4.152 0 0 1-3.933 2.824H8.149a4.145 4.145 0 0 1-3.928-5.47L29.404 9.368a4.152 4.152 0 0 1 3.934-2.825z"}),(0,r.jsx)("path",{fill:"#0078d4",d:"M71.175 60.261h-41.29a1.911 1.911 0 0 0-1.305 3.309l26.532 24.764a4.171 4.171 0 0 0 2.846 1.121h23.38z"}),(0,r.jsx)("path",{fill:"url(#ac2a6fc2-ca48-4327-9a3c-d4dcc3256e15)",d:"M33.338 6.544a4.118 4.118 0 0 0-3.943 2.879L4.252 83.917a4.14 4.14 0 0 0 3.908 5.538h20.787a4.443 4.443 0 0 0 3.41-2.9l5.014-14.777 17.91 16.705a4.237 4.237 0 0 0 2.666.972H81.24L71.024 60.261l-29.781.007L59.47 6.544z"}),(0,r.jsx)("path",{fill:"url(#a7fee970-a784-4bb1-af8d-63d18e5f7db9)",d:"M66.595 9.364a4.145 4.145 0 0 0-3.928-2.82H33.648a4.146 4.146 0 0 1 3.928 2.82l25.184 74.62a4.146 4.146 0 0 1-3.928 5.472h29.02a4.146 4.146 0 0 0 3.927-5.472z"})]})};function nv(e){var t=e.onEditAutoscaleConfig,n=e.defaultMachineConfiguration,a=e.selectedMachineConfiguration,o=e.machineConfigurations,s=e.isAzureDeployment,l=e.isFreeUser,u=(0,i.useMemo)(function(){if(s){var e=(0,nf.getMachineConfigurationBySlug)({slug:null==n?void 0:n.configurationSlug,machineConfigurations:o});if(!e||!n)return;return{vcpu:e.vcpu,memory:e.memory,maxInstances:n.maxInstances}}if(l){var t=(0,nf.getMachineConfigurationBySlug)({slug:null==n?void 0:n.configurationSlug,machineConfigurations:o});if(!t||!n)return;return{vcpu:t.vcpu,memory:t.memory,maxInstances:n.maxInstances}}var r=(0,nf.getMachineConfigurationBySlug)({slug:null==a?void 0:a.configurationSlug,machineConfigurations:o});if(r&&a)return{vcpu:r.vcpu,memory:r.memory,maxInstances:a.maxInstances}},[n,a,o,s,l]),c=3600*(0,nd.useAtomValue)(np.totalCostAtom);if(!u)return null;var d=u.vcpu,p=u.memory,m=u.maxInstances;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(f.View,{row:!0,justify:"space-between",align:"center",className:ng.default.borderedContainer,children:[(0,r.jsxs)(T.Text,{children:[s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(nh,{style:{position:"relative",top:"2px"}})," -"," "]}):null,d," vCPUs / ",p," GiB RAM / ",m," max"]}),s||l?null:(0,r.jsx)(W.Button,{size:"small",text:"Edit",iconRight:(0,r.jsx)(nm.default,{}),onClick:t})]}),s||l?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(f.View,{row:!0,justify:"space-between",children:[(0,r.jsx)(T.Text,{variant:"small",children:"Per machine:"}),(0,r.jsxs)(T.Text,{variant:"small",children:["$",c.toFixed(3),"/hour"]})]}),(0,r.jsxs)(f.View,{row:!0,justify:"space-between",children:[(0,r.jsx)(T.Text,{variant:"small",children:"At max traffic:"}),(0,r.jsxs)(T.Text,{variant:"small",children:["$",(c*m).toFixed(3),"/hour"]})]})]})]})}e.s(["AutoscaleMachineConfiguration2",()=>nv,"AzureLogo",()=>nh],691302);var ny=e.i(508775),nx=e.i(679668);e.i(947095);var nb=e.i(882648),nS=e.i(14428);function n_(e){var t=e.selectedItem,n=e.machineConfigurations,a=e.disabled,o=e.onError,s=e.onChange,l=e.onConfirm,u=e.loading,c=(0,b._)((0,i.useState)(!1),2),d=c[0],p=c[1],m=(0,(0,nc.useDeploymentCostDetails)().getMachineConfigurationCostDetailsBySlug)(null==t?void 0:t.configurationSlug),g=m.costPerHour,h=m.costPerMonth,v=n&&(null==n?void 0:n.length)>0;if(!t)return(0,r.jsx)(f.View,{className:nS.default.loadingState,children:(0,r.jsx)(nr.Input,{disabled:!0})});var y=(0,ny.isAzureDeploymentConfigurationSlug)(null==t?void 0:t.configurationSlug)?(0,r.jsx)(nh,{}):void 0;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(f.View,{className:nS.default.selectWrapper,children:[(0,r.jsx)(f.View,{grow:!0,shrink:!0,children:(0,r.jsx)(nx.Select,{"aria-label":"Select machine configuration",className:nS.default.select,initialSelectedItem:{id:t.configurationId,title:t.configurationLabel,icon:y},items:v?Object.values(n).map(function(e){var t=e.id;return{title:e.label,id:t,icon:y}}):[],onChange:function(e){var t=e.id,r=null==n?void 0:n.find(function(e){return e.id===t});if(!r)return void o("An error occurred trying to validate selected machine configuration");var i={configurationId:r.id,configurationLabel:r.label,configurationSlug:r.slug,maxInstances:1};"function"==typeof s&&s(i)},disabled:a})}),(0,r.jsx)(f.View,{shrink:!0,row:!0,gap:2,align:"center",children:(0,r.jsxs)(f.View,{className:nS.default.cost,row:!0,gap:4,children:[(0,r.jsxs)(T.Text,{variant:"subheadDefault",multiline:!1,children:["$",h]}),(0,r.jsx)(T.Text,{color:"dimmer",variant:"small",multiline:!1,children:"per month"}),(0,r.jsxs)(T.Text,{color:"dimmer",variant:"small",multiline:!1,children:["($",g,"/hour)"]})]})})]}),"function"==typeof l?(0,r.jsxs)(f.View,{gap:8,pt:8,children:[(0,r.jsx)(W.Button,{colorway:"primary",text:"Approve and update",iconRight:(0,r.jsx)(nb.ArrowRight,{}),onClick:function(){p(!0),Promise.resolve(l(t)).catch(function(e){null==o||o(e.message||"Failed to update configuration")}).finally(function(){p(!1)})},loading:void 0!==u&&u,disabled:a||d}),(0,r.jsxs)(T.Text,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,r.jsx)("a",{href:nu.LINKS_DOCS.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})]}):null]})}function nw(e){var t,n,r=e.provider,a=e.onError,o=e.onLoad,s=e.skip,l=function(e){switch(e){case tE.HostingBuildProvider.AzureVm:return tE.HostingBuildProvider.AzureVm;case tE.HostingBuildProvider.AzureContainerApp:return tE.HostingBuildProvider.AzureContainerApp;case tE.HostingBuildProvider.Gce:default:return tE.HostingBuildProvider.Gce}}(r),u=(t={variables:{provider:l},skip:s,onCompleted:function(e){"HostingMachineConfigurationsResults"!==e.hostingMachineConfigurations.__typename?a("Something went wrong"):o&&o(e.hostingMachineConfigurations.results)},onError:function(e){return a(e.message)}},n=(0,h._)({},t9,t),eb.useQuery(ne,n)),c=u.data,d=u.loading,p=(null==c?void 0:c.hostingMachineConfigurations.__typename)==="HostingMachineConfigurationsResults"?c.hostingMachineConfigurations.results:null;return{defaultMachineConfiguration:(0,i.useMemo)(function(){if(p)return function(e){var t=e.machineConfigurations,n=e.provider,r=e.onError;if(t){var i=t.find(function(e){return e.slug===function(e){switch(e.provider){case tE.HostingBuildProvider.AzureVm:return tM.AZURE_VM_DEFAULT_MACHINE_CONFIGURATION_SLUG;case tE.HostingBuildProvider.AzureContainerApp:return tM.AZURE_CONTAINER_APP_DEFAULT_MACHINE_CONFIGURATION_SLUG;case tE.HostingBuildProvider.Gce:return tM.RVM_DEFAULT_MACHINE_CONFIGURATION_SLUG;default:throw Error("Unsupported provider for slug")}}({provider:n})});if(!i)return void r("An error occurred trying to validate default machine configuration");var a=i.id,o=i.slug;return{configurationId:a,configurationLabel:i.label,configurationSlug:o,maxInstances:1}}}({machineConfigurations:p,provider:l,onError:a})},[p,l,a]),machineConfigurations:p,loading:d}}e.s(["MachineConfigurationSelector",()=>n_],697859);var nT=function(e){var t=e.type,n=e.initialMachineConfiguration,a=e.onChange,o=e.onConfirm,s=e.onError,l=e.onBack,u=e.provider,c=(0,b._)((0,i.useState)(n?(0,v._)((0,h._)({},n),{maxInstances:1}):void 0),2),d=c[0],p=c[1],m=nw({provider:u,onError:s}),g=m.defaultMachineConfiguration,y=m.machineConfigurations,x=m.loading;(0,i.useEffect)(function(){(0,nt.trackDeploymentSectionViewed)({context:nn.Views.AutoscaleMachineConfiguration})},[]),(0,i.useEffect)(function(){if(y&&!d){if(!g)return void s("An error occurred trying to validate default machine configuration2");p(g),"function"==typeof a&&a(g)}},[y,g,d,a,s]);var S=y&&(null==y?void 0:y.length)>0,_=x||!S||"azure_vm"===t;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ns.PaneSection,{maxWidth:!0,children:(0,r.jsx)(nl.ViewBack,{onBack:l})}),(0,r.jsx)(ns.PaneSection,{maxWidth:!0,children:(0,r.jsxs)(f.View,{gap:16,children:[(0,r.jsxs)(f.View,{gap:4,children:[(0,r.jsx)(T.Text,{variant:"subheadBig",children:"Reserved VM configuration"}),(0,r.jsx)(T.Text,{variant:"small",color:"dimmer",children:"Reserved VM apps are always on and can have a dedicated machine. You are billed for the total number of hours your machines have been running for. The cost per hour changes depending on your machine configuration."})]}),(0,r.jsx)(na,{id:"machineConfiguration",title:"Machine Configuration",information:"Your machine configuration determines the number of vCPUs and memory available to your app. You can change it at any time.",children:(0,r.jsx)(n_,{selectedItem:d,machineConfigurations:y,disabled:_,provider:u,onError:s,onChange:function(e){p((0,v._)((0,h._)({},e),{maxInstances:1})),a&&a(e)},onConfirm:o,loading:x})})]})})]})};function nj(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{domainName:e.domainName,contact:{firstName:t.firstName,lastName:t.lastName,companyName:t.companyName||null,address1:t.address1,address2:t.address2||null,city:t.city,state:t.state,zip:t.zip,country:t.country,phone:t.phone,email:t.email},expectedCharge:e.purchasePrice?Math.round(100*e.purchasePrice):0,years:1,isFreeDomain:n}}e.s(["ReservedVMMachineConfiguration",()=>nT,"useReservedVmConfigurations",()=>nw],823166),e.s(["createDomainPurchaseInput",()=>nj],397094);var nD=e.i(967963),nk=e.i(672963),nC=e.i(98816);e.i(32967);var nE=e.i(630937),nA=e.i(837605),nI=e.i(346715),nR=e.i(987154),nP=e.i(292642),nM=e.i(504908);function nO(e){var t=e.existsInDev;return e.isAutoSynced?(0,r.jsx)(X.Tooltip,{tooltip:"This secret is automatically synced to your deployment",children:(0,r.jsx)(f.View,{css:nL.deploymentOnly,children:(0,r.jsx)(nP.default,{})})}):t?(0,r.jsx)(X.Tooltip,{tooltip:"Syncing has been disabled for this secret",children:(0,r.jsx)(f.View,{css:nL.unsynced,children:(0,r.jsx)(nM.default,{})})}):(0,r.jsx)(X.Tooltip,{tooltip:"This secret only exists as a deployment secret",children:(0,r.jsx)(f.View,{css:nL.deploymentOnly,children:(0,r.jsx)(nR.default,{})})})}var nN=[eH.rcss.borderRadius(8),eH.rcss.width(32),eH.rcss.height(32),_.interactive.filled,eH.rcss.justify.center,eH.rcss.align.center],nL=(0,eU.cssRecord)({unsynced:(0,nI._)(nN).concat([eH.rcss.color.orangeStrongest]),deploymentOnly:(0,nI._)(nN).concat([eH.rcss.color.accentPrimaryStrongest])}),nB=e.i(721321),nV=e.i(136540),nU=e.i(841691),nF=e.i(90102),nH=(0,eU.cssRecord)({input:[eH.rcss.color.greyStrongest],loading:[eF.loadingStyle.backgroundPulse(S.tokens.backgroundHighest,S.tokens.backgroundHigher)],error:[eH.rcss.color.accentNegativeDefault]}),nG=function(e){var t=e.id,n=e.value,a=e.loading,o=e.disabled,s=e.onChange,l=e.error,u=e.placeholder,c=e.type,d=void 0===c?"text":c,p=e.onFocus,m=(0,nD.hasCommand)(n),g=(0,i.useId)();return d||(d="text"),(0,r.jsxs)(f.View,{grow:!0,shrink:!0,gap:4,children:[(0,r.jsx)(nr.Input,{id:t,value:!a&&m?n:"",onChange:function(e){return s(e.target.value)},css:a?nH.loading:nH.input,disabled:a||o,"aria-describedby":g,placeholder:a?"":u,type:d,onFocus:p}),l?(0,r.jsx)(f.View,{css:nH.error,"aria-live":"polite","aria-atomic":"true",id:g,children:(0,r.jsx)("span",{children:l})}):null]})},nz=(0,eU.cssRecord)({root:[eH.rcss.rowWithGap(8),eH.rcss.align.center],iconButton:[eH.rcss.height("100%"),eH.rcss.borderRadius(8),{"& button":eH.rcss.height(32)}],keyInput:[eH.rcss.width("40%")],error:[eH.rcss.color.accentNegativeDefault]}),nq=function(e){var t=e.index,n=e.name,a=e.value,o=e.disabled,s=e.updateEnvVarName,l=e.updateEnvVarValue,u=e.removeEnvVar,c=e.otherKeys,d=e.devSecrets,p=e.canEditDevSecretsDisabledMessage,m=e.canEditDeploySecretsDisabledMessage,g=e.ignoredSecrets,h=e.optOutSyncing,v=e.optInSyncing,y=e.syncToWorkspace,x=(0,tB.useIdSeed)(),S=(0,b._)((0,i.useState)(""===n||""===a),2),_=S[0],j=S[1],D=!!(n&&a),k=(0,nC.default)(D),C=(0,nk.default)(function(){C.current&&k.current&&j(!1)},[k]),E=!!(d&&d.has(n)),A=void 0===m,I=E?g.includes(n)?{type:"unsynced",sync:function(){return y(n)}}:{type:"synced",optOut:function(){return h(n)}}:{type:"deploymentOnly"};if(_)return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(f.View,{css:nz.root,innerRef:C,children:[(0,r.jsx)(f.View,{css:nz.keyInput,children:(0,r.jsx)(nr.Input,{placeholder:"Name",id:"".concat(x,"-name-").concat(t),value:n,onChange:function(e){return s(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&D&&(h(n),j(!1))},disabled:o})}),(0,r.jsx)(f.View,{grow:!0,shrink:!0,children:(0,r.jsx)(nr.Input,{placeholder:"Value",name:"".concat(x,"-value-").concat(t),value:a,onChange:function(e){return l(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&D&&(h(n),j(!1))},disabled:o})}),o?null:(0,r.jsx)(w.Surface,{elevated:!0,css:nz.iconButton,children:(0,r.jsx)(nV.IconButton,{alt:"Add",tooltipBehavior:"hidden",onClick:function(){D?(h(n),j(!1)):(u(),v(n))},children:D?(0,r.jsx)(J.default,{}):(0,r.jsx)(eI.default,{})})})]}),c.includes(n)?(0,r.jsxs)(T.Text,{variant:"small",css:nz.error,children:['Secret "',n,'" already exists']}):null]});var R=(0,r.jsx)(nO,{existsInDev:E,isAutoSynced:!g.includes(n)&&E});return(0,r.jsxs)(f.View,{css:nz.root,children:[void 0===p?R:null,(0,r.jsx)(nA.SecretKey,{value:n}),(0,r.jsx)(nA.SecretValue,{value:a,canEditDisabledMessage:m}),A?(0,r.jsx)(nE.SecretItemMenu,{onEdit:function(){return j(!0)},onDelete:function(){u(),v(n)},environmentControlState:I}):null]})},nW=function(e){var t,n=e.id,a=e.subdomain,o=e.provider,s=e.deploymentId,l=e.onChange,u=e.onBlur,c=e.updateValidity,d=e.disabled,p=e.canEditDisabledMessage,m=tN({provider:o}),g=m.internalDomain,h=m.isShowingFallback,v=tg({variables:{subdomain:a,deploymentId:s},skip:0===a.length}),y=v.data,x=v.loading,b=v.error,S=(null==y?void 0:y.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"&&y.replitAppSubdomainAvailability.available,_=(null==y?void 0:y.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"?y.replitAppSubdomainAvailability.message:null==y||null==(t=y.replitAppSubdomainAvailability)?void 0:t.errorMessage;return((0,i.useEffect)(function(){x||c(S)},[S,x,c]),b)?(0,r.jsx)(tq.StatusBanner,{colorway:"negative",text:"Something went wrong, please try refreshing the page."}):(0,r.jsxs)(f.View,{children:[(0,r.jsxs)(f.View,{row:!0,gap:4,align:"center",children:[(0,r.jsx)(f.View,{grow:!0,shrink:!0,children:(0,r.jsx)(X.Tooltip,{tooltip:p,isDisabled:!d,children:(0,r.jsx)(nr.Input,{id:n,placeholder:"subdomain",value:a,onChange:function(e){return l(e.target.value)},onBlur:u,disabled:d})})}),(0,r.jsx)(T.Text,{multiline:!1,children:g})]}),(0,r.jsxs)(f.View,{row:!0,gap:4,pt:4,align:"center",children:[x?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(en.default,{}),(0,r.jsx)(T.Text,{multiline:!1,children:"Checking availability"})]}):null,S?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(J.default,{color:"green"}),(0,r.jsx)(T.Text,{css:[eH.rcss.color.greenDefault],multiline:!1,children:"Available"})]}):null,S||x||!(a.length>0)?null:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(k.default,{color:"red"}),(0,r.jsx)(T.Text,{css:[eH.rcss.color.redDefault],multiline:!1,children:_})]}),h?(0,r.jsx)(tq.StatusBanner,{colorway:"warning",text:"The ".concat(tM.DEPLOYMENTS_DEFAULT_DOMAIN," domain is currently unavailable, please use the ").concat(g," URL above.")}):null]})]})},nK=function(e){var t=e.appType,n=e.onChange,i=(0,tB.useIdSeed)();return(0,r.jsx)(nB.ButtonGroup,{name:"deploymentTargetSelector",value:t,onChange:n,row:!0,css:[eH.rcss.width("100%"),eH.rcss.flex.row],children:[{value:tE.DeployHostingBuildAppType.Server,name:"Web Server",description:"ex. an API or website"},{value:tE.DeployHostingBuildAppType.Worker,name:"Background Worker",description:"ex. a Discord or Slack bot"}].map(function(e,t){return(0,r.jsx)(f.View,{grow:!0,children:(0,r.jsx)(X.Tooltip,{tooltip:e.description,children:(0,r.jsx)(nB.ButtonGroupItem,{id:i(e.value),value:e.value,text:e.name})})},t)})})},n$=(0,eU.cssRecord)({root:[eH.rcss.borderRadius(4),eH.rcss.flex.growAndShrink(1),eH.rcss.align.center,eH.rcss.backgroundColor.backgroundHigher],text:[eH.rcss.flex.growAndShrink(1),eH.rcss.truncate],input:[{border:"none",background:"inherit",'&[data-sensitive="true"]':{fontFamily:"text-security-disc"}}]});function nY(e){var t=e.value,n=e.placeholder,a=void 0===n?"Enter your deployment password":n,o=e.onChange,s=e.canEditDisabledMessage,l=e.error,u=(0,b._)((0,i.useState)(!1),2),c=u[0],d=u[1],p=void 0===s,m=(0,i.useId)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.Surface,{elevated:!0,css:n$.root,p:4,row:!0,gap:4,children:(0,r.jsxs)(f.View,{row:!0,align:"center",children:[o&&p?(0,r.jsx)(nr.Input,{value:t,size:a.length,onChange:function(e){return o(e.target.value)},placeholder:a,css:n$.input,"data-sensitive":t&&!c,"aria-describedby":m}):(0,r.jsx)(T.Text,{multiline:!1,css:n$.text,children:t?(0,r.jsx)(r.Fragment,{children:c?t:"â€¢".repeat(8)}):a}),(0,r.jsx)(nV.IconButton,{alt:"Toggle Secret",tooltipContents:s,tooltipBehavior:p?"hidden":void 0,onClick:function(){return d(!c)},disabled:!p,children:c?(0,r.jsx)(nF.default,{}):(0,r.jsx)(nU.default,{})})]})}),l?(0,r.jsx)(f.View,{css:nH.error,"aria-live":"polite","aria-atomic":"true",id:m,children:(0,r.jsx)("span",{children:l})}):null]})}e.s(["CommandInput",()=>nG,"DeploymentPrivatePasswordInput",()=>nY,"DeploymentTargetSelector",()=>nK,"EnvVarInput",()=>nq,"PrimaryDomainInput",()=>nW],137737);var nX=e.i(255615),nQ=e.i(341190),nJ=e.i(178339),nZ=e.i(223808),n0=e.i(11176),n1=(0,eU.cssRecord)({self:{ul:{maxHeight:"300px"}},select:[eH.rcss.border()],error:[eH.rcss.color.accentNegativeStronger],button:[eH.rcss.reset.button,eH.rcss.viewStyle,_.interactive.nofill,eH.rcss.align.center,eH.rcss.display.inlineFlex,{borderColor:_.interactive.outlined.borderColor}],popover:[eH.rcss.width("max-content"),eH.rcss.overflow("auto"),eH.rcss.p(1),eH.rcss.minWidth(240)],listbox:[eH.rcss.maxHeight(300),eH.rcss.minWidth(300),eH.rcss.overflow("auto")],dropdownItemAndContainer:[eH.rcss.flex.row,eH.rcss.align.center,_.interactive.listItem,eH.rcss.px(8),eH.rcss.py(4)],selectedTimezoneCode:[eH.rcss.textAlign.left,eH.rcss.rowWithGap(8)],timezoneCode:[eH.rcss.textAlign.left,eH.rcss.rowWithGap(8)],header:[eH.rcss.pt(8),eH.rcss.px(8),eH.rcss.pb(4),eH.rcss.flex.growAndShrink(1),{borderBottom:"1px solid ".concat(S.tokens.outlineDimmest)}],search:[{borderBottom:"1px solid ".concat(S.tokens.outlineDimmest)}],searchInput:[eH.rcss.width("100%")],dropdownHeader:[eH.rcss.fontWeight.medium],loading:[eH.rcss.maxWidth(70),eF.loadingStyle.backgroundPulse(S.tokens.backgroundHighest,S.tokens.backgroundHigher)]});function n2(e){var t=e.initialTimezone,n=e.onChange,a=e.loading,o=e.error,s=(0,b._)((0,i.useState)(),2),l=s[0],u=s[1],c=(0,i.useId)();return(0,i.useEffect)(function(){if(!a){if(t&&!l)return void u(t);if(!l&&!t){var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if((0,tM.isValidTimezone)(e)){n(e),u(e);return}var r="America/Los_Angeles";n(r),u(r)}}},[n,l,t,a]),(0,r.jsxs)(f.View,{css:n1.self,children:[a||!l?(0,r.jsx)(nr.Input,{css:n1.loading,disabled:!0}):(0,r.jsx)(n9,{selectedTzCode:l,onSelectionChange:function(e){"string"==typeof e&&(n(e),u(e))},css:n1.select}),o?(0,r.jsx)(f.View,{css:n1.error,"aria-live":"polite","aria-atomic":"true",id:c,children:(0,r.jsx)("span",{children:o})}):null]})}var n4=(0,eU.cssRecord)({self:[n1.dropdownItemAndContainer,eH.rcss.justify.spaceBetween,{backgroundColor:S.tokens.interactiveBackground}]});function n8(e){var t=e.title;return(0,r.jsxs)(f.View,{px:8,py:4,justify:"space-between",align:"center",row:!0,gap:8,children:[(0,r.jsx)(f.View,{css:n1.selectedTimezoneCode,align:"center",children:(0,r.jsx)(T.Text,{variant:"text",color:"dimmer",children:t})}),(0,r.jsx)(D.default,{})]})}function n3(e){var t=e.tzCode,n=e.selected;return(0,r.jsxs)(f.View,{css:n?n4.self:n1.dropdownItemAndContainer,children:[(0,r.jsx)(f.View,{css:n1.timezoneCode,align:"center",children:(0,r.jsx)(T.Text,{variant:"text",color:n?"default":"dimmer",children:t.replace(/_/g," ").replace(/\//g,", ")})}),(0,r.jsx)(f.View,{align:"center",row:!0,children:n?(0,r.jsx)(J.default,{size:16}):null})]})}var n6=(0,eU.cssRecord)({self:[n1.button,eH.rcss.align.center,eH.rcss.px(8),eH.rcss.py(4),(0,I._)({},eH.media.min("mobileMax"),[eH.rcss.rowWithGap(4)])]});function n5(e){return e.toLowerCase().replaceAll("_"," ")}var n7=n0.validSchedulerTimezones.map(function(e){var t=e.value,n=e.abbr,r=e.utc,i=n5(t),a=n5(n),o=r.map(function(e){return{tzCode:e,normalizedUtcValue:n5(e)}});return(0,v._)((0,h._)({},e),{normalizedValue:i,normalizedAbbr:a,normalizedUtc:o,searchableText:n5([e.value,e.abbr].concat((0,nI._)(e.utc)).join(" "))})});function n9(e){var t=e.selectedTzCode,n=e.onSelectionChange,a=(0,b._)((0,i.useState)(""),2),o=a[0],s=a[1],l=(0,b._)((0,i.useState)(n0.validSchedulerTimezones),2),u=l[0],c=l[1],d=(0,b._)((0,i.useState)(n0.validSchedulerTimezones.find(function(e){return e.utc.includes(t)})),2),p=d[0],m=d[1];(0,i.useEffect)(function(){m(n0.validSchedulerTimezones.find(function(e){return e.utc.includes(t)}))},[t]);var g=(0,nZ.default)(function(e){c(function(e){if(!e)return n0.validSchedulerTimezones;var t=n5(e);return n7.map(function(n){var r=0,i=n.searchableText,a=n.normalizedValue,o=n.normalizedAbbr,s=n.normalizedUtc,l=n.utc;if(i.includes(t)){a.includes(t)&&(r+=10/(a.indexOf(t)+1)),o.includes(t)&&(r+=8/(o.indexOf(t)+1));var u=l;return s.some(function(e){return e.normalizedUtcValue.includes(t)})&&(r+=5,e.length>=3&&(u=s.map(function(e){var n=e.tzCode,r=e.normalizedUtcValue;return r.includes(t)?{tzCode:n,utcScore:5/(r.indexOf(t)+1)}:{tzCode:n,utcScore:0}}).sort(function(e,t){return t.utcScore-e.utcScore}).map(function(e){return e.tzCode}))),(0,v._)((0,h._)({},n),{utc:u,score:r})}return(0,v._)((0,h._)({},n),{score:0})}).filter(function(e){return e.score>0}).sort(function(e,t){return t.score-e.score})}(e))},100),y=function(e){s(e),g(e)};return(0,r.jsxs)(nJ.Select,{onSelectionChange:n,"aria-label":"Timezone Select",children:[p?(0,r.jsx)(nX.Button,{css:n1.button,children:(0,r.jsx)(n8,{title:p.abbr})}):(0,r.jsx)(X.Tooltip,{tooltip:"Could not detect valid timezone. Please try again, or contact support.",children:(0,r.jsxs)(nX.Button,{css:n6.self,children:[(0,r.jsx)(T.Text,{color:"dimmer",children:"Select"}),(0,r.jsx)(ez.default,{})]})}),(0,r.jsxs)(eE.RawPopover,{css:n1.popover,background:"default",placement:"bottom right",children:[(0,r.jsx)(f.View,{css:n1.search,p:8,children:(0,r.jsx)(nr.Input,{css:n1.searchInput,value:o,onChange:function(e){return y(e.target.value)},placeholder:"Search"})}),(0,r.jsx)(R.ListBox,{css:n1.listbox,children:u.map(function(e){var n=e.value,i=e.abbr,a=e.utc;return(0,r.jsxs)(R.ListBoxSection,{children:[(0,r.jsx)(nQ.Header,{css:n1.header,children:(0,r.jsxs)(T.Text,{variant:"small",color:"dimmest",css:n1.dropdownHeader,children:[n," (",i,")"]})}),a.map(function(e){return(0,r.jsx)(R.ListBoxItem,{id:e,textValue:e,children:(0,r.jsx)(n3,{tzCode:e,selected:e===t})},e)})]},n)})})]})]})}var re=e.i(167626),rt=e.i(611159),rn=e.i(759239);e.i(925218);var rr=e.i(802088),ri=e.i(311106),ra=e.i(858248),ro=e.i(709485),rs=function(e){var t,n,r,o,s,l,u,c,d,p,f,m,g,h=e.onDescriptionTranslation,v=e.onExpressionTranslation,y=e.onError,x=(0,i.useRef)(null),S=(0,b._)((0,i.useState)(!1),2),_=S[0],w=S[1],T=function(e,t){(0,ri.sendSentryError)({error:Error(e),context:"useScheduledMachineConfigurationTranslator"}),y(t||e)},j=(n=(t={onTranslation:function(e,t,n){if(!_&&(x.current&&clearTimeout(x.current),t)){if(!e)return void h("Unable to derive valid translation from description");var r,i=(r=e.match(/`([^`]+)`(?=[^`]*$)/))?r[1]:null;if(!i||!(0,rt.isValidCron)(i))return void h("Unable to derive valid Cron expression from description");h(i),(0,ra.track)(ro.events.DEPLOYMENT_SCHEDULE_TRANSLATION_GENERATED,{type:"scheduleToCronExpression",translation:e,prompt:n})}},onError:function(e){return T(e,"Error translating description")}}).onTranslation,r=t.onError,o=(0,e9.useChatter)(),l=(s=(0,b._)((0,i.useState)(!1),2))[0],u=s[1],d=(c=(0,b._)((0,i.useState)(null),2))[0],p=c[1],f=(0,i.useRef)(""),m=(0,i.useCallback)(function(e){return(0,e5._)(function(){var t;return(0,e7._)(this,function(n){switch(n.label){case 0:return u(!0),f.current=e.content,[4,o.sessions.create({sessionType:a.SessionType.SINGLE_USE_SESSION,title:"Cron Schedule Translation"})];case 1:if(!(t=n.sent()).ok)return u(!1),r("Failed to create session"),[2];return p(t.payload),[4,t.payload.appendEvent({kind:"translate",content:e.content,inputTarget:e.inputTarget,outputTarget:e.outputTarget,modelType:a.ModelType.BASIC})];case 2:return n.sent().ok||(u(!1),r("Failed to send translation request")),[2]}})})()},[o.sessions,r]),g=(0,i.useMemo)(function(){return null==d?void 0:d.reduce(rl,"global").result},[d]),(0,rr.useObserver)(g,{next:function(e){(null==e?void 0:e.completed)&&l&&u(!1),(null==e?void 0:e.code)&&n(e.code,e.completed,f.current)}}),{sendMessage:m,loading:l}),D=j.sendMessage,k=j.loading;return(0,i.useEffect)(function(){return function(){x.current&&clearTimeout(x.current)}},[x]),{translateDescriptionToExpression:function(e){return(0,e5._)(function(){return(0,e7._)(this,function(t){return(x.current&&clearTimeout(x.current),e)?(D({inputTarget:a.TranslationTarget.ENGLISH,outputTarget:a.TranslationTarget.CRON,content:e}),x.current=setTimeout(function(){w(!0),T("Translation timed out")},8e3)):h(""),[2]})})()},translateExpressionToDescription:function(e){if(!e)return void v("");if(!(0,rt.isValidCron)(e))return void v("Invalid cron expression");try{var t=rn.default.toString(e,{verbose:!0});v(t),(0,ra.track)(ro.events.DEPLOYMENT_SCHEDULE_TRANSLATION_GENERATED,{type:"cronExpressionToSchedule",translation:t,prompt:e})}catch(e){T((0,re._)(e,Error)?e.message:"Failed to translate cron expression","Invalid cron expression")}},loading:k}},rl={direction:"reverse",state:{code:null,completed:!1},reducer:function(e,t){(0,e2.isKind)(e.contents.contents,"messageEventContents")&&e.sender.type===a.UserType.AI&&(t.code=(0,e2.unkind)(e.contents.contents).content,t.completed=e.state===a.EventState.COMPLETE&&!!t.code)}};function ru(){return(0,r.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.97978 15.6465C2.78451 15.8417 2.78451 16.1583 2.97978 16.3536L7.64644 21.0202C7.8417 21.2155 8.15829 21.2155 8.35355 21.0202C8.54881 20.825 8.54881 20.5084 8.35355 20.3131L4.54044 16.5L9.66666 16.5C9.9428 16.5 10.1667 16.2762 10.1667 16C10.1667 15.7239 9.9428 15.5 9.66666 15.5L4.54044 15.5L8.35355 11.6869C8.54881 11.4916 8.54881 11.1751 8.35355 10.9798C8.15829 10.7845 7.8417 10.7845 7.64644 10.9798L2.97978 15.6465Z",fill:S.tokens.blurpleStronger}),(0,r.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.3889 12.2661C16.259 11.9113 15.741 11.9113 15.6111 12.2661L14.7182 14.7055C14.675 14.8237 14.577 14.9153 14.4536 14.9531L12.2883 15.6156C11.9044 15.7331 11.9037 16.2592 12.2873 16.3776L14.4544 17.0466C14.5773 17.0846 14.6749 17.1761 14.718 17.2939L15.6111 19.7339C15.741 20.0887 16.259 20.0887 16.3889 19.7339L17.2819 17.2942C17.3251 17.1762 17.4228 17.0846 17.546 17.0468L19.7122 16.381C20.0959 16.263 20.0959 15.737 19.7122 15.619L17.546 14.9532C17.4228 14.9154 17.3251 14.8238 17.2819 14.7058L16.3889 12.2661Z",fill:S.tokens.blurpleStronger}),(0,r.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M29.0202 15.6465C29.2155 15.8417 29.2155 16.1583 29.0202 16.3536L24.3536 21.0202C24.1583 21.2155 23.8417 21.2155 23.6465 21.0202C23.4512 20.825 23.4512 20.5084 23.6465 20.3131L27.4596 16.5L22.3333 16.5C22.0572 16.5 21.8333 16.2762 21.8333 16C21.8333 15.7239 22.0572 15.5 22.3333 15.5L27.4596 15.5L23.6465 11.6869C23.4512 11.4916 23.4512 11.1751 23.6465 10.9798C23.8417 10.7845 24.1583 10.7845 24.3536 10.9798L29.0202 15.6465Z",fill:S.tokens.blurpleStronger})]})}var rc=eH.container.min(480),rd=(0,eU.cssRecord)({cronConfig:[(0,I._)({},rc,[eH.rcss.colWithGap(0),eH.rcss.rowWithGap(8),eH.rcss.align.start])],crontabLabeledInput:[eH.rcss.flex.growAndShrink(1),eH.rcss.maxWidth(128)],translationSwitch:[eH.rcss.mb(4),(0,I._)({transform:"rotate(90deg)",alignSelf:"flex-start"},rc,{transform:"rotate(0deg)",marginBottom:0,paddingTop:30})],translationSwitchIcon:[eH.rcss.height(32),eH.rcss.width(32),eH.rcss.center],timezoneSelect:[eH.rcss.flex.shrink(1),(0,I._)({minWidth:75},rc,{paddingTop:30})]});function rp(e){var t=e.callback,n=e.delay,r=(0,i.useRef)();return(0,i.useEffect)(function(){return function(){r.current&&clearTimeout(r.current)}},[]),{callerFunction:function(e){r.current&&clearTimeout(r.current),r.current=setTimeout(function(){return t(e)},n)}}}function rf(e){var t=e.initialCrontab,n=e.initialTimezone,r=e.externalLoading,a=e.onCrontabChange,o=e.onTimezoneChange,s=(0,b._)((0,i.useState)(!1),2),l=s[0],u=s[1],c=(0,b._)((0,i.useState)(null),2),d=c[0],p=c[1],f=(0,b._)((0,i.useState)(null),2),m=f[0],g=f[1],h=(0,b._)((0,i.useState)(null!=t?t:null),2),v=h[0],y=h[1],x=(0,b._)((0,i.useState)(null!=n?n:null),2),S=x[0],_=x[1],w=(0,b._)((0,i.useState)("scheduleToCronExpression"),2),T=w[0],j=w[1],D=rs({onDescriptionTranslation:function(e){u(!1),y(e),null==a||a(e)},onExpressionTranslation:function(e){u(!1),g(e)},onError:function(e){u(!1),p(e)}}),k=D.translateDescriptionToExpression,C=D.translateExpressionToDescription,E=D.loading,A=rp({callback:function(e){return k(e)},delay:3e3}).callerFunction,I=rp({callback:u,delay:500}).callerFunction,R=E||l||null!=r&&r;return(0,i.useEffect)(function(){if(t&&!m&&!R){j("cronExpressionToSchedule");var e=setTimeout(function(){C(t)},100);return function(){return clearTimeout(e)}}},[t,m,R,C]),{describeSchedule:m,crontab:v,timezone:S,error:d,loading:R,scheduleToCronExpression:"scheduleToCronExpression"===T,cronExpressionToSchedule:"cronExpressionToSchedule"===T,setCrontab:function(e){y(e),null==a||a(e)},setTimezone:function(e){_(e),null==o||o(e)},handleOnInputChanged:function(e,t){switch(t){case"scheduleToCronExpression":g(e);break;case"cronExpressionToSchedule":y(e),null==a||a(e)}(E||l||null!=r&&r)&&u(!1),""!==e&&null!==e&&("cronExpressionToSchedule"===t?C(e):(I(!0),A(e)))},setTranslationType:j}}function rm(e){var t=e.crontab,n=e.timezone,i=e.crontabError,a=e.timezoneError,o=e.cronLoading,s=e.error,l=e.onCronExpressionChange,u=e.onTimezoneChange;return(0,r.jsxs)(f.View,{grow:!0,shrink:!0,pb:16,gap:8,children:[(0,r.jsx)(f.View,{css:rd.crontabLabeledInput,children:(0,r.jsx)(na,{id:"cronExpression",title:"Cron expression",information:"A cron expression is a string of characters used to define a schedule for running tasks at specific times or intervals in software applications.",warning:"".concat(s,". Enter valid Cron expression."),grow:!0,children:(0,r.jsx)(nG,{id:"cronExpression",value:t,placeholder:"* * * * *",loading:o,disabled:!1,onChange:l,error:i})})}),(0,r.jsx)(f.View,{css:rd.timezoneSelect,children:(0,r.jsx)(n2,{initialTimezone:n,onChange:u,error:a,loading:o})})]})}function rg(e){var t=e.describeSchedule,n=e.crontab,i=e.timezone,a=e.crontabError,o=e.cronLoading,s=e.timezoneError,l=e.loading,u=void 0!==l&&l,c=e.scheduleToCronExpression,d=e.cronExpressionToSchedule,p=e.onScheduleDescriptionChange,m=e.onCronExpressionChange,g=e.onTimezoneChange,h=e.onScheduleDescriptionFocus,v=e.onCronExpressionFocus;return(0,r.jsxs)(f.View,{css:rd.cronConfig,grow:!0,shrink:!0,gap:8,children:[(0,r.jsx)(f.View,{grow:!0,shrink:!0,children:(0,r.jsx)(na,{id:"schedule",title:"Schedule description",information:"Describe when you want your scheduled deployment to run",grow:!0,children:(0,r.jsx)(nG,{id:"describeSchedule",value:t,placeholder:n?"":"Every day at 3:00 AM",loading:o,disabled:u&&!c,onChange:p,onFocus:h})})}),(0,r.jsx)(f.View,{css:rd.translationSwitch,shrink:!0,children:(0,r.jsx)(X.Tooltip,{tooltip:"When you type, Replit AI will translate between these properties",children:(0,r.jsx)(f.View,{css:rd.translationSwitchIcon,children:u?(0,r.jsx)(en.default,{color:S.tokens.blurpleStronger}):(0,r.jsx)(ru,{})})})}),(0,r.jsx)(f.View,{css:rd.crontabLabeledInput,children:(0,r.jsx)(na,{id:"cronExpression",title:"Cron expression",information:"A cron expression is a string of characters used to define a schedule for running tasks at specific times or intervals in software applications.",grow:!0,children:(0,r.jsx)(nG,{id:"cronExpression",value:n,placeholder:"* * * * *",loading:o,disabled:u&&!d,onChange:m,onFocus:v,error:a})})}),(0,r.jsx)(f.View,{css:rd.timezoneSelect,children:(0,r.jsx)(n2,{initialTimezone:i,onChange:g,error:s,loading:o})})]})}e.s(["CronExpressionErrorFallback",()=>rm,"CronExpressionInterface",()=>rg,"useCronExpressionWithTranslation",()=>rf],32144);var rh=e.i(613141);function rv(){var e=(0,ey._)(["\n  fragment PendingDomainsRepl on Repl {\n    id\n    pendingDomains {\n      domainName\n      status\n      message\n    }\n  }\n"]);return rv=function(){return e},e}function ry(){var e=(0,ey._)(["\n  query PendingDomainsQuery($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        ...PendingDomainsRepl\n      }\n    }\n  }\n  ","\n"]);return ry=function(){return e},e}function rx(){var e=(0,ey._)(["\n  subscription PendingDomainsUpdates($replId: String!) {\n    pendingDomainsUpdates(replId: $replId) {\n      id\n      ...PendingDomainsRepl\n    }\n  }\n  ","\n"]);return rx=function(){return e},e}var rb={},rS=(0,ex.gql)(rv()),r_=(0,ex.gql)(ry(),rS);function rw(e){var t=(0,h._)({},rb,e);return eb.useQuery(r_,t)}var rT=(0,ex.gql)(rx(),rS);function rj(e){var t=(0,h._)({},rb,e);return rh.useSubscription(rT,t)}function rD(){var e=(0,ey._)(["\n  fragment DomainItemDnsRecord on DnsRecord {\n    id\n    answer\n    type\n    ttl\n    host\n    isProtected\n  }\n"]);return rD=function(){return e},e}function rk(){var e=(0,ey._)(["\n  fragment DomainItem on Domain {\n    id\n    status\n    state\n    domain\n    managed\n    timeCreated\n    purchaseDate\n    autorenew\n    registrantEmailVerified\n    dnsRecords {\n      id\n      ...DomainItemDnsRecord\n    }\n    user {\n      id\n    }\n  }\n  ","\n"]);return rk=function(){return e},e}function rC(){var e=(0,ey._)(["\n  mutation CreateDnsRecord($input: CreateDnsRecordInput!) {\n    createDnsRecord(input: $input) {\n      ... on Error {\n        message\n      }\n      ... on CreateDnsRecordOutput {\n        domain {\n          id\n          ...DomainItem\n        }\n      }\n    }\n  }\n  ","\n"]);return rC=function(){return e},e}function rE(){var e=(0,ey._)(["\n  mutation DeleteDnsRecord($input: DeleteDnsRecordInput!) {\n    deleteDnsRecord(input: $input) {\n      ... on Error {\n        message\n      }\n      ... on DeleteDnsRecordOutput {\n        domain {\n          id\n          ...DomainItem\n        }\n      }\n    }\n  }\n  ","\n"]);return rE=function(){return e},e}function rA(){var e=(0,ey._)(["\n  mutation HostingDeploymentsUnlinkDomain(\n    $input: UnlinkHostingDeploymentDomainInput!\n  ) {\n    unlinkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        domains2 {\n          id\n        }\n        repl {\n          ...PendingDomainsRepl\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return rA=function(){return e},e}function rI(){var e=(0,ey._)(["\n  mutation VerifyDomain($input: VerifyDomainInput!) {\n    verifyDomain(input: $input) {\n      ... on Domain {\n        id\n        state\n      }\n    }\n  }\n"]);return rI=function(){return e},e}function rR(){var e=(0,ey._)(["\n  mutation setShouldDomainAutoRenew($input: SetShouldDomainAutoRenewInput!) {\n    setShouldDomainAutoRenew(input: $input) {\n      ... on Error {\n        message\n      }\n      ... on SetShouldDomainAutoRenewResult {\n        domain {\n          id\n          ...DomainItem\n        }\n      }\n    }\n  }\n  ","\n"]);return rR=function(){return e},e}e.s(["PendingDomainsReplFragmentDoc",()=>rS,"usePendingDomainsQueryQuery",()=>rw,"usePendingDomainsUpdatesSubscription",()=>rj],680250);var rP={},rM=(0,ex.gql)(rD()),rO=(0,ex.gql)(rk(),rM),rN=(0,ex.gql)(rC(),rO);function rL(e){var t=(0,h._)({},rP,e);return th.useMutation(rN,t)}var rB=(0,ex.gql)(rE(),rO);function rV(e){var t=(0,h._)({},rP,e);return th.useMutation(rB,t)}var rU=(0,ex.gql)(rA(),rS);function rF(e){var t=(0,h._)({},rP,e);return th.useMutation(rU,t)}var rH=(0,ex.gql)(rI());function rG(e){var t=(0,h._)({},rP,e);return th.useMutation(rH,t)}var rz=(0,ex.gql)(rR(),rO);function rq(e){var t=(0,h._)({},rP,e);return th.useMutation(rz,t)}function rW(){var e=(0,ey._)(["\n  fragment Domains2Repl on Repl {\n    id\n    org {\n      id\n    }\n  }\n"]);return rW=function(){return e},e}function rK(){var e=(0,ey._)(["\n  fragment HostingDeploymentDomainsHostingDeployment on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n    }\n    repl {\n      id\n      title\n      apexProxy\n    }\n    domains2 {\n      id\n      ...DomainItem\n      whois @include(if: $isGlowup) {\n        registrar\n        creationDate\n        expiryDate\n      }\n      currentDnsRecords @include(if: $isGlowup) {\n        A\n        TXT\n      }\n      renewalPriceCents @include(if: $isGlowup)\n    }\n  }\n  ","\n"]);return rK=function(){return e},e}function r$(){var e=(0,ey._)(["\n  query Domains2Repl($id: String!) {\n    getRepl(id: $id) {\n      ...Domains2Repl\n    }\n  }\n  ","\n"]);return r$=function(){return e},e}function rY(){var e=(0,ey._)(["\n  query HostingDeploymentDomains($id: String!, $isGlowup: Boolean!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n      }\n    }\n  }\n  ","\n"]);return rY=function(){return e},e}function rX(){var e=(0,ey._)(["\n  mutation LinkHostingDeploymentDomain(\n    $input: LinkHostingDeploymentDomainInput!\n  ) {\n    linkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        domains2 {\n          ...DomainItem\n        }\n      }\n    }\n  }\n  ","\n"]);return rX=function(){return e},e}e.s(["DomainItemFragmentDoc",()=>rO,"useCreateDnsRecordMutation",()=>rL,"useDeleteDnsRecordMutation",()=>rV,"useHostingDeploymentsUnlinkDomainMutation",()=>rF,"useSetShouldDomainAutoRenewMutation",()=>rq,"useVerifyDomainMutation",()=>rG],713547);var rQ={},rJ=(0,ex.gql)(rW()),rZ=(0,ex.gql)(rK(),rO),r0=(0,ex.gql)(r$(),rJ);function r1(e){var t=(0,h._)({},rQ,e);return eb.useQuery(r0,t)}var r2=(0,ex.gql)(rY(),rZ);function r4(e){var t=(0,h._)({},rQ,e);return eb.useQuery(r2,t)}function r8(e){var t=(0,h._)({},rQ,e);return eS.useLazyQuery(r2,t)}var r3=(0,ex.gql)(rX(),rO);function r6(e){var t=(0,h._)({},rQ,e);return th.useMutation(r3,t)}function r5(){var e=(0,ey._)(["\n  fragment DeploymentSettingsAuthorizations on ReplAuthorizations {\n    addCustomDomain {\n      isAuthorized\n      code\n      message\n    }\n    deleteCustomDomain {\n      isAuthorized\n      code\n      message\n    }\n    deleteDeployment {\n      isAuthorized\n      code\n      message\n    }\n    editDeploymentStatus(provider: $provider) {\n      isAuthorized\n      code\n      message\n    }\n    editDeploymentTier(provider: $provider) {\n      isAuthorized\n      code\n      message\n    }\n  }\n"]);return r5=function(){return e},e}function r7(){var e=(0,ey._)(["\n  query HostingDeploymentSettings($id: String!, $isGlowup: Boolean!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n        repl {\n          id\n          org {\n            id\n          }\n        }\n        currentBuild {\n          id\n          provider\n          suspendedReason\n          machineConfiguration {\n            ...MachineConfiguration\n          }\n          machineJob {\n            ... on HostingBuildMachineJob {\n              failureNotifications\n            }\n          }\n          envVars {\n            name\n            value\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return r7=function(){return e},e}function r9(){var e=(0,ey._)(["\n  query HostingDeploymentSettingsAuthz(\n    $replId: String!\n    $provider: HostingBuildProvider!\n  ) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        authorizations {\n          ...DeploymentSettingsAuthorizations\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return r9=function(){return e},e}e.s(["HostingDeploymentDomainsDocument",()=>r2,"HostingDeploymentDomainsHostingDeploymentFragmentDoc",()=>rZ,"useDomains2ReplQuery",()=>r1,"useHostingDeploymentDomainsLazyQuery",()=>r8,"useHostingDeploymentDomainsQuery",()=>r4,"useLinkHostingDeploymentDomainMutation",()=>r6],636567);var ie={},it=(0,ex.gql)(r5()),ir=(0,ex.gql)(r7(),rZ,t5.MachineConfigurationFragmentDoc);function ii(e){var t=(0,h._)({},ie,e);return eb.useQuery(ir,t)}var ia=(0,ex.gql)(r9(),it);function io(e){var t=(0,h._)({},ie,e);return eb.useQuery(ia,t)}function is(e){var t=(0,h._)({},ie,e);return eS.useLazyQuery(ia,t)}e.s(["useHostingDeploymentSettingsAuthzLazyQuery",()=>is,"useHostingDeploymentSettingsAuthzQuery",()=>io,"useHostingDeploymentSettingsQuery",()=>ii],358637);var il=e.i(327516);e.s(["formatDistance",()=>il.default],182492);var il=il,iu=e.i(628251);function ic(e,t,n){var r,i,a,o,s=function(e,t,n){if(n&&!n.code)throw Error("date-fns-tz error: Please set a language code on the locale object imported from date-fns, e.g. `locale.code = 'en-US'`");return new Intl.DateTimeFormat(n?[n.code,"en-US"]:void 0,{timeZone:t,timeZoneName:e})}(e,n.timeZone,n.locale);return s.formatToParts?function(e,t){for(var n=e.formatToParts(t),r=n.length-1;r>=0;--r)if("timeZoneName"===n[r].type)return n[r].value}(s,t):(r=s,i=t,a=r.format(i).replace(/\u200E/g,""),(o=/ [\w-+ ]+$/.exec(a))?o[0].substr(1):"")}var id={year:0,month:1,day:2,hour:3,minute:4,second:5},ip={};function im(e,t,n,r,i,a,o){var s=new Date(0);return s.setUTCFullYear(e,t,n),s.setUTCHours(r,i,a,o),s}var ig=/^(Z)$/,ih=/^([+-]\d{2})$/,iv=/^([+-]\d{2}):?(\d{2})$/;function iy(e,t,n){if(!e||(r=ig.exec(e)))return 0;if(r=ih.exec(e))return ib(a=parseInt(r[1],10))?-(36e5*a):NaN;if(r=iv.exec(e)){var r,i,a=parseInt(r[1],10),o=parseInt(r[2],10);return ib(a,o)?(i=36e5*Math.abs(a)+6e4*o,a>0?-i:i):NaN}if(function(e){if(iS[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),iS[e]=!0,!0}catch(e){return!1}}(e)){t=new Date(t||Date.now());var s,l=ix(n?t:im((s=t).getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()),e);return-(n?l:function(e,t,n){var r=e.getTime()-t,i=ix(new Date(r),n);if(t===i)return t;var a=ix(new Date(r-=i-t),n);return i===a?i:Math.max(i,a)}(t,l,e))}return NaN}function ix(e,t){var n,r,i,a,o,s=(o=function(e){if(!ip[e]){var t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z"));ip[e]="06/25/2014, 00:00:00"===t||"â€Ž06â€Ž/â€Ž25â€Ž/â€Ž2014â€Ž â€Ž00â€Ž:â€Ž00â€Ž:â€Ž00"===t?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return ip[e]}(t)).formatToParts?function(e,t){try{for(var n=e.formatToParts(t),r=[],i=0;i<n.length;i++){var a=id[n[i].type];a>=0&&(r[a]=parseInt(n[i].value,10))}return r}catch(e){if((0,re._)(e,RangeError))return[NaN];throw e}}(o,e):(n=o,r=e,i=n.format(r).replace(/\u200E/g,""),[(a=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(i))[3],a[1],a[2],a[4],a[5],a[6]]),l=im(s[0],s[1]-1,s[2],s[3]%24,s[4],s[5],0).getTime(),u=e.getTime(),c=u%1e3;return l-(u-=c>=0?c:1e3+c)}function ib(e,t){return -23<=e&&e<=23&&(null==t||0<=t&&t<=59)}var iS={};function i_(e,t){var n=e?iy(e,t,!0)/6e4:t.getTimezoneOffset();if(Number.isNaN(n))throw RangeError("Invalid time zone specified: "+e);return n}function iw(e,t){for(var n=Math.abs(e).toString();n.length<t;)n="0"+n;return(e<0?"-":"")+n}function iT(e,t){var n=Math.abs(e);return(e>0?"-":"+")+iw(Math.floor(n/60),2)+(t||"")+iw(Math.floor(n%60),2)}function ij(e,t){return e%60==0?(e>0?"-":"+")+iw(Math.abs(e)/60,2):iT(e,t)}let iD={X:function(e,t,n,r){var i=i_(r.timeZone,r._originalDate||e);if(0===i)return"Z";switch(t){case"X":return ij(i);case"XXXX":case"XX":return iT(i);default:return iT(i,":")}},x:function(e,t,n,r){var i=i_(r.timeZone,r._originalDate||e);switch(t){case"x":return ij(i);case"xxxx":case"xx":return iT(i);default:return iT(i,":")}},O:function(e,t,n,r){var i,a,o,s,l,u=i_(r.timeZone,r._originalDate||e);switch(t){case"O":case"OO":case"OOO":return"GMT"+(a=(i=u)>0?"-":"+",s=Math.floor((o=Math.abs(i))/60),0==(l=o%60)?a+String(s):a+String(s)+":"+iw(l,2));default:return"GMT"+iT(u,":")}},z:function(e,t,n,r){var i=r._originalDate||e;switch(t){case"z":case"zz":case"zzz":return ic("short",i,r);default:return ic("long",i,r)}}};var ik=e.i(119468),iC=e.i(555023),iE=e.i(906695),iA=/^([0-9W+-]+)(T| )(.*)/,iI=/^([0-9W+-]+)(.*)/,iR=/^(\d{2})$/,iP=[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],iM=/^(\d{4})/,iO=[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],iN=/^-(\d{2})$/,iL=/^-?(\d{3})$/,iB=/^-?(\d{2})-?(\d{2})$/,iV=/^-?W(\d{2})$/,iU=/^-?W(\d{2})-?(\d{1})$/,iF=/^(\d{2}([.,]\d*)?)$/,iH=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,iG=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,iz=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/;function iq(e,t,n){t=t||0,n=n||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var i=7*t+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+i),r}var iW=[31,28,31,30,31,30,31,31,30,31,30,31],iK=[31,29,31,30,31,30,31,31,30,31,30,31];function i$(e){return e%400==0||e%4==0&&e%100!=0}function iY(e,t,n){if(t<0||t>11)return!1;if(null!=n){if(n<1)return!1;var r=i$(e);if(r&&n>iK[t]||!r&&n>iW[t])return!1}return!0}function iX(e,t,n){return!(t<0)&&!(t>52)&&(null==n||!(n<0)&&!(n>6))}function iQ(e,t,n){return(null==e||!(e<0)&&!(e>=25))&&(null==t||!(t<0)&&!(t>=60))&&(null==n||!(n<0)&&!(n>=60))}var iJ=/([xXOz]+)|''|'(''|[^'])+('|$)/g,iZ=e.i(928838),i0=e.i(914279),i1=e.i(68893),i2=e.i(391222),i4=e.i(883002),i8=(0,eU.cssRecord)({name:[eH.rcss.color.foregroundDefault,eH.rcss.fontWeight.medium],itemRight:[eH.rcss.textAlign.right],disabledLog:{cursor:"not-allowed"}}),i3=function(e){var t,n,i=e.onClick,a=(0,i0.useDeploymentMode)(),o=(0,nc.useDeploymentCurrentBuild)();if(a===i1.DeploymentMode.Loading||!o)return(0,r.jsx)(en.default,{size:12});var s=o.status,l=o.hasDeployLogs,u=!l;return(0,r.jsx)(f.View,{shrink:!0,row:!0,gap:0,children:(0,r.jsxs)(f.View,{grow:!0,shrink:!0,pr:4,align:"center",row:!0,gap:8,children:[(0,r.jsx)(i2.DeploymentStatusDot,{status:s}),(0,r.jsx)(f.View,{grow:!0,shrink:!0,align:"center",children:(0,r.jsxs)(T.Text,{multiline:!1,children:[(0,r.jsx)("span",{css:i8.name,children:(null!=(n=null==(t=o.user)?void 0:t.displayName)?n:tM.DELETED_USER_DISPLAY_NAME)+" "}),(0,iZ.getStatusSentenceText)(s,o.suspendedReason)+" ",!function(e){switch(e){case tE.HostingBuildStatus.Building:case tE.HostingBuildStatus.Promoting:case tE.HostingBuildStatus.Running:case tE.HostingBuildStatus.Pending:case tE.HostingBuildStatus.Failed:case tE.HostingBuildStatus.Success:return!0;case tE.HostingBuildStatus.Resuming:case tE.HostingBuildStatus.Suspending:case tE.HostingBuildStatus.Suspended:case tE.HostingBuildStatus.UpdatingTier:return!1}}(s)?null:(0,r.jsx)(X.Tooltip,{tooltip:function(e,t,n){var r=String(t),i={},a=r.match(iJ);if(a){var o=function(e,t){if(arguments.length<1)throw TypeError("1 argument required, but only "+arguments.length+" present");if(null===e)return new Date(NaN);var n=t||{},r=null==n.additionalDigits?2:(0,iC.default)(n.additionalDigits);if(2!==r&&1!==r&&0!==r)throw RangeError("additionalDigits must be 0, 1 or 2");if((0,re._)(e,Date)||(void 0===e?"undefined":(0,ik._)(e))==="object"&&"[object Date]"===Object.prototype.toString.call(e))return new Date(e.getTime());if("number"==typeof e||"[object Number]"===Object.prototype.toString.call(e))return new Date(e);if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var i=function(e){var t,n={},r=iA.exec(e);if(r?(n.date=r[1],t=r[3]):(r=iI.exec(e))?(n.date=r[1],t=r[2]):(n.date=null,t=e),t){var i=iz.exec(t);i?(n.time=t.replace(i[1],""),n.timeZone=i[1].trim()):n.time=t}return n}(e),a=function(e,t){var n,r=iP[t],i=iO[t];if(n=iM.exec(e)||i.exec(e)){var a=n[1];return{year:parseInt(a,10),restDateString:e.slice(a.length)}}if(n=iR.exec(e)||r.exec(e)){var o=n[1];return{year:100*parseInt(o,10),restDateString:e.slice(o.length)}}return{year:null}}(i.date,r),o=a.year,s=function(e,t){if(null===t)return null;if(0===e.length)return(a=new Date(0)).setUTCFullYear(t),a;if(n=iN.exec(e))return(a=new Date(0),iY(t,r=parseInt(n[1],10)-1))?(a.setUTCFullYear(t,r),a):new Date(NaN);if(n=iL.exec(e)){var n,r,i,a=new Date(0),o=parseInt(n[1],10);return!function(e,t){if(t<1)return!1;var n=i$(e);return(!n||!(t>366))&&(!!n||!(t>365))}(t,o)?new Date(NaN):(a.setUTCFullYear(t,0,o),a)}if(n=iB.exec(e)){a=new Date(0),r=parseInt(n[1],10)-1;var s=parseInt(n[2],10);return iY(t,r,s)?(a.setUTCFullYear(t,r,s),a):new Date(NaN)}if(n=iV.exec(e))return iX(t,i=parseInt(n[1],10)-1)?iq(t,i):new Date(NaN);if(n=iU.exec(e)){i=parseInt(n[1],10)-1;var l=parseInt(n[2],10)-1;return iX(t,i,l)?iq(t,i,l):new Date(NaN)}return null}(a.restDateString,o);if(isNaN(s)||!s)return new Date(NaN);var l,u=s.getTime(),c=0;if(i.time&&isNaN(c=function(e){if(t=iF.exec(e))return iQ(n=parseFloat(t[1].replace(",",".")))?n%24*36e5:NaN;if(t=iH.exec(e))return iQ(n=parseInt(t[1],10),r=parseFloat(t[2].replace(",",".")))?n%24*36e5+6e4*r:NaN;if(t=iG.exec(e)){var t,n=parseInt(t[1],10),r=parseInt(t[2],10),i=parseFloat(t[3].replace(",","."));return iQ(n,r,i)?n%24*36e5+6e4*r+1e3*i:NaN}return null}(i.time)))return new Date(NaN);if(i.timeZone||n.timeZone){if(isNaN(l=iy(i.timeZone||n.timeZone,new Date(u+c))))return new Date(NaN)}else l=(0,iE.default)(new Date(u+c)),l=(0,iE.default)(new Date(u+c+l));return new Date(u+c+l)}(e,i);r=a.reduce(function(e,t){if("'"===t[0])return e;var n=e.indexOf(t),r="'"===e[n-1],a=e.replace(t,"'"+iD[t[0]](o,t,null,i)+"'");return r?a.substring(0,n-1)+a.substring(n+1):a},r)}return(0,iu.default)(e,r,i)}(new Date(o.timeCreated),"MMMM do, Y 'at' h:m aa z"),maxWidth:250,children:function(e,t){return(0,r.jsx)("span",(0,v._)((0,h._)({},e),{ref:t,children:(0,il.default)(new Date(o.timeCreated),Date.now(),{addSuffix:!0})}))}})]})}),(0,r.jsx)(f.View,{css:i8.itemRight,children:(0,r.jsx)(nV.IconButton,{alt:l?"View deploy logs":"Deploy logs expire after 30 days",onClick:i,disabled:u,css:u&&i8.disabledLog,children:(0,r.jsx)(i4.default,{})})})]})})};e.s(["BuildStatus",()=>i3],99276);var i6=(t={},(0,I._)(t,tE.HostingBuildProvider.Gce,"Reserved VM"),(0,I._)(t,tE.HostingBuildProvider.CloudRun,"Autoscale"),(0,I._)(t,tE.HostingBuildProvider.Static,"Static"),(0,I._)(t,tE.HostingBuildProvider.Cron,"Scheduled"),(0,I._)(t,tE.HostingBuildProvider.AzureVm,"Reserved VM"),(0,I._)(t,tE.HostingBuildProvider.AzureContainerApp,"Autoscale"),t);e.s(["deploymentProviderProductName",()=>i6],916973);var il=il,i5=e.i(714165),i7=tr;e.s(["RotateCcw",()=>i7.default],462216);var i7=tr,i9=(0,eU.cssRecord)({buildIdColumn:[eH.rcss.flex.row,eH.rcss.minWidth(85)],pillSpanActivityLog:[eH.rcss.pl(16)],displayName:[eH.rcss.fontWeight.medium,eH.rcss.pl(6)],formattedText:[eH.rcss.pl(4),eH.rcss.overflow("hidden"),{textOverflow:"ellipsis",whiteSpace:"nowrap"}]}),ae=function(e){var t=e.build,n=t.id.slice(0,8);return(0,r.jsx)(X.Tooltip,{tooltip:t.id,children:n})},at=(n={},(0,I._)(n,tE.HostingActivityLogType.Deploy,"published"),(0,I._)(n,tE.HostingActivityLogType.Rollback,"rolled back"),(0,I._)(n,tE.HostingActivityLogType.Fail,"failed to publish"),n),an=function(e){var t=e.type,n=e.isExpoLaunch,r=e.expoLaunchStatus;if(n&&r)switch(r){case tE.ExpoLaunchStatus.Success:return"published to App Store";case tE.ExpoLaunchStatus.Failure:case tE.ExpoLaunchStatus.Canceled:return"failed to publish to App Store";default:return null}return t in at?at[t]:null},ar=function(e){var t,n=e.build,i=null==(t=n.rollbackSourceBuildId)?void 0:t.slice(0,8);return(0,r.jsx)(X.Tooltip,{tooltip:n.rollbackSourceBuildId,children:(0,r.jsx)(eG.Pill,{iconLeft:(0,r.jsx)(i7.default,{}),text:i})})},ai=function(e){var t,n,i,a,o,s=e.activityLogItem,l=e.formattedTime,u=s.build,c=null!=(o=null==(t=u.user)?void 0:t.displayName)?o:tM.DELETED_USER_DISPLAY_NAME,d=an(s);if(!d)return null;var p=u.rollbackSourceBuildId;return(0,r.jsxs)(f.View,{pb:4,align:"center",row:!0,children:[(0,r.jsx)("span",{css:i9.buildIdColumn,children:(0,r.jsx)(ae,{build:u})}),(0,r.jsx)(i5.Avatar,{src:(null==(n=u.user)?void 0:n.image)||null,size:16,username:(null==(i=u.user)?void 0:i.username)||"",fullName:(null==(a=u.user)?void 0:a.fullName)||""}),(0,r.jsx)("span",{css:i9.displayName,children:c}),(0,r.jsxs)("span",{css:i9.formattedText,children:[" "+d," "+l]}),p?(0,r.jsx)("span",{css:i9.pillSpanActivityLog,children:(0,r.jsx)(ar,{build:u})}):null," "]})},aa=function(e){var t,n,i,a,o,s=e.activityLogItem,l=e.formattedTime,u=s.build,c=null!=(o=null==(t=u.user)?void 0:t.displayName)?o:tM.DELETED_USER_DISPLAY_NAME,d=an(s);if(!d)return null;var p=u.rollbackSourceBuildId;return(0,r.jsxs)(f.View,{children:[(0,r.jsxs)(f.View,{row:!0,align:"center",children:[(0,r.jsx)(ae,{build:u}),p?(0,r.jsx)("span",{css:i9.pillSpanActivityLog,children:(0,r.jsx)(ar,{build:u})}):null]}),(0,r.jsxs)(f.View,{py:4,row:!0,align:"center",children:[(0,r.jsx)(i5.Avatar,{src:(null==(n=u.user)?void 0:n.image)||null,size:24,username:(null==(i=u.user)?void 0:i.username)||"",fullName:(null==(a=u.user)?void 0:a.fullName)||""}),(0,r.jsx)("span",{css:i9.displayName,children:c}),(0,r.jsxs)("span",{css:i9.formattedText,children:[" "+d," "+l]})]})]})},ao=function(e){var t=e.activityLogItem,n=(0,ej.useIsMobile)(),i=new Date(t.isExpoLaunch&&t.timeCreated?t.timeCreated:t.build.timeCreated),a=Date.now(),o=(0,il.default)(i,a,{addSuffix:!0});return(0,r.jsx)(r.Fragment,{children:n?(0,r.jsx)(aa,{activityLogItem:t,formattedTime:o}):(0,r.jsx)(ai,{activityLogItem:t,formattedTime:o})})};function as(){var e=(0,ey._)(["\n  fragment ExpoLaunch on ExpoLaunchDetails {\n    id\n    status\n    isFinished\n    startedAt\n    finishedAt\n  }\n"]);return as=function(){return e},e}function al(){var e=(0,ey._)(["\n  query AppStoreLaunchInfo($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        expoLaunch {\n          ... on ExpoLaunchSession {\n            id\n            hostingBuildId\n            launches {\n              ios {\n                ...ExpoLaunch\n              }\n            }\n          }\n        }\n        expoLaunchHistory(count: 10) {\n          ... on ExpoLaunchHistoryConnection {\n            sessions {\n              id\n              hostingBuildId\n              launches {\n                id\n                platform\n                status\n                finishedAt\n                isFinished\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return al=function(){return e},e}e.s(["ActivityLogText",()=>ao,"ActivityLogTextBuildPill",()=>ae,"RollbackBuildPill",()=>ar],863753),e.s(["AppStoreLaunchInfo",()=>af],463202);var au={},ac=(0,ex.gql)(as()),ad=(0,ex.gql)(al(),ac),ap=e.i(635528);function af(){var e,t,n=(0,tI.default)(),a=(0,nc.useDeploymentCurrentBuild)(),o=(e={variables:{replId:n},fetchPolicy:"cache-and-network",ssr:!1,skip:!n},t=(0,h._)({},au,e),eb.useQuery(ad,t)).data,s=(0,i.useMemo)(function(){if(!(null==a?void 0:a.id)||!o)return null;var e="Repl"===o.getRepl.__typename?o.getRepl:null;if(!e)return null;var t=(null==(n=e.expoLaunch)?void 0:n.__typename)==="ExpoLaunchSession"?e.expoLaunch:null;if((null==t?void 0:t.hostingBuildId)===a.id){var n,r,i,s=null==(i=t.launches)?void 0:i.ios;if((null==s?void 0:s.status)===tE.ExpoLaunchStatus.Success)return s}if((null==(r=e.expoLaunchHistory)?void 0:r.__typename)==="ExpoLaunchHistoryConnection"){var l=!0,u=!1,c=void 0;try{for(var d,p=e.expoLaunchHistory.sessions[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var f=d.value;if(f.hostingBuildId===a.id){var m=f.launches.find(function(e){return e.platform===tE.ExpoLaunchPlatform.Ios});if((null==m?void 0:m.status)===tE.ExpoLaunchStatus.Success)return m}}}catch(e){u=!0,c=e}finally{try{l||null==p.return||p.return()}finally{if(u)throw c}}}return null},[null==a?void 0:a.id,o]);if(!s)return null;var l=s.finishedAt;return(0,r.jsx)(ap.LabeledSection,{label:"App Store",children:(0,r.jsxs)(f.View,{shrink:!0,row:!0,gap:4,align:"center",children:[(0,r.jsx)(T.Text,{multiline:!1,children:"Published to App Store"}),l?(0,r.jsx)(e4.Timestamp,{date:l,dateFormat:"relative",placement:"right"}):null]})})}function am(){var e=(0,ey._)(["\n  query DeploymentSuspendedReplOrg($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        org {\n          id\n        }\n      }\n    }\n  }\n"]);return am=function(){return e},e}var ag={},ah=(0,ex.gql)(am()),av=e.i(596139),ay=(0,eU.cssRecord)({deploymentInfoWrapper:[eH.rcss.flex.growAndShrink(1),eH.rcss.rowWithGap(12),{':has( + [data-history-timeline-items="0"])':{"[data-timeline-line]":{display:"none"}}}],deploymentSuspension:[eH.rcss.flex.growAndShrink(1),eH.rcss.colWithGap(12)]});function ax(){var e,t,n,i=(0,tI.default)(),a=(0,nc.useDeploymentCurrentBuild)(),o=(0,nc.useDeploymentDeployability)().deployability,s=(e={variables:{replId:i}},t=(0,h._)({},ag,e),eb.useQuery(ah,t)).data;if(!a)return null;var l=(null==s?void 0:s.getRepl.__typename)==="Repl"&&(null==(n=s.getRepl.org)?void 0:n.__typename)==="Org"?"Org Settings > Billing":"Account > Subscription",u=o.redeploy.isAuthorized?"You can resume your deployment to make it available once again.":"Navigate to ".concat(l," to resolve."),c="If no action is taken your deployment will be deleted ".concat(tM.UBBFailureGracePeriodDays," days after the date it was suspended. For more assistance reach out to support at ");return a.suspendedReason===tE.HostingBuildSuspendedReason.Ubb?(0,r.jsx)(f.View,{css:ay.deploymentInfoWrapper,children:(0,r.jsx)(f.View,{css:ay.deploymentSuspension,children:(0,r.jsx)(tq.StatusBanner,{icon:(0,r.jsx)(ez.default,{}),text:["Your deployment was suspended due to a billing failure. ".concat(u," ").concat(c),(0,r.jsx)("a",{href:"mailto:support@replit.com",children:(0,r.jsx)("u",{children:"support@replit.com"})},""),"."]})})}):a.suspendedReason===tE.HostingBuildSuspendedReason.SubscriptionRequired?(0,r.jsx)(f.View,{css:ay.deploymentInfoWrapper,children:(0,r.jsx)(f.View,{css:ay.deploymentSuspension,children:(0,r.jsx)(tq.StatusBanner,{icon:(0,r.jsx)(ez.default,{}),text:["Your deployment was suspended due to requiring an active ".concat(av.corePlanName," membership. ").concat(u," ").concat(c),(0,r.jsx)("a",{href:"mailto:support@replit.com",children:(0,r.jsx)("u",{children:"support@replit.com"})},""),"."]})})}):null}function ab(){var e=(0,ey._)(["\n  fragment ExecuteScheduledJobExecution on ScheduledJobExecution {\n    id\n    startedAt\n    endedAt\n    status\n  }\n"]);return ab=function(){return e},e}function aS(){var e=(0,ey._)(["\n  mutation ExecuteScheduledJob($deploymentId: String!) {\n    executeScheduledJob(input: { deploymentId: $deploymentId }) {\n      __typename\n      ... on ExecuteScheduledJobResult {\n        execution {\n          ...ExecuteScheduledJobExecution\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return aS=function(){return e},e}e.s(["DeploymentSuspendedReason",()=>ax],368487);var a_={},aw=(0,ex.gql)(ab()),aT=(0,ex.gql)(aS(),aw),aj=e.i(165550),aD=e.i(222342),ak=e.i(559073);function aC(e){var t,n,a=e.disabled,o=e.onSuccessfulExecution,s=(0,nc.useDeploymentId)(),l=(0,nc.useDeploymentCurrentBuild)(),u=(0,i0.useDeploymentMode)(),c=(0,aD.default)().showError,d=(0,b._)((0,i.useState)(),2),p=d[0],f=d[1],m=function(e){f(e.message),c(e.message)},g=(0,b._)((t={onError:m,onCompleted:function(e){var t=e.executeScheduledJob;if("ExecuteScheduledJobResult"===t.__typename){null==o||o(t.execution);return}m(Error("An error occurred while executing the scheduled job"))}},n=(0,h._)({},a_,t),th.useMutation(aT,n)),2),v=g[0],y=g[1].loading,x=!!(!s||!l||y||p||void 0!==a&&a),S=(null==l?void 0:l.status)===tE.HostingBuildStatus.Success,_=u===i1.DeploymentMode.Ready,w=!x&&_&&S,T=_?"You must successfully publish your project before being able to run it":"Can't run while published app is ".concat((0,aj.getReadableMode)(u));return(0,r.jsx)(X.Tooltip,{tooltip:T,isDisabled:w,children:(0,r.jsx)(W.Button,{text:"Run now",iconLeft:y?(0,r.jsx)(en.default,{}):(0,r.jsx)(ak.default,{}),size:"small",disabled:x||!w,onClick:function(){s&&!x&&v({variables:{deploymentId:s}})}})})}function aE(){var e=(0,ey._)(["\n  query GetDomainContactForPurchase {\n    getDomainContactForPurchase {\n      hasSavedContact\n      firstName\n      lastName\n      companyName\n      address1\n      address2\n      city\n      state\n      zip\n      country\n      phone\n      email\n    }\n  }\n"]);return aE=function(){return e},e}e.s(["ExecuteScheduledJobButton",()=>aC],791134);var aA={},aI=(0,ex.gql)(aE()),aR=e.i(719335),aP=e.i(604999),aM=e.i(703774);e.i(375581);var aO=e.i(169099),aN=e.i(584426);function aL(e){var t=e.initialAddress,n=e.onAddressChange,a=e.onValidationChange,o=(0,b._)((0,i.useState)(!1),2),s=o[0],l=o[1],u=(0,i.useRef)("");(0,i.useEffect)(function(){var e=JSON.stringify(t);u.current!==e&&(u.current=e,n(t))},[t,n]);var c=(0,i.useCallback)(function(e){var t=e.value.address,r=e.value.name,i=e.value.phone;a&&a(e.complete);var o="",s="";if(r&&(void 0===r?"undefined":(0,ik._)(r))==="object")o=r.first_name||"",s=r.last_name||"";else if("string"==typeof r){var l=r.trim().split(/\s+/);l.length>1?(o=l[0],s=l.slice(1).join(" ")):o=r}var u=(null==t?void 0:t.state)||"",c=(null==t?void 0:t.postal_code)||"",d=(null==t?void 0:t.city)||"",p=u,f=c,m=d;e.complete&&(u.trim()||(p="N/A"),c.trim()||(f="00000"),d.trim()||(m="N/A")),n({firstName:o,lastName:s,address1:(null==t?void 0:t.line1)||"",address2:(null==t?void 0:t.line2)||"",city:m,state:p,zip:f,country:(null==t?void 0:t.country)||"",phone:i||""})},[n,a]),d=(0,i.useMemo)(function(){return{mode:"billing",fields:{phone:"always"},validation:{phone:{required:"always"}},defaultValues:{firstName:t.firstName,lastName:t.lastName,phone:t.phone,address:{line1:t.address1,line2:t.address2,city:t.city,state:t.state,postal_code:t.zip,country:t.country}},display:{name:"split"}}},[t]);return s?(0,r.jsxs)(T.Text,{children:["Something went wrong loading the address form. Please contact us at"," ",(0,r.jsx)("a",{href:"mailto:support@replit.com",children:"support@replit.com"}),"."]}):(0,r.jsxs)(f.View,{gap:8,children:[(0,r.jsx)(f.View,{style:{display:"none"},children:(0,r.jsx)(aR.PaymentElement,{})}),(0,r.jsx)(aR.AddressElement,{onLoadError:function(){return l(!0)},options:d,onChange:c})]})}function aB(e){var t=(0,aM.useTheme)().isDarkColorScheme,n=t?aO.replitDark:aN.replitLight,i={theme:t?"night":"stripe",variables:{colorPrimary:n.values.global.foregroundDefault,colorBackground:n.values.global.backgroundHigher,colorText:n.values.global.foregroundDefault,colorTextPlaceholder:n.values.global.foregroundDimmest,focusOutline:"2px solid ".concat(n.values.global.accentPrimaryDefault),colorDanger:n.values.global.accentNegativeDefault,colorDangerText:n.values.global.accentNegativeDefault,fontFamily:"'IBM Plex Sans', sans-serif",spacingUnit:"0px",fontSizeBase:S.values.fontSizeDefault,focusBoxShadow:"0",borderRadius:S.values.space4,gridRowSpacing:S.values.space8},rules:{".Input":{boxShadow:"0px",fontSize:S.values.fontSizeDefault,lineHeight:S.values.lineHeightDefault,padding:"".concat(S.values.space4," ").concat(S.values.space8),outlineOffset:eH.sharedFocusStyles.outlineOffset},".Label":{paddingBottom:S.values.space4,marginBottom:"0px",fontSize:S.values.fontSizeSmall,lineHeight:S.values.lineHeightSmall},".Block":{boxShadow:"0px"},".DropdownItem":{boxShadow:"0px"}}};return(0,r.jsx)(f.View,{children:(0,r.jsx)(aP.default,{options:{appearance:i,mode:"setup",currency:"usd",payment_method_types:["card"]},children:(0,r.jsx)(aL,(0,h._)({},e))})})}var aV=e.i(939562),aU=e.i(887877),aF=e.i(795581),aH=e.i(352767),aG=(0,eU.cssRecord)({scrollArea:[{overflowY:"auto",minHeight:0,maxHeight:"100%"}],primaryActionButton:[eH.rcss.py(12),{fontSize:S.tokens.fontSizeDefault}],root:[eH.rcss.overflow("hidden")],relativeContainer:[{position:"relative",minHeight:0,maxHeight:"100%"}]});function az(e){var t,n,a,o=e.selectedDomain,s=e.onSubmit,l=e.onBack,u=e.isSubmitting,c=e.preservedContactInfo,d=(t={fetchPolicy:"network-only",skip:!!c,ssr:!1},n=(0,h._)({},aA,t),eb.useQuery(aI,n)),p=d.data,m=d.loading,g=(0,b._)((0,i.useState)({firstName:"",lastName:"",companyName:"",address1:"",address2:"",city:"",state:"",zip:"",country:"US",phone:"",email:""}),2),y=g[0],x=g[1],S=(0,b._)((0,i.useState)(!1),2),_=S[0],j=S[1],D=(0,b._)((0,i.useState)(!1),2),k=D[0],C=D[1];(0,i.useEffect)(function(){if(c)x(c);else if(null==p?void 0:p.getDomainContactForPurchase){var e=p.getDomainContactForPurchase;x({firstName:e.firstName,lastName:e.lastName,companyName:e.companyName||"",address1:e.address1,address2:e.address2||"",city:e.city,state:e.state,zip:e.zip,country:e.country,phone:e.phone,email:e.email})}},[p,c]);var E=function(){I&&s(y)},A=(0,i.useCallback)(function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},[]),I=_&&k,R=(0,i.useCallback)(function(e){x(function(t){return(0,h._)({},t,e)})},[]),P=(0,i.useMemo)(function(){return{firstName:y.firstName||"",lastName:y.lastName||"",address1:y.address1||"",address2:y.address2||"",city:y.city||"",state:y.state||"",zip:y.zip||"",country:y.country||"US",phone:y.phone||""}},[y.firstName,y.lastName,y.address1,y.address2,y.city,y.state,y.zip,y.country,y.phone]);return((0,i.useEffect)(function(){y.email&&C(A(y.email))},[y.email,A]),m)?(0,r.jsxs)(f.View,{align:"center",p:8,children:[(0,r.jsx)(en.default,{size:16}),(0,r.jsx)(T.Text,{children:"Loading your information..."})]}):(0,r.jsxs)(f.View,{p:8,gap:16,css:aG.root,shrink:!0,children:[(0,r.jsxs)(f.View,{row:!0,gap:8,align:"center",children:[(0,r.jsx)(nV.IconButton,{alt:"Go back",onClick:l,children:(0,r.jsx)(aH.default,{})}),(0,r.jsx)(T.Header,{level:2,children:"Domain registration contact"}),(0,r.jsx)(eG.Pill,{colorway:"primary",text:"Beta"})]}),(0,r.jsx)(f.View,{css:aG.relativeContainer,shrink:!0,children:(0,r.jsxs)(f.View,{css:aG.scrollArea,gap:16,children:[(0,r.jsx)(f.View,{gap:8,children:(0,r.jsx)(T.Text,{color:"dimmer",children:"This information will be used for WHOIS records and domain registration. You can edit any field below."})}),(0,r.jsxs)(aU.Form,{onSubmit:function(e){e.preventDefault(),E()},children:[(0,r.jsx)(w.Surface,{p:16,children:(0,r.jsxs)(f.View,{gap:12,children:[(0,r.jsxs)(aF.TextField,{name:"companyName",children:[(0,r.jsx)($.Label,{children:"Company name (optional)"}),(0,r.jsx)(nr.Input,{value:null!=(a=y.companyName)?a:"",onChange:function(e){return x((0,v._)((0,h._)({},y),{companyName:e.target.value}))},disabled:u})]}),(0,r.jsx)(aB,{initialAddress:P,onAddressChange:R,onValidationChange:j}),(0,r.jsxs)(aF.TextField,{isRequired:!0,name:"email",type:"email",children:[(0,r.jsx)($.Label,{children:"Email"}),(0,r.jsx)(nr.Input,{value:y.email,onChange:function(e){var t=e.target.value;x((0,v._)((0,h._)({},y),{email:t})),C(A(t))},disabled:u}),(0,r.jsx)(aV.FieldError,{})]})]})}),(0,r.jsx)(f.View,{justify:"center",children:(0,r.jsx)(W.Button,{variant:"default",colorway:"positive",type:"submit",loading:u,text:"Continue with ".concat(o.domainName),disabled:!I||u,css:aG.primaryActionButton})})]})]})})]})}e.s(["ContactStep",()=>az],793203);var aq=e.i(739521);function aW(e){var t=e.isOpen,n=e.selectedDomain,i=e.onSubmit,a=e.onClose,o=e.isSubmitting;return(0,r.jsx)(aq.Modal,{isOpen:t,onRequestClose:a,children:(0,r.jsx)(az,{selectedDomain:n,onSubmit:i,onBack:a,isSubmitting:o,preservedContactInfo:null})})}function aK(){var e=(0,ey._)(["\n  query SearchForDomain($input: SearchDomainsInput!) {\n    searchDomains(input: $input) {\n      ... on DomainSearchOutput {\n        results {\n          domainName\n          sld\n          tld\n          purchasable\n          premium\n          purchasePrice\n          purchaseType\n          renewalPrice\n          years\n        }\n      }\n    }\n  }\n"]);return aK=function(){return e},e}e.s(["DomainContactModal",()=>aW],295745);var a$={},aY=(0,ex.gql)(aK());function aX(e){var t=(0,h._)({},a$,e);return eb.useQuery(aY,t)}e.s(["useSearchForDomainQuery",()=>aX],341734);var aQ=e.i(162914),aJ=e.i(187505);function aZ(e){return null==e?"N/A":"$".concat(e.toFixed(2))}function a0(e,t){switch(t.type){case"select_domain":return{step:"contact",selectedDomain:t.payload,contactInfo:null};case"contact_submitted":if(null==e.selectedDomain)throw Error("Selected domain is null");return{step:"confirm",selectedDomain:e.selectedDomain,contactInfo:t.payload,purchaseErrorMessage:null};case"edit_contact":if("confirm"!==e.step)break;return{step:"contact",selectedDomain:e.selectedDomain,contactInfo:e.contactInfo};case"purchase_failed":if(null==e.selectedDomain||"confirm"!==e.step)throw Error("Invalid state for purchase failure");return{step:"confirm",selectedDomain:e.selectedDomain,contactInfo:e.contactInfo,purchaseErrorMessage:t.payload};case"search":return{step:"search",selectedDomain:null,contactInfo:null};case"processing":if(null==e.selectedDomain||"confirm"!==e.step)throw Error("Invalid state for processing");return{step:"processing",selectedDomain:e.selectedDomain,contactInfo:e.contactInfo}}return e}function a1(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{step:"search",selectedDomain:null,contactInfo:null},t=(0,b._)((0,i.useReducer)(a0,e),2);return{state:t[0],dispatch:t[1]}}e.s(["formatPrice",()=>aZ,"useDomainState",()=>a1],828454);var a2=e.i(85742),a4=e.i(698043),a8=e.i(498540),a3=e.i(503536),a6=e.i(431601),a5=e.i(792130),a7=(0,eU.cssRecord)({scrollArea:[eH.rcss.maxHeight(350),{display:"flex",flexDirection:"column",overflowY:"auto",paddingBottom:8}],domainResult:[eH.rcss.borderRadius(8),eH.rcss.border({color:S.tokens.outlineDimmer}),eH.rcss.hover([eH.rcss.border({color:S.tokens.outlineDefault}),eH.rcss.backgroundColor.accentPrimaryDimmest]),eH.rcss.mb(8),{flexShrink:0}],noResults:[eH.rcss.borderRadius(8),eH.rcss.border({color:S.tokens.outlineDimmer}),eH.rcss.mb(8)]});function a9(e){var t,n,a,o,s,l,u,c=e.onClaimAndPublish,d=e.disabled,p=void 0!==d&&d,m=e.isPublishing,g=void 0!==m&&m,h=e.isRepublish,v=void 0!==h&&h,y=(0,b._)((0,i.useState)(null),2),x=y[0],_=y[1],w=(0,b._)((0,i.useState)(!0),2),j=w[0],D=w[1],k=(0,aJ.useTrackClick)().trackClick,C=(n=(t=(0,b._)((0,i.useState)(""),2))[0],a=t[1],l=(s=aX({variables:{input:{keyword:o=(0,aQ.default)(n,500)}},skip:!o})).data,u=s.loading,{searchTerm:n,setSearchTerm:a,qualifyingDomains:((null==l?void 0:l.searchDomains)&&"DomainSearchOutput"===l.searchDomains.__typename?l.searchDomains.results.filter(function(e){return null!=e}):[]).filter(function(e){return null!=e.purchasePrice&&e.purchasePrice<=nu.FREE_DOMAIN_PRICE_CAP_DOLLARS&&!0===e.purchasable}),debouncedSearchTerm:o,loading:u||n!==o}),E=C.searchTerm,A=C.setSearchTerm,I=C.qualifyingDomains,R=C.debouncedSearchTerm,P=C.loading;(0,i.useEffect)(function(){x&&E!==x.domainName&&(_(null),D(!0))},[E,x]);var M=E.length>0,O=x?v?"Claim and republish":"Claim and publish":v?"Republish":"Publish";return(0,r.jsxs)(f.View,{clsx:a5.default.container,children:[(0,r.jsx)(f.View,{clsx:a5.default.header,children:(0,r.jsxs)(T.Text,{variant:"small",clsx:a5.default.headerText,children:["Claim your free domain up to $",nu.FREE_DOMAIN_PRICE_CAP_DOLLARS]})}),(0,r.jsx)(f.View,{clsx:a5.default.content,children:(0,r.jsxs)(f.View,{gap:8,children:[(0,r.jsxs)(f.View,{row:!0,gap:8,align:"center",children:[(0,r.jsx)(nP.default,{size:16}),(0,r.jsx)(T.Text,{variant:"small",children:"Search for a domain"})]}),(0,r.jsxs)(a4.SearchableListBox,{children:[(0,r.jsx)(a8.SearchField,{placeholder:"Search for a domain...",value:E,onChange:function(e){return A(e)},isDisabled:p||g}),j&&M?(0,r.jsx)(a2.ListBox,{css:a7.scrollArea,onAction:function(e){var t=I.find(function(t){return t.domainName===e});t&&(_(t),A(t.domainName),D(!1))},items:I,isLoading:P,renderEmptyState:function(){return P?null:(0,r.jsx)(f.View,{css:a7.noResults,align:"center",justify:"center",p:16,children:(0,r.jsxs)(T.Text,{color:"dimmer",children:['No qualifying domains found for "',R,'"']})})},disabledKeys:p||g?I.map(function(e){return e.domainName}):[],children:function(e){return(0,r.jsxs)(a2.BaseListBoxItem,{textValue:"".concat(e.domainName," - ").concat(e.purchasable?"available":"unavailable"," ").concat(e.years>1?"".concat(aZ(e.purchasePrice)," for ").concat(e.years," years"):aZ(e.purchasePrice)),id:e.domainName,css:a7.domainResult,children:[(0,r.jsxs)(f.View,{gap:4,grow:!0,children:[(0,r.jsxs)(f.View,{row:!0,gap:4,align:"center",children:[(0,r.jsx)(T.Text,{children:e.domainName}),e.purchasable?(0,r.jsx)(f.View,{row:!0,gap:2,align:"center",children:(0,r.jsx)(J.default,{size:12,color:S.tokens.accentPositiveDefault})}):null,e.premium?(0,r.jsx)(a6.default,{size:12,color:S.tokens.accentPrimaryDefault}):null]}),null!=e.renewalPrice&&(0,r.jsx)(T.Text,{variant:"small",color:"dimmer",children:e.years>1?(0,r.jsx)(X.Tooltip,{tooltip:"Some domains such as .ai must be purchased and renewed in multi-year increments. Your domain will renew every ".concat(e.years," years for the displayed price."),children:(0,r.jsxs)("span",{children:["Renews at ",aZ(e.renewalPrice)," ","every ",e.years," years"]})}):(0,r.jsxs)(r.Fragment,{children:["Renews at ",aZ(e.renewalPrice),"/yr"]})})]}),(0,r.jsxs)(f.View,{row:!0,gap:8,align:"center",children:[(0,r.jsx)(T.Text,{clsx:a5.default.strikethroughPrice,children:e.years>1?(0,r.jsx)(X.Tooltip,{tooltip:"Some domains such as .ai must be purchased and renewed in multi-year increments. You will be charged for ".concat(e.years," years up front."),children:(0,r.jsxs)("span",{children:[aZ(e.purchasePrice)," for"," ",e.years," years"]})}):aZ(e.purchasePrice)}),(0,r.jsx)(T.Text,{clsx:a5.default.freeText,children:"Free"})]})]},e.domainName)}}):null]}),x?(0,r.jsxs)(f.View,{row:!0,gap:4,align:"center",children:[(0,r.jsx)(J.default,{color:S.tokens.accentPositiveDefault}),(0,r.jsx)(T.Text,{style:{color:S.tokens.accentPositiveStrongest},multiline:!1,children:v?"Republish your App to complete domain setup":"Publish your App to complete domain setup"})]}):null]})}),(0,r.jsx)(f.View,{clsx:a5.default.buttonContainer,children:(0,r.jsx)(W.Button,{colorway:"primary",onClick:function(){x?k({productArea:"publishing",target:v?"claim_and_republish_button":"claim_and_publish_button"}):k({productArea:"publishing",target:v?"republish_button":"publish_button"}),c(x)},text:O,iconLeft:(0,r.jsx)(a3.default,{}),disabled:p||g,loading:g,clsx:a5.default.button})})]})}e.s(["FreeDomainClaimSection",()=>a9],870078);var oe=e.i(79271);function ot(e){var t=e.withBorder;return(0,r.jsx)(w.Surface,{p:16,clsx:[oe.default.container,void 0!==t&&t&&oe.default.withBorder],children:(0,r.jsxs)(f.View,{gap:8,children:[(0,r.jsxs)(f.View,{row:!0,gap:8,align:"center",children:[(0,r.jsx)(nP.default,{size:16}),(0,r.jsx)(T.Text,{clsx:oe.default.header,children:"For a limited time, get a free domain when you upgrade."})]}),(0,r.jsx)(T.Text,{children:"Upgrade and get a free domain for your App! Plus persistent publishing, backend support, powerful models, and more."})]})})}function on(e,t){switch(t.type){case"select_domain":return{step:"domain_selected",selectedDomain:t.payload,contactInfo:null};case"submit_contact":if("domain_selected"!==e.step||null==e.selectedDomain)return e;return{step:"contact_submitted",selectedDomain:e.selectedDomain,contactInfo:t.payload};case"start_deployment":if("contact_submitted"!==e.step||null==e.selectedDomain||null==e.contactInfo)return console.error("Invalid state for deployment start",e),e;return{step:"deploying",selectedDomain:e.selectedDomain,contactInfo:e.contactInfo};case"reset":return{step:"idle",selectedDomain:null,contactInfo:null};default:return e}}function or(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{step:"idle",selectedDomain:null,contactInfo:null},t=(0,b._)((0,i.useReducer)(on,e),2);return{state:t[0],dispatch:t[1]}}function oi(){var e=(0,ey._)(["\n  query HasFreeDomainCredit {\n    currentUser {\n      id\n      hasFreeDomainCredit\n      isSubscribed\n    }\n  }\n"]);return oi=function(){return e},e}e.s(["FreeDomainUpsellInfoBox",()=>ot],591069),e.s(["useFreeDomainState",()=>or],825811);var oa={},oo=(0,ex.gql)(oi());function os(e){var t=(0,h._)({},oa,e);return eb.useQuery(oo,t)}e.s(["useHasFreeDomainCreditQuery",()=>os],130356)},76430,e=>{"use strict";var t=e.i(297083),n=e.i(530658),r=e.i(817556),i=e.i(389959),a=e.i(993796),o=e.i(927158);function s(e){var t,n;return!!e&&!(e.length<2)&&null!=(n=null==(t=e[1])?void 0:t.endsWith(".bin/expo"))&&n}function l(e){var t;return!!e.isOpen&&s(null==(t=e.processInfo)?void 0:t.cmdline)}function u(){var e,s,l,u,c=(0,a.useFlag)({controlName:"flag-exponential-amplifier"}),d=(s=(e=(0,n._)((0,i.useState)(),2))[0],l=e[1],u=(0,o.usePid2Callback)(function(e){return function(){return e.agentReplConfig.getReplConfig.rpc({})}}),(0,i.useEffect)(function(){(0,t._)(function(){var e;return(0,r._)(this,function(t){switch(t.label){case 0:if(!u)return[2];return[4,u()];case 1:if(!(e=t.sent()).ok)return[2];return l("EXPO"===e.payload.stack),[2]}})})()},[u]),s);return c&&!0===d}e.s(["isProbablyExpoCmdline",()=>s,"isProbablyExpoPort",()=>l,"useIsExpoStackWithLaunchEnabled",()=>u])},867559,e=>{e.v({self:"FreeTierUpsellBanner-module__NxVGBW__self",text:"FreeTierUpsellBanner-module__NxVGBW__text"})},976191,57354,452831,635528,398594,605526,e=>{"use strict";var t=e.i(297083),n=e.i(167626),r=e.i(530658),i=e.i(346715),a=e.i(817556),o=e.i(517884),s=e.i(389959),l=e.i(131141),u=e.i(664219),c=e.i(368964),d=e.i(569910),p=e.i(379334),f=e.i(967963),m=e.i(903381),g=e.i(262664),h=e.i(424746),v=e.i(483820),y=e.i(399344),x=e.i(914279),b=e.i(479373),S=e.i(107129),_=e.i(729678),w=e.i(331820),T=e.i(34912),j=e.i(397094),D=e.i(276385),k=e.i(255615),C=e.i(654647),E=e.i(178339),A=e.i(137737),I=e.i(500179),R=e.i(32144);e.s(["DeploymentInfo",()=>eW,"LabeledSection",()=>eq,"Type",()=>ez],635528);var P=e.i(721281),M=e.i(366492),O=e.i(358637),N=e.i(11176),L=e.i(99276),B=e.i(916973),V=e.i(830597),U=e.i(68893),F=e.i(241703),H=e.i(863753),G=e.i(463202),z=e.i(691302),q=e.i(368487),W=e.i(791134),K=e.i(295745),$=e.i(870078),Y=e.i(591069),X=e.i(825811),Q=e.i(130356),J=e.i(76430);function Z(e){var t,n=e.hasFreeDomainsFlagEnabled,r=e.isAzureDeployment,i=e.isOrgRepl,a=e.isDeployable,o=void 0===a||a,l=(0,V.useValue)(y.hideFreeDomainClaimSectionAtom),u=(0,V.useSet)(y.hideFreeDomainClaimSectionAtom),c=(0,V.useSet)(y.claimedFreeDomainAtom),d=(0,J.useIsExpoStackWithLaunchEnabled)(),p=(0,y.useFreeTierCloudServices)(),f=(0,Q.useHasFreeDomainCreditQuery)({fetchPolicy:"cache-and-network",ssr:!1}),m=f.data,g=f.loading,h=f.refetch,v=(0,s.useMemo)(function(){if(!n||r||i||d||g)return null;var e,t,a=null!=(t=null==m||null==(e=m.currentUser)?void 0:e.hasFreeDomainCredit)&&t;return p||!a||l?!p||a||o?null:"upsell":"claim"},[n,r,i,d,g,null==m||null==(t=m.currentUser)?void 0:t.hasFreeDomainCredit,p,o,l]);return{freeDomainData:m,freeDomainLoading:g,freeDomainSectionToShow:v,refetchFreeDomainCredit:h,hideClaimSection:function(e){u(!0),e&&c(e)}}}e.s(["useFreeDomainSection",()=>Z],57354);var ee=e.i(754458),et=e.i(777373),en=e.i(222342),er=e.i(610357),ei=e.i(480028),ea=e.i(446530),eo=e.i(613355),es=e.i(136540),el=e.i(604963),eu=e.i(396776),ec=e.i(960178),ed=e.i(625484),ep=e.i(51606),ef=e.i(530310),em=e.i(26995),eg=(0,ea.cssRecord)({qrCodeWrapper:[eo.rcss.borderRadius(4),{backgroundColor:"white"}]}),eh=function(e){var n=e.currentBuild,i=e.optimisticDomain,o=(0,en.default)().showConfirm,l=(0,et.useProviderInternalDomain)(),u=l.getInternalDomain,f=l.isShowingFallback,m=l.fallbackDomain,g=(0,V.useSet)(y.claimedFreeDomainAtom),h=(0,r._)((0,s.useState)([]),2),v=h[0],x=h[1];return(0,s.useEffect)(function(){var e=(null==(a=n.repl.hostingDeployment)?void 0:a.__typename)==="HostingDeployment"&&n.repl.hostingDeployment.id,t=[],r=n.provider;switch(r){case c.HostingBuildProvider.Gce:case c.HostingBuildProvider.AzureVm:case c.HostingBuildProvider.CloudRun:case c.HostingBuildProvider.AzureContainerApp:case c.HostingBuildProvider.Static:var a,o,s,l,p=(null==(o=n.repl.hostingDeployment)?void 0:o.__typename)==="HostingDeployment"?null==(s=n.repl.hostingDeployment)?void 0:s.replitAppSubdomain:void 0;!p&&(null==(l=n.repl.owner)?void 0:l.username)&&(p="".concat(n.repl.slug,"-").concat(n.repl.owner.username)),p&&t.push({href:"https://".concat(p).concat(u({provider:r})),private:!1});break;case c.HostingBuildProvider.Extension:case c.HostingBuildProvider.Cron:break;default:(0,d.default)(r)}if(n.repl.domains){var f=n.repl.domains.filter(function(t){return(null==t?void 0:t.hosting_deployment_id)===e}),m=!0,h=!1,v=void 0;try{for(var y,b=f[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var S=y.value;S&&t.push({href:"https://".concat(S.domain),private:!1,state:"verified"!==S.state?S.state:void 0})}}catch(e){h=!0,v=e}finally{try{m||null==b.return||b.return()}finally{if(h)throw v}}}if(i){var _="https://".concat(i),w=t.some(function(e){return e.href===_});w?w&&g(null):t.push({href:_,private:!1,state:"pending"})}x(t)},[n,u,i,g]),(0,D.jsxs)(ed.View,{gap:2,grow:!0,shrink:!0,children:[f?(0,D.jsx)(eu.StatusBanner,{colorway:"warning",text:"The ".concat(p.DEPLOYMENTS_DEFAULT_DOMAIN," domain is currently unavailable, please use the ").concat(m," URL below.")}):null,v.map(function(e,n){return(0,D.jsxs)(ed.View,{row:!0,gap:8,align:"center",children:[(0,D.jsx)(ec.Text,{css:[eo.rcss.flex.shrink(1)],multiline:!1,children:(0,D.jsx)("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",css:[eo.rcss.color.foregroundDefault,{textDecoration:"none","&:hover":{textDecoration:"underline"}}],children:e.href})}),e.private?(0,D.jsx)(ef.default,{color:ei.tokens.foregroundDefault}):null,(0,D.jsx)(es.IconButton,{alt:"Copy URL",onClick:function(){return(0,t._)(function(){return(0,a._)(this,function(t){switch(t.label){case 0:return[4,(0,er.default)(e.href)];case 1:return t.sent(),o("Domain URL copied to clipboard!"),[2]}})})()},children:(0,D.jsx)(ep.default,{})}),(0,D.jsx)(ev,{url:e.href}),e.state?(0,D.jsxs)(ec.Text,{multiline:!1,children:["(","pushed_to_goval"===e.state||"temporal_verification"===e.state?"verifying":e.state,")"]}):null]},"domains-".concat(n))})]})};function ev(e){var t=e.url,n=(0,r._)((0,s.useState)(!1),2),i=n[0],a=n[1];return(0,D.jsxs)(el.PopoverTrigger,{isOpen:i,onOpenChange:function(e){return a(e)},label:"QR Code",children:[(0,D.jsx)(es.IconButton,{alt:"QR Code",children:(0,D.jsx)(em.default,{})}),(0,D.jsx)(ed.View,{align:"start",children:(0,D.jsx)(ed.View,{css:eg.qrCodeWrapper,p:8,children:(0,D.jsx)(ee.default,{size:128,value:t})})})]})}var ey=e.i(993796),ex=e.i(207237),eb=e.i(315315),eS=e.i(806804),e_=e.i(418725),ew=e.i(492267),eT=e.i(199674),ej=e.i(596139),eD=e.i(546284),ek=e.i(443394),eC=e.i(929872),eE=e.i(867559);function eA(e){switch(e){case"neon":return{productName:"production database",upgradeReason:"persist your production data long term",modalHeading:"Upgrade to keep your database",modalSubHeading:"Get a permanent PostgreSQL database with Replit ".concat(ej.corePlanName)};case"deployment":return{productName:"published app",upgradeReason:"keep your published app running",modalHeading:"Upgrade to keep your published app",modalSubHeading:"Keep your app running 24/7 with Replit ".concat(ej.corePlanName)};case"object_storage":return{productName:"object storage",upgradeReason:"store your files permanently",modalHeading:"Upgrade for permanent file storage",modalSubHeading:"Store your files permanently with Replit ".concat(ej.corePlanName)};default:(0,d.default)(e)}}function eI(e){var t=e.product,n=e.suspendedReason,r=e.scheduledSuspensionTime,i=e.scheduledDeletionTime,a=(0,ek.getCurrentUrl)();if(void 0===i)return null;var o=new Date,s=function(e){var t=e.product,n=e.suspendedReason,r=e.daysTillScheduledSuspension,i=e.daysTillScheduledDeletion,a=eA(t),o=a.productName,s=a.upgradeReason,l=(0,eD.default)("day",i);if(n===c.HostingBuildSuspendedReason.FreeTierCloudBudgetExceeded||n===c.NeonDatabaseFrozenReason.FreeTierCloudBudgetExceeded||n===c.ObjectStorageSuspendedReason.FreeTierCloudBudgetExceeded)return"Your ".concat(o," has been suspended and will expire in ").concat(i," ").concat(l," because you've used up your free Cloud credits. To unsuspend, upgrade to ").concat(ej.corePlanName,".");if(null!=n)return"Your ".concat(o," has been suspended and will expire in ").concat(i," ").concat(l,". Upgrade to ").concat(ej.corePlanName," to unsuspend.");if(void 0!==r){var u=(0,eD.default)("day",r);return"Your ".concat(o," will be suspended in ").concat(r," ").concat(u," and expire in ").concat(i," ").concat(l,". Upgrade to ").concat(s,".")}return"Your ".concat(o," will expire in ").concat(i," ").concat(l,". Upgrade to ").concat(s,".")}({product:t,suspendedReason:n,daysTillScheduledSuspension:r?Math.max(0,(0,eT.differenceInDays)(new Date(r),o)):void 0,daysTillScheduledDeletion:Math.max(0,(0,eT.differenceInDays)(new Date(i),o))}),l=eA(t),u=l.modalHeading,d=l.modalSubHeading;return(0,D.jsxs)(eC.Surface,{gap:12,p:12,row:!0,elevated:!0,className:eE.default.self,align:"center",justify:"space-between",wrap:"wrap",children:[(0,D.jsx)(ed.View,{className:eE.default.text,children:(0,D.jsx)(ec.Text,{children:s})}),(0,D.jsx)(e_.default,{context:"workspace_free_tier_upsell_banner_".concat(t),text:"Upgrade to ".concat(ej.corePlanName),variant:"default",colorway:"primary",redirectPath:a,modalHeadingText:u,modalSubHeadingText:d})]})}e.s(["FreeTierUpsellBanner",()=>eI],452831);var eR=e.i(293265),eP=e.i(967629),eM=e.i(140487),eO=e.i(624782),eN=e.i(283110),eL=e.i(987154),eB=e.i(952030),eV=e.i(42458),eU=(0,eP.keyframes)("\n    50% {\n      background-color: ".concat(ei.tokens.accentPositiveDimmest,";\n      outline: 1px solid ").concat(ei.tokens.accentPositiveDimmer,";\n      box-shadow: 0px 0px 32px rgba(0, 145, 24, 0.3);\n    }\n")),eF=(0,ea.cssRecord)({deploymentInfo:[eo.rcss.colWithGap(8),eo.rcss.p(16),eo.rcss.borderRadius(),{outline:"1px solid transparent"}]}),eH=(0,ea.cssRecord)({textButton:[eo.rcss.reset.button,eo.rcss.color.foregroundDimmest,eo.rcss.hover(eo.rcss.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":[eo.rcss.cursor.pointer,eo.rcss.color.accentPrimaryStronger,eo.rcss.focusRing]}],textLink:eo.rcss.hover(eo.rcss.color.accentPrimaryStrongest),labeledSection:[eo.rcss.flex.growAndShrink(1),(0,P._)({},eo.container.min(400),[eo.rcss.flex.row,eo.rcss.align.baseline])],labeledSectionFullWidth:[eo.rcss.flex.growAndShrink(1),(0,P._)({},eo.container.min(400),[eo.rcss.flex.row,eo.rcss.align.baseline,eo.rcss.flex.grow(1),eo.rcss.justify.spaceBetween])],deploymentInfo:eF.deploymentInfo,deploymentInfoAnimate:[eF.deploymentInfo,{animation:"".concat(eU," 700ms ease-out")}],deploymentInfoTitle:[eo.rcss.flex.wrap,eo.rcss.flex.shrink(0),eo.rcss.justify.spaceBetween],deploymentInfoContent:[(0,P._)({},eo.container.min(400),eo.rcss.colWithGap(4))],typeColumn:[eo.rcss.flex.wrap,eo.rcss.flex.shrink(1)]}),eG=function(e){var t=e.text,n=e.onClick,r=e.disabled;return(0,D.jsx)("button",{css:eH.textButton,onClick:n,disabled:void 0!==r&&r,children:t})},ez=function(e){var t=e.name,n=e.isAzure,r=e.sku,i=e.canManage,a=e.usageLink,o=e.onManageClick;return(0,D.jsxs)(ed.View,{css:eH.typeColumn,row:!0,gap:6,children:[(0,D.jsx)(ec.Text,{multiline:!1,children:t}),r?(0,D.jsxs)(ec.Text,{color:"dimmest",multiline:!1,children:["(",void 0!==n&&n?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(z.AzureLogo,{style:{position:"relative",top:"2px"}})," -"," "]}):null,r,")"]}):null,"function"==typeof o?(0,D.jsx)(eG,{text:"Manage",onClick:o,disabled:!i}):null,a?(0,D.jsx)(M.default,{href:"/usage",css:eH.textLink,children:(0,D.jsx)(ec.Text,{children:"See all usage"})}):null]})},eq=function(e){var t=e.label,n=e.children,r=e.fullWidth;return(0,D.jsxs)(ed.View,{css:r?eH.labeledSectionFullWidth:eH.labeledSection,children:[(0,D.jsx)(ed.View,{css:eo.rcss.minWidth(100),children:(0,D.jsx)(ec.Text,{color:"dimmer",multiline:!1,children:t})}),n]})},eW=function(e){var n=e.provider,r=e.machine,i=e.onViewBuildLogs,o=e.onManageClick,l=e.onViewAction,u=(0,x.useDeploymentMode)(),p=(0,y.useDeploymentCurrentBuild)(),f=(0,y.useDeploymentInProgressBuild)(),m=(0,h.useNeonProductionDatabase)().database,g=(0,y.useDeployBuild)().redeployWithNoNewOptions,v=(0,y.useSetDeploymentTriggerSource)(),b=(0,y.useFreeTierCloudServices)(),S=(0,y.useDeploymentScheduledDeletionTime)(),_=(0,V.useValue)(y.claimedFreeDomainAtom),w=(0,X.useFreeDomainState)(),T=w.state,k=w.dispatch,C=(0,s.useRef)(null),E="domain_selected"===T.step||"contact_submitted"===T.step,A=void 0!==p,I=n!==c.HostingBuildProvider.Static&&A&&null===p.hasImageTag,R=n===c.HostingBuildProvider.AzureContainerApp||n===c.HostingBuildProvider.AzureVm,P=!!((u===U.DeploymentMode.Ready||u===U.DeploymentMode.Suspended)&&!I&&!R&&!b),M=!!(null==p||null==(eQ=p.repl)||null==(eX=eQ.org)?void 0:eX.id),z=(0,ex.default)(),Q=(0,ew.useIsAgentStackRepl)().isAgentStackRepl,J=(0,eR.useAgentStackPlatformType)().agentStackPlatformType,ee=(0,O.useHostingDeploymentSettingsAuthzQuery)({variables:{replId:z,provider:null!=n?n:c.HostingBuildProvider.CloudRun},skip:!n}).data,et=((null==ee||null==(eJ=ee.getRepl)?void 0:eJ.__typename)==="Repl"?ee.getRepl.authorizations:{addCustomDomain:{isAuthorized:!1}}).addCustomDomain.isAuthorized,en=(0,ey.useFlag)({controlName:"flag-free-domains",default:!1}),er=u===U.DeploymentMode.Deploying||u===U.DeploymentMode.Preparing||!!f,ea=Z({hasFreeDomainsFlagEnabled:en,isAzureDeployment:R,isOrgRepl:M,isDeployable:!1}),eo=ea.freeDomainSectionToShow,el=ea.refetchFreeDomainCredit,ep=ea.hideClaimSection,em=(0,s.useCallback)(function(e){return(0,t._)(function(){return(0,a._)(this,function(t){switch(t.label){case 0:if(!e)return[3,1];return k({type:"select_domain",payload:e}),[3,3];case 1:return v("deployments_pane_republish_button"),[4,g({hasAgentSession:!1})];case 2:t.sent(),t.label=3;case 3:return[2]}})})()},[k,v,g]),eg=(0,s.useCallback)(function(e){return(0,t._)(function(){return(0,a._)(this,function(t){switch(t.label){case 0:if(k({type:"submit_contact",payload:e}),v("deployments_pane_claim_and_republish_button"),!("domain_selected"===T.step&&T.selectedDomain))return[3,2];return C.current=T.selectedDomain.domainName,k({type:"start_deployment"}),[4,g({hasAgentSession:!1,purchaseDomain:(0,j.createDomainPurchaseInput)(T.selectedDomain,e,!0)})];case 1:t.sent(),k({type:"reset"}),t.label=2;case 2:return[2]}})})()},[T,k,v,g]),ev=null,eT=null,ej=null,eD=null,ek=null,eE=(0,s.useRef)(void 0);(0,s.useEffect)(function(){f&&(eE.current=null==f?void 0:f.id)},[f,null==f?void 0:f.id]);var eA=(null==p?void 0:p.status)===c.HostingBuildStatus.Success,eP=(null==p?void 0:p.id)===eE.current,eU=eA&&eP;(0,s.useEffect)(function(){eU&&C.current&&!er&&(ep(C.current),C.current=null)},[eU,ep,er]);var eF=!!((null==p?void 0:p.provider)!==c.HostingBuildProvider.Cron&&!Q),eW=function(){switch(J){case c.AgentStackPlatformType.Slack:return"Slack";case c.AgentStackPlatformType.Telegram:return"Telegram";case c.AgentStackPlatformType.TimeBased:return"Time-based Automation"}}(),eK=Q&&eW,e$=!!S,eY=S?(0,eb.formatDate)(S):null;switch(p&&(eT=(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(eq,{label:"Status",children:(0,D.jsx)(ed.View,{shrink:!0,row:!0,gap:4,align:"center",children:(0,D.jsx)(L.BuildStatus,{onClick:function(){i(p)}})})}),Q?null:(0,D.jsx)(eq,{label:"Visibility",children:(0,D.jsx)(ed.View,{shrink:!0,row:!0,gap:4,align:"center",children:p.isPrivate?(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(ef.default,{color:ei.tokens.foregroundDefault}),(0,D.jsx)(ec.Text,{multiline:!1,children:"Private"})]}):(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(eL.default,{color:ei.tokens.foregroundDefault}),(0,D.jsx)(ec.Text,{multiline:!1,children:"Public"})]})})}),(0,D.jsx)(G.AppStoreLaunchInfo,{}),eF?(0,D.jsx)(eq,{label:"Domain",children:(0,D.jsxs)(ed.View,{shrink:!0,gap:8,children:[(0,D.jsx)(eh,{currentBuild:p,optimisticDomain:_||void 0}),R||M||!et?null:(0,D.jsx)("div",{children:(0,D.jsx)(eM.Button,{variant:"outlined",text:"Buy a new domain",iconLeft:(0,D.jsx)(eB.default,{}),size:"small",iconRight:(0,D.jsx)(eO.Pill,{compact:!0,colorway:"primary",text:"Beta"}),onClick:function(){l({type:F.ViewActionType.ChangeView,payload:{view:F.Views.Domains,data:{buyDomain:!0}}})}})})]})}):null,eK?(0,D.jsx)(eq,{label:"Platform",children:(0,D.jsx)(ec.Text,{multiline:!1,children:eW})}):null]})),n){case c.HostingBuildProvider.AzureVm:case c.HostingBuildProvider.Gce:ej=(0,D.jsx)(eq,{label:"Type",fullWidth:!A,children:(0,D.jsx)(ez,{name:B.deploymentProviderProductName[n],sku:null==r?void 0:r.configurationLabel,canManage:P,isAzure:n===c.HostingBuildProvider.AzureVm,onManageClick:R?void 0:o})});break;case c.HostingBuildProvider.AzureContainerApp:case c.HostingBuildProvider.CloudRun:ej=(0,D.jsx)(eq,{label:"Type",fullWidth:!A,children:(0,D.jsx)(ez,{name:B.deploymentProviderProductName[n],isAzure:n===c.HostingBuildProvider.AzureContainerApp,sku:r?"".concat(r.configurationLabel," / ").concat(r.maxInstances," Max"):"Beta",canManage:P,usageLink:!0,onManageClick:R?void 0:o})});break;case c.HostingBuildProvider.Static:ej=(0,D.jsx)(eq,{label:"Type",fullWidth:!A,children:(0,D.jsx)(ez,{name:B.deploymentProviderProductName[n],sku:void 0,canManage:P&&A,onManageClick:o})});break;case c.HostingBuildProvider.Cron:if(!(null==p||null==(eZ=p.machineJob)?void 0:eZ.timezone))break;var eX,eQ,eJ,eZ,e0,e1,e2=null==p||null==(e0=p.machineJob)?void 0:e0.timezone,e4=N.validSchedulerTimezones.find(function(e){return e.utc.includes(e2)}),e8=(null==e4?void 0:e4.abbr)||e2;ej=(0,D.jsx)(eq,{label:"Type",fullWidth:!A,children:(0,D.jsx)(ez,{name:B.deploymentProviderProductName[n],sku:"".concat(e8,", ").concat(null==p||null==(e1=p.machineJob)?void 0:e1.crontab),canManage:!1})}),ev=(0,D.jsx)(W.ExecuteScheduledJobButton,{onSuccessfulExecution:function(){l({type:F.ViewActionType.ChangeView,payload:{view:F.Views.Schedule}})}});break;case c.HostingBuildProvider.Extension:case void 0:break;default:(0,d.default)(n)}var e3=(0,eS.default)("workspace","workspace-deployment-pane-production-database-banner"),e6=e3.shouldDisplay,e5=e3.register,e7=e3.dismiss;if((0,s.useEffect)(function(){m&&e5()},[m,e5]),m){var e9=e6&&m;eD=(0,D.jsx)(eq,{label:"Database",children:(0,D.jsxs)(ed.View,{shrink:!0,gap:8,children:[(0,D.jsxs)(ed.View,{shrink:!0,row:!0,gap:8,align:"center",wrap:!0,children:[(0,D.jsx)(ec.Text,{multiline:!1,children:"Production database connected"}),(0,D.jsx)(eG,{text:"Manage",onClick:function(){return l({type:F.ViewActionType.OpenPane,payload:{type:"neon",data:{openAtDatabase:{databaseId:m.databaseId}}}})}})]}),e9?(0,D.jsx)(eu.StatusBanner,{colorway:"primary",text:(0,D.jsxs)(ed.View,{shrink:!0,row:!0,gap:4,align:"center",children:["Your production database is ready! Your app can now save and manage live user data securely.",(0,D.jsx)(es.IconButton,{alt:"Dismiss",onClick:e7,children:(0,D.jsx)(eN.default,{})})]})}):null]})})}return(I&&(ek=(0,D.jsx)(ed.View,{children:(0,D.jsx)(eu.StatusBanner,{icon:(0,D.jsx)(eV.default,{}),colorway:"warning",text:"To upgrade, please republish."})})),eT||ej||ek||eD)?(0,D.jsxs)(s.Fragment,{children:[b&&p?(0,D.jsx)(eI,{product:"deployment",suspendedReason:p.suspendedReason,scheduledDeletionTime:S}):null,(0,D.jsxs)(eC.Surface,{elevated:!0,css:eU?eH.deploymentInfoAnimate:eH.deploymentInfo,style:{paddingTop:p?12:16},children:[p?(0,D.jsxs)(ed.View,{css:eH.deploymentInfoTitle,row:!0,gap:8,children:[(0,D.jsx)(ec.Text,{variant:"subheadDefault",multiline:!1,children:"Production"}),ev,p.rollbackSourceBuildId?(0,D.jsx)(H.RollbackBuildPill,{build:p}):null]}):null,(0,D.jsxs)(ed.View,{css:eH.deploymentInfoContent,gap:8,children:[(0,D.jsx)(q.DeploymentSuspendedReason,{}),eT,Q?null:ej,eD,e$?(0,D.jsx)(eq,{label:"Expiration",children:(0,D.jsx)(ec.Text,{multiline:!1,children:eY})}):null,"claim"===eo?(0,D.jsx)($.FreeDomainClaimSection,{onClaimAndPublish:em,disabled:er,isPublishing:er,isRepublish:!0}):null,"upsell"===eo?(0,D.jsxs)(ed.View,{gap:16,children:[(0,D.jsx)(Y.FreeDomainUpsellInfoBox,{withBorder:!0}),(0,D.jsx)(e_.default,{context:"free_domain_upsell_republish",colorway:"primary",variant:"default",text:"Upgrade to claim",onPlanCheckoutComplete:el,directCheckout:!0})]}):null,ek]})]}),E&&T.selectedDomain?(0,D.jsx)(K.DomainContactModal,{isOpen:E,selectedDomain:T.selectedDomain,onSubmit:eg,onClose:function(){k({type:"reset"})},isSubmitting:er}):null]}):null},eK=e.i(754873),e$=e.i(616278),eY=e.i(576073),eX=(0,ea.cssRecord)({timeoutConfig:[eo.rcss.width("100%"),eo.rcss.align.start,eo.rcss.pb(8)],selectedTimeoutUnits:[eo.rcss.textAlign.left,eo.rcss.rowWithGap(8)],button:[eo.rcss.reset.button,eo.rcss.viewStyle,eK.interactive.nofill,eo.rcss.align.center,eo.rcss.display.inlineFlex,{borderColor:eK.interactive.outlined.borderColor},eo.rcss.minWidth(100)],timeoutUnitsDropdown:[eo.rcss.ml(4)],dropdownItemAndContainer:[eo.rcss.flex.row,eo.rcss.align.center,eK.interactive.listItem,eo.rcss.px(8),eo.rcss.py(4)],dropdownItem:[eo.rcss.textAlign.left,eo.rcss.rowWithGap(8)],popover:[eo.rcss.width("max-content"),eo.rcss.overflow("auto"),eo.rcss.p(1),eo.rcss.minWidth(120)],type:[eo.rcss.borderRadius(8),eo.rcss.p(8)]}),eQ=(0,ea.cssRecord)({self:[eX.dropdownItemAndContainer,eo.rcss.justify.spaceBetween,{backgroundColor:ei.tokens.interactiveBackground}]}),eJ=["minutes","hours"];function eZ(e,t){var n=parseInt(e,10);if(!isNaN(n))if("hours"===t.toLowerCase())return 3600*n;else return 60*n;return 0}function e0(e){return/^\d+$/.test(e.trim())&&!isNaN(parseInt(e,10))}function e1(e,t){return e0(e)&&eZ(e,t)>86400}function e2(e){var t=e.title;return(0,D.jsxs)(ed.View,{px:8,py:4,justify:"space-between",align:"center",row:!0,gap:8,children:[(0,D.jsx)(ed.View,{css:eX.selectedTimeoutUnits,align:"center",children:(0,D.jsx)(ec.Text,{variant:"text",color:"dimmer",children:t})}),(0,D.jsx)(eY.default,{})]})}function e4(e){var t=e.item,n=e.selected;return(0,D.jsxs)(ed.View,{css:n?eQ.self:eX.dropdownItemAndContainer,children:[(0,D.jsx)(ed.View,{css:eX.dropdownItem,align:"center",children:(0,D.jsx)(ec.Text,{variant:"text",color:n?"default":"dimmer",children:t})}),(0,D.jsx)(ed.View,{align:"center",row:!0,children:n?(0,D.jsx)(e$.default,{size:16}):null})]})}function e8(e){var t=e.crontab,n=e.setCrontab,r=e.crontabError,i=e.timezone,a=e.setTimezone,o=e.timezoneError,l=e.loading,u=void 0!==l&&l,c=e.timeoutValue,d=e.setTimeoutValue,p=e.timeoutUnits,f=e.setTimeoutUnits,m=e.setTimeoutValueError,g=(0,R.useCronExpressionWithTranslation)({initialCrontab:t,initialTimezone:i,externalLoading:u,onCrontabChange:n,onTimezoneChange:a}),h=g.describeSchedule,v=g.crontab,x=g.timezone,b=g.error,S=g.loading,_=g.scheduleToCronExpression,w=g.cronExpressionToSchedule,T=g.setCrontab,j=g.setTimezone,P=g.handleOnInputChanged,M=g.setTranslationType,O=(0,y.useDeploymentCostDetails)().scheduledDeploymentCostDetails;if((0,s.useEffect)(function(){m(!e0(c)||e1(c,p))},[c,p,m]),b)return(0,D.jsx)(ed.View,{children:(0,D.jsx)(R.CronExpressionErrorFallback,{crontab:v,timezone:x,crontabError:r,timezoneError:o,cronLoading:u,error:b,onCronExpressionChange:T,onTimezoneChange:j})});var N="";return e0(c)?e1(c,p)&&(N="Please enter a value less than the maximum of 24 hours"):N="Please enter a positive whole number",(0,D.jsxs)(ed.View,{gap:8,children:[(0,D.jsx)(I.LabeledSectionWithHover,{id:"machineConfiguration",title:"Machine Configuration",information:"Your machine configuration determines the number of vCPUs and memory available to your app.",children:(0,D.jsx)(eC.Surface,{css:eX.type,elevated:!0,children:(0,D.jsx)(ez,{name:"1 vCPU / 2 GiB RAM",sku:"$".concat(O.fixedConfigurationCostPerSec,"/sec")})})}),(0,D.jsx)(ed.View,{pb:16,children:(0,D.jsx)(R.CronExpressionInterface,{describeSchedule:h,crontab:v,timezone:x,crontabError:r,timezoneError:o,loading:S,cronLoading:u,scheduleToCronExpression:_,cronExpressionToSchedule:w,onScheduleDescriptionChange:function(e){return P(e,"scheduleToCronExpression")},onCronExpressionChange:function(e){return P(e,"cronExpressionToSchedule")},onTimezoneChange:j,onScheduleDescriptionFocus:function(){return M("scheduleToCronExpression")},onCronExpressionFocus:function(){return M("cronExpressionToSchedule")}})}),(0,D.jsx)(ed.View,{css:eX.timeoutConfig,grow:!0,shrink:!0,row:!0,children:(0,D.jsx)(I.LabeledSectionWithHover,{id:"timeout",title:"Job timeout",information:"The maximum amount of time each execution of your scheduled job will run before being stopped",grow:!0,children:(0,D.jsxs)(ed.View,{row:!0,children:[(0,D.jsx)(A.CommandInput,{id:"timeoutValue",value:c,placeholder:"",loading:u,disabled:!1,onChange:function(e){return d(null!=e?e:"")},error:N,type:"number"}),(0,D.jsxs)(E.Select,{css:eX.timeoutUnitsDropdown,defaultSelectedKey:eJ[0],selectedKey:p,onSelectionChange:function(e){return f(e.toString())},children:[(0,D.jsx)(k.Button,{css:eX.button,children:(0,D.jsx)(e2,{title:p})}),(0,D.jsx)(el.RawPopover,{css:eX.popover,background:"default",placement:"bottom right",children:(0,D.jsx)(C.ListBox,{children:eJ.map(function(e){return(0,D.jsx)(C.ListBoxItem,{id:e,textValue:e,children:(0,D.jsx)(e4,{item:e,selected:e===p})},e)})})})]})]})})})]})}e.s(["ScheduledMachineConfiguration",()=>e8,"getTimeoutInSeconds",()=>eZ,"validTimeoutUnits",()=>eJ],398594);var e3=e.i(98816),e6=e.i(878420),e5=e.i(569384),e7=e.i(973245),e9=e.i(304277);function te(){var e=(0,e5._)(["\n  query UseReplOrgId($replId: String!) {\n    getRepl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        org {\n          id\n        }\n      }\n    }\n  }\n"]);return te=function(){return e},e}e.i(566901);var tt={},tn=(0,e7.gql)(te());function tr(e){var t,n,r,i=(t={variables:{replId:e}},n=(0,e6._)({},tt,t),e9.useQuery(tn,n)),a=i.data,o=i.loading,s=i.error;return o?{loading:o,hasError:!1,orgId:void 0}:{loading:o,hasError:void 0!==s||(null==a?void 0:a.getRepl.__typename)!=="Repl",orgId:(null==a?void 0:a.getRepl.__typename)==="Repl"?null==(r=a.getRepl.org)?void 0:r.id:void 0}}function ti(e){var n=e.replId,i=e.isNewDeployment,o=e.provider,l=e.fs,u=e.secrets,p=e.onOptions,f=e.onError,g=e.dotReplit,h=e.currentBuild,v=(0,r._)((0,s.useState)(!0),2),y=v[0],x=v[1],b=(0,e3.default)(f),S=(0,e3.default)(p),w=(0,_.useGetSecretsAsDeploymentEntries)({secrets:u,replId:n});return(0,s.useEffect)(function(){var e=!1;try{(0,t._)(function(){var n,s,u,p,f,v,y,b,T,j;return(0,a._)(this,function(D){switch(D.label){case 0:return n=c.DeployHostingBuildAppType.Server,s=null,u=null,p=null,f=null,[4,Promise.all([i?w():Promise.resolve(null!=(v=null==h?void 0:h.envVars)?v:[]),(0,_.getDotReplitDeploymentConfig)(g)])];case 1:if(b=(y=r._.apply(void 0,[D.sent(),2]))[0],T=y[1],e)return[2];if(i)switch(o){case c.HostingBuildProvider.AzureVm:case c.HostingBuildProvider.Gce:n=T.ignorePorts?c.DeployHostingBuildAppType.Worker:c.DeployHostingBuildAppType.Server;break;case c.HostingBuildProvider.AzureContainerApp:case c.HostingBuildProvider.CloudRun:n=c.DeployHostingBuildAppType.CloudRun;break;case c.HostingBuildProvider.Static:n=c.DeployHostingBuildAppType.Static;break;case c.HostingBuildProvider.Cron:n=c.DeployHostingBuildAppType.Cron;break;case c.HostingBuildProvider.Extension:case void 0:break;default:(0,d.default)(o)}else T.appType&&(n=T.appType);if(u=T.buildCommand,n===c.DeployHostingBuildAppType.Static)return[3,2];return s=T.runCommand,[3,5];case 2:if(!T.publicDir)return[3,3];return p=T.publicDir,[3,5];case 3:return[4,(0,t._)(function(){var e,t,n,r,i,o,s,u,c,d,p,f,g,h,v,y,x;return(0,a._)(this,function(a){switch(a.label){case 0:e=["webpack.config.js","vite.config.js","webpack.config.ts","vite.config.ts"],t=!0,n=!1,r=void 0,a.label=1;case 1:a.trys.push([1,6,7,8]),i=e[Symbol.iterator](),a.label=2;case 2:if(t=(o=i.next()).done)return[3,5];return s=o.value,[4,l.stat(s)];case 3:if(!((u=a.sent()).exists&&u.type===m.FileType.File))return[3,4];return[2,"dist/public"];case 4:return t=!0,[3,2];case 5:return[3,8];case 6:return c=a.sent(),n=!0,r=c,[3,8];case 7:try{t||null==i.return||i.return()}finally{if(n)throw r}return[7];case 8:d=["dist","build","public"],p=!0,f=!1,g=void 0,a.label=9;case 9:a.trys.push([9,14,15,16]),h=d[Symbol.iterator](),a.label=10;case 10:if(p=(v=h.next()).done)return[3,13];return y=v.value,[4,l.stat(y)];case 11:if(!((x=a.sent()).exists&&x.type===m.FileType.Directory))return[3,12];return[2,y];case 12:return p=!0,[3,10];case 13:return[3,16];case 14:return c=a.sent(),f=!0,g=c,[3,16];case 15:try{p||null==h.return||h.return()}finally{if(f)throw g}return[7];case 16:return[2]}})})()];case 4:(j=D.sent())&&(p=j),D.label=5;case 5:return(o===c.HostingBuildProvider.Gce||o===c.HostingBuildProvider.AzureVm)&&(f=T.ignorePorts),S.current({appType:n,envVars:b,buildCommand:u,runCommand:s,publicDir:p,ignorePorts:f}),x(!1),[2]}})})()}catch(e){b.current(e.message),x(!1)}return function(){e=!0}},[o,l,g,b,S,i,w,h]),{loading:y}}function ta(e){var d,m,_=e.deploymentId,D=e.replId,k=e.initialSubdomain,C=e.initialProvider,E=e.initialMachineConfig,A=e.secrets,I=e.fs,R=e.dotReplit,P=e.onDeploy,M=e.onError,O=e.hasAgentSession,N=e.selectedFreeDomain,L=void 0===N?null:N,B=(0,x.useDeploymentMode)(),V=(0,y.useDeployBuild)().deployBuild,U=(0,y.useSetDeploymentTriggerSource)(),F=(0,b.useStripeConnection)(),H=F.hasStripeSandboxConnection,G=F.loading,z=tr(D).orgId,q=(0,r._)((0,s.useState)(c.DeployHostingBuildAppType.Server),2),W=q[0],K=q[1],$=(0,r._)((0,s.useState)(k),2),Y=$[0],X=$[1],Q=(0,r._)((0,s.useState)(!1),2),J=Q[0],Z=Q[1],ee=(0,s.useRef)(!1),et=(0,r._)((0,s.useState)(null),2),en=et[0],er=et[1],ei=(0,r._)((0,s.useState)(null),2),ea=ei[0],eo=ei[1],es=(0,r._)((0,s.useState)(void 0),2),el=es[0],eu=es[1],ec=(0,r._)((0,s.useState)(null),2),ed=ec[0],ep=ec[1],ef=(0,r._)((0,s.useState)(void 0),2),em=ef[0],eg=ef[1],eh=(0,r._)((0,s.useState)(null),2),ev=eh[0],ey=eh[1],ex=(0,r._)((0,s.useState)(void 0),2),eb=ex[0],eS=ex[1],e_=(0,r._)((0,s.useState)([]),2),ew=e_[0],eT=e_[1],ej=(0,r._)((0,s.useState)(!1),2),eD=ej[0],ek=ej[1],eC=(0,r._)((0,s.useState)(null),2),eE=eC[0],eA=eC[1],eI=(0,r._)((0,s.useState)(void 0),2),eR=eI[0],eP=eI[1],eM=(0,r._)((0,s.useState)("10"),2),eO=eM[0],eN=eM[1],eL=(0,r._)((0,s.useState)(eJ[0]),2),eB=eL[0],eV=eL[1],eU=(0,r._)((0,s.useState)(!1),2),eF=eU[0],eH=eU[1],eG=(0,r._)((0,s.useState)(z&&C!==c.HostingBuildProvider.Cron?c.DeployHostingBuildPrivacyMode.Private:c.DeployHostingBuildPrivacyMode.Public),2),ez=eG[0],eq=eG[1],eW=(0,r._)((0,s.useState)(void 0),2),eK=eW[0],e$=eW[1],eY=(0,r._)((0,s.useState)(null),2),eX=eY[0],eQ=eY[1],e0=(0,r._)((0,s.useState)(!0),2),e1=e0[0],e2=e0[1],e4=(0,r._)((0,s.useState)(!1),2),e8=e4[0],e3=e4[1],e6=(0,r._)((0,s.useState)(!1),2),e5=e6[0],e7=e6[1],e9=(0,y.useDeploymentSecurityScanState)(),te=e9.enabled,tt=e9.setDeploymentSecurityScanEnabled,tn=(0,y.useAgentInboxState)(),ta=tn.enabled,to=tn.setAgentInboxEnabled,ts=(0,y.useReplitBadgeState)(),tl=ts.enabled,tu=ts.setReplitBadgeEnabled,tc=ez!==c.DeployHostingBuildPrivacyMode.Public,td=(0,r._)((0,s.useState)(C),2),tp=td[0],tf=td[1],tm=(0,r._)((0,s.useState)(E),2),tg=tm[0],th=tm[1],tv=(0,r._)((0,s.useState)(!1),2),ty=tv[0],tx=tv[1],tb=(0,u.useDeploymentsDeployOptionsQuery)({skip:!_,variables:{id:null!=_?_:""},fetchPolicy:"cache-and-network",ssr:!1,onCompleted:function(e){var t,n=(null==(r=e.hostingDeployment)?void 0:r.__typename)==="HostingDeployment"?e.hostingDeployment:null;if(n){if(n.replitAppSubdomain&&(X(n.replitAppSubdomain),Z(!0)),n.currentBuild.machineJob&&(ep(n.currentBuild.machineJob.timezone),ey(n.currentBuild.machineJob.crontab),n.currentBuild.machineJob.timeoutSeconds)){var r,a,o,s=n.currentBuild.machineJob.timeoutSeconds;s%3600==0?(a=s/3600,o="Hours"):(a=Math.floor(s/60),o="Minutes"),eN(a.toString()),eV(o)}var l=n.currentBuild.envVars.map(function(e){return{name:e.name,value:e.value}}),u=new Set(l.map(function(e){return e.name})),c=p.SYNCING_SECRETS_ROLLOUT_DATE>new Date(n.currentBuild.timeCreated)&&p.SYNCING_SECRETS_ROLLOUT_DATE>new Date(n.timeCreated)?(0,i._)(u):null!=(t=n.ignoredSecrets)?t:[];eT(l),tk(c),null!=n.currentBuild.isPrivate&&eq((0,y.getPrivacyMode)({isPrivate:n.currentBuild.isPrivate,hasPrivatePassword:n.currentBuild.hasPrivatePassword})),tt(n.securityScanEnabled)}}}),tS=tb.data,t_=tb.loading,tw=(0,u.useDeploymentsDeployOptionsAuthzQuery)({variables:{replId:D,provider:tp},skip:!tp}).data,tT=(null==tS||null==(d=tS.hostingDeployment)?void 0:d.__typename)==="HostingDeployment"?tS.hostingDeployment:null,tj=(0,r._)((0,s.useState)(null!=(m=null==tT?void 0:tT.ignoredSecrets)?m:[]),2),tD=tj[0],tk=tj[1],tC=ti({replId:D,provider:tp,fs:I,secrets:A,dotReplit:R,isNewDeployment:!_,onError:M,currentBuild:null==tT?void 0:tT.currentBuild,onOptions:function(e){e.appType&&K(e.appType),eT(e.envVars),e.ignorePorts&&ek(e.ignorePorts),e.buildCommand&&er(e.buildCommand),e.runCommand&&eo(e.runCommand),e.publicDir&&eA(e.publicDir)}}).loading,tE=null==tT?void 0:tT.currentBuild,tA=void 0!==tE,tI=!!(null==tE?void 0:tE.hasPrivatePassword),tR=(null==tw?void 0:tw.getRepl.__typename)==="Repl"?tw.getRepl.authorizations:void 0,tP=null==tR?void 0:tR.editDeploymentSecrets,tM=null==tR?void 0:tR.editSecrets,tO=null==tR?void 0:tR.editDeploymentSubdomain,tN=(0,g.useHeliumDevelopmentDatabase)(),tL=tN.database,tB=tN.loading,tV=(0,h.useNeonDevelopmentDatabase)(),tU=tV.database,tF=tV.loading,tH=(0,h.useNeonProductionDatabase)(),tG=tH.database,tz=tH.loading,tq=(0,T.useCreateNeonProductionDatabaseState)({neonDevelopmentDatabase:tU,neonProductionDatabase:tG,heliumDevelopmentDatabase:tL,isRedeploy:tA,hasStripeSandboxConnection:H}),tW=(0,w.useDevSecrets)({secrets:A,replId:D}).devSecrets;(0,s.useEffect)(function(){(0,S.trackDeploymentSectionViewed)({context:"deploy_options"})},[]),(0,s.useEffect)(function(){!k||Y||ee.current||(X(k),ee.current=!0)},[k,Y]);var tK=(0,s.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.value;eT(function(e){return(0,l.produce)(e,function(e){e.push({name:null!=t?t:"",value:null!=n?n:""})})})},[eT]),t$=function(e,r){return(0,t._)(function(){var t,i,o,s,l,u;return(0,a._)(this,function(a){switch(a.label){case 0:if(o=(!e||J)&&Y.length?Y:void 0,l=null!=(s=null==tT||null==(i=tT.currentBuild)||null==(t=i.machineJob)?void 0:t.failureNotifications)&&s,!o)return[2,!1];if(L&&!r)return tx(!0),[2,!1];a.label=1;case 1:return a.trys.push([1,3,,4]),U("deployments_pane_publish_button"),[4,V({ignoredSecrets:tD,envVars:ew.filter(function(e){return(0,f.isValidEnvVar)(e)}).map(function(e){return{name:e.name,value:e.value}}),subdomain:o,machineConfigurationId:(null==tg?void 0:tg.configurationId)||void 0,maxMachineInstances:(null==tg?void 0:tg.maxInstances)||void 0,machineJob:ed&&ev?{timezone:ed,crontab:ev,timeoutSeconds:eZ(eO,eB),failureNotifications:l}:void 0,config:{buildCommand:en,runCommand:ea,appType:W,ignorePorts:eD,publicDir:eE},privacyMode:ez,privatePassword:eK,enableSecurityScan:te,agentInboxEnabled:ta,replitBadgeEnabled:null!=tl?tl:void 0,hasAgentSession:O,createNeonProductionDatabase:tq.value.createDatabase,pushDevelopmentDatabaseObjects:tq.value.pushDevelopmentDatabaseObjects,syncStripe:e1,provider:tp,purchaseDomain:L&&r?(0,j.createDomainPurchaseInput)(L,r,!0):void 0})];case 2:return a.sent(),P(),[2,!0];case 3:if(u=a.sent(),(0,n._)(u,v.RunCommandNotFoundError))return eu("Run command cannot be empty."),[2,!1];if((0,n._)(u,v.InvalidRunCommandError))return eu("Invalid run command."),[2,!1];if((0,n._)(u,v.PublicDirNotFoundError))return eP("Public directory cannot be empty."),[2,!1];if((0,n._)(u,v.InvalidTimezoneError))return eg(u.message||"Invalid timezone."),[2,!1];if((0,n._)(u,v.InvalidCrontabError))return eS(u.message||"Invalid crontab."),[2,!1];if((0,n._)(u,v.PrivatePasswordError))return eQ(u.message||"Invalid password."),[2,!1];return M(u.message),[2,!1];case 4:return[2]}})})()};return{mode:B,deployment:tT,queryLoading:t_,optionsLoading:tC,currentBuild:tE,isRedeploy:tA,authorizations:tR,editDeploySecretAuthorization:tP,editReplSecretsAuthorization:tM,editDeploymentSubdomainAuthorization:tO,appType:W,subdomain:Y,validSubdomain:J,buildCommand:en,runCommand:ea,runCommandError:el,timezone:ed,timezoneError:em,crontab:ev,crontabError:eb,envVars:ew,ignorePorts:eD,publicDir:eE,publicDirError:eR,timeoutValue:eO,timeoutUnits:eB,timeoutValueError:eF,isPrivate:tc,privacyMode:ez,privatePassword:eK,privatePasswordError:eX,hasExistingPrivatePassword:tI,agentInboxEnabled:ta,replitBadgeEnabled:tl,syncSandboxWithLive:e1,ignoredSecrets:tD,isOverwritingSecrets:e8,isOverwriteSecretsModalOpen:e5,devSecrets:tW,orgId:z,provider:tp,canCreateNeonProductionDatabaseStateLoading:tB||tF||tz||G||tq.loading,machineConfig:tg,setAppType:K,setSubdomain:X,setValidSubdomain:Z,setBuildCommand:er,setRunCommand:eo,setRunCommandError:eu,setTimezone:ep,setTimezoneError:eg,setCrontab:ey,setCrontabError:eS,setEnvVars:eT,setIgnorePorts:ek,setPublicDir:eA,setPublicDirError:eP,setTimeoutValue:eN,setTimeoutUnits:eV,setTimeoutValueError:eH,setPrivacyMode:eq,setPrivatePassword:e$,setAgentInboxEnabled:to,setReplitBadgeEnabled:tu,setSyncSandboxWithLive:e2,setIgnoredSecrets:tk,setIsOverwritingSecrets:e3,setIsOverwriteSecretsModalOpen:e7,setProvider:tf,setMachineConfig:th,showDomainContactModal:ty,setShowDomainContactModal:tx,createNeonProductionDatabaseState:tq,onAppTypeChanged:function(e){K(e),ek((e===c.DeployHostingBuildAppType.Server||e===c.DeployHostingBuildAppType.Worker)&&e===c.DeployHostingBuildAppType.Worker)},onSubdomainBlur:function(){(null==Y?void 0:Y.trim())||X(k)},addAnEnvVar:tK,updateEnvVarName:function(e,t){eT(function(n){return(0,l.produce)(n,function(n){n[e].name=t})})},updateEnvVarValue:function(e,t){eT(function(n){return(0,l.produce)(n,function(n){n[e].value=t})})},removeEnvVar:function(e){eT(function(t){return(0,l.produce)(t,function(t){t.splice(e,1)})})},handleDeployClick:t$,handleDomainContactSubmit:function(e){return(0,t._)(function(){return(0,a._)(this,function(t){switch(t.label){case 0:return tx(!1),[4,t$(!0,e)];case 1:return[2,t.sent()]}})})()},optOut:function(e){tk(function(t){return(0,i._)(t).concat([e])})},optIn:function(e){tW&&tW.has(e)||tk(function(t){return t.filter(function(t){return t!==e})})},syncToWorkspace:function(e){return(0,t._)(function(){var t,n;return(0,a._)(this,function(r){return!((t=ew.findIndex(function(t){return t.name===e}))<0)&&tW&&tW.has(e)&&(n=tW.get(e),(0,o.default)(n),tk(function(t){return t.filter(function(t){return t!==e})}),eT(function(r){return(0,i._)(r.slice(0,t)).concat([{name:e,value:n}],(0,i._)(r.slice(t+1)))})),[2]})})()},overwriteSecrets:function(){return(0,t._)(function(){return(0,a._)(this,function(e){switch(e.label){case 0:return e3(!0),[4,A.addEntries(ew.map(function(e){return{key:e.name,value:e.value}}))];case 1:return e.sent(),e3(!1),e7(!1),[2]}})})()}}}e.s(["useOrgId",()=>tr],605526),e.s(["useDeployOptionsData",()=>ti,"useDeploymentOptionsState",()=>ta],976191)},436725,e=>{"use strict";var t=e.i(276385),n=e.i(446530),r=e.i(613355),i=e.i(625484),a=e.i(940745),o=(0,n.cssRecord)({loadingState:[r.rcss.center]});function s(){return(0,t.jsx)(i.View,{css:o.loadingState,grow:!0,shrink:!0,children:(0,t.jsx)(a.default,{})})}e.s(["LoadingState",()=>s])},970755,e=>{e.v({cannotDeploy:"SuggestDeploy-module__DhkBmq__cannotDeploy",isConfiguredManually:"SuggestDeploy-module__DhkBmq__isConfiguredManually",isStale:"SuggestDeploy-module__DhkBmq__isStale",message:"SuggestDeploy-module__DhkBmq__message",propertiesHeader:"SuggestDeploy-module__DhkBmq__propertiesHeader",status:"SuggestDeploy-module__DhkBmq__status",urlContainer:"SuggestDeploy-module__DhkBmq__urlContainer"})},127704,e=>{e.v({card:"SuggestGeneralBuildMode-module__a0pqrq__card",continueButton:"SuggestGeneralBuildMode-module__a0pqrq__continueButton"})},401211,e=>{e.v({container:"SuggestRollback-module__W2kyQG__container",inlineButton:"SuggestRollback-module__W2kyQG__inlineButton"})},10537,318037,225821,202872,e=>{"use strict";var t,n=e.i(276385),r=e.i(389959),i=e.i(399344),a=e.i(297083),o=e.i(721281),s=e.i(530658),l=e.i(817556),u=e.i(109644),c=e.i(664219),d=e.i(368964),p=e.i(379334),f=e.i(967963),m=e.i(262664),g=e.i(424746),h=e.i(914279),v=e.i(68893),y=e.i(479373),x=e.i(365692),b=e.i(777373),S=e.i(589910),_=e.i(332822),w=e.i(34912),T=e.i(823166),j=e.i(311106),D=e.i(976191),k=e.i(993796),C=e.i(207237),E=e.i(187505),A=e.i(858248),I=e.i(709485),R=e.i(436725),P=e.i(446530),M=e.i(173703),O=e.i(613355),N=e.i(140487),L=e.i(607278),B=e.i(396776),V=e.i(929872),U=e.i(960178),F=e.i(751273),H=e.i(625484),G=e.i(548635),z=e.i(616278),q=e.i(245225),W=e.i(788331),K=e.i(292297),$=e.i(503536),Y=e.i(606867),X=e.i(77601),Q=e.i(367321),J=e.i(292642),Z=e.i(940745),ee=e.i(115357),et=e.i(264661),en=e.i(42458),er=e.i(970755),ei=(0,P.cssRecord)({titleShort:(0,o._)({display:"inline"},O.container.min(411),{display:"none"}),titleLong:(0,o._)({display:"none"},O.container.min(411),{display:"inline"})}),ea=(0,P.cssRecord)({root:[O.rcss.my(12),O.rcss.p(8)]});(t={}).READY="READY",t.STALE="STALE",t.NOT_AVAILABLE="NOT_AVAILABLE",t.DEPLOYING="DEPLOYING",t.FINISHED="FINISHED",t.FAILED="FAILED",t.CONFIGURED_MANUALLY="CONFIGURED_MANUALLY";var eo=(0,r.memo)(function(e){var t=e.openDeploymentsPane,r=e.paneType,a=(0,i.useDeploymentCurrentBuild)();return(0,n.jsx)(el,{openDeploymentsPane:t,currentBuild:a,isRedeploy:!!a,paneType:r})});function es(e){var t=e.openDeploymentsPane,i=e.isRedeploy,a=e.agentStackPlatformType,o=(0,r.useMemo)(function(){switch(a){case d.AgentStackPlatformType.Slack:return(0,n.jsx)(X.default,{});case d.AgentStackPlatformType.Telegram:return(0,n.jsx)(Q.default,{});case d.AgentStackPlatformType.TimeBased:return(0,n.jsx)(G.default,{});default:return null}},[a]),s=(0,r.useMemo)(function(){switch(a){case d.AgentStackPlatformType.Slack:return{title:"Publish to Slack",deploy:"Publish your agent to interact with it on Slack.",redeploy:"Republish your agent to Slack to apply the latest changes."};case d.AgentStackPlatformType.Telegram:return{title:"Publish to Telegram",deploy:"Publish your agent to interact with it on Telegram.",redeploy:"Republish your agent to Telegram to apply the latest changes."};case d.AgentStackPlatformType.TimeBased:return{title:"Publish your Time-based Automation",deploy:"Publish to start running your automation.",redeploy:"Republish your automation to apply the latest changes."};case d.AgentStackPlatformType.ConnectorTrigger:return{title:"Publish your Automation",deploy:"Publish to start Automatically triggering workflows when events occur.",redeploy:"Republish your automation to apply the latest changes."};default:return{title:"Publish",deploy:"Publish your agent to interact with it.",redeploy:"Republish your agent to apply the latest changes."}}},[a]);return(0,n.jsxs)(V.Surface,{elevated:!0,gap:8,p:8,css:ea.root,children:[(0,n.jsxs)(H.View,{align:"center",gap:6,row:!0,children:[(0,n.jsx)(Y.IconProvider,{size:16,children:o}),(0,n.jsx)(U.Text,{style:{fontWeight:"500"},children:s.title})]}),(0,n.jsx)(U.Text,{children:i?s.redeploy:s.deploy}),(0,n.jsx)(H.View,{row:!0,justify:"end",children:(0,n.jsx)(N.Button,{iconLeft:(0,n.jsx)($.default,{}),onClick:t,colorway:"primary",text:i?"Republish":"Publish now"})})]})}function el(e){var t,o=e.currentBuild,u=e.openDeploymentsPane,c=e.isRedeploy,b=e.paneType,_=(0,s._)((0,r.useState)(void 0),2),E=_[0],R=_[1],P=(0,s._)((0,r.useState)(!1),2),M=P[0],O=P[1],N=(0,s._)((0,r.useState)(null),2),L=N[0],B=N[1],V=(0,s._)((0,r.useState)(!0),2),U=V[0],F=V[1],H=(0,r.useCallback)(function(e){(0,j.sendSentryError)({error:Error(e),context:"SuggestDeployCard",isDeploymentsPane:!1}),O(!0)},[]),G=(0,C.default)(),z=(0,i.useDotReplitService)(),q=(0,i.useFsService)(),$=(0,i.useSecretsService)(),Y=(0,i.useDeploymentProvider)({onError:H,dotReplitService:z}),X=Y.recommendedProvider,Q=Y.loading,J=X===d.HostingBuildProvider.AzureContainerApp||X===d.HostingBuildProvider.AzureVm,Z=(0,i.useFreeTierCloudServices)(),et=(0,(0,i.useDeploymentDeployability)().getDeployabilityByProvider)(X).deploy,en=et.isAuthorized,er="Loading"===et.message;(0,r.useEffect)(function(){!er&&(en||R("NOT_AVAILABLE"))},[er,en]);var ea=(0,T.useReservedVmConfigurations)({provider:X,onError:H}).defaultMachineConfiguration,eo=(0,S.useAutoscaleConfigurations)({isAzureDeployment:J,isFreeUser:Z,onError:H}).defaultMachineConfiguration,es=(0,x.getRecommendedProviderMachineConfiguration)({recommendedProvider:X,defaultAutoscaleConfiguration:eo,defaultRvmMachineConfiguration:ea}),el=(0,s._)((0,r.useState)(d.DeployHostingBuildAppType.Server),2),ec=el[0],ed=el[1],ep=(0,s._)((0,r.useState)(null),2),ef=ep[0],em=ep[1],eg=(0,s._)((0,r.useState)(null),2),eh=eg[0],ev=eg[1],ey=(0,s._)((0,r.useState)(null!=(t=null==o?void 0:o.envVars.map(function(e){return{name:e.name,value:e.value}}))?t:[]),2),ex=ey[0],eb=ey[1],eS=(0,s._)((0,r.useState)(!1),2),e_=eS[0],ew=eS[1],eT=(0,s._)((0,r.useState)(null),2),ej=eT[0],eD=eT[1],ek=(0,D.useDeployOptionsData)({replId:G,provider:X,fs:q,secrets:$,dotReplit:z,isNewDeployment:!c,onError:H,onOptions:function(e){e.appType&&ed(e.appType),e.envVars&&eb(e.envVars),e.ignorePorts&&ew(e.ignorePorts),e.buildCommand&&em(e.buildCommand),e.runCommand&&ev(e.runCommand),e.publicDir&&eD(e.publicDir)}}).loading,eC=(0,s._)((0,r.useState)(void 0),2),eE=eC[0],eA=eC[1],eI=(0,s._)((0,r.useState)(void 0),2),eR=eI[0],eP=eI[1],eM=(0,s._)((0,r.useState)(void 0),2),eO=eM[0],eN=eM[1],eL=(0,s._)((0,r.useState)(void 0),2),eB=eL[0],eV=eL[1],eU=(0,i.useDeploymentSubdomain)(),eF=(0,i.useDeploymentCostDetails)().getMachineConfigurationCostDetailsBySlug;(0,r.useEffect)(function(){if(!ek){if(!X){eA(void 0),eP(void 0),eN(void 0),eV(void 0),R(void 0);return}var e,t,r="".concat(eU).concat((null==(t=window)||null==(e=t.location)?void 0:e.hostname)!=="replit.com"?".staging":"",".").concat(p.DEPLOYMENTS_DEFAULT_DOMAIN);switch(X){case d.HostingBuildProvider.AzureVm:case d.HostingBuildProvider.Gce:if(!es)return;var i=eF(es.configurationSlug).costPerMonth;eA((0,n.jsx)(K.default,{})),eP("Reserved VM Deployment"),eN("$".concat(i,"/month"));var a={};a["Default URL"]=r,ef&&(a["Build Command"]=ef),a["Run Command"]=eh,eV(a);break;case d.HostingBuildProvider.AzureContainerApp:case d.HostingBuildProvider.CloudRun:if(!es)return;eA((0,n.jsx)(W.default,{})),eP((0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{css:ei.titleShort,children:"Autoscale"}),(0,n.jsx)("span",{css:ei.titleLong,children:"Autoscale Deployment"})]}));var o={};o["Default URL"]=r,ef&&(o["Build Command"]=ef),o["Run Command"]=eh,eV(o);break;case d.HostingBuildProvider.Static:eA((0,n.jsx)(ee.default,{})),eP("Static Deployment"),eN("Free");var s={"Public Directory":ej,"Default URL":r};ef&&(s["Build Command"]=ef),eV(s);break;default:eA(void 0),eP(void 0),eN(void 0),eV(void 0),R(void 0)}}},[ef,eU,ek,X,eh,es,ej,eF]);var eH=(0,i.useDeployBuild)({openDeploymentsPane:u}),eG=eH.deployBuild,ez=eH.redeployWithNoNewOptions,eq=(0,i.useSetDeploymentTriggerSource)(),eW=(0,m.useHeliumDevelopmentDatabase)(),eK=eW.database,e$=eW.loading,eY=(0,g.useNeonDevelopmentDatabase)(),eX=eY.database,eQ=eY.loading,eJ=(0,g.useNeonProductionDatabase)(),eZ=eJ.database,e0=eJ.loading,e1=(0,y.useStripeConnection)(),e2=e1.hasStripeSandboxConnection,e4=e1.loading,e8=(0,w.useCreateNeonProductionDatabaseState)({heliumDevelopmentDatabase:eK,neonDevelopmentDatabase:eX,neonProductionDatabase:eZ,isRedeploy:c,hasStripeSandboxConnection:e2}),e3=e8.value,e6=e3.createDatabase,e5=e3.pushDevelopmentDatabaseObjects,e7=(0,i.useDeploymentSecurityScanState)().enabled,e9=(0,i.useDeployBuild)({}).kickOffStandbyBuild,te=(0,r.useRef)(!1),tt=(0,k.useFlag)({controlName:"flag-enable-standby-builds",type:"boolean"});(0,r.useEffect)(function(){if(tt&&!te.current&&!c&&!ek){if(!X||!eh||!ec)return void(0,j.sendSentryError)({error:Error("Standby build blocked: "+JSON.stringify({recommendedProvider:X,runCommand:eh,appType:ec})),context:"StandbyBuildBlockedFromSuggestDeploy",isDeploymentsPane:!1});te.current=!0,(0,a._)(function(){var e;return(0,l._)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),(0,j.sendSentryError)({error:Error("Standby build triggered "),context:"StandbyBuildTriggeredFromSuggestDeploy",isDeploymentsPane:!1}),[4,e9({provider:X,envVars:ex.filter(function(e){return(0,f.isValidEnvVar)(e)}),subdomain:eU||"",machineConfigurationId:(null==es?void 0:es.configurationId)||void 0,maxMachineInstances:(null==es?void 0:es.maxInstances)||void 0,config:{buildCommand:ef,runCommand:eh,appType:ec,publicDir:ej,ignorePorts:!1},privacyMode:d.DeployHostingBuildPrivacyMode.Public,hasAgentSession:!0,ignoredSecrets:[],createNeonProductionDatabase:e8.value.createDatabase,pushDevelopmentDatabaseObjects:e8.value.pushDevelopmentDatabaseObjects,enableSecurityScan:e7})];case 1:return t.sent(),[3,3];case 2:return e=t.sent(),(0,j.sendSentryError)({error:Error("Failed to trigger standby build: "+e.message),context:"StandbyBuildTriggerFromSuggestDeploy"}),[3,3];case 3:return[2]}})})()}},[c,ek,eh,ec,ex,eU,null==es?void 0:es.configurationId,null==es?void 0:es.maxInstances,ef,ej,X,e8,e7,tt,e9]);var tn=(0,r.useCallback)(function(){return(0,a._)(function(){var e,t,n;return(0,l._)(this,function(r){switch(r.label){case 0:if(!en)return[2];if(R("DEPLOYING"),(0,A.track)(I.events.DEPLOY_PROJECT_SELECTED,{source:"one_click_deploy",redeploy:c,has_agent_session:!0}),!c)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),eq("agent_suggest_publish_tool"),[4,ez({hasAgentSession:!0})];case 2:return r.sent(),[3,4];case 3:return H(r.sent().message),[3,4];case 4:return[2];case 5:if(e=L&&U,t=(null==eU?void 0:eU.length)?eU:void 0,!(n=e?L:t)||!X)return[2];r.label=6;case 6:return r.trys.push([6,8,,9]),eq("agent_suggest_publish_tool"),[4,eG({ignoredSecrets:[],envVars:ex.filter(function(e){return(0,f.isValidEnvVar)(e)}),subdomain:n,machineConfigurationId:(null==es?void 0:es.configurationId)||void 0,maxMachineInstances:(null==es?void 0:es.maxInstances)||void 0,config:{buildCommand:ef,runCommand:eh,appType:ec,ignorePorts:e_,publicDir:ej},privacyMode:d.DeployHostingBuildPrivacyMode.Public,hasAgentSession:!0,createNeonProductionDatabase:e6,pushDevelopmentDatabaseObjects:e5,enableSecurityScan:e7,provider:X})];case 7:return r.sent(),u&&u(),[3,9];case 8:return H(r.sent().message),[3,9];case 9:return[2]}})})()},[ec,ef,e6,L,ex,c,e_,en,U,null==es?void 0:es.configurationId,null==es?void 0:es.maxInstances,ej,e5,eh,eU,eG,H,u,ez,e7,eq,X]),tr=(0,h.useDeploymentMode)();(0,r.useEffect)(function(){if(!M)switch(tr){case v.DeploymentMode.Ready:if("FAILED"===E||"FINISHED"===E)break;R("READY");break;case v.DeploymentMode.Suspended:R("NOT_AVAILABLE");break;case v.DeploymentMode.Preparing:case v.DeploymentMode.Deploying:R("DEPLOYING")}},[M,tr,E]),(0,i.useLatestBuildActionUpdate)(function(e){if(!M&&"HostingBuildDeployStatusAction"===e.__typename)switch(e.status){case d.HostingBuildStatus.Failed:R("FAILED");break;case d.HostingBuildStatus.Success:R("FINISHED")}});var ti=er||ek||e$||eQ||e0||e8.loading||Q||e4,ta=(0,r.useRef)(!1);return((0,r.useEffect)(function(){ta.current||ti||e2||(ta.current=!0,(0,A.track)(I.events.DEPLOY_PROJECT_SELECTED,{source:"one_click_deploy_shown",has_agent_session:!0}))},[ti,e2]),e2)?null:(0,n.jsx)(eu,{icon:eE,title:eR,cost:eO,properties:eB,status:M?"NOT_AVAILABLE":E,onDeploy:en&&X&&X!==d.HostingBuildProvider.Cron?tn:void 0,defaultSubdomain:eU,recommendedProvider:X,replId:G,onSubdomainEdit:B,onSubdomainValidityChange:F,openDeploymentsPane:u,isRedeploy:c,loading:ti,paneType:b,state:e8})}function eu(e){var t=e.icon,r=e.title,i=e.cost,a=e.properties,o=e.status,s=void 0===o?"READY":o,l=e.defaultSubdomain,u=e.recommendedProvider,c=e.replId,d=e.onDeploy,p=e.openDeploymentsPane,f=e.onSubdomainEdit,m=e.onSubdomainValidityChange,g=e.isRedeploy,h=e.loading,v=e.paneType,y=e.state,x=a&&Object.keys(a).length>0,b=h?(0,n.jsx)(R.LoadingState,{}):(0,n.jsxs)(H.View,{gap:8,"data-event-type":"deploy",children:[(0,n.jsx)(U.Text,{clsx:er.default.message,color:"STALE"===s?"dimmer":"default",children:g?"Want users to get these changes? Republish this App.":"Ready to share? Publish this App in ".concat(d?"one click":"a few clicks",".")}),u&&(null==a?void 0:a["Default URL"])&&!g?(0,n.jsx)(ed,{icon:void 0===t?null:t,title:void 0===r?"Deployment":r,cost:void 0===i?"":i,properties:a,paneType:v,initialSubdomain:l,recommendedProvider:u,replId:c,onSubdomainEdit:f,onSubdomainValidityChange:m}):null,d||p?(0,n.jsx)(H.View,{row:!0,gap:8,align:"center",justify:x?"start":"end",children:(0,n.jsx)(em,{status:s,isRedeploy:g,loading:h,onDeploy:d,openDeploymentsPane:p?function(){p()}:void 0,state:y})}):null]});return(0,n.jsx)(M.ShadesSurface,{elevate:"2x",br:"container",p:8,children:b})}var ec=function(e){var t,i,a=e.id,o=e.initialSubdomain,l=e.deploymentId,f=e.recommendedProvider,m=e.replId,g=e.onSubdomainEdit,h=e.onSubdomainValidityChange,v=(0,s._)((0,r.useState)(o||""),2),y=v[0],x=v[1],S=(0,b.useProviderInternalDomain)({provider:f}),_=S.internalDomain,w=S.isShowingFallback,T=S.fallbackDomain,j=(0,u.useCheckReplitAppSubdomainAvailabilityQuery)({variables:{subdomain:y,deploymentId:l},skip:0===y.length}),D=j.data,k=j.loading,C=j.error,E=(0,c.useDeploymentsDeployOptionsAuthzQuery)({variables:{replId:m,provider:null!=f?f:d.HostingBuildProvider.CloudRun},skip:!f}),A=E.data,I=E.loading,R=(null==A?void 0:A.getRepl.__typename)==="Repl"?null==(t=A.getRepl.authorizations)?void 0:t.editDeploymentSubdomain:void 0,P=!(null==R?void 0:R.isAuthorized),M=null==R?void 0:R.message,O=(null==D?void 0:D.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"&&D.replitAppSubdomainAvailability.available,N=(null==D?void 0:D.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"?D.replitAppSubdomainAvailability.message:null==D||null==(i=D.replitAppSubdomainAvailability)?void 0:i.errorMessage;return((0,r.useEffect)(function(){h(O)},[O,h]),C)?(0,n.jsx)(B.StatusBanner,{colorway:"negative",text:"Something went wrong, please try refreshing the page."}):(0,n.jsxs)(H.View,{clsx:er.default.urlField,grow:!0,shrink:!0,children:[(0,n.jsxs)(H.View,{row:!0,gap:8,align:"center",justify:"space-between",grow:!0,shrink:!0,children:[(0,n.jsxs)(H.View,{row:!0,gap:8,align:"center",grow:!0,children:[I?(0,n.jsx)(Z.default,{}):(0,n.jsx)(F.Tooltip,{tooltip:M,isDisabled:!P,children:(0,n.jsx)(L.Input,{id:a,value:y,onChange:function(e){x(e.target.value),g(e.target.value)},disabled:P})}),(0,n.jsx)(U.Text,{multiline:!1,children:_})]}),(0,n.jsxs)(H.View,{row:!0,gap:4,pt:4,align:"center",children:[k?(0,n.jsx)(Z.default,{}):null,O?(0,n.jsx)(z.default,{color:"green"}):null,O||k?null:(0,n.jsx)(F.Tooltip,{tooltip:N,isDisabled:!N,children:(0,n.jsx)(en.default,{color:"red"})})]})]}),w?(0,n.jsx)(B.StatusBanner,{colorway:"warning",text:"The ".concat(p.DEPLOYMENTS_DEFAULT_DOMAIN," domain is currently unavailable, please use the ").concat(T," URL above.")}):null]})};function ed(e){var t=e.icon,r=e.title,i=e.cost,a=e.paneType,o=e.initialSubdomain,s=e.recommendedProvider,l=e.replId,u=e.onSubdomainEdit,c=e.onSubdomainValidityChange;return(0,n.jsxs)(M.ShadesSurface,{elevate:"agentChat"===a?"1x":void 0,br:4,border:"regular",children:[(0,n.jsxs)(M.ShadesSurface,{border:{side:"bottom"},px:8,py:4,clsx:er.default.propertiesHeader,row:!0,gap:8,align:"center",justify:"space-between",children:[(0,n.jsxs)(H.View,{clsx:er.default.propertiesTitle,row:!0,gap:8,align:"center",children:[(0,n.jsx)(Y.IconProvider,{size:20,children:t}),(0,n.jsx)(U.Text,{children:(0,n.jsx)("strong",{children:r})})]}),i?(0,n.jsx)(U.Text,{children:i}):null]}),(0,n.jsxs)(H.View,{clsx:er.default.urlContainer,gap:8,children:[(0,n.jsxs)(H.View,{row:!0,gap:8,align:"center",children:[(0,n.jsx)(J.default,{}),(0,n.jsx)(U.Text,{children:"Primary URL"})]}),(0,n.jsx)(H.View,{row:!0,gap:8,align:"center",children:(0,n.jsx)(ec,{id:"primaryDomain",initialSubdomain:o,recommendedProvider:s,replId:l,onSubdomainEdit:u,onSubdomainValidityChange:c})})]})]})}function ep(e){var t,r,i,a,s=e.status,l=e.onDeploy,u=e.openDeploymentsPane;if("NOT_AVAILABLE"===s)return(0,n.jsxs)(H.View,{clsx:er.default.cannotDeploy,gap:8,children:[(0,n.jsx)(B.StatusBanner,{colorway:"warning",icon:(0,n.jsx)(en.default,{}),title:"Published apps not available",text:"There is an issue preventing you from publishing. You may be able to resolve this using the Publishing pane."}),u?(0,n.jsx)(N.Button,{onClick:u,iconLeft:(0,n.jsx)(et.default,{}),text:"Open Published apps",alignment:"start",colorway:"primary"}):null]});var c=null;switch(s){case"DEPLOYING":c=(0,n.jsx)(Z.default,{}),t="Publishing",r="primary";break;case"FINISHED":c=(0,n.jsx)(z.default,{}),t="Published",r="green",i="Click to republish";break;case"FAILED":c=(0,n.jsx)(en.default,{}),t="Failed",r="red",i="Click to republish";break;case"CONFIGURED_MANUALLY":c=(0,n.jsx)(q.default,{}),t="Published app configured manually";break;case"STALE":c=(0,n.jsx)(q.default,{}),t="This configuration is for an older version of the app";break;default:return null}var d=(0,n.jsx)(N.Button,{onClick:l,text:t,iconLeft:c,colorway:r,loading:"DEPLOYING"===s});return"DEPLOYING"===s||"FINISHED"===s||"FAILED"===s?(0,n.jsxs)(n.Fragment,{children:[i?(0,n.jsx)(F.Tooltip,{tooltip:i,children:d}):d,u&&"FAILED"===s?(0,n.jsx)(N.Button,{onClick:u,iconLeft:(0,n.jsx)(et.default,{}),text:"Advanced configuration"}):null]}):(0,n.jsxs)(H.View,{clsx:(a={},(0,o._)(a,er.default.status,!0),(0,o._)(a,er.default.isConfiguredManually,"CONFIGURED_MANUALLY"===s),(0,o._)(a,er.default.isStale,"STALE"===s),a),row:!0,gap:8,align:"center",children:[c,(0,n.jsx)(U.Text,{children:t})]})}var ef=(0,P.cssRecord)({group:[O.rcss.width("100%"),{"> div":{width:"100%"}}]});function em(e){var t=e.status,r=void 0===t?"READY":t,i=e.onDeploy,a=e.openDeploymentsPane,o=e.isRedeploy,s=e.loading,l=e.state,u=(0,E.useTrackClick)().trackClick;if(!i&&!a)return null;if("READY"===r){if(i)return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(H.View,{css:ef.group,gap:6,justify:"start",align:"end",children:[(0,n.jsx)(_.SuggestDeployCreateNeonProductionDatabaseToggleSection,{state:l}),(0,n.jsxs)(H.View,{row:!0,gap:8,align:"center",justify:"end",children:[a?(0,n.jsx)(N.Button,{onClick:function(){u({target:"configure_myself_button",productArea:"publishing"}),a()},iconLeft:(0,n.jsx)(et.default,{}),text:"Configure myself"}):null,(0,n.jsx)(N.Button,{onClick:i,text:o?"Republish":"Publish now",iconLeft:(0,n.jsx)($.default,{}),colorway:"primary",disabled:s})]})]})});if(a)return(0,n.jsx)(N.Button,{onClick:a,text:"Open Publishing",iconLeft:(0,n.jsx)($.default,{}),colorway:"primary"})}return(0,n.jsx)(ep,{status:r,onDeploy:i,openDeploymentsPane:a})}e.s(["AgentStackOneClickDeploy",()=>es,"OneClickDeploy",()=>el,"SuggestDeployCard",()=>eo],318037);var eg=e.i(293265),eh=e.i(782514),ev=(0,r.memo)(function(e){var t=(0,i.useDeploymentCurrentBuild)(),r=!!t,a=(0,eg.useAgentStackPlatformType)().agentStackPlatformType;return a?(0,n.jsx)(es,{openDeploymentsPane:function(){return e.openPane({type:"deployments"})},isRedeploy:r,agentStackPlatformType:a}):(0,n.jsx)(eh.TrackingHierarchyProvider,{hierarchy:{view:"suggest_deploy_in_chat"},children:(0,n.jsx)(el,{currentBuild:t,isRedeploy:r,openDeploymentsPane:function(){return e.openPane({type:"deployments"})},paneType:"agentChat"})})});e.s(["SuggestDeploy",()=>ev],10537),e.i(653863);var ey=e.i(973519),ex=e.i(509908),eb=e.i(248011),eS=e.i(608263),e_=e.i(127704);function ew(e){var t=e.message,i=e.suggestedAutonomyLevel,o=e.onSwitchToAutonomousBuildMode,u=(0,s._)((0,r.useState)(!1),2),c=u[0],d=u[1],p=(0,ey.useGlobalModal)().show,f=(0,eb.useIsFreemiumStarterPlanUsersOwnRepl)().isFreemiumStarterPlanUsersOwnRepl,m=(0,k.useFlag)({controlName:"flag-free-plan",default:!1});if(c)return null;var g=m&&f;return(0,n.jsxs)(V.Surface,{elevated:!0,gap:4,px:8,py:6,clsx:e_.default.card,children:[(0,n.jsx)(U.Text,{children:t}),(0,n.jsxs)(H.View,{row:!0,gap:4,align:"center",wrap:"wrap",children:[(0,n.jsx)(N.Button,{text:"Dismiss",onClick:function(){(0,ex.trackAgentAnalyticsEvent)({action:"suggest_general_build_mode_dismissed"}),d(!0)}}),(0,n.jsx)(N.Button,{variant:"default",colorway:"primary",iconRight:(0,n.jsx)(eS.default,{}),text:g?"Upgrade for Autonomous Agent":"Continue with Autonomous Agent",onClick:function(){return(0,a._)(function(){return(0,l._)(this,function(e){switch(e.label){case 0:if((0,ex.trackAgentAnalyticsEvent)({action:"suggest_general_build_mode_accepted",ctaLabel:"Continue with Autonomous Agent"}),!g)return[3,2];return[4,p("UpgradeEducationModal",{context:"agent_workspace_autonomous_mode_upsell",surface:"agent_chat",highlightedFeature:"autonomousBuildMode"})];case 1:return e.sent(),[2];case 2:return null==o||o(i),[2]}})})()},clsx:e_.default.continueButton})]})]})}e.s(["SuggestGeneralBuildMode",()=>ew],225821);var eT=e.i(366492),ej=e.i(961864),eD=e.i(401211),ek=(0,r.memo)(function(e){var t=e.suggestRollbackReason,r=e.onShowCheckpoints;return(0,n.jsxs)(V.Surface,{elevated:!0,clsx:eD.default.container,gap:8,children:[(0,n.jsxs)(H.View,{gap:4,children:[(0,n.jsx)(U.Text,{variant:"subheadDefault",children:"Choose a checkpoint to roll back to"}),(0,n.jsxs)(U.Text,{children:[t," ",(0,n.jsx)(eT.default,{href:"https://docs.replit.com/replitai/checkpoints-and-rollbacks#checkpoints-and-rollbacks",target:"_blank",children:"Learn more about rollbacks"})]})]}),(0,n.jsx)(H.View,{row:!0,gap:8,align:"center",justify:"start",children:(0,n.jsx)(N.Button,{clsx:eD.default.inlineButton,size:"small",variant:"nofill",iconLeft:(0,n.jsx)(ej.default,{}),text:"View checkpoints",onClick:function(){(0,ex.trackAgentAnalyticsEvent)({action:"suggest_rollback_cta_clicked",ctaLabel:"View checkpoints"}),r()}})})]})});e.s(["SuggestRollback",()=>ek],202872)},111456,e=>{e.v({codeText:"Summary-module__0fK4qa__codeText"})},389503,e=>{"use strict";var t=e.i(276385),n=e.i(389959),r=e.i(960178),i=e.i(111456);function a(e){var a=e.summary,o=e.variant,s=e.color,l=(0,n.useMemo)(function(){for(var e=a,t,n=/`([^`]+)`/g,r=[],i=0;null!==(t=n.exec(e));)i<t.index&&r.push({text:e.substring(i,t.index),isCode:!1}),r.push({text:t[1],isCode:!0}),i=t.index+t[0].length;return i<e.length&&r.push({text:e.substring(i),isCode:!1}),r},[a]);return(0,t.jsx)(r.Text,{multiline:!1,variant:o,color:s,showTooltipOnTruncate:!0,children:l.map(function(e,r){return e.isCode?(0,t.jsx)("span",{className:i.default.codeText,children:e.text},r):(0,t.jsx)(n.Fragment,{children:e.text},r)})})}e.s(["Summary",()=>a])},362053,e=>{e.v({messageContainer:"MessagedBackgroundAgent-module__Worq2W__messageContainer",messageText:"MessagedBackgroundAgent-module__Worq2W__messageText"})},424608,e=>{e.v({bounce:"AnimatedEllipsis-module__5gLtQW__bounce",dot:"AnimatedEllipsis-module__5gLtQW__dot",root:"AnimatedEllipsis-module__5gLtQW__root"})},977591,e=>{e.v({resultContainer:"SubagentReportResult-module__b03XcW__resultContainer",resultText:"SubagentReportResult-module__b03XcW__resultText"})},291046,e=>{e.v({asyncLabel:"GenerateMedia-module__eXNImG__asyncLabel",container:"GenerateMedia-module__eXNImG__container",errorContent:"GenerateMedia-module__eXNImG__errorContent",grid:"GenerateMedia-module__eXNImG__grid",gridItem:"GenerateMedia-module__eXNImG__gridItem",image:"GenerateMedia-module__eXNImG__image",mediaEmptyState:"GenerateMedia-module__eXNImG__mediaEmptyState",promptItem:"GenerateMedia-module__eXNImG__promptItem",promptStatus:"GenerateMedia-module__eXNImG__promptStatus",promptText:"GenerateMedia-module__eXNImG__promptText",promptsContainer:"GenerateMedia-module__eXNImG__promptsContainer",video:"GenerateMedia-module__eXNImG__video"})},364343,e=>{e.v({container:"ImageGeneration-module__OtLLdq__container",error:"ImageGeneration-module__OtLLdq__error",image:"ImageGeneration-module__OtLLdq__image",loading:"ImageGeneration-module__OtLLdq__loading"})},687843,e=>{e.v({parameterKey:"MCPParameterRenderer-module__-cV15W__parameterKey",parameterValue:"MCPParameterRenderer-module__-cV15W__parameterValue",parametersGrid:"MCPParameterRenderer-module__-cV15W__parametersGrid"})},11286,e=>{e.v({expandableSubSection:"MCPToolResult-module__kM_UGq__expandableSubSection",securityErrorAlert:"MCPToolResult-module__kM_UGq__securityErrorAlert",securityErrorAlertTitle:"MCPToolResult-module__kM_UGq__securityErrorAlertTitle",subsectionButton:"MCPToolResult-module__kM_UGq__subsectionButton",wrappedText:"MCPToolResult-module__kM_UGq__wrappedText"})},976926,412887,672320,667059,178815,971372,774787,844225,198820,487638,344424,12219,507091,54073,641654,504186,132183,e=>{"use strict";var t,n,r,i,a=e.i(276385),o=e.i(389959),s=e.i(188507),l=e.i(389503),u=e.i(480028),c=e.i(965153),d=e.i(929872),p=e.i(960178),f=e.i(625484),m=e.i(940745),g=e.i(349556),h=e.i(362053),v=(0,o.memo)(function(e){var t,n=e.data,r=e.state===s.EventState.IN_PROGRESS,i=!!(null==n?void 0:n.message),o=!!(null==n?void 0:n.summary);t=r&&!i?"Generating message for subagent":o?"Generated message for subagent: ".concat(n.summary):"Generated message for subagent";var v=r?(0,a.jsx)(m.default,{}):(0,a.jsx)(g.default,{color:u.tokens.foregroundDimmer});return(0,a.jsx)(c.AccordionItem,{variant:"compact",chevron:i?"end":"none",disabled:!i,headerContent:(0,a.jsxs)(f.View,{row:!0,align:"center",gap:6,grow:!0,shrink:!0,children:[v,(0,a.jsx)(l.Summary,{summary:t,color:"dimmer"})]}),children:(0,a.jsx)(d.Surface,{clsx:h.default.messageContainer,children:(0,a.jsx)(p.Text,{variant:"small",color:"dimmer",clsx:h.default.messageText,children:n.message})})})});e.s(["MessagedBackgroundAgent",()=>v],976926);var y=e.i(878420),x=e.i(64386),b=e.i(424608),S=function(e){return(0,a.jsxs)("span",(0,x._)((0,y._)({className:b.default.root},e),{children:[(0,a.jsx)("span",(0,x._)((0,y._)({className:b.default.dot},e),{children:"."})),(0,a.jsx)("span",(0,x._)((0,y._)({className:b.default.dot},e),{children:"."})),(0,a.jsx)("span",(0,x._)((0,y._)({className:b.default.dot},e),{children:"."}))]}))},_=e.i(42458),w=(0,o.memo)(function(e){var t=e.state===s.EventState.COMPLETE;return(0,a.jsxs)(f.View,{row:!0,align:"center",gap:6,px:4,children:[(0,a.jsx)(_.default,{color:u.tokens.foregroundDimmer}),(0,a.jsxs)(p.Text,{color:"dimmer",children:[t?"Sent issue report to Replit Team":"Sending issue report to Replit Team",!t&&(0,a.jsx)(S,{})]})]})});e.s(["ReportAgentIssue",()=>w],412887);var T=e.i(977591);function j(e){var t=e.data,n=e.state===s.EventState.IN_PROGRESS,r=!!(null==t?void 0:t.result),i=n?(0,a.jsx)(m.default,{}):(0,a.jsx)(g.default,{color:u.tokens.foregroundDimmer});return(0,a.jsx)(c.AccordionItem,{variant:"compact",chevron:r?"end":"none",disabled:!r,headerContent:(0,a.jsxs)(f.View,{row:!0,align:"center",gap:6,grow:!0,shrink:!0,children:[i,(0,a.jsx)(l.Summary,{summary:n?"Generating response":"Generated response",color:"dimmer"})]}),children:(0,a.jsx)(d.Surface,{clsx:T.default.resultContainer,children:(0,a.jsx)(p.Text,{variant:"small",color:"dimmer",clsx:T.default.resultText,children:t.result})})})}e.s(["SubagentReportResult",()=>j],672320);var D=e.i(546284),k=(0,o.memo)(function(e){var t=e.data,n=e.state===s.EventState.COMPLETE,r=t.actualWaitTimeSeconds,i=n&&void 0!==r?"Waited for ".concat(function(e){if(e<60)return(0,D.default)("second",e,!0);var t=Math.floor(e/60),n=e%60;return 0===n?(0,D.default)("minute",t,!0):"".concat((0,D.default)("minute",t,!0)," ").concat((0,D.default)("second",n,!0))}(r)," for background jobs to complete"):"Waiting for background jobs to complete";return(0,a.jsx)(f.View,{row:!0,align:"center",px:4,children:(0,a.jsxs)(p.Text,{color:"dimmer",children:[i,!n&&(0,a.jsx)(S,{})]})})});e.s(["WaitingForBackgroundJobs",()=>k],667059),e.i(439725);var C=e.i(886513),E=e.i(442060),A=e.i(14007),I=e.i(399063),R=e.i(658886),P=e.i(559482),M=e.i(245225),O=e.i(368357),N=e.i(292297),L=e.i(982204),B=e.i(503536),V=e.i(841691),U=e.i(761922),F=e.i(419735),H=e.i(452002),G=e.i(243074),z=e.i(987154),q=e.i(658975),W=e.i(406345),K=e.i(883002),$=e.i(558273),Y=e.i(797706),X=e.i(634669),Q=e.i(360877),J=e.i(559073),Z=e.i(952030),ee=e.i(926341),et=e.i(121817),en=e.i(245150),er=e.i(216431),ei=e.i(793579),ea=e.i(566818),eo=e.i(476891),es=e.i(44239),el=e.i(659666);function eu(e){var t=e.kind,n=(0,C._)(e,["kind"]),r={alertData:(0,a.jsx)(_.default,{}),createPostgresqlDatabaseData:(0,a.jsx)(N.default,{}),createFileData:(0,a.jsx)(F.default,{}),deployData:(0,a.jsx)(B.default,{}),readFileData:(0,a.jsx)(E.default,{}),readDirData:(0,a.jsx)(G.default,{}),fileEditData:(0,a.jsx)(H.default,{}),shellExecutionData:(0,a.jsx)(eo.default,{}),packagerInstallData:(0,a.jsx)(X.default,{}),screenshotData:(0,a.jsx)(I.default,{}),toolchainInstallData:(0,a.jsx)(es.default,{}),searchFilesystemData:(0,a.jsx)(ei.default,{}),searchFileData:(0,a.jsx)(ei.default,{}),planProgressData:(0,a.jsx)(P.default,{}),packagerUninstallData:(0,a.jsx)(X.default,{}),messageData:(0,a.jsx)(R.default,{}),memoryCompressionData:(0,a.jsx)(A.default,{}),systemDependencyInstallData:(0,a.jsx)(L.default,{}),systemDependencyUninstallData:(0,a.jsx)(L.default,{}),workflowsStartToolData:(0,a.jsx)(J.default,{}),workflowsRestartToolData:(0,a.jsx)(et.default,{}),workflowsStopToolData:(0,a.jsx)(ea.default,{}),workflowsSetRunConfigToolData:(0,a.jsx)(J.default,{}),workflowsRemoveRunConfigToolData:(0,a.jsx)(O.default,{}),workflowsGetOutputToolData:(0,a.jsx)(V.default,{}),presentResultsToolData:(0,a.jsx)(ee.default,{}),sqlExecutionData:(0,a.jsx)(N.default,{}),summarizeObjectiveData:(0,a.jsx)(E.default,{}),revertData:(0,a.jsx)(en.default,{}),agentPlanStepBegin:(0,a.jsx)(er.default,{}),deployConfigData:(0,a.jsx)(B.default,{}),acknowledgeUserMessage:(0,a.jsx)(M.default,{}),newSessionNudge:(0,a.jsx)(Z.default,{}),commitData:(0,a.jsx)(M.default,{}),thoughts:(0,a.jsx)(A.default,{}),blueprintsSetup:(0,a.jsx)(W.default,{}),webSearchData:(0,a.jsx)(z.default,{}),webPageVisitData:(0,a.jsx)(ei.default,{}),imageGenerationData:(0,a.jsx)(q.default,{}),videoGenerationData:(0,a.jsx)(q.default,{}),projectImportCompleted:(0,a.jsx)(G.default,{}),taskListData:(0,a.jsx)(K.default,{}),suggestRollbackData:(0,a.jsx)(en.default,{}),samplingEvent:(0,a.jsx)(el.default,{}),setupObjectStorageData:(0,a.jsx)(Y.default,{}),endOfRunSummaryData:(0,a.jsx)(M.default,{}),stockImageData:(0,a.jsx)(q.default,{}),searchIntegrationsData:(0,a.jsx)(ei.default,{}),viewIntegrationData:(0,a.jsx)(ei.default,{}),setupModelfarmData:(0,a.jsx)(A.default,{}),viewLogsData:(0,a.jsx)(er.default,{}),uiTestingSubagentTakeOverData:(0,a.jsx)(A.default,{}),viewSpecialFiles:(0,a.jsx)(U.default,{}),designGuidelinesData:(0,a.jsx)(Q.default,{}),mcpToolData:(0,a.jsx)($.default,{}),viewEnvVarData:(0,a.jsx)(V.default,{}),setEnvVarData:(0,a.jsx)(O.default,{}),deleteEnvVarData:(0,a.jsx)(O.default,{}),generateMediaData:(0,a.jsx)(q.default,{}),waitingForBackgroundJobsData:(0,a.jsx)(M.default,{}),suggestGeneralBuildModeData:(0,a.jsx)(X.default,{}),messagedBackgroundAgent:(0,a.jsx)(g.default,{}),subagentReportResultData:(0,a.jsx)(g.default,{}),reportAgentIssueData:(0,a.jsx)(_.default,{})};return t&&r[t]?(0,o.cloneElement)(r[t],n):(0,o.cloneElement)((0,a.jsx)(M.default,{}),n)}function ec(e){var t=e.toolName,n=(0,C._)(e,["toolName"]),r={programming_language_install_tool:(0,a.jsx)(L.default,{}),wait_for_background_jobs:(0,a.jsx)(M.default,{})};return t&&r[t]?(0,o.cloneElement)(r[t],n):(0,o.cloneElement)((0,a.jsx)(M.default,{}),n)}e.s(["ToolDataIcon",()=>eu],178815),e.s(["ToolNameIcon",()=>ec],971372);var ed=e.i(904851),ep=e.i(90659),ef=e.i(721281),em=e.i(530658),eg=e.i(179302),eh=e.i(266159),ev=e.i(221250),ey=e.i(700170);e.i(312917);var ex=e.i(675186),eb=e.i(826771),eS=e.i(441329),e_=e.i(653412),ew=e.i(140487),eT=e.i(630818),ej=e.i(901708),eD="cm-agent-flash-range-element",ek="rgba(100, 0, 255, 0.3)",eC=eg.EditorView.theme((0,ef._)({"&":{maxHeight:"max(calc(".concat(ej.scrollSizeTokens.height," - 125px), 125px)")},".cm-gutters":{backgroundColor:u.tokens.backgroundHigher}},".".concat(eD),{display:"inline-block"})),eE=eg.EditorView.theme((0,ef._)({"&":{maxHeight:"calc(".concat(ej.scrollSizeTokens.height," - 40px)")},".cm-scroller":{"&::-webkit-scrollbar":{display:"none"}},".cm-gutters":{backgroundColor:u.tokens.backgroundHigher}},".".concat(eD),{display:"inline-block"})),eA=function(){function e(t,n){var r=this;(0,ed._)(this,e),(0,ef._)(this,"view",void 0),(0,ef._)(this,"target",void 0),(0,ef._)(this,"loop",void 0),(0,ef._)(this,"previous",void 0),(0,ef._)(this,"destroyed",void 0),(0,ef._)(this,"dispose",void 0),this.view=t,this.target=null,this.previous="",this.destroyed=!1,this.loop=new ex.AnimationLoop(function(e,n){if(null===r.target)return n();var i=t.lineBlockAt(r.target),a=t.scrollDOM.scrollTop,o=Math.min(Math.max(i.top,0),t.scrollDOM.scrollHeight-t.scrollDOM.clientHeight),s=o-a,l=Math.abs(s);if(l<1)return t.scrollDOM.scrollTop=o,r.target=null,n();var u=3e3*e;l<1500&&(u*=Math.sqrt(l/1500));var c=s>=0?Math.max(Math.min(u,l),.5):Math.min(Math.max(-u,-l),-.5);t.scrollDOM.scrollTop+=c}),Promise.resolve().then(function(){r.destroyed||(r.previous=n.current,t.dispatch({changes:{from:0,to:t.state.doc.length,insert:n.current}}),r.target=n.current.length,r.loop.start(),r.dispose=n.subscribe(function(e){if(e.startsWith(r.previous)){var n=r.previous.length,i=e.length,a=e.slice(n),o=eh.addAnimatedRange.of({from:n,to:i,class:eD,animation:{duration:550,fill:"backwards",easing:"ease-out",keyframes:{opacity:[.675,.75,1],filter:["grayscale(0.325)","grayscale(0)","grayscale(0)"],backgroundColor:[ek,ek,"transparent"],offset:[0,.18181818181818182,1]}}});t.dispatch({changes:{from:n,insert:a},effects:o})}else{var s=r.view.state.doc.length;t.dispatch({changes:{from:0,to:s,insert:e}})}r.previous=e,r.target=t.state.doc.length,r.loop.start()}))})}return(0,ep._)(e,[{key:"destroy",value:function(){var e;this.destroyed=!0,this.target=null,this.loop.stop(),null==(e=this.dispose)||e.call(this)}}]),e}(),eI=new ey.ReactCompartment(function(e){return eg.ViewPlugin.define(function(t){return new eA(t,e)})});function eR(e){var t=e.path,n=e.code,r=e.openPane,i=e.showCode,s=(0,eS.useIsInMobileWorkspace)(),l=(0,em._)((0,o.useState)(function(){return(0,eb.observableValue)(n)}),1)[0];(0,o.useEffect)(function(){l.current!==n&&l.set(n)},[l,n]);var u=eI.use(l),c=(0,o.useCallback)(function(){r&&r({type:"codeEditor",data:{path:t}})},[r,t]);return(0,a.jsx)(e_.EventPane,{left:(0,a.jsx)(eT.default,{path:t,size:16}),title:(0,a.jsx)(eP,{path:t,onClick:c}),onOpenPane:c,openPaneButtonAlt:"Open code file",children:void 0===i||i?(0,a.jsx)(ev.default,{filePath:t,extensions:[s?eE:eC,u],hideGutter:s,fontSize:s?12:void 0,lineWrapping:!1,hideIndentMarker:!0,readOnly:!0}):null})}function eP(e){var t=e.path,n=e.onClick;return n?(0,a.jsx)(ew.Button,{variant:"underlinedOnHover",text:eM(t),onClick:n}):(0,a.jsx)(p.Text,{children:eM(t)})}function eM(e){return e.replace(/^\//,"")}function eO(e){var t=e.data,n=e.openPane;return(0,a.jsx)(eR,{path:t.path,code:t.content,openPane:n})}function eN(e){var t=e.openPane;return(0,a.jsx)(e_.EventPane,{left:(0,a.jsx)(N.default,{size:16}),title:"Created PostgreSQL Database",onOpenPane:function(){return t({type:"neon"})}})}e.s(["CodePath",()=>eP,"default",()=>eR],774787),e.s(["CreateFile",()=>eO],844225),e.s(["CreatePostgreSQLDatabase",()=>eN],198820);var eL=e.i(906368),eB=e.i(167626),eV=e.i(399119),eU=e.i(445789),eF=e.i(463348),eH=((t={}).FILE_HEADER_MISSING="FILE_HEADER_MISSING",t.FILE_HEADER_INVALID="FILE_HEADER_INVALID",t.FILE_HEADER_SAME_SIDE="FILE_HEADER_SAME_SIDE",t.FILE_HEADER_MISSING_LABEL="FILE_HEADER_MISSING_LABEL",t.HUNK_EMPTY="HUNK_EMPTY",t.HUNK_HEADER_INVALID="HUNK_HEADER_INVALID",t.HUNK_LINE_INVALID="HUNK_LINE_INVALID",t.GIT_DIFF_HEADER_MISSING="GIT_DIFF_HEADER_MISSING",t.GIT_DIFF_HEADER_INVALID="GIT_DIFF_HEADER_INVALID",t.GIT_DIFF_HEADER_LINE_INVALID="GIT_DIFF_HEADER_LINE_INVALID",t.NEVER="NEVER",t),eG=(n={},(0,ef._)(n,"FILE_HEADER_MISSING","Missing one-of either `---` or `+++` headers"),(0,ef._)(n,"FILE_HEADER_INVALID","File header does not match the expected format"),(0,ef._)(n,"FILE_HEADER_SAME_SIDE","Both file headers use the same prefix (e.g. `---`)"),(0,ef._)(n,"FILE_HEADER_MISSING_LABEL","File header is missing a label"),(0,ef._)(n,"HUNK_EMPTY","Hunk is empty"),(0,ef._)(n,"HUNK_HEADER_INVALID","Hunk header does not match the expected format"),(0,ef._)(n,"HUNK_LINE_INVALID","Hunk line does not match the expected format"),(0,ef._)(n,"GIT_DIFF_HEADER_MISSING","Git diff header is missing"),(0,ef._)(n,"GIT_DIFF_HEADER_INVALID","Git diff header does not match the expected format"),(0,ef._)(n,"GIT_DIFF_HEADER_LINE_INVALID","Incorrectly formatted or unknown git diff header line"),(0,ef._)(n,"NEVER","Encountered unreachable code, this should never happen"),n),ez=function(e){function t(e){var n,r,i,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,ed._)(this,t),n=(0,eV._)(this,t,["Exception when parsing diff: ".concat(e," - ").concat(eG[e])]),(0,ef._)(n,"reason",void 0),(0,ef._)(n,"patch",void 0),(0,ef._)(n,"context",void 0),(0,ef._)(n,"chunk",void 0),n.name="ParseError",n.reason=e,n.context=null!=(r=o.context)?r:null,n.chunk=null!=(i=o.chunk)?i:null,n.patch=null!=(a=o.patch)?a:null,n}return(0,eU._)(t,e),t}((0,eF._)(Error)),eq=/(?:\\[0-7]{1,3})+/g,eW=/\\([0-7]{1,3})/g,eK=/\\([0btvfrn])/g;function e$(e){return e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1).replaceAll("\\\\","ï¿¼").replaceAll('\\"','"').replace(eq,function(e){null!=r||(r=new TextDecoder);var t=Uint8Array.from(Array.from(e.matchAll(eW)),function(e){return parseInt(e[1],8)});return r.decode(t)}).replace(eK,function(e,t){switch(t){case"0":return"\0";case"b":return"\b";case"t":return"	";case"v":return"\v";case"f":return"\f";case"r":return"\r";case"n":return"\n";default:throw Error("unexpected match")}}).replaceAll("ï¿¼","\\"):e}function eY(e,t){var n=e.startsWith("a/"),r=t.startsWith("b/");return e=n&&(r||"/dev/null"===t)?e.slice(2):e,t=r&&(n||"/dev/null"===e)?t.slice(2):t,[e,t]}var eX=/^(---|\+\+\+)[ \t](.+?)([ \t]\d+-\d+-\d+[ \t]\d+:\d+:\d+(?:\.\d+)?[ \t](?:-|\+)\d+)?$/,eQ=RegExp("^@@[ \\t]+-(\\d+)(?:,(\\d+))?[ \\t]\\+(\\d+)(?:,(\\d+))?[ \\t]@@(?:[ \\t](.*))?$","s"),eJ=RegExp("^([ +-])(.*)$","s"),eZ=/(?:^|\n)(?=@@)/;function e0(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.split(/\r?\n/),i=r[0],a=r[1];if(!i||!a)throw new ez(eH.FILE_HEADER_MISSING,{context:e});var o=eX.exec(i),s=eX.exec(a);if(!o||!s)throw new ez(eH.FILE_HEADER_INVALID,{context:e,chunk:o?a:i});if(o[1]===s[1])throw new ez(eH.FILE_HEADER_SAME_SIDE,{context:e});var l=null,u=null;if("---"===o[1]?l=o[2]:"+++"===o[1]&&(u=o[2]),"---"===s[1]?l=s[2]:"+++"===s[1]&&(u=s[2]),null===l||null===u)throw new ez(eH.FILE_HEADER_MISSING_LABEL,{context:e});n.git&&(l=e$(l),u=e$(u),l=(t=(0,em._)(eY(l,u),2))[0],u=t[1],l="/dev/null"===l?null:l,u="/dev/null"===u?null:u);var c=r.slice(2).join("\n").split(eZ);return 1===c.length&&""===c[0]?{labelA:l,labelB:u,hunks:[]}:{labelA:l,labelB:u,hunks:c.map(function(t){var n=t.split("\n").filter(function(e){return"\\ No newline at end of file"!==e});if(n.length&&!n[n.length-1]&&n.pop(),!n.length)throw new ez(eH.HUNK_EMPTY,{context:e,chunk:t});var r=eQ.exec(n[0]);if(!r)throw new ez(eH.HUNK_HEADER_INVALID,{context:e,chunk:n[0]});var i=parseInt(r[1],10),a=i+(r[2]?parseInt(r[2],10):1)-1,o=parseInt(r[3],10),s=o+(r[4]?parseInt(r[4],10):1)-1,l=r[5]||null,u=i,c=o;return{fromA:i,toA:a,fromB:o,toB:s,heading:l,lines:n.slice(1).map(function(t){var n,r,i,a=eJ.exec(t);if(!a)throw new ez(eH.HUNK_LINE_INVALID,{context:e,chunk:t});var o=a[2];switch(a[1]){case" ":n="same",r=u,i=c,u++,c++;break;case"+":n="added",r=null,i=c,c++;break;case"-":n="removed",r=u,i=null,u++;break;default:throw new ez(eH.NEVER,{context:e,chunk:t})}return{type:n,content:o,numberA:r,numberB:i}})}})}}var e1={"old mode":/^old mode[ \t](\d{6})$/,"new mode":/^new mode[ \t](\d{6})$/,"deleted file mode":/^deleted file mode[ \t](\d{6})$/,"new file mode":/^new file mode[ \t](\d{6})$/,"copy from":/^copy from[ \t](.+)$/,"copy to":/^copy to[ \t](.+)$/,"rename from":/^rename from[ \t](.+)$/,"rename to":/^rename to[ \t](.+)$/,"similarity index":/^similarity index[ \t](\d+)%$/,"dissimilarity index":/^dissimilarity index[ \t](\d+)%$/,index:/^index (.+?)\.\.(.+?)(?:[ \t]([0-7]{6}))?$/},e2=/^Binary files (.*) and (.*) differ$/,e4=/^diff --git ("a\/.*?"|a\/.*?)[ \t]("b\/.*?"|b\/.*?)$/,e8=/(?:^|\n)(?=diff --git)/;function e3(e){for(var t in e1){var n=e1[t],r=e.match(n);if(r)switch(t){case"old mode":case"new mode":case"deleted file mode":case"new file mode":return{type:t,mode:r[1]};case"copy from":case"copy to":case"rename from":case"rename to":return{type:t,path:e$(r[1])};case"similarity index":case"dissimilarity index":return{type:t,index:parseInt(r[1],10)};case"index":return{type:t,hashA:r[1],hashB:r[2],mode:r[3]?r[3]:null}}}throw new ez(eH.GIT_DIFF_HEADER_LINE_INVALID,{chunk:e})}function e6(e){var t=e.split(/\r?\n/);if(!t[0])throw new ez(eH.GIT_DIFF_HEADER_MISSING,{context:e});if(!e4.test(t[0]))throw new ez(eH.GIT_DIFF_HEADER_INVALID,{context:e,chunk:t[0]});var n=t.findIndex(function(e){return e.startsWith("---")});if(-1===n){var r,i=t[0].match(e4);if(!i)throw new ez(eH.FILE_HEADER_INVALID,{context:e,chunk:t[0]});var a=i[1],o=i[2],s=!1;a=e$(a),o=e$(o),a=(r=(0,em._)(eY(a,o),2))[0],o=r[1],a="/dev/null"===a?null:a,o="/dev/null"===o?null:o;for(var l=[],u=1;u<t.length;u++)if(t[u].trim()){if(e2.test(t[u])){s=!0;break}l.push(e3(t[u]))}return{pathA:a,pathB:o,headers:l,binary:s,hunks:[]}}for(var c=!1,d=[],p=1;p<n;p++){if(e2.test(t[p])){c=!0;break}d.push(e3(t[p]))}var f=e0(t.slice(n).join("\n"),{git:!0});return{pathA:f.labelA,pathB:f.labelB,headers:d,binary:c,hunks:f.hunks}}var e5=e.i(960933),e7=e5.Type.Union([e5.Type.Object({type:e5.Type.Literal("added"),content:e5.Type.String(),numberA:e5.Type.Null(),numberB:e5.Type.Number()},{title:"HunkLineAdded"}),e5.Type.Object({type:e5.Type.Literal("removed"),content:e5.Type.String(),numberA:e5.Type.Number(),numberB:e5.Type.Null()},{title:"HunkLineRemoved"}),e5.Type.Object({type:e5.Type.Literal("same"),content:e5.Type.String(),numberA:e5.Type.Integer(),numberB:e5.Type.Integer()},{title:"HunkLineSame"})],{title:"HunkLine"}),e9=e5.Type.Object({fromA:e5.Type.Integer(),toA:e5.Type.Integer(),fromB:e5.Type.Integer(),toB:e5.Type.Integer(),heading:e5.Type.Union([e5.Type.String(),e5.Type.Null()]),lines:e5.Type.Array(e7)},{title:"Hunk"}),te=e5.Type.Object({labelA:e5.Type.Union([e5.Type.String(),e5.Type.Null()]),labelB:e5.Type.Union([e5.Type.String(),e5.Type.Null()]),hunks:e5.Type.Array(e9)},{title:"UnifiedDiff"}),tt=e5.Type.Union([e5.Type.Object({type:e5.Type.Literal("old mode"),mode:e5.Type.String()},{title:"GitDiffHeaderLineOldMode"}),e5.Type.Object({type:e5.Type.Literal("new mode"),mode:e5.Type.String()},{title:"GitDiffHeaderLineNewMode"}),e5.Type.Object({type:e5.Type.Literal("deleted file mode"),mode:e5.Type.String()},{title:"GitDiffHeaderLineDeletedFileMode"}),e5.Type.Object({type:e5.Type.Literal("new file mode"),mode:e5.Type.String()},{title:"GitDiffHeaderLineNewFileMode"}),e5.Type.Object({type:e5.Type.Literal("copy from"),path:e5.Type.String()},{title:"GitDiffHeaderLineCopyFrom"}),e5.Type.Object({type:e5.Type.Literal("copy to"),path:e5.Type.String()},{title:"GitDiffHeaderLineCopyTo"}),e5.Type.Object({type:e5.Type.Literal("rename from"),path:e5.Type.String()},{title:"GitDiffHeaderLineRenameFrom"}),e5.Type.Object({type:e5.Type.Literal("rename to"),path:e5.Type.String()},{title:"GitDiffHeaderLineRenameTo"}),e5.Type.Object({type:e5.Type.Literal("similarity index"),index:e5.Type.Integer()},{title:"GitDiffHeaderLineSimilarityIndex"}),e5.Type.Object({type:e5.Type.Literal("dissimilarity index"),index:e5.Type.Integer()},{title:"GitDiffHeaderLineDissimilarityIndex"}),e5.Type.Object({type:e5.Type.Literal("index"),hashA:e5.Type.String(),hashB:e5.Type.String(),mode:e5.Type.Union([e5.Type.String(),e5.Type.Null()])},{title:"GitDiffHeaderLineIndex"})],{title:"GitDiffHeaderLine"});e5.Type.Object({pathA:e5.Type.Union([e5.Type.String(),e5.Type.Null()]),pathB:e5.Type.Union([e5.Type.String(),e5.Type.Null()]),headers:e5.Type.Array(tt),binary:e5.Type.Optional(e5.Type.Boolean()),hunks:e5.Type.Array(e9)},{title:"GitDiff"}),e.s(["UnifiedDiffSchema",()=>te],487638),e.s([],344424);var tn=e.i(968323),tr=e.i(446530),ti=e.i(613355),ta=e.i(346715),to=u.tokens.outlineDimmest,ts=(0,o.createContext)({});function tl(){return(0,o.useContext)(ts)}function tu(e){var t=e.diff,n=e.onPathClick,r=e.onViewFullDiff,i=e.children,s=(0,o.useMemo)(function(){var e=!0,n=!1,r=void 0;try{for(var i,a=t.headers[Symbol.iterator]();!(e=(i=a.next()).done);e=!0){var o=i.value;if("index"===o.type)return{a:o.hashA,b:o.hashB}}}catch(e){n=!0,r=e}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}},[t]),l=(0,o.useMemo)(function(){return{handlePathNavigation:n?function(e,r){var i="a"===e?t.pathA:t.pathB,a="a"===e?null==s?void 0:s.a:null==s?void 0:s.b;i&&n({path:i,revision:a,line:r})}:void 0,handleViewFullDiffNavigation:r?function(){var e=t.pathB||t.pathA,n=(null==s?void 0:s.b)||(null==s?void 0:s.a);e&&r({path:e,revision:n})}:void 0}},[t,n,r,s]);return(0,a.jsx)(ts.Provider,{value:l,children:i})}var tc=e.i(297083),td=e.i(817556),tp=e.i(562713),tf=e.i(348704),tm=e.i(731291);e.i(694906);var tg=e.i(446692),th=e.i(703774),tv=new WeakSet,ty="/* emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason */",tx=e.i(788106),tb=e.i(196353),tS=e.i(264661),t_="--number-width-a",tw="--number-width-b",tT=(0,tr.cssRecord)({content:{marginLeft:u.tokens.space8,wordBreak:"break-word",whiteSpace:"pre-wrap"},nbsp:{userSelect:"none"},span:{"&::selection":{backgroundColor:u.tokens.accentPrimaryDimmer}},line:{display:"flex",flexDirection:"row",alignItems:"stretch",gap:"1ch",paddingLeft:"1ch",paddingRight:u.tokens.space8,".is-patch-with-border &":{"&.is-added":{borderLeft:"1px solid ".concat(u.tokens.accentPositiveDimmest)},"&.is-removed":{borderLeft:"1px solid ".concat(u.tokens.accentNegativeDimmest)},"&.is-same":{borderLeft:"1px solid ".concat(to)}},"&.is-skipped":{paddingTop:u.tokens.space4,paddingBottom:u.tokens.space4,color:u.tokens.foregroundDimmest,userSelect:"none"}},number:{flexShrink:0,whiteSpace:"nowrap",userSelect:"none",".is-added &":{color:u.tokens.accentPositiveStronger},".is-removed &":{color:u.tokens.accentNegativeStronger},".is-same &":{color:u.tokens.foregroundDimmest},".is-skipped &":{position:"relative",left:"25%",color:u.tokens.foregroundDimmest}},numberContainer:{display:"flex",flexDirection:"row",alignItems:"start",justifyContent:"flex-end",flexShrink:0,"&.is-side-a":{width:"var(".concat(t_,")")},"&.is-side-b":{width:"var(".concat(tw,")")}}});function tj(e){var t=(0,th.useTheme)().values;return(0,o.useMemo)(function(){if("same"===e)return"";var n="added"===e?t.global.accentPositiveDefault:t.global.accentNegativeDefault;return(0,tx.default)(n).alpha(.2).hex()},[e,t.global.accentPositiveDefault,t.global.accentNegativeDefault])}function tD(e){var t=e.type,n=void 0===t?"same":t,r=e.changes,i=tl().handleViewFullDiffNavigation,o=tj(n);if(r<=0)return null;var s=!1,l=!1;return("removed"===n||"same"===n)&&(s=(0,a.jsx)(tb.default,{size:20})),("added"===n||"same"===n)&&(l=(0,a.jsx)(tb.default,{size:20})),(0,a.jsxs)("div",{className:"is-".concat(n," is-skipped"),css:tT.line,style:{backgroundColor:o},children:[(0,a.jsx)(tC,{side:"a",type:n,number:s}),(0,a.jsx)(tC,{side:"b",type:n,number:l}),(0,a.jsx)("div",{css:tT.content,children:(0,a.jsx)("span",{css:tT.span,children:i?(0,a.jsx)(ew.Button,{text:"view ".concat(r," more ").concat((0,D.default)("change",r)),iconLeft:(0,a.jsx)(tS.default,{}),variant:"underlinedOnHover",colorway:"primary",onClick:function(){return i()}}):"".concat(r," more ").concat((0,D.default)("change",r)," not shown")})})]})}function tk(e){var t=e.type,n=e.content,r=e.numberA,i=e.numberB,o=tj(t);return(0,a.jsxs)("div",{className:"is-".concat(t),css:tT.line,style:{backgroundColor:o},children:[(0,a.jsx)(tC,{side:"a",type:t,number:void 0===r?null:r}),(0,a.jsx)(tC,{side:"b",type:t,number:void 0===i?null:i}),(0,a.jsx)("div",{className:"is-".concat(t),css:tT.content,children:"string"==typeof n?(0,a.jsx)("span",{css:tT.span,children:n||(0,a.jsx)("span",{css:tT.nbsp,children:"Â "})}):n.map(function(e,t){var n=e.text,r=e.tags;return(0,a.jsx)("span",{className:r,css:tT.span,children:n||(0,a.jsx)("span",{css:tT.nbsp,children:"Â "})},t)})})]})}function tC(e){var t=e.side,n=e.type,r=e.number,i=tl().handlePathNavigation;return!1===r?null:null===r?(0,a.jsx)("div",{css:tT.numberContainer,className:"is-side-".concat(t)}):(0,a.jsx)("div",{css:tT.numberContainer,className:"is-side-".concat(t),children:i&&"number"==typeof r?(0,a.jsx)(ew.Button,{text:(0,a.jsx)("span",{css:tT.number,children:r}),variant:"underlinedOnHover",onClick:function(){return i("removed"===n?"a":"b",r)}}):(0,a.jsx)("span",{css:tT.number,children:r})})}var tE=(0,tr.cssRecord)({hunk:[ti.rcss.flex.column,{":not(:first-of-type)":{borderTop:"1px solid ".concat(to)},":first-of-type [data-hunk-header]":{borderTopLeftRadius:3}}],header:[ti.rcss.colorMixBg(u.tokens.interactiveBackground,u.tokens.surfaceBackground),{gap:"1ch",padding:"".concat(u.tokens.space4," 1ch"),".is-patch-with-border &":{borderLeft:"1px solid ".concat(to)}}],countAdded:[ti.rcss.textAlign.right,ti.rcss.color.accentPositiveStronger,ti.rcss.width("var(".concat(tw,")"))],countRemoved:[ti.rcss.textAlign.right,ti.rcss.color.accentNegativeStronger,ti.rcss.width("var(".concat(t_,")"))],sectionHeading:[ti.rcss.ml(8),ti.rcss.font.code,ti.rcss.color.foregroundDimmer],hunks:[ti.rcss.flex.column,ti.rcss.font.code,(i={lineHeight:u.tokens.lineHeightSmall},(0,ef._)(i,"> div:last-child"+ty,ti.rcss.pb(2)),(0,ef._)(i,"> div:first-child"+ty,ti.rcss.pt(4)),i)]});function tA(e){var t=e.hunk,n=e.hideHeader,r=e.maxLines,i=(0,o.useMemo)(function(){var e=0,n=0,r=!0,i=!1,a=void 0;try{for(var o,s=t.lines[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;"added"===l.type?n++:"removed"===l.type&&e++}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return{a:e,b:n}},[t]),s=(0,o.useMemo)(function(){return void 0!==r&&t.lines.length>r?t.lines.slice(0,r):t.lines},[t,r]);return(0,a.jsxs)(f.View,{css:tE.hunk,children:[n?null:(0,a.jsxs)(f.View,{css:tE.header,row:!0,align:"center","data-hunk-header":!0,children:[(0,a.jsxs)("span",{css:tE.countRemoved,children:["-",i.a]}),(0,a.jsxs)("span",{css:tE.countAdded,children:["+",i.b]}),t.heading?(0,a.jsx)("span",{css:tE.sectionHeading,children:t.heading}):null]}),(0,a.jsx)(f.View,{css:tE.hunks,children:s.map(function(e,t){return(0,a.jsx)(tk,(0,y._)({},e),t)})})]})}var tI=e.i(369948),tR=(0,tr.cssRecord)({diff:[ti.rcss.flex.column,{"&.is-patch-with-border":ti.rcss.borderRadius(4)}],header:[ti.rcss.rowWithGap(8),ti.rcss.my(8),ti.rcss.align.center,ti.rcss.flex.wrap],headerFile:{lineHeight:1,"&.is-added":ti.rcss.color.accentPositiveStronger,"&.is-removed":ti.rcss.color.accentNegativeStronger},binaryTag:[ti.rcss.color.accentPrimaryStronger],container:[ti.rcss.flex.column,ti.rcss.overflow("hidden"),{".is-patch-with-border &":[ti.rcss.borderRadius(4),{"&.is-modified":{border:"1px solid ".concat(to),borderLeft:"none"},"&.is-added":{border:"1px solid ".concat(u.tokens.accentPositiveDimmest),borderLeft:"none"},"&.is-removed":{border:"1px solid ".concat(u.tokens.accentNegativeDimmest),borderLeft:"none"},"&.is-no-changes":{border:"1px solid ".concat(u.tokens.outlineDimmer)},"&.is-binary":{border:"1px solid ".concat(u.tokens.outlineDimmer)}}],"&.is-no-changes":[ti.rcss.p(8),ti.rcss.center],"&.is-binary":[ti.rcss.p(8),ti.rcss.center]}],file:[ti.rcss.flex.column,ti.rcss.font.code,{lineHeight:u.tokens.lineHeightSmall,"> div:last-child":ti.rcss.pb(2),"> div:first-child":ti.rcss.pt(4)}]});function tP(e){var t,n,r,i,s,l,u=e.diff,c=e.maxLines,d=e.noHeader,p=e.noBorder,m=e.background,g=e.compressed,h=e.onPathClick,v=e.onViewFullDiff,b=(n=(t=(0,em._)((0,o.useState)(u),2))[0],r=t[1],i=(0,th.useTheme)(),s=(0,o.useMemo)(function(){return(0,tf.highlightStyleFromSpecs)(i.values.editor.syntaxHighlighting)},[i.values.editor.syntaxHighlighting]),(0,o.useEffect)(function(){!s.module||tv.has(s.module)||(tp.StyleModule.mount(document,s.module),tv.add(s.module))},[s.module]),(0,o.useEffect)(function(){r(u);var e=0,t=!0,n=!1,i=void 0;try{for(var a,o=u.hunks[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var l=a.value;if((e+=l.lines.length)>1e3)return}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}var c=new AbortController,d=c.signal;return(0,tc._)(function(){var e,t,n,r,i,a,o;return(0,td._)(this,function(l){switch(l.label){case 0:if(0===u.hunks.length)return[2,u];if(e=u.pathA?tg.FileTypeRepository.from(u.pathA):null,t=u.pathB?tg.FileTypeRepository.from(u.pathB):null,n=null,r=null,!(e&&e.codeMirrorLanguage))return[3,4];if(!e.codeMirrorLanguage.support)return[3,1];return i=e.codeMirrorLanguage.support.language.parser,[3,3];case 1:return[4,e.codeMirrorLanguage.load()];case 2:i=l.sent().language.parser,l.label=3;case 3:n=i,l.label=4;case 4:if(!(t&&t.codeMirrorLanguage))return[3,8];if(!t.codeMirrorLanguage.support)return[3,5];return a=t.codeMirrorLanguage.support.language.parser,[3,7];case 5:return[4,t.codeMirrorLanguage.load()];case 6:a=l.sent().language.parser,l.label=7;case 7:r=a,l.label=8;case 8:if(d.aborted||!n&&!r)return[2,u];return o=u.hunks.map(function(e){var t=e.lines.filter(function(e){return null!==e.numberA}).map(function(e){return e.content}).join("\n"),i=e.lines.filter(function(e){return null!==e.numberB}).map(function(e){return e.content}).join("\n");e.heading&&(t=t?"".concat(e.heading,"\n").concat(t):"",i=i?"".concat(e.heading,"\n").concat(i):"");var a=(0,tm.renderCodeToHighlightedLines)(t,s,n),o=(0,tm.renderCodeToHighlightedLines)(i,s,r);return e.heading&&t&&a.shift(),e.heading&&i&&o.shift(),(0,x._)((0,y._)({},e),{lines:e.lines.map(function(t){if(null!==t.numberB)n="b",r=t.numberB;else if(null!==t.numberA)n="a",r=t.numberA;else throw Error("Invalid line, no number for either side");var n,r,i="a"===n?a[r-e.fromA]:o[r-e.fromB];if(!i)throw Error("Line not found in side ".concat(n));return(0,x._)((0,y._)({},t),{content:i})})})}),[2,(0,x._)((0,y._)({},u),{hunks:o})]}})})().then(function(e){d.aborted||r(e)}),function(){c.abort()}},[u,s]),n),S=(0,o.useMemo)(function(){var e=0,t=0,n=0,r=0,i=!0,a=!1,o=void 0;try{for(var s,l=u.hunks[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value,d=0,p=0,f=!0,m=!1,h=void 0;try{for(var v,y=c.lines[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var x=v.value;x.numberA&&(n=Math.max(n,x.numberA)),x.numberB&&(r=Math.max(r,x.numberB)),"removed"===x.type&&d++,"added"===x.type&&p++}}catch(e){m=!0,h=e}finally{try{f||null==y.return||y.return()}finally{if(m)throw h}}e=Math.max(e,d),t=Math.max(t,p)}}catch(e){a=!0,o=e}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}var b=n.toString().length,S=r.toString().length;if((!g||u.hunks.length>1)&&u.pathA&&u.pathB){var _=e.toString().length+1,w=t.toString().length+1;b=Math.max(b,_),S=Math.max(S,w)}return{a:b,b:S}},[u,g]);return(0,a.jsx)(tu,{diff:u,onPathClick:h,onViewFullDiff:v,children:(0,a.jsxs)(f.View,{css:tR.diff,className:p?"":"is-patch-with-border",style:(l={},(0,ef._)(l,t_,"".concat(S.a,"ch")),(0,ef._)(l,tw,"".concat(S.b,"ch")),l),children:[!d&&(u.pathA||u.pathB)?(0,a.jsx)(tO,{diff:b}):null,(0,a.jsx)(tL,{diff:b,compressed:g,background:m,maxLines:c})]})})}function tM(){return(0,a.jsx)(p.Text,{css:tR.binaryTag,variant:"small",children:"Binary"})}function tO(e){var t=e.diff;if(t.pathA&&t.pathB&&t.pathA===t.pathB)return(0,a.jsxs)(f.View,{css:tR.header,children:[(0,a.jsx)(tN,{diff:t,side:"b"}),t.binary?(0,a.jsx)(tM,{}):null]});if(t.pathA&&t.pathB&&t.pathA!==t.pathB)return(0,a.jsxs)(f.View,{css:tR.header,children:[(0,a.jsx)(tN,{diff:t,side:"a"}),t.binary?(0,a.jsx)(tM,{}):null,(0,a.jsx)(tI.default,{color:u.tokens.foregroundDimmest}),(0,a.jsx)(tN,{diff:t,side:"b"}),t.binary?(0,a.jsx)(tM,{}):null]});var n=t.pathA?"a":"b";return(0,a.jsxs)(f.View,{css:tR.header,children:[(0,a.jsx)(tN,{diff:t,side:n}),t.binary?(0,a.jsx)(tM,{}):null]})}function tN(e){var t=e.diff,n=e.side,r=tl().handlePathNavigation,i="a"===n?t.pathA:t.pathB,o="a"===n?t.pathB:t.pathA;if(!i)return null;var s="";o!==i&&(s="b"===n?"is-added":"is-removed");var l=(0,a.jsx)(p.Text,{className:s,css:tR.headerFile,children:i});return r?(0,a.jsx)(ew.Button,{text:l,iconLeft:(0,a.jsx)(eT.default,{path:i}),onClick:function(){return r(n)},variant:"underlinedOnHover"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eT.default,{path:i}),l]})}function tL(e){var t=e.diff,n=e.background,r=e.compressed,i=e.maxLines,o=null===n?void 0:n||"root";if(t.binary)return(0,a.jsx)(d.Surface,{className:"is-binary",css:tR.container,background:o,children:(0,a.jsx)(p.Text,{color:"dimmest",children:"Changes can't be shown for binary files."})});if(!t.hunks.length)return(0,a.jsx)(d.Surface,{className:"is-no-changes",css:tR.container,background:o,children:(0,a.jsx)(p.Text,{color:"dimmer",children:"No additional changes"})});if(t.pathA&&t.pathB){var s=0,l=t.hunks.reduce(function(e,t){return e+t.lines.reduce(function(e,t){return e+ +("same"!==t.type)},0)},0),u=t.hunks.map(function(e){if(void 0!==i&&s>=i)return null;var n=void 0!==i?i-s:void 0;return l-=e.lines.slice(0,n).reduce(function(e,t){return e+ +("same"!==t.type)},0),s+=e.lines.length+1,(0,a.jsx)(tA,{hunk:e,hideHeader:r&&1===t.hunks.length,maxLines:n},s)});return(0,a.jsxs)(d.Surface,{className:"is-modified",css:tR.container,background:o,children:[u,(0,a.jsx)(tD,{changes:l})]})}var c=t.pathB?"b":"a",m="a"===c?"removed":"added",g=t.hunks.flatMap(function(e){return e.lines.filter(function(e){return e.type!==("a"===c?"added":"removed")}).map(function(e){return e.content})}),h=void 0!==i?g.slice(0,i):g,v=g.length-h.length;return(0,a.jsx)(d.Surface,{className:"is-".concat(m),css:tR.container,background:o,children:(0,a.jsxs)(f.View,{css:tR.file,children:[h.map(function(e,t){return(0,a.jsx)(tk,{type:m,content:e,numberA:"a"===c&&t+1,numberB:"b"===c&&t+1},t)}),v<=0?null:(0,a.jsx)(tD,{type:m,changes:v})]})})}var tB=(0,tr.cssRecord)({patch:ti.rcss.colWithGap(12),truncatedDiffsMessage:[ti.rcss.color.foregroundDimmest,ti.rcss.align.center,ti.rcss.justify.start]}),tV=/^diff --git /m;function tU(e){return{pathA:e.labelA,pathB:e.labelB,headers:[],binary:!1,hunks:e.hunks}}function tF(e){var t=e.patch,n=e.maxLines,r=e.maxDiffs,i=e.noHeader,s=e.noBorder,l=e.background,u=e.compressed,c=e.onPathClick,d=e.onViewFullDiff,m=(0,o.useMemo)(function(){return function e(t){return Array.isArray(t)?t.flatMap(function(t){return e(t)}):"string"==typeof t?tV.test(t)?function(e){var t=e.split(e8);t.length&&!t[0].startsWith("diff --git")&&t.shift();try{return t.map(function(e){return e.endsWith("\n")?e.slice(0,-1):e}).map(e6)}catch(t){throw(0,eB._)(t,ez)&&(t.patch=e),t}}(t):[tU(e0(t))]:"headers"in t?[t]:[tU(t)]}(t)},[t]),g=(0,o.useMemo)(function(){var e=void 0!==r?Math.min(m.length,r):m.length;if(!u&&e===m.length)return m;for(var t=[],n=0;n<e;n++){var i=m[n];if(!u){t.push(i);continue}t.push((0,x._)((0,y._)({},i),{hunks:i.hunks.map(function(e){return function(e){for(var t,n,r,i,a=(0,ta._)(e.lines),o=e.fromA,s=e.fromB,l=e.toA,u=e.toB;(null==(t=a[0])?void 0:t.type)==="same"&&(null==(n=a[1])?void 0:n.type)==="same";)a.shift(),o++,s++;for(;(null==(r=a[a.length-1])?void 0:r.type)==="same"&&(null==(i=a[a.length-2])?void 0:i.type)==="same";)a.pop(),l--,u--;return(0,x._)((0,y._)({},e),{fromA:o,fromB:s,toA:l,toB:u,lines:a})}(e)}).filter(function(e){return e.lines.length>0})}))}return t},[m,r,u]),h=m.length-g.length,v=1===h?"file":"files";return(0,a.jsxs)(f.View,{css:tB.patch,children:[g.map(function(e,t){return(0,a.jsx)(tP,{diff:e,maxLines:n,noHeader:i,noBorder:s,background:l,compressed:u,onPathClick:c,onViewFullDiff:d},t)}),h<=0?null:(0,a.jsx)(f.View,{css:tB.truncatedDiffsMessage,pt:4,row:!0,gap:4,children:d?(0,a.jsx)(ew.Button,{text:"view in full (".concat(h," more changed ").concat(v,")"),iconLeft:(0,a.jsx)(tS.default,{}),onClick:function(){return d({})},variant:"underlinedOnHover",colorway:"primary"}):(0,a.jsxs)(p.Text,{children:[h," other changed ",v," not shown"]})})]})}e.s(["default",()=>tF],12219);var tH=(0,tr.cssRecord)({countRemoved:[ti.rcss.color.accentNegativeStronger],countAdded:[ti.rcss.color.accentPositiveStronger]});function tG(e){var t=e.path,n=e.type,r=e.diff,i=e.openPane,s=(0,o.useMemo)(function(){var e=0,t=0,n=!0,i=!1,a=void 0;try{for(var o,s=r.hunks[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value,u=!0,c=!1,d=void 0;try{for(var p,f=l.lines[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var m=p.value;"removed"===m.type?e++:"added"===m.type&&t++}}catch(e){c=!0,d=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw d}}}}catch(e){i=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return{added:t,removed:e}},[r]),l=(0,o.useCallback)(function(){i&&i({type:"codeEditor",data:{path:t}})},[i,t]),u=(0,o.useCallback)(function(){i&&i({type:"diff",data:{type:"patch",diff:r}})},[i,r]);return(0,a.jsx)(e_.EventPane,{left:(0,a.jsx)(eT.default,{path:t,size:16}),title:(0,a.jsx)(tq,{type:n,path:t,onClick:l}),right:(0,a.jsx)(f.View,{row:!0,gap:8,align:"center",children:(0,a.jsx)(tz,{type:n,removed:s.removed,added:s.added})}),onOpenPane:u,openPaneButtonAlt:"Open full diff",elevated:!0,children:(0,a.jsx)(tF,{patch:r,maxLines:16,compressed:!1,background:null,noHeader:!0,noBorder:!0})})}function tz(e){var t=e.type,n=e.removed,r=e.added;switch(t){case"modify":return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(p.Text,{css:tH.countRemoved,children:["-",n]}),(0,a.jsxs)(p.Text,{css:tH.countAdded,children:["+",r]})]});case"create":return(0,a.jsxs)(p.Text,{css:tH.countAdded,children:["+",r]});case"delete":return(0,a.jsxs)(p.Text,{css:tH.countRemoved,children:["-",n]})}}function tq(e){var t,n=e.type,r=e.path,i=e.onClick;switch(n){case"create":t=u.tokens.accentPositiveStronger;break;case"delete":t=u.tokens.accentNegativeStronger}return i?(0,a.jsx)(ew.Button,{variant:"underlinedOnHover",style:{color:t},text:tW(r),onClick:i}):(0,a.jsx)(p.Text,{style:{color:t},children:tW(r)})}function tW(e){return e.replace(/^\//,"")}var tK=e.i(396776);function t$(e){var t=e.data,n=t.path,r=t.diff,i=t.state,l=e.openPane,u=i===s.EventState.COMPLETE,c=(0,o.useRef)(null),d=(0,o.useMemo)(function(){var e=function(e){var t=e.previous,n=e.path,r=e.diff,i=e.complete;if(!r||"\n"===r)return i?(eL.withScope(function(e){e.setTag("agent",!0),e.setExtras({diff:r}),eL.captureException(Error("No changes in diff"))}),(0,tn.Err)("This diff cannot be displayed")):(0,tn.Ok)(tY(n));if(!i)try{return(0,tn.Ok)(e0(r))}catch(e){if(t&&t.ok)return t;return(0,tn.Ok)(tY(n))}try{return(0,tn.Ok)(e0(r))}catch(e){return eL.withScope(function(t){t.setTag("agent",!0),t.setExtras({diff:r}),eL.captureException(e)}),(0,tn.Err)("This diff cannot be displayed")}}({previous:c.current,path:n,diff:r,complete:u});return c.current=e,e},[n,r,u]),m=(0,em._)((0,o.useState)(1),2),g=m[0],h=m[1],v=(0,o.useMemo)(function(){return!u&&d.ok&&0===d.value.hunks.length},[u,d]);return((0,o.useEffect)(function(){if(v){var e=setInterval(function(){h(function(e){return e%3+1})},500);return function(){return clearInterval(e)}}},[v]),v)?(0,a.jsx)(f.View,{row:!0,gap:"8px",align:"center",justify:"center",children:(0,a.jsxs)(p.Text,{multiline:!0,children:["Editing ",n,".".repeat(g)]})}):d.ok?(0,a.jsx)(tG,{path:n,type:"modify",diff:d.value,openPane:l}):(0,a.jsx)(tK.StatusBanner,{icon:(0,a.jsx)(_.default,{}),colorway:"warning",text:d.error})}function tY(e){return{labelA:e,labelB:e,hunks:[]}}e.s(["FileEdit",()=>t$],507091);var tX=e.i(1495),tQ=e.i(205104);function tJ(e,t){var n=(0,em._)((0,o.useState)(!1),2),r=n[0],i=n[1],a=(0,em._)((0,o.useState)(!0),2),s=a[0],l=a[1],u=(0,em._)((0,o.useState)(null),2),c=u[0],d=u[1],p=(0,o.useMemo)(function(){return t?e.readFile(t).then(function(e){if(e.error)return{error:e.error,data:null};try{var n=(0,tQ.getMediaMime)(t),r=e.content.toString("base64"),i="data:".concat(n,";base64,").concat(r);return{error:null,data:i}}catch(e){return{error:"Failed to process file",data:null}}}).catch(function(e){return{error:"Failed to read file",data:null}}):Promise.resolve({error:"No file path provided",data:null})},[e,t]);return(0,o.useEffect)(function(){i(!1),l(!0),d(null),p.then(function(e){var t=e.error,n=e.data;t?i(!0):d(n),l(!1)})},[p]),{isLoading:s,hasError:r,dataSrc:c}}e.s(["useFileAsDataUrl",()=>tJ],54073);var tZ=e.i(529810),t0=e.i(616278),t1=e.i(291046);function t2(e){return e.error?"error":e.path?"generated":"generating"}function t4(e){var t=e.path,n=e.description,r=tJ((0,tZ.default)().fs,t),i=r.isLoading,o=r.hasError,s=r.dataSrc;return i?(0,a.jsx)(d.Surface,{elevated:!0,clsx:t1.default.mediaEmptyState,align:"center",justify:"center",children:(0,a.jsx)(m.default,{})}):o||!s?(0,a.jsx)(d.Surface,{elevated:!0,clsx:t1.default.mediaEmptyState,align:"center",justify:"center",children:(0,a.jsx)(p.Text,{color:"dimmer",variant:"small",children:"Failed to load"})}):(0,a.jsx)("div",{className:t1.default.gridItem,children:(0,a.jsx)(tX.default,{src:s,alt:n||"Generated media",className:t1.default.image,width:400,height:400,unoptimized:!0})})}function t8(e){var t=e.path,n=tJ((0,tZ.default)().fs,t),r=n.isLoading,i=n.hasError,o=n.dataSrc;return r?(0,a.jsx)(d.Surface,{elevated:!0,clsx:t1.default.mediaEmptyState,align:"center",justify:"center",children:(0,a.jsx)(m.default,{})}):i||!o?(0,a.jsx)(d.Surface,{elevated:!0,clsx:t1.default.mediaEmptyState,align:"center",justify:"center",children:(0,a.jsx)(p.Text,{color:"dimmer",variant:"small",children:"Failed to load"})}):(0,a.jsx)("div",{className:t1.default.gridItem,children:(0,a.jsx)("video",{src:o,className:t1.default.video,muted:!0,controls:!0})})}function t3(e){var t=e.item,n=t2(t);return"generating"===n?(0,a.jsx)(d.Surface,{elevated:!0,clsx:t1.default.mediaEmptyState,align:"center",justify:"center",children:(0,a.jsx)(m.default,{})}):"error"===n?(0,a.jsx)(d.Surface,{elevated:!0,clsx:t1.default.mediaEmptyState,align:"center",justify:"center",children:(0,a.jsxs)(f.View,{clsx:t1.default.errorContent,children:[(0,a.jsx)(_.default,{}),(0,a.jsx)(p.Text,{color:"dimmer",variant:"small",children:t.error||"Failed"})]})}):t.mediaType===s.GeneratedMediaType.MEDIA_TYPE_VIDEO?(0,a.jsx)(t8,{path:t.path}):(0,a.jsx)(t4,{path:t.path,description:t.description})}function t6(e){var t=e.item,n=t2(t);return(0,a.jsxs)(f.View,{className:t1.default.promptItem,children:[(0,a.jsxs)(f.View,{className:t1.default.promptStatus,children:["generating"===n&&(0,a.jsx)(m.default,{}),"generated"===n&&(0,a.jsx)(t0.default,{}),"error"===n&&(0,a.jsx)(_.default,{})]}),(0,a.jsx)(p.Text,{variant:"small",color:"error"===n?"dimmer":"default",clsx:t1.default.promptText,children:t.description})]})}function t5(e){var t=e.data,n=e.state,r=t.media,i=t.asynchronous;if(!r||0===r.length)return(0,a.jsx)(f.View,{className:t1.default.container,children:(0,a.jsx)(p.Text,{color:"dimmer",children:"No media to display"})});var o=r.filter(function(e){return e.path||e.error||n===s.EventState.IN_PROGRESS});return(0,a.jsxs)(f.View,{className:t1.default.container,children:[i?(0,a.jsx)(p.Text,{variant:"small",color:"dimmer",clsx:t1.default.asyncLabel,children:n===s.EventState.IN_PROGRESS?"Generating in background...":"Generated in background"}):null,o.length>0&&(0,a.jsx)(f.View,{className:t1.default.grid,children:o.map(function(e){return(0,a.jsx)(t3,{item:e},e.id)})}),(0,a.jsx)(f.View,{className:t1.default.promptsContainer,children:r.map(function(e){return(0,a.jsx)(t6,{item:e},e.id)})})]})}e.s(["GenerateMedia",()=>t5],641654);var t7=e.i(211397),t9=e.i(364343);function ne(e){var t=e.imagePath,n=e.imageDescription,r=tJ((0,tZ.default)().fs,t),i=r.isLoading,o=r.hasError,s=r.dataSrc;return i?(0,a.jsx)(f.View,{className:t9.default.loading,children:(0,a.jsx)(m.default,{})}):o||!s?(0,a.jsx)(f.View,{className:t9.default.error,children:(0,a.jsxs)(p.Text,{color:"dimmer",children:["Failed to load image from ",t]})}):(0,a.jsx)(f.View,{className:t9.default.container,children:(0,a.jsx)(t7.default,{src:s,alt:n||"Generated image",className:t9.default.image,layout:"fill",objectFit:"cover"})})}e.s(["ImageGeneration",()=>ne],504186);var nt=e.i(119468),nn=e.i(862927),nr=e.i(986194),ni=e5.Type.Union([e5.Type.Object({type:e5.Type.Optional(e5.Type.String()),fields:e5.Type.Array(e5.Type.Object({key:e5.Type.String(),value:e5.Type.Unknown()}))}),e5.Type.Object({type:e5.Type.Optional(e5.Type.String()),fields:e5.Type.Record(e5.Type.String(),e5.Type.Unknown())}),e5.Type.Record(e5.Type.String(),e5.Type.Unknown())]);function na(e){var t=nn.Value.Cast(ni,e),n={};return"fields"in t&&t.fields?Array.isArray(t.fields)?t.fields.forEach(function(e){return"type"!==e.key&&(n[e.key]=e.value)}):Object.entries(t.fields).forEach(function(e){var t=(0,em._)(e,2),r=t[0],i=t[1];return"type"!==r&&(n[r]=i)}):Object.entries(t).forEach(function(e){var t=(0,em._)(e,2),r=t[0],i=t[1];return"type"!==r&&(n[r]=i)}),Object.entries(n).map(function(e){var t=(0,em._)(e,2);return{key:t[0],value:function e(t){if(null==t||void 0===t)return"null";if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return String(t);if((void 0===t?"undefined":(0,nt._)(t))==="object"&&null!=t&&"kind"in t&&"object"===(0,nt._)(t.kind)&&null!=t.kind&&"$kind"in t.kind&&"string"==typeof t.kind.$kind){var n=t.kind,r=n.$kind,i=(0,nr.unkind)(n);return"nullValue"===r?"null":"listValue"===r&&(void 0===i?"undefined":(0,nt._)(i))==="object"&&Array.isArray(i.values)?"[".concat(i.values.map(function(t){return e(t)}).join(", "),"]"):"structValue"===r&&(void 0===i?"undefined":(0,nt._)(i))==="object"?JSON.stringify(i):String(i)}try{return JSON.stringify(t)}catch(e){return String(t)}}(t[1])}})}var no=e.i(687843),ns=(0,o.memo)(function(e){var t=e.parameters;if(!(na(t).length>0))return(0,a.jsx)(f.View,{px:4,children:(0,a.jsx)(p.Text,{variant:"small",color:"dimmest",children:"No parameters"})});var n=na(t);return(0,a.jsx)(f.View,{className:no.default.parametersGrid,children:n.map(function(e,t){var n=e.key,r=e.value;return(0,a.jsxs)(o.Fragment,{children:[(0,a.jsx)(p.Text,{variant:"small",color:"dimmer",className:no.default.parameterKey,children:n}),(0,a.jsx)(p.Text,{variant:"small",className:no.default.parameterValue,children:r})]},"".concat(n,"-").concat(t))})})}),nl=(0,o.memo)(function(e){var t,n,r,i,o,s=e.content,l=null==s||null==(t=s.resource)?void 0:t.uri,u=null==s||null==(r=s.resource)||null==(n=r.Meta)?void 0:n.meta;if((null==s||null==(i=s.resource)?void 0:i.contents)&&"object"===(0,nt._)(s.resource.contents)){var c=s.resource.contents;"text"===c.$kind&&(o=c.text)}return(0,a.jsxs)(d.Surface,{elevated:!0,p:8,children:[(0,a.jsxs)(p.Text,{color:"dimmer",variant:"small",children:["Embedded Resource: ",l||"Unknown resource"]}),u?(0,a.jsx)(p.Text,{variant:"small",children:u}):null,o?(0,a.jsx)(p.Text,{variant:"small",style:{whiteSpace:"pre-wrap"},children:o}):null]})}),nu=(0,o.memo)(function(e){var t=e.content;if(!t.data)return(0,a.jsx)(d.Surface,{elevated:!0,p:8,children:(0,a.jsx)(p.Text,{color:"dimmest",variant:"small",children:"No image data"})});var n="data:".concat(t.mimeType||"image/png",";base64,").concat(t.data);return(0,a.jsx)(d.Surface,{elevated:!0,p:8,children:(0,a.jsx)(f.View,{align:"center",children:(0,a.jsx)("img",{src:n,alt:"MCP tool result",style:{maxWidth:"100%",maxHeight:"360px",borderRadius:"4px",display:"block"},onError:function(e){e.currentTarget.style.display="none"}})})})}),nc=e.i(462995),nd=(0,o.memo)(function(e){var t=e.content;return t.text?(0,a.jsx)(d.Surface,{elevated:!0,p:8,children:(0,a.jsx)(nc.MessageMarkdown,{text:t.text})}):null}),np=(0,o.memo)(function(e){var t=e.contentBlocks;return t.length?(0,a.jsx)(f.View,{gap:8,style:{overflow:"auto",maxHeight:"400px",borderRadius:"8px"},children:t.map(function(e,t){return(0,a.jsx)(nf,{block:e},t)})}):(0,a.jsx)(f.View,{p:8,children:(0,a.jsx)(p.Text,{color:"dimmest",variant:"small",children:"No output content"})})}),nf=(0,o.memo)(function(e){var t=e.block.block;if(!t)return(0,a.jsx)(d.Surface,{elevated:!0,p:8,children:(0,a.jsx)(p.Text,{color:"dimmest",variant:"small",children:"Empty content block"})});if((null==t?void 0:t.$kind)==="textContent")return(0,a.jsx)(nd,{content:t.textContent});if((null==t?void 0:t.$kind)==="imageContent")return(0,a.jsx)(nu,{content:t.imageContent});if((null==t?void 0:t.$kind)==="audioContent"){var n=t.audioContent;return(0,a.jsx)(d.Surface,{elevated:!0,p:8,children:(0,a.jsxs)(p.Text,{color:"dimmer",variant:"small",children:["Audio content: ",n.mimeType||"audio/wav"]})})}if((null==t?void 0:t.$kind)==="resourceLink"){var r,i,o=t.resourceLink,s=null==(r=o.Title)?void 0:r.title,l=null==(i=o.Description)?void 0:i.description;return(0,a.jsx)(d.Surface,{elevated:!0,p:8,children:(0,a.jsxs)(f.View,{gap:2,children:[(0,a.jsx)(p.Text,{variant:"small",children:s||o.name||"Resource"}),l?(0,a.jsx)(p.Text,{variant:"small",color:"dimmer",children:l}):null,o.uri?(0,a.jsx)(p.Text,{variant:"small",color:"dimmest",children:o.uri}):null]})})}return(null==t?void 0:t.$kind)==="embeddedResource"?(0,a.jsx)(nl,{content:t.embeddedResource}):(0,a.jsx)(d.Surface,{elevated:!0,p:8,children:(0,a.jsx)(p.Text,{color:"dimmest",variant:"small",children:"Unsupported content type"})})}),nm=e.i(254806),ng=e.i(15260),nh=e.i(11286);function nv(e){var t=e.title,n=e.expanded,r=e.onToggle,i=e.children;return(0,a.jsxs)(d.Surface,{elevated:!0,clsx:nh.default.expandableSubSection,children:[(0,a.jsx)(ew.Button,{size:"small",variant:"nofill",alignment:"start",onClick:r,iconLeft:n?(0,a.jsx)(nm.default,{}):(0,a.jsx)(ng.default,{}),text:t,clsx:nh.default.subsectionButton}),n?(0,a.jsx)(f.View,{children:i}):null]})}function ny(e){var t,n=e.result,r=e.progress;return(null==n?void 0:n.contentBlocks)&&n.contentBlocks.length>0?(0,a.jsx)(np,{contentBlocks:n.contentBlocks}):(null==n?void 0:n.content)?(0,a.jsx)(p.Text,{variant:"small",clsx:nh.default.wrappedText,children:n.content}):(null==n?void 0:n.isError)||(null==r||null==(t=r.Message)?void 0:t.message)?null:(0,a.jsx)(p.Text,{variant:"small",color:"dimmest",children:"No response content"})}function nx(e){var t,n,r,i,s=e.toolName,l=e.parameters,u=e.result,c=e.progress,m=e.insecureError,g=null==u||null==(t=u.contentBlocks)?void 0:t.some(function(e){var t=e.block;return(null==t?void 0:t.$kind)==="imageContent"}),h=(0,em._)((0,o.useState)(!0),2),v=h[0],y=h[1],x=(0,em._)((0,o.useState)(null!=g&&g||!!m),2),b=x[0],S=x[1],_=(0,o.useCallback)(function(){y(function(e){return!e})},[]),w=(0,o.useCallback)(function(){S(function(e){return!e})},[]),T=l&&Object.keys(l).length>0,j=u||c||m;return(0,a.jsx)(d.Surface,{elevated:!0,children:(0,a.jsx)(e_.EventPane,{left:(0,a.jsx)($.default,{size:16}),title:s||"MCP Tool Use",elevated:!1,bordered:!1,children:(0,a.jsxs)(f.View,{gap:4,p:8,children:[m?(0,a.jsx)(d.Surface,{elevated:!0,clsx:nh.default.securityErrorAlert,children:(0,a.jsx)(f.View,{row:!0,gap:8,p:12,align:"center",children:(0,a.jsxs)(f.View,{gap:4,style:{flex:1},children:[(0,a.jsx)(p.Text,{clsx:nh.default.securityErrorAlertTitle,children:"Security Issue Detected"}),(0,a.jsx)(p.Text,{variant:"small",color:"default",children:m}),(0,a.jsx)(p.Text,{variant:"small",color:"dimmer",children:"The tool output was flagged for security issues and will not be accessible to the agent."})]})})}):null,T?(0,a.jsx)(nv,{title:"Request",expanded:v,onToggle:_,children:(0,a.jsx)(ns,{parameters:l})}):null,j&&!m?(0,a.jsx)(nv,{title:"Response",expanded:b,onToggle:w,children:(0,a.jsxs)(f.View,{gap:4,p:8,children:[c&&(null==(n=c.Message)?void 0:n.message)?(0,a.jsxs)(p.Text,{variant:"small",color:"dimmer",children:[c.Message.message,void 0!==c.progress&&(null==(r=c.Total)?void 0:r.total)!==void 0?(0,a.jsxs)("span",{children:[" ","(",c.progress,"/",c.Total.total,")"]}):null]}):null,(null==u?void 0:u.isError)?(0,a.jsxs)(p.Text,{variant:"small",color:"default",children:["Error: ",u.content||"Tool execution failed"]}):null,(0,a.jsx)(ny,{result:u,progress:c}),null==u||!u.structuredContent||(null==u||null==(i=u.contentBlocks)?void 0:i.length)||(null==u?void 0:u.content)?null:(0,a.jsxs)(f.View,{gap:2,children:[(0,a.jsx)(p.Text,{variant:"small",color:"dimmer",children:"Structured Content:"}),(0,a.jsx)(p.Text,{variant:"small",clsx:nh.default.wrappedText,children:JSON.stringify(u.structuredContent,null,2)})]})]})}):null]})})})}e.s(["MCPToolResult",()=>nx],132183)},762211,818976,210481,e=>{"use strict";var t,n=e.i(878420),r=e.i(64386),i=e.i(886513),a=e.i(530658),o=e.i(276385),s=e.i(389959),l=e.i(98816),u=e.i(649960),c=e.i(529810);e.i(282890);var d=e.i(66718),p=e.i(297083),f=e.i(346715),m=e.i(817556),g=e.i(906368);e.i(312917);var h=e.i(265872),v=e.i(61524),y=e.i(142685),x=e.i(921521),b=e.i(650587),S=e.i(610357),_=e.i(37292),w=e.i(262206),T=e.i(384401),j=(0,e.i(316699).default)(function(){if("undefined"!=typeof AudioContext){var e=(t||(t=new AudioContext),t),n=e.createBufferSource();e.decodeAudioData(function(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=t.charCodeAt(i);return r.buffer}("SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"),function(t){n.buffer=t,n.connect(e.destination),n.start(0)})}},500,{leading:!0,trailing:!0});e.i(439725);var D="replit-icons-font",k=e.i(664152),C="BESbswy";function E(e){return(0,p._)(function(){return(0,m._)(this,function(t){switch(t.label){case 0:if(!document.fonts)return[3,2];return[4,function(e,t){return(0,p._)(function(e,t){var n,r,i,a,o,s;return(0,m._)(this,function(l){return n=t.fontInfo,i=void 0===(r=t.characters)?C:r,o=void 0===(a=t.timeout)?3e3:a,s=A(n),[2,new Promise(function(t,r){var a=!1,l=k.logger.timeStart({family:n.family,style:n.style,weight:n.weight}),u=setTimeout(function(){a=!0,l("xterm font loading timed out"),t()},o);e.load(s,i).then(function(){a||(clearTimeout(u),t())}).catch(function(e){a||(clearTimeout(u),r(e))})})]})}).apply(this,arguments)}(document.fonts,e)];case 1:case 3:return t.sent(),[2];case 2:return[4,Promise.all([I("serif",e),I("sans-serif",e),I("monospace",e)])]}})})()}function A(e){var t=e.family,n=e.style,r=e.weight;return"".concat(void 0===n?"normal":n," ").concat(void 0===r?"normal":r," 100px ").concat(t)}function I(e,t){return(0,p._)(function(e,t){var n,r,i,a,o,s,l,u,c;return(0,m._)(this,function(d){return(n=t.fontInfo,i=void 0===(r=t.characters)?C:r,o=void 0===(a=t.timeout)?3e3:a,s=A(n),(l=document.createElement("span")).innerText=i,l.style.font="normal normal 100px ".concat(e),l.style.position="absolute",l.style.left="-9999px",l.style.top="-9999px",document.body.appendChild(l),u=l.offsetWidth,l.style.font=s,(c=function(){return u!==l.offsetWidth})())?[2]:[2,new Promise(function(e,t){var r=setInterval(function(){c()&&(clearInterval(r),clearTimeout(i),document.body.removeChild(l),e())},50),i=setTimeout(function(){(clearInterval(r),document.body.removeChild(l),c())?e():t(Error("Font loading timed out "+n.family))},o)})]})}).apply(this,arguments)}function R(e){g.captureException(e)}var P='"ReplitHack"',M=String.fromCharCode(61095),O=e.i(546833),N=e.i(703774);e.i(375581);var L=e.i(182256),B=e.i(169099),V=e.i(696770);function U(){var e=(0,N.useTheme)(),t=e.values,n=e.colorScheme,r=(0,V.useShadesFlag)();return(0,s.useMemo)(function(){var e,i,a,o,s,l,u,c,d,p;return r?(e=n===L.ColorScheme.Dark?"dark":"light",i=t,o=(a="light"===e?O.lightSpectrumValues:O.darkSpectrumValues).defaultSurfaceColor000,s=a.defaultSurfaceColor100,l=a.defaultSurfaceColor300,u=a.defaultSurfaceColor500,c=a.defaultTextColor1400,d=a.defaultTextColor1500,{foreground:p="light"===e?d:c,background:s,cursor:p,cursorAccent:l,selectionBackground:p,black:o,brightBlack:u,red:i.global.redStronger,green:i.global.accentPositiveDefault,yellow:i.global.yellowDefault,blue:i.global.blueStronger,magenta:i.global.magentaDefault,cyan:i.global.tealDefault,white:i.global.foregroundDefault,brightRed:i.global.redStrongest,brightGreen:i.global.accentPositiveStronger,brightYellow:i.global.yellowStronger,brightBlue:i.global.blueStrongest,brightMagenta:i.global.magentaStronger,brightCyan:i.global.tealStronger,brightWhite:i.global.foregroundDefault}):function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B.replitDark.values;return{foreground:e.global.foregroundDefault,background:e.global.backgroundDefault,cursor:e.global.foregroundDefault,cursorAccent:e.global.backgroundHigher,selectionBackground:e.global.foregroundDefault,black:e.global.backgroundRoot,red:e.global.redStronger,green:e.global.accentPositiveDefault,yellow:e.global.yellowDefault,blue:e.global.blueStronger,magenta:e.global.magentaDefault,cyan:e.global.tealDefault,white:e.global.foregroundDefault,brightBlack:e.global.outlineDimmest,brightRed:e.global.redStrongest,brightGreen:e.global.accentPositiveStronger,brightYellow:e.global.yellowStronger,brightBlue:e.global.blueStrongest,brightMagenta:e.global.magentaStronger,brightCyan:e.global.tealStronger,brightWhite:e.global.foregroundDefault}}(t)},[t,r,n])}function F(){return/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent)}function H(t){var n,r,i,o,c,d,k,C,A,I,O,N=(0,a._)((0,s.useState)(null),2),L=N[0],B=N[1],V=(0,a._)((0,s.useState)(null),2),H=V[0],G=V[1],z=U(),q=(0,v.usePreferences)("fontSize","accessibleTerminal","shellBellAudio").preferences,W=q.fontSize,K=q.accessibleTerminal,$=q.shellBellAudio,Y=(0,_.useThrowBsod)(),X=(0,x.default)(),Q=(0,b.useIsMobile)(),J=null==t?void 0:t.openFile,Z=(0,l.default)(null==t?void 0:t.openWebview),ee=null==t?void 0:t.listFiles,et=(0,s.useMemo)(function(){return J&&ee?{openFile:J,listFiles:ee}:null},[J,ee]),en=(0,l.default)(null==t?void 0:t.onInBandOSCMessages),er={screenReaderMode:K,fileLinking:et,terminalTheme:z,fontSize:W,scrollback:null==t?void 0:t.scrollback,openPane:null!=(I=null==t?void 0:t.openPane)?I:null,emitPaneMetrics:null==t?void 0:t.emitPaneMetrics,convertEol:null!=(O=null==t?void 0:t.convertEol)&&O},ei=(0,l.default)(er),ea=(0,u.default)(function(){(null==t?void 0:t.autoFit)!==!1&&(null==H||H.fit())},{type:"debounce",wait:200}),eo=(0,s.useRef)(null),es=(0,s.useRef)(null),el=(0,l.default)(null==t?void 0:t.size),eu=(0,T.useResolveKeyCombo)();return(0,s.useLayoutEffect)(function(){if(L){var n=[];return(0,p._)(function(){var r,i,o,s,l,u,c,d,v,x,b,_,j,k,C,A,I,O,N,B,V,U,H,z,q,W;return(0,m._)(this,function(K){switch(K.label){case 0:return[4,Promise.all([Promise.all([(0,h.lazyLoad)(function(){return e.A(414807)}),(0,h.lazyLoad)(function(){return e.A(660393)}),(0,h.lazyLoad)(function(){return e.A(664352)}),(0,h.lazyLoad)(function(){return e.A(90438)}),(0,h.lazyLoad)(function(){return e.A(477208)}),(0,h.lazyLoad)(function(){return e.A(305813)}),(0,h.lazyLoad)(function(){return e.A(537915)}),(0,h.lazyLoad)(function(){return e.A(141331)}),(0,h.lazyLoad)(function(){return e.A(239007)})]),(0,p._)(function(){return(0,m._)(this,function(e){switch(e.label){case 0:if(!document.getElementById(D)){var t=document.createElement("style");t.id=D,t.type="text/css",t.appendChild(document.createTextNode("\n@font-face {\n  font-family: 'replit-icons';\n  font-style: normal;\n  font-weight: normal;\n  font-stretch: normal;\n  src: url(".concat("/public/fonts/replit-icons.woff",") format('woff'),\n    url(").concat("/public/fonts/replit-icons.ttf",") format('truetype');\n}"))),document.head.appendChild(t)}return[4,Promise.all([E({fontInfo:{family:"replit-icons"},characters:M}).catch(R),E({fontInfo:{family:P,weight:"400"}}).catch(R),E({fontInfo:{family:P,weight:"400",style:"italic"}}).catch(R),E({fontInfo:{family:P,weight:"700"}}).catch(R),E({fontInfo:{family:P,weight:"700",style:"italic"}}).catch(R)])];case 1:return e.sent(),[2]}})})()])];case 1:var $;if(c=a._.apply(void 0,[K.sent(),1]),v=(d=(0,a._)(c[0],9))[0].Terminal,x=d[1].FitAddon,b=d[2].SearchAddon,_=d[3].WebLinksAddon,j=d[4].Unicode11Addon,k=d[5].FileLinkAddon,C=d[6].PaneLinkAddon,A=d[7].CanvasAddon,I=d[8].WebglAddon,!L)return[2];return N={allowProposedApi:!0,cursorBlink:!1,scrollback:null!=(O=ei.current.scrollback)?O:1e4,tabStopWidth:4,fontFamily:"".concat(P,', replit-icons, Monaco, "Ubuntu Mono", Consolas, monospace'),fontSize:ei.current.fontSize,lineHeight:1,fontWeight:400,fontWeightBold:700,convertEol:ei.current.convertEol,drawBoldTextInBrightColors:!1,minimumContrastRatio:4.5,theme:ei.current.terminalTheme,screenReaderMode:ei.current.screenReaderMode,logger:{trace:function(e,t){return(r=console).trace.apply(r,["xterm: "+e].concat((0,f._)(t)))},debug:function(e,t){return(i=console).debug.apply(i,["xterm: "+e].concat((0,f._)(t)))},info:function(e,t){return(o=console).info.apply(o,["xterm: "+e].concat((0,f._)(t)))},warn:function(e,t){return(s=console).warn.apply(s,["xterm: "+e].concat((0,f._)(t)))},error:function(e,t){"string"==typeof e&&e.includes("Parsing error")||console.error("xterm: "+e,t)}}},(null==(l=el.current)?void 0:l.cols)!==void 0&&(N.cols=el.current.cols),(null==(u=el.current)?void 0:u.rows)!==void 0&&(N.rows=el.current.rows),B=new v(N),ei.current.fileLinking?(eo.current=new k(ei.current.fileLinking.openFile,ei.current.fileLinking.listFiles),B.loadAddon(eo.current)):eo.current=null,!es.current&&(null==t?void 0:t.openPane)&&(es.current=new C(t.openPane,t.emitPaneMetrics)),es.current&&B.loadAddon(es.current),V=new x,B.loadAddon(V),U=new _(($=function(e){X?y.desktopAppApi.openExternalUrl(e):window.open(e,"_blank")},function(e,t){var n;try{n=new URL(t)}catch(e){return}("0.0.0.0"===n.hostname||"localhost"===n.hostname)&&void 0!==Z.current?Z.current(n.pathname,parseInt(n.port,10)):$(t)})),B.loadAddon(U),H=new b,B.loadAddon(H),z=new j,B.loadAddon(z),B.unicode.activeVersion="11",B.open(L),n.push(function(){try{B.dispose()}catch(e){}}),function(){try{if(!(!function(){if(!F())return!1;var e=window.navigator.userAgent.match(/Version\/(\d+)/);return null===e||e.length<2||16>parseInt(e[1],10)}()&&(F()||!Q||!(window.devicePixelRatio>1))&&document.createElement("canvas").getContext("webgl2"))){var e=new A;B.loadAddon(e);return}var t=new I;B.loadAddon(t),t.onContextLoss(function(){t.dispose(),B.loadAddon(new A)})}catch(e){var n=new A;B.loadAddon(n)}}(),q=!1,W=null,B.attachCustomKeyEventHandler(function(e){var t,n,r=(0,w.getKeyCombination)(e);if(r){var i=r;W&&(i=(0,w.keyChord)(W,r));var a=eu(i);switch(a.kind){case T.ResolutionResultKindEnum.NoMatch:W=null;break;case T.ResolutionResultKindEnum.WaitingForChord:return W=a.key,!1;case T.ResolutionResultKindEnum.MatchFound:return W=null,!1}}return t=B,n=e,(!window.navigator.clipboard||"c"!==n.key.toLowerCase()||!n.ctrlKey||!n.shiftKey||("keyup"===n.type&&t.hasSelection()&&(0,S.default)(t.getSelection()).catch(function(e){g.withScope(function(t){t.setTag("xterm-clipboard",!0),t.setExtra("type","copy"),g.captureException(e)})}),n.preventDefault(),n.stopPropagation(),!1))&&("shift"===e.key.toLowerCase()||"ctrl"===e.key.toLowerCase()||"alt"===e.key.toLowerCase()||"meta"===e.key.toLowerCase()||("tab"!==e.key.toLowerCase()||!q)&&(q="escape"===e.key.toLowerCase(),!0))}),en.current&&Object.entries(en.current).forEach(function(e){var t=(0,a._)(e,2),n=t[0],r=t[1];B.parser.registerOscHandler(Number(n),function(e){return r(B,e),!0})}),G({onKey:B.onKey.bind(B),onData:B.onData.bind(B),onResize:B.onResize.bind(B),write:B.write.bind(B),fit:function(){var e=L.getBoundingClientRect(),t=e.width,n=e.height;t>0&&n>0&&V.fit()},focus:function(){return B.focus()},clear:function(){return B.clear()},findPrevious:function(e,t){return H.findPrevious(e,t)},findNext:function(e,t){return H.findNext(e,t)},getSize:function(){return{cols:B.cols,rows:B.rows}},paste:function(e){return B.paste(e)},_term:B}),ea(L),[2]}})})().catch(function(e){e.message&&e.message.toLowerCase().includes("loading chunk")?g.withScope(function(t){t.setExtra("message",e.message),t.setExtra("stack",e.stack),g.captureException(Error("Loading chunk failed"))}):Y({error:e,origin:"Xterm: init"})}),function(){n.forEach(function(e){return e()})}}},[L,ea,ei,Y,el,eu,X,Q,Z,en,null==t?void 0:t.openPane,null==t?void 0:t.emitPaneMetrics]),n=null==H?void 0:H._term,r=eo,i=es,c=(o=er).screenReaderMode,d=o.fileLinking,k=o.terminalTheme,C=o.openPane,A=o.emitPaneMetrics,(0,s.useEffect)(function(){n&&k&&(n.options.theme=k)},[n,k]),(0,s.useEffect)(function(){n&&(n.options.screenReaderMode=c)},[n,c]),(0,s.useEffect)(function(){if(n){if(d){if(!r.current){var t=!1;return e.A(305813).then(function(e){var i=e.FileLinkAddon;t||(r.current=new i(d.openFile,d.listFiles),n.loadAddon(r.current))}),function(){t=!0}}r.current.update(d.openFile,d.listFiles),r.current.reactivate()}else r.current&&r.current.deactivate();if(C){if(!i.current){var a=!1;return e.A(537915).then(function(e){var t=e.PaneLinkAddon;a||(i.current=new t(C,A),n.loadAddon(i.current))}),function(){a=!0}}i.current.update(C,null!=A?A:null)}else i.current&&i.current.deactivate()}},[n,d,r,i,C,A]),(0,s.useEffect)(function(){var e=null==H?void 0:H._term;e&&W&&e.options.fontSize!==W&&(e.options.fontSize=W,e.refresh(0,e.rows-1),H.fit())},[W,H]),(0,s.useEffect)(function(){if($){var e=null==H?void 0:H._term;if(e)return e.onBell(j).dispose}},[$,H]),[H,B]}e.s(["useTerminalTheme",()=>U],818976),e.s(["default",()=>H],210481);var G=e.i(446530),z=e.i(123850),q=e.i(613355),W=e.i(625484);function K(e){for(var t=1,n=e.buffer.active._buffer.lines._array,r=e.buffer.active.length;r-- >0;){var i=n[r];if(i){for(var a=!1,o=0;o<e.cols;o++)if(0!==i.hasContent(o)){a=!0;break}if(a){t=r+1;break}}}return t}var $=(0,z.createCssVarTokens)(["topOffset"]),Y=$.cssVars,X=$.styleTokens,Q=(0,G.cssRecord)({wrapper:{display:"grid",gridTemplateColumns:"1fr"},terminal:{gridRow:1,gridColumn:1,position:"sticky",top:X.topOffset,"& .xterm":[q.rcss.py(8),q.rcss.pl(8),q.rcss.height("100%"),q.rcss.overflow("hidden")],"& .xterm-viewport":[q.rcss.overflow("hidden")]},terminalForHistoricalOutputWrapper:[q.rcss.overflow("hidden")]});function J(e){var t=e.autoFocus,a=e.wrapperResizeRef,l=e.xterm,u=e.bufferHeight,c=e.onInput,d=e.setOnMessage,p=e.onResizeTerminal,f=e.children,m=(0,i._)(e,["autoFocus","wrapperResizeRef","xterm","bufferHeight","onInput","setOnMessage","onResizeTerminal","children"]);return(0,s.useEffect)(function(){t&&l&&l.focus()},[l,t]),(0,s.useEffect)(function(){if(l){var e=l.onData(function(e){c&&c(e)}),t=l.onResize(function(){p&&p(l.getSize())});return function(){e.dispose(),t.dispose()}}},[l,c,p]),(0,s.useEffect)(function(){if(l)return d(function(e){return l.write(e)})},[d,l]),(0,o.jsx)(W.View,{innerRef:a,children:(0,o.jsx)(W.View,(0,r._)((0,n._)({},m),{css:Q.wrapper,style:(0,n._)({height:u},m.style),children:f}))})}function Z(e){var t=e.xtermRef,a=e.visibleHeight,s=e.maxHeight,l=(0,i._)(e,["xtermRef","visibleHeight","maxHeight"]);return(0,o.jsx)(W.View,(0,r._)((0,n._)({innerRef:t,css:Q.terminal},l),{style:(0,r._)((0,n._)({},l.style),{height:a,maxHeight:s})}))}function ee(e){var t=e.maxHeight,n=e.openPane,r=e.convertEol,i=(0,c.default)().fs,o=(0,s.useCallback)(function(e){return n({type:(0,d.getPaneTypeForFile)(e),data:e})},[n]),p=(0,s.useCallback)(function(e,t){return n({type:"webview",data:{ports:{type:"local",path:e,port:t}}})},[n]),f=(0,a._)(H({autoFit:!1,size:{rows:10},openFile:o,listFiles:i.listFiles,openWebview:p,openPane:n,convertEol:r}),2),m=f[0],g=f[1],h=(0,s.useMemo)(function(){return null==m?void 0:m._term},[m]),v=(0,a._)((0,s.useState)(function(){var e,t,n=null==h?void 0:h._core;return null!=(t=null==n||null==(e=n._renderService)?void 0:e.dimensions.css.cell.height)?t:16}),2),y=v[0],x=v[1];(0,s.useEffect)(function(){if(h){var e,t=null==h?void 0:h._core,n=null==t||null==(e=t._renderService)?void 0:e.onDimensionsChange(function(e){x(e.css.cell.height)});return function(){null==n||n.dispose()}}},[h]);var b=(0,s.useMemo)(function(){return Math.floor((t-16)/y)},[t,y]),S=(0,a._)((0,s.useState)("normal"),2),_=S[0],w=S[1],T=(0,a._)((0,s.useState)(1),2),j=T[0],D=T[1],k=(0,a._)((0,s.useState)(1),2),C=k[0],E=k[1],A=(0,a._)((0,s.useState)(!1),2),I=A[0],R=A[1],P=(0,l.default)(j),M=(0,l.default)(C),O=(0,l.default)(_);(0,s.useEffect)(function(){if(h){var e=h.buffer.onBufferChange(function(e){w(e.type),"alternate"===e.type&&(D(b),E(b),R(!1))});return function(){e.dispose()}}},[h,b]);var N=(0,s.useCallback)(function(){if(h)if("alternate"===O.current)D(b);else{var e=K(h),t=e>b;E(e),D(Math.min(e,b)),R(t)}},[h,b,O]),L=(0,u.default)(function(e){var t=e.widthChanged;h&&m&&t&&(m.fit(),N())},{type:"debounce",wait:200});(0,s.useEffect)(function(){var e=function(){if(h&&"alternate"!==O.current){var e=K(h),t=Math.min(e,b);e>M.current&&E(e),t>P.current&&D(t),e>b&&R(!0)}};if(h){var t=[h.onLineFeed(e),h.onCursorMove(e)];return function(){t.forEach(function(e){return e.dispose()})}}},[h,P,O,M,b]),(0,s.useEffect)(function(){if(h&&m){var e=m.getSize();e.rows!==b&&h.resize(e.cols,b),N()}},[h,m,b,N]);var B=(0,s.useMemo)(function(){return Math.ceil((Math.min(j,C)+1)*y+16)},[j,C,y]),V=(0,s.useMemo)(function(){return Math.ceil(I?(C+1)*y+16:B)},[y,I,B,C]);return(0,s.useEffect)(function(){m&&m.fit()},[m,j,C]),{visibleHeight:B,visibleLines:j,bufferHeight:V,bufferLines:C,bufferMode:_,hasScrollback:I,wrapperResizeRef:L,xterm:m,xtermRef:g}}function et(){}function en(e){var t=e.output,n=e.maxHeight,r=ee({maxHeight:n,openPane:e.openPane,convertEol:e.convertEol}),i=r.visibleHeight,a=r.bufferHeight,l=r.wrapperResizeRef,u=r.xterm,c=r.xtermRef,d=(0,s.useRef)(null);(0,s.useEffect)(function(){u&&d.current&&(u.clear(),d.current(t))},[d,u,t]);var p=U();return(0,o.jsx)(W.View,{css:Q.terminalForHistoricalOutputWrapper,style:{height:i,background:null==p?void 0:p.background},children:(0,o.jsx)(J,{onInput:et,xterm:u,wrapperResizeRef:l,bufferHeight:a,setOnMessage:function(e){return d.current=e,et},onResizeTerminal:et,children:(0,o.jsx)(Z,{xtermRef:c,visibleHeight:i,maxHeight:n})})})}e.s(["AutoGrowingTerminalForHistoricalOutput",()=>en,"AutoGrowingTerminalInner",()=>Z,"AutoGrowingTerminalWrapper",()=>J,"TERMINAL_PADDING_PX",()=>8,"cssVars",()=>Y,"styleTokens",()=>X,"useAutoGrowingXTerm",()=>ee],762211)},83773,e=>{e.v({trajectoryItem:"SamplingEvent-module__iPtlaW__trajectoryItem"})},288885,e=>{e.v({container:"SearchIntegrations-module__CRsxhW__container"})},12977,e=>{e.v({container:"StockImageGeneration-module__nQ0zAW__container",image:"StockImageGeneration-module__nQ0zAW__image",imageEmptyState:"StockImageGeneration-module__nQ0zAW__imageEmptyState"})},960008,974770,582752,522530,660622,111328,122757,414018,678741,645143,532717,245702,573201,865026,e=>{"use strict";var t=e.i(276385),n=e.i(188507),r=e.i(653412),i=e.i(762211),a=e.i(818976),o=e.i(394212),s=e.i(297083),l=e.i(530658),u=e.i(817556),c=e.i(389959),d=e.i(299798),p=e.i(446530),f=e.i(613355),m=e.i(625484);function g(){}var h=(0,p.cssRecord)({terminalWrapper:[{"> div":[f.rcss.borderRadius(4)],"& .xterm":[f.rcss.borderRadius(4)]}]});function v(e){var n=e.processId,r=e.openPane,p=e.maxHeight,f=(0,a.useTerminalTheme)(),v=(0,i.useAutoGrowingXTerm)({maxHeight:p,openPane:r}),y=v.visibleHeight,x=v.bufferHeight,b=v.wrapperResizeRef,S=v.xterm,_=v.xtermRef,w=(0,l._)((0,c.useState)(null),2),T=w[0],j=w[1],D=(0,c.useCallback)(function(e){return j(function(){return e}),function(){}},[]);return(0,d.usePid2)(function(e,t){var r=t.signal;return(0,s._)(function(){var t,i,a,s,l,c,d,p;return(0,u._)(this,function(u){switch(u.label){case 0:if(!T)return[2];t=e.agentToolPackager.connectToInstallPackages.subscribe({processId:n},{signal:r}).resReadable,i=!1,a=!1,u.label=1;case 1:u.trys.push([1,6,7,12]),l=(0,o._)(t),u.label=2;case 2:return[4,l.next()];case 3:if(!(i=!(c=u.sent()).done))return[3,5];if(!(d=c.value).ok){if("UNEXPECTED_DISCONNECT"===d.payload.code||"CANCEL"===d.payload.code||"NO_PROCESS_MATCHING_ID"===d.payload.code)return[3,5];throw Error("[".concat(d.payload.code,"]: ").concat(d.payload.message))}"output"===d.payload.$kind&&T(d.payload.output),u.label=4;case 4:return i=!1,[3,2];case 5:return[3,12];case 6:return p=u.sent(),a=!0,s=p,[3,12];case 7:if(u.trys.push([7,,10,11]),!(i&&null!=l.return))return[3,9];return[4,l.return()];case 8:u.sent(),u.label=9;case 9:return[3,11];case 10:if(a)throw s;return[7];case 11:return[7];case 12:return[2]}})})()},[T,n]),(0,t.jsx)(m.View,{css:h.terminalWrapper,style:{height:y,background:null==f?void 0:f.background},children:(0,t.jsx)(i.AutoGrowingTerminalWrapper,{onInput:g,xterm:S,wrapperResizeRef:b,bufferHeight:x,setOnMessage:D,onResizeTerminal:g,children:(0,t.jsx)(i.AutoGrowingTerminalInner,{xtermRef:_,visibleHeight:y,maxHeight:p})})})}e.s(["default",()=>v],974770);var y=e.i(960178),x=e.i(982204),b=e.i(634669),S=(0,p.cssRecord)({terminalWrapperBottomRadius:[f.rcss.borderRadius(0,0,4,4),{"> div":[f.rcss.borderRadius(4)],"& .xterm":[f.rcss.borderRadius(4)]}],terminalWrapperFullRadius:[f.rcss.borderRadius(4),{"> div":[f.rcss.borderRadius(4)],"& .xterm":[f.rcss.borderRadius(4)]}]});function _(e){var o,s=e.data,l=e.openPane,u=s.installed,c=s.isExecuting,d=s.processId,p=s.state,f=null==(o=s.output)?void 0:o.trim().replaceAll("\n","\r\n"),g=(0,a.useTerminalTheme)(),h="";h=c?u.length>1?"".concat(u.length," packages are being installed:"):"A package is being installed:":u.length>1?"".concat(u.length," packages were installed:"):"A package was installed:";var _=p===n.EventState.IN_PROGRESS&&c&&!f,w=u.length>0,T=p===n.EventState.IN_PROGRESS||f?(0,t.jsxs)(m.View,{css:w?S.terminalWrapperFullRadius:S.terminalWrapperBottomRadius,style:{backgroundColor:null==g?void 0:g.background},children:[c&&d?(0,t.jsx)(v,{processId:d,openPane:l,maxHeight:300}):null,!c&&f?(0,t.jsx)(i.AutoGrowingTerminalForHistoricalOutput,{output:f,maxHeight:300,openPane:l}):null]}):null,j=w?(0,t.jsxs)(m.View,{gap:4,p:8,children:[(0,t.jsx)(y.Text,{color:"dimmest",children:_?"Installingâ€¦":"Command output:"}),T]}):T;return(0,t.jsx)(r.EventPaneWithPackages,{left:(0,t.jsx)(x.default,{size:16}),title:"Dependencies",onOpenPane:function(){l({type:"developer",data:{tab:["dependencies","import"]}})},text:h,packageList:u,getPackageIcon:function(){return(0,t.jsx)(b.default,{size:16})},children:j})}function w(e){var n=e.data.uninstalled,i=e.openPane,a=n.length>1?"".concat(n.length," packages were uninstalled:"):"A package was uninstalled:";return(0,t.jsx)(r.EventPaneWithPackages,{left:(0,t.jsx)(x.default,{size:16}),title:"Dependencies",onOpenPane:function(){i({type:"developer",data:{tab:["dependencies","import"]}})},text:a,packageList:n,getPackageIcon:function(){return(0,t.jsx)(b.default,{size:16})}})}e.s(["PackagerInstall",()=>_],960008),e.s(["PackagerUninstall",()=>w],582752);var T=e.i(774787),j=e.i(243074);function D(e){var n=e.data;return(0,t.jsx)(r.EventPane,{left:(0,t.jsx)(j.default,{size:16}),title:(0,t.jsx)(T.CodePath,{path:n.data.path}),showOpenPaneButton:!1})}function k(e){var n=e.data,r=e.openPane;return(0,t.jsx)(T.default,{path:n.data.filePath,code:n.data.content,openPane:r,showCode:!1})}e.s(["ReadDir",()=>D],522530),e.s(["ReadFile",()=>k],660622);var C=e.i(624782),E=e.i(616278),A=e.i(993134),I=e.i(940745),R=e.i(431601),P=e.i(42458),M=e.i(659666),O=e.i(83773);function N(e){var n=e.id,r=e.contents,i=e.state,a=function(e){switch(e){case 1:return{icon:(0,t.jsx)(I.default,{}),label:"In Progress",colorway:"default",bgColor:"var(--token-background-higher)"};case 2:return{icon:(0,t.jsx)(E.default,{}),label:"Successful",colorway:"positive",bgColor:"var(--token-background-positive-weak)"};case 3:return{icon:(0,t.jsx)(P.default,{}),label:"Failed",colorway:"negative",bgColor:"var(--token-background-negative-weak)"};case 4:return{icon:(0,t.jsx)(R.default,{}),label:"Chosen",colorway:"accent",bgColor:"var(--token-background-accent-weak)"};default:return{icon:(0,t.jsx)(A.default,{}),label:"Pending",colorway:"default",bgColor:"var(--token-background-higher)"}}}(i);return(0,t.jsxs)(m.View,{clsx:O.default.trajectoryItem,p:8,children:[(0,t.jsxs)(m.View,{row:!0,align:"center",gap:8,children:[a.icon,(0,t.jsxs)(y.Text,{variant:"small",color:"default",children:["Trajectory ",n]}),(0,t.jsx)(C.Pill,{text:a.label,colorway:function(){switch(i){case 2:return"positive";case 3:return"negative";case 4:return"primary";default:return}}(),variant:"muted",compact:!0})]}),r?(0,t.jsx)(m.View,{pt:4,children:(0,t.jsx)(y.Text,{variant:"small",multiline:!0,color:"dimmer",children:r})}):null]})}function L(e){var n,i=(null==(n=e.data.data)?void 0:n.trajectories)||[];return(0,t.jsx)(r.EventPane,{left:(0,t.jsx)(M.default,{size:16}),title:"Solution exploration",renderChildrenOnlyWhenInView:!0,children:(0,t.jsx)(m.View,{gap:6,pt:6,children:i.length>0?(0,t.jsx)(m.View,{gap:6,children:i.map(function(e){return(0,t.jsx)(N,{id:e.id||"unknown",contents:e.contents||"",state:e.state||0},e.id||Math.random())})}):(0,t.jsx)(m.View,{color:"dimmer",children:(0,t.jsx)(y.Text,{color:"dimmer",children:"Initializing solution exploration..."})})})})}e.s(["SamplingEvent",()=>L],111328);var B=e.i(480028),V=e.i(211397),U=(0,p.cssRecord)({loading:[f.rcss.center,{marginLeft:"auto",marginRight:"auto"}],aspectRatio:[f.rcss.position.relative,f.rcss.height(0),{paddingBottom:"".concat(56.25,"%")}],image:[f.rcss.coverContainer,{"& > span":[f.rcss.borderRadius(4),f.rcss.border({color:B.tokens.outlineDimmer})]}]});function F(e){var n=e.data.imageUrl;return n?(0,t.jsx)(m.View,{css:U.aspectRatio,children:(0,t.jsx)(m.View,{css:U.image,children:(0,t.jsx)(V.default,{layout:"fill",src:n,alt:"Screenshot",objectFit:"cover"})})}):(0,t.jsx)(m.View,{css:U.loading,children:(0,t.jsx)(I.default,{})})}e.s(["Screenshot",()=>F],122757);var H=e.i(546284),G=e.i(929872),z=e.i(288885),q=function(e){var n=e.query,r=e.numResults;return(0,t.jsx)(G.Surface,{elevated:!0,p:8,clsx:z.default.container,children:(0,t.jsxs)(y.Text,{children:['Searched for "',n,'" and found ',(0,H.default)("result",r,!0),"."]})})};e.s(["SearchIntegrations",()=>q],414018);var W=e.i(538391),K=e.i(47503),$=(0,p.cssRecord)({terminalWrapper:[f.rcss.overflow("hidden"),{"& .xterm":[f.rcss.borderRadius(0,0,4,4)]}]});function Y(e){var n=e.processId,r=e.openPane,p=e.maxHeight,f=e.interactive,g=void 0!==f&&f,h=(0,K.useCurrentUserId)(),v=(0,c.useId)(),y=(0,a.useTerminalTheme)(),x=(0,i.useAutoGrowingXTerm)({maxHeight:p,openPane:r}),b=x.visibleHeight,S=x.bufferHeight,_=x.wrapperResizeRef,w=x.xterm,T=x.xtermRef,j=(0,l._)((0,c.useState)(null),2),D=j[0],k=j[1],C=(0,c.useCallback)(function(e){return k(function(){return e}),function(){}},[]);return(0,d.usePid2)(function(e,t){var r=t.signal;return(0,s._)(function(){var t,i,a,l,c,d,p,f,m,y,x,b,S;return(0,u._)(this,function(_){switch(_.label){case 0:if(!h||!D||!w)return[2];i=(t=e.shellExec.connect.stream({id:n,userId:h,processViewId:v},{signal:r})).resReadable,a=t.reqWritable,l=function(e){g&&a.write({$kind:"stdin",stdin:new Uint8Array(W.Buffer.from(e))})},c=w.onResize(function(t){return(0,s._)(function(){return(0,u._)(this,function(r){switch(r.label){case 0:return[4,e.shellExec.resize.rpc({id:n,userId:h,processViewId:v,size:t})];case 1:return r.sent(),[2]}})})()}),d=w.onData(l),p=!1,f=!1,_.label=1;case 1:_.trys.push([1,6,7,12]),y=(0,o._)(i),_.label=2;case 2:return[4,y.next()];case 3:if(!(p=!(x=_.sent()).done))return[3,5];if(!(b=x.value).ok){if("UNEXPECTED_DISCONNECT"===b.payload.code||"CANCEL"===b.payload.code||"NO_PROCESS_MATCHING_ID"===b.payload.code||"PROCESS_IS_NOT_RUNNING"===b.payload.code)return[3,5];throw Error("[".concat(b.payload.code,"]: ").concat(b.payload.message))}"output"===b.payload.$kind&&D(b.payload.output),_.label=4;case 4:return p=!1,[3,2];case 5:return[3,12];case 6:return S=_.sent(),f=!0,m=S,[3,12];case 7:if(_.trys.push([7,,10,11]),!(p&&null!=y.return))return[3,9];return[4,y.return()];case 8:_.sent(),_.label=9;case 9:return[3,11];case 10:if(f)throw m;return[7];case 11:return[7];case 12:return[2,function(){c.dispose(),d.dispose()}]}})})()},[h,g,D,n,v,w]),(0,t.jsx)(m.View,{css:$.terminalWrapper,style:{height:b,background:null==y?void 0:y.background},children:(0,t.jsx)(i.AutoGrowingTerminalWrapper,{xterm:w,wrapperResizeRef:_,bufferHeight:S,setOnMessage:C,children:(0,t.jsx)(i.AutoGrowingTerminalInner,{xtermRef:T,visibleHeight:b,maxHeight:p})})})}e.s(["default",()=>Y],678741);var X=e.i(751273),Q=e.i(476891),J=(0,p.cssRecord)({wrapper:[f.rcss.height("100%")],terminalWrapper:[f.rcss.overflow("hidden"),{"& .xterm":[f.rcss.borderRadius(0,0,4,4)]}]});function Z(e){var n=e.data.data,i=e.openPane,o=(0,a.useTerminalTheme)(),s=null;n.isExecuting||(s=0===n.exitCode?(0,t.jsx)(E.default,{}):(0,t.jsx)(X.Tooltip,{tooltip:"Command exited with: ".concat(n.exitCode),children:(0,t.jsx)(P.default,{})}));var l=!0===n.isExecuting,u=(0,t.jsx)(m.View,{css:J.wrapper,style:{backgroundColor:null==o?void 0:o.background},children:l?(0,t.jsx)(Y,{processId:n.processId,openPane:i,maxHeight:300,interactive:!1}):(0,t.jsx)(ee,{output:n.output,openPane:i})});return(0,t.jsx)(r.EventPane,{left:(0,t.jsx)(Q.default,{size:16}),title:"$ ".concat(n.command),right:s,renderChildrenOnlyWhenInView:!0,showOpenPaneButton:!1,children:u})}function ee(e){var n=e.output,r=e.openPane;return 0===n.length?null:(0,t.jsx)(m.View,{css:J.terminalWrapper,children:(0,t.jsx)(i.AutoGrowingTerminalForHistoricalOutput,{convertEol:!0,maxHeight:300,output:n,openPane:r})})}e.s(["ShellExecution",()=>Z],645143);var et=e.i(292297),en=(0,p.cssRecord)({wrapper:[f.rcss.height("100%")],terminalWrapper:[f.rcss.overflow("hidden"),{"& .xterm":[f.rcss.borderRadius(0,0,4,4)]}]});function er(e){var n,i,o=e.data.data,s=e.openPane,l=(0,a.useTerminalTheme)(),u=null;(null==(n=o.status)?void 0:n.$kind)==="exitCode"&&(u=0===o.status.exitCode?(0,t.jsx)(E.default,{}):(0,t.jsx)(P.default,{}));var c="\r"+o.command.replaceAll("\n","\r\n")+"\r\n";o.output&&(c+="\r\n"+o.output.replaceAll("\n","\r\n"));var d=(null==(i=o.status)?void 0:i.$kind)==="isExecuting";return(0,t.jsx)(r.EventPane,{left:(0,t.jsx)(et.default,{size:16}),title:d?"Executing SQL query":"Executed SQL query",right:u,renderChildrenOnlyWhenInView:!0,showOpenPaneButton:!1,children:(0,t.jsx)(m.View,{css:en.wrapper,style:{backgroundColor:null==l?void 0:l.background},children:(0,t.jsx)(ei,{output:c,openPane:s})})})}function ei(e){var n=e.output,r=e.openPane;return 0===n.length?null:(0,t.jsx)(m.View,{css:en.terminalWrapper,children:(0,t.jsx)(i.AutoGrowingTerminalForHistoricalOutput,{maxHeight:300,output:n,openPane:r})})}e.s(["SqlExecution",()=>er],532717);var ea=e.i(54073),eo=e.i(529810),es=e.i(12977);function el(e){var n=e.imagePath,r=e.alt,i=e.className,a=(0,eo.default)().fs,o=(0,ea.useFileAsDataUrl)(a,n),s=o.isLoading,l=o.hasError,u=o.dataSrc;return s?(0,t.jsx)(G.Surface,{elevated:!0,clsx:es.default.imageEmptyState,align:"center",justify:"center",children:(0,t.jsx)(I.default,{})}):l||!u?(0,t.jsx)(G.Surface,{elevated:!0,clsx:es.default.imageEmptyState,align:"center",justify:"center",children:(0,t.jsx)(y.Text,{color:"dimmer",children:"Failed to load image"})}):(0,t.jsx)(V.default,{src:u,alt:r,className:i,width:200,height:200})}function eu(e){var n=e.imageDescription,r=e.imageUrls;return(0,t.jsx)(m.View,{className:es.default.container,children:r.length>0?r.map(function(e,r){return(0,t.jsx)(el,{imagePath:e,alt:"".concat(n," - ").concat(r+1),className:es.default.image},r)}):(0,t.jsx)(y.Text,{color:"dimmer",children:"No images found"})})}function ec(e){var n=e.data.deps,i=e.openPane,a=n.length>1?"".concat(n.length," system dependencies were installed:"):"A system dependency was installed:";return(0,t.jsx)(r.EventPaneWithPackages,{left:(0,t.jsx)(x.default,{size:16}),title:"Dependencies",onOpenPane:function(){i({type:"developer",data:{tab:["dependencies","nix"]}})},text:a,packageList:n,getPackageIcon:function(){return(0,t.jsx)(x.default,{size:16})}})}function ed(e){var n=e.data.deps,i=e.openPane,a=n.length>1?"".concat(n.length," system dependencies were uninstalled:"):"A system dependency was uninstalled:";return(0,t.jsx)(r.EventPaneWithPackages,{left:(0,t.jsx)(x.default,{size:16}),title:"Dependencies",onOpenPane:function(){i({type:"developer",data:{tab:["dependencies","nix"]}})},text:a,packageList:n,getPackageIcon:function(){return(0,t.jsx)(x.default,{size:16})}})}e.s(["StockImageGeneration",()=>eu],245702),e.s(["SystemDependencyInstall",()=>ec],573201),e.s(["SystemDependencyUninstall",()=>ed],865026)},646982,e=>{"use strict";var t=e.i(167626),n=e.i(276385),r=e.i(671901),i=e.i(368357),a=e.i(525212),o=e.i(99516),s=e.i(676081),l=e.i(839733),u=e.i(870484),c=e.i(800505),d=e.i(736579),p=e.i(739565),f=e.i(473754),m=e.i(19103),g=e.i(14597),h=e.i(273700),v=e.i(382558),y=e.i(26482),x=e.i(249413),b=e.i(759512),S=e.i(29232),_=e.i(85483),w=e.i(844357),T=e.i(503724),j=e.i(613539),D=e.i(108223),k=e.i(796303),C=e.i(894709),E=e.i(167562),A=e.i(246598),I=e.i(634669),R=e.i(397124),P=e.i(216431);function M(e){var M=e.module,O=M.name.toLowerCase(),N=O.split(" ");return O.includes("node")?(0,n.jsx)(x.default,{}):O.includes("typescript")?(0,n.jsx)(E.default,{}):O.includes("python")||O.includes("pyright")?(0,n.jsx)(w.default,{}):O.includes("c++")||O.includes("cpp")||O.includes("clang")||O.includes("ccls")?(0,n.jsx)(u.default,{}):O.includes("java")||O.includes("maven")?(0,n.jsx)(h.default,{}):O.includes("rust")||O.includes("cargo")?(0,n.jsx)(D.default,{}):N.includes("go")||O.includes("gopls")?(0,n.jsx)(f.default,{}):O.includes("ruby")?(0,n.jsx)(j.default,{}):O.includes("elixir")?(0,n.jsx)(p.default,{}):O.includes("bash")?(0,n.jsx)(o.default,{}):O.includes("clojure")?(0,n.jsx)(l.default,{}):O.includes("php")?(0,n.jsx)(S.default,{}):O.includes("swift")?(0,n.jsx)(C.default,{}):O.includes("haskell")?(0,n.jsx)(m.default,{}):O.includes("lua")?(0,n.jsx)(v.default,{}):O.includes("dart")?(0,n.jsx)(d.default,{}):O.includes("css")?(0,n.jsx)(c.default,{}):O.includes("html")?(0,n.jsx)(g.default,{}):N.includes("r")?(0,n.jsx)(T.default,{}):O.includes("nix")?(0,n.jsx)(y.default,{}):O.includes("npm")?(0,n.jsx)(b.default,{}):"bun"===O?(0,n.jsx)(s.default,{}):O.includes("prettier")?(0,n.jsx)(_.default,{}):O.includes("vue")?(0,n.jsx)(A.default,{}):O.includes("svelte")?(0,n.jsx)(k.default,{}):O.includes(".replit")?(0,n.jsx)(R.default,{}):(0,t._)(M,r.api.PackagerOption)?(0,n.jsx)(I.default,{}):(0,t._)(M,r.api.LanguageServerOption)?(0,n.jsx)(i.default,{}):(0,t._)(M,r.api.FormatterOption)?(0,n.jsx)(a.default,{}):(0,t._)(M,r.api.RunOption)?(0,n.jsx)(P.default,{}):(0,n.jsx)(I.default,{})}e.s(["default",()=>M])},833694,e=>{e.v({container:"ViewIntegrations-module__LQDTyW__container"})},411582,e=>{e.v({divider:"WebPageVisit-module__dp1tdq__divider",markdown:"WebPageVisit-module__dp1tdq__markdown",root:"WebPageVisit-module__dp1tdq__root",visitContent:"WebPageVisit-module__dp1tdq__visitContent"})},70877,e=>{e.v({showMoreLessButton:"ShowMoreLessBlock-module__DD7eCq__showMoreLessButton"})},36926,e=>{e.v({divider:"WebSearch-module__jv759a__divider",root:"WebSearch-module__jv759a__root",sourceLink:"WebSearch-module__jv759a__sourceLink",sourceLinkText:"WebSearch-module__jv759a__sourceLinkText"})},776324,e=>{e.v({files:"SearchFilesystem-module__zrfULG__files"})},14689,e=>{e.v({surface:"Thoughts-module__9doZTq__surface"})},293198,252788,959406,e=>{"use strict";var t=e.i(878420),n=e.i(276385),r=e.i(188507),i=e.i(844225),a=e.i(198820),o=e.i(507091),s=e.i(641654),l=e.i(504186),u=e.i(132183),c=e.i(960008),d=e.i(582752),p=e.i(522530),f=e.i(660622),m=e.i(111328),g=e.i(122757),h=e.i(414018),v=e.i(645143),y=e.i(532717),x=e.i(245702),b=e.i(573201),S=e.i(865026),_=e.i(653412),w=e.i(646982),T=e.i(982204);function j(e){var t=e.data.modules,r=e.openPane,i=t.length>1?"".concat(t.length," system modules were installed:"):"A system module was installed:";return(0,n.jsx)(_.EventPaneWithPackages,{left:(0,n.jsx)(T.default,{size:16}),title:"Dependencies",onOpenPane:function(){r({type:"developer",data:{tab:["dependencies","nix"]}})},text:i,packageList:t,getPackageIcon:function(e){return(0,n.jsx)(w.default,{module:{name:e}})}})}var D=e.i(929872),k=e.i(960178),C=e.i(833694),E=function(e){var t=e.name;return(0,n.jsx)(D.Surface,{elevated:!0,p:8,clsx:C.default.container,children:(0,n.jsxs)(k.Text,{children:["Viewed integrations data for ",t,"."]})})},A=e.i(988676),I=e.i(625484),R=e.i(211397),P=e.i(916271),M=e.i(411582);function O(e){var t,r=e.url,i=e.favicon,a=e.title,o=e.snippet,s=!!a,l=!(!(t=i).startsWith("https://")&&!t.startsWith("http://")||t.includes("vertexaisearch.cloud.google.com"));return(0,n.jsxs)(D.Surface,{elevated:!0,clsx:M.default.root,children:[s?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(I.View,{row:!0,gap:8,p:8,children:[l?(0,n.jsx)(R.default,{src:i,alt:"Favicon",width:16,height:16}):null,(0,n.jsx)(k.Text,{multiline:!1,children:(0,n.jsx)("a",{href:r,target:"_blank",rel:"noopener noreferrer",children:a})})]}),(0,n.jsx)(A.DividerH,{clsx:M.default.divider})]}):null,(0,n.jsx)(D.Surface,{p:8,clsx:M.default.visitContent,gap:2,children:(0,n.jsx)(P.default,{className:M.default.markdown,useRemarkGfm:!0,lineBreaks:!0,themed:!0,children:o})})]})}var N=e.i(530658),L=e.i(389959),B=e.i(546284),V=e.i(140487),U=e.i(70877);function F(e){var t=e.title,r=e.children,i=e.isShowingMore,a=e.setIsShowingMore,o=e.showMoreDisabled;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(I.View,{row:!0,align:"center",justify:"space-between",gap:8,children:["string"==typeof t?(0,n.jsx)(k.Text,{variant:"small",color:"dimmer",children:t}):t,o?null:(0,n.jsx)(H,{isExpanded:i,setIsExpanded:a})]}),r]})}function H(e){var t=e.isExpanded,r=e.setIsExpanded;return(0,n.jsx)(V.Button,{text:t?"Show less":"Show more",variant:"underlinedOnHover",size:"small",clsx:U.default.showMoreLessButton,onClick:function(){return r(function(e){return!e})}})}var G=e.i(462995),z=e.i(480028),q=e.i(987154),W=e.i(36926);function K(e){var t=e.query,i=e.response,a=e.pageResults,o=(0,N._)((0,L.useState)(!1),2),s=o[0],l=o[1],u=i.length>400&&!s?i.slice(0,400)+" â€¦":i;return(0,n.jsxs)(D.Surface,{elevated:!0,clsx:W.default.root,children:[(0,n.jsx)(D.Surface,{p:8,clsx:W.default.heading,children:(0,n.jsx)(I.View,{shrink:!0,children:(0,n.jsx)(k.Text,{multiline:!1,children:t})})}),(0,n.jsx)(A.DividerH,{clsx:W.default.divider}),(0,n.jsxs)(D.Surface,{py:8,px:12,gap:8,children:[(0,n.jsx)(F,{title:e.searchType===r.WebSearchType.WEB_SEARCH_TYPE_REPLIT_DOCUMENTATION?"Replit documentation search results":"Web search results",isShowingMore:s,setIsShowingMore:l,children:(0,n.jsx)(I.View,{clsx:W.default.resultText,gap:8,children:(0,n.jsx)(G.MessageMarkdown,{text:u})})}),a.length>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A.DividerH,{clsx:W.default.divider}),(0,n.jsx)($,{pageResults:a})]}):null]})]})}function $(e){var t=e.pageResults,r=(0,N._)((0,L.useState)(!1),2),i=r[0],a=r[1],o=t.length>5&&!i?t.slice(0,5):t;return(0,n.jsx)(F,{title:(0,n.jsxs)(I.View,{row:!0,align:"center",gap:8,children:[(0,n.jsx)(q.default,{color:z.tokens.foregroundDimmer}),(0,n.jsxs)(k.Text,{variant:"small",color:"dimmer",children:[t.length," ",(0,B.default)("source",t.length)]})]}),isShowingMore:i,setIsShowingMore:a,children:(0,n.jsx)(I.View,{gap:4,children:o.map(function(e){return(0,n.jsxs)(I.View,{row:!0,align:"center",gap:8,children:[(0,n.jsx)(I.View,{shrink:!0,children:(0,n.jsx)("a",{className:W.default.sourceLink,href:e.url,target:"_blank",rel:"noopener noreferrer",children:(0,n.jsx)(k.Text,{multiline:!1,clsx:W.default.sourceLinkText,children:e.title})})}),(0,n.jsx)(k.Text,{variant:"small",color:"dimmer",multiline:!1,children:new URL(e.url).hostname.replace("www.","")})]},e.url)})})})}var Y=e.i(47503),X=e.i(394212),Q=e.i(297083),J=e.i(817556),Z=e.i(299798),ee=e.i(762211),et=e.i(818976),en=e.i(446530),er=e.i(613355);function ei(){}var ea=(0,en.cssRecord)({terminalWrapper:[er.rcss.overflow("hidden"),{"& .xterm":[er.rcss.borderRadius(0,0,4,4)]}]});function eo(e){var t=e.workflowRunState,r=e.currentUserId,i=e.openPane,a=e.maxHeight,o=void 0===a?300:a,s=(0,L.useId)(),l=(0,et.useTerminalTheme)(),u=t.runId,c=t.tasks.findIndex(function(e){var t;return(null==(t=e.metadata)?void 0:t.task)==="shell.exec"}),d=(0,ee.useAutoGrowingXTerm)({maxHeight:o,openPane:i}),p=d.visibleHeight,f=d.bufferHeight,m=d.wrapperResizeRef,g=d.xterm,h=d.xtermRef,v=(0,N._)((0,L.useState)(null),2),y=v[0],x=v[1],b=(0,L.useCallback)(function(e){return x(function(){return e}),function(){}},[]),S=(0,L.useRef)(!1);return(0,Z.usePid2)(function(e,t){var n=t.signal;return(0,Q._)(function(){var t,i,a,o,l,d,p,f,m,h;return(0,J._)(this,function(v){switch(v.label){case 0:if(S.current||!g||!y)return[2];i=(t=e.workflows.connectToTask.stream({runId:u,taskIdx:c,userId:r,processViewId:s},{signal:n})).resReadable,a=t.reqWritable,S.current=!0,a.write({$kind:"resize",size:g.getSize()}),o=!1,l=!1,v.label=1;case 1:v.trys.push([1,6,7,12]),p=(0,X._)(i),v.label=2;case 2:return[4,p.next()];case 3:if(!(o=!(f=v.sent()).done))return[3,5];if(!(m=f.value).ok){if("UNEXPECTED_DISCONNECT"===m.payload.code||"CANCEL"===m.payload.code||"NO_MATCHING_TASK_STATE"===m.payload.code)return[3,5];throw Error("[".concat(m.payload.code,"] ").concat(m.payload.message))}"output"===m.payload.$kind&&y(m.payload.chunk),v.label=4;case 4:return o=!1,[3,2];case 5:return[3,12];case 6:return h=v.sent(),l=!0,d=h,[3,12];case 7:if(v.trys.push([7,,10,11]),!(o&&null!=p.return))return[3,9];return[4,p.return()];case 8:v.sent(),v.label=9;case 9:return[3,11];case 10:if(l)throw d;return[7];case 11:return[7];case 12:return a.close(),[2]}})})()},[u,c,y,g,r,s]),(0,n.jsx)(I.View,{css:ea.terminalWrapper,style:{height:p,background:null==l?void 0:l.background},children:(0,n.jsx)(ee.AutoGrowingTerminalWrapper,{onInput:ei,xterm:g,wrapperResizeRef:m,bufferHeight:f,setOnMessage:b,onResizeTerminal:ei,children:(0,n.jsx)(ee.AutoGrowingTerminalInner,{xtermRef:h,visibleHeight:p,maxHeight:o})})})}e.s(["default",()=>eo],252788);var es=e.i(729122),el=e.i(940745),eu=e.i(559073),ec=e.i(121817),ed=(0,en.cssRecord)({body:[er.rcss.height("100%"),er.rcss.minHeight("100%")]});function ep(e){var t=e.data,i=e.openPane,a=t.workflowName,o=t.state,s=(0,es.useWorkflowsRunState)(),l=(0,Y.useCurrentUserId)(),u=(0,et.useTerminalTheme)(),c=(0,L.useMemo)(function(){if(!s)return null;var e=Object.values(s).filter(function(e){return e.workflow.name===a});return 0===e.length?null:e.sort(function(e,t){return t.startTime-e.startTime})[0]},[a,s]);if(o===r.EventState.IN_PROGRESS)return(0,n.jsx)(I.View,{p:8,align:"center",children:(0,n.jsx)(el.default,{})});var d=(0,n.jsx)(I.View,{css:ed.body,style:{backgroundColor:null==u?void 0:u.background},children:c&&l?(0,n.jsx)(eo,{workflowRunState:c,currentUserId:l,openPane:i}):null});return(0,n.jsx)(_.EventPane,{left:t.restart?(0,n.jsx)(ec.default,{size:16}):(0,n.jsx)(eu.default,{size:16}),title:a,onOpenPane:function(){return i({type:"runnerOutput"})},renderChildrenOnlyWhenInView:!0,children:d})}e.i(282890);var ef=e.i(66718);function em(e){return{type:(0,ef.getPaneTypeForFile)({path:e}),data:{path:e}}}e.s(["getPaneForFile",()=>em],959406);var eg=e.i(630818),eh=e.i(264661),ev=e.i(776324);function ey(e){return 0===e.resultFileNames.length?(0,n.jsx)(k.Text,{variant:"small",color:"dimmer",children:"No files found"}):(0,n.jsxs)(I.View,{gap:4,px:4,children:[(0,n.jsxs)(k.Text,{variant:"small",color:"dimmer",children:["Found ",(0,B.default)("file",e.resultFileNames.length,!0)]}),(0,n.jsx)(I.View,{row:!0,gap:6,align:"start",clsx:ev.default.files,children:e.resultFileNames.map(function(t){return(0,n.jsx)(V.Button,{size:"small",onClick:function(){return e.openPane(em(t))},iconLeft:(0,n.jsx)(eg.default,{size:12,path:t}),text:t,iconRight:(0,n.jsx)(eh.default,{})},t)})})]})}var ex=e.i(14689),eb=(0,L.memo)(function(e){return(0,n.jsx)(I.View,{pb:8,children:(0,n.jsx)(D.Surface,{elevated:!0,clsx:ex.default.surface,p:8,children:(0,n.jsx)(G.MessageMarkdown,{text:e.thoughts})})})});function eS(e){var _=e.data,w=e.openPane;switch(null==_?void 0:_.$kind){case"fileEditData":return(0,n.jsx)(o.FileEdit,{data:_,openPane:w});case"createFileData":return(0,n.jsx)(i.CreateFile,{data:_,openPane:w});case"readFileData":return(0,n.jsx)(f.ReadFile,{data:_,openPane:w});case"readDirData":return(0,n.jsx)(p.ReadDir,{data:_});case"shellExecutionData":return(0,n.jsx)(v.ShellExecution,{data:_,openPane:w});case"packagerInstallData":return(0,n.jsx)(c.PackagerInstall,{data:_,openPane:w});case"packagerUninstallData":return(0,n.jsx)(d.PackagerUninstall,{data:_,openPane:w});case"systemDependencyInstallData":return(0,n.jsx)(b.SystemDependencyInstall,{data:_,openPane:w});case"systemDependencyUninstallData":return(0,n.jsx)(S.SystemDependencyUninstall,{data:_,openPane:w});case"toolchainInstallData":return(0,n.jsx)(j,{data:_,openPane:w});case"screenshotData":return(0,n.jsx)(g.Screenshot,{data:_});case"workflowsStartToolData":case"workflowsRestartToolData":case"workflowsSetRunConfigToolData":return(0,n.jsx)(ep,{data:_,openPane:w});case"createPostgresqlDatabaseData":return(0,n.jsx)(a.CreatePostgreSQLDatabase,{openPane:w});case"sqlExecutionData":return(0,n.jsx)(y.SqlExecution,{data:_,openPane:w});case"webSearchData":return(0,n.jsx)(K,(0,t._)({},_.data));case"webPageVisitData":return(0,n.jsx)(O,(0,t._)({},_.data));case"imageGenerationData":return(0,n.jsx)(l.ImageGeneration,(0,t._)({},_.data));case"generateMediaData":return(0,n.jsx)(s.GenerateMedia,(0,t._)({},_));case"stockImageData":return(0,n.jsx)(x.StockImageGeneration,(0,t._)({},_.data));case"searchFilesystemData":return(0,n.jsx)(ey,{resultFileNames:_.resultFileNames,openPane:w});case"samplingEvent":return(0,n.jsx)(m.SamplingEvent,{data:_});case"thoughts":return(0,n.jsx)(eb,(0,t._)({},_));case"searchIntegrationsData":return(0,n.jsx)(h.SearchIntegrations,(0,t._)({},_.data));case"viewIntegrationData":return(0,n.jsx)(E,(0,t._)({},_.data));case"mcpToolData":return(0,n.jsx)(u.MCPToolResult,(0,t._)({},_.data));default:if((null==_?void 0:_.state)===r.EventState.IN_PROGRESS)return(0,n.jsx)(ew,{});return null}}var e_=(0,en.cssRecord)({loading:[er.rcss.center]});function ew(){return(0,n.jsx)(I.View,{css:e_.loading,px:16,py:48,children:(0,n.jsx)(el.default,{})})}e.s(["ProgressRenderer",()=>eS],293198)},64868,e=>{"use strict";function t(e){return!!e&&"figma"===e.toLowerCase()}function n(e,t){var n,r,i,a;return r=(n={inProgress:t,serverName:null==e?void 0:e.serverName,toolName:null==e?void 0:e.toolName}).inProgress,i=n.serverName,a=n.toolName,"figma"===i?"".concat(r?"Using":"Used"," Figma MCP (Beta)"):"".concat(r?"Using":"Used"," ").concat(i||"MCP"," MCP").concat(a?" - ".concat(a):"")}e.s(["getMCPToolSummaryFromData",()=>n,"isFigmaMCPTool",()=>t])},296038,e=>{e.v({button:"ToolUse-module__GDLg6G__button",chevron:"ToolUse-module__GDLg6G__chevron",expandableButton:"ToolUse-module__GDLg6G__expandableButton",label:"ToolUse-module__GDLg6G__label",openIcon:"ToolUse-module__GDLg6G__openIcon",toolUse:"ToolUse-module__GDLg6G__toolUse"})},250479,e=>{"use strict";var t=e.i(878420),n=e.i(64386),r=e.i(530658),i=e.i(276385),a=e.i(389959),o=e.i(976926),s=e.i(412887),l=e.i(672320),u=e.i(667059),c=e.i(178815),d=e.i(971372),p=e.i(293198),f=e.i(389503),m=e.i(509908),g=e.i(64868),h=e.i(959406),v=e.i(480028),y=e.i(907371),x=e.i(960178),b=e.i(625484),S=e.i(576073),_=e.i(862615),w=e.i(264661),T=e.i(296038);function j(e){var t=e.toolDataKind,n=e.summary,r=e.icon;return(0,i.jsxs)(b.View,{row:!0,align:"center",gap:6,grow:!0,shrink:!0,children:[null!=r?r:(0,i.jsx)(c.ToolDataIcon,{color:v.tokens.foregroundDimmest,kind:t}),(0,i.jsx)(b.View,{align:"start",grow:!0,shrink:!0,children:(0,i.jsx)(f.Summary,{summary:n,color:"dimmer"})})]})}var D=(0,a.memo)(function(e){if(!e.toolDataKind)return(0,i.jsx)(A,{toolName:e.toolName,summary:e.summary});switch(null==(r=e.data)?void 0:r.$kind){case void 0:return(0,i.jsx)(A,{toolName:e.toolName,summary:e.summary});case"readDirData":case"memoryCompressionData":case"blueprintsSetup":case"setupModelfarmData":case"viewLogsData":case"viewSpecialFiles":case"designGuidelinesData":case"videoGenerationData":return(0,i.jsx)(E,{toolDataKind:e.data.$kind,summary:e.summary});case"waitingForBackgroundJobsData":return(0,i.jsx)(u.WaitingForBackgroundJobs,{data:e.data.data,state:e.data.state});case"messagedBackgroundAgent":return(0,i.jsx)(o.MessagedBackgroundAgent,{data:e.data.data,state:e.data.state});case"subagentReportResultData":return(0,i.jsx)(l.SubagentReportResult,{data:e.data.data,state:e.data.state});case"reportAgentIssueData":return(0,i.jsx)(s.ReportAgentIssue,{state:e.data.state});case"readFileData":var r,a,c=e.data.data.filePath;return(0,i.jsx)(C,{toolDataKind:e.toolDataKind,summary:e.summary,label:"Open file",onClick:function(){e.openPane((0,h.getPaneForFile)(c))}});case"setupObjectStorageData":return(0,i.jsx)(C,{toolDataKind:e.toolDataKind,summary:e.summary,label:"Open Object Storage",onClick:function(){e.openPane({type:"objectStorage"})}});case"createPostgresqlDatabaseData":return(0,i.jsx)(C,{toolDataKind:e.toolDataKind,summary:e.summary,label:"View Database",onClick:function(){e.openPane({type:"neon"})}});case"mcpToolData":if((0,g.isFigmaMCPTool)(null==(a=e.data.data)?void 0:a.serverName))return(0,i.jsx)(k,(0,n._)((0,t._)({},e),{icon:(0,i.jsx)(_.default,{color:v.tokens.foregroundDefault})}));return(0,i.jsx)(k,(0,t._)({},e));default:return(0,i.jsx)(k,(0,t._)({},e))}}),k=(0,a.memo)(function(e){var t="imageGenerationData"===e.toolDataKind||"generateMediaData"===e.toolDataKind,n=(0,r._)((0,a.useState)(t),2),o=n[0],s=n[1],l=e.id,u=e.sessionId,c=e.toolDataKind,d=(0,a.useCallback)(function(){s(function(e){return!e}),o||(0,m.trackAgentAnalyticsEvent)({action:"event_item_expanded",eventId:l,sessionId:u,toolDataKind:c})},[u,l,c,o]);return(0,i.jsxs)(b.View,{gap:6,children:[(0,i.jsxs)(y.Interactive,{variant:"nofill",px:4,tag:"button",row:!0,gap:6,align:"center",justify:"space-between",onClick:d,clsx:[T.default.expandableButton,T.default.toolUse],children:[(0,i.jsx)(j,{toolDataKind:e.toolDataKind,summary:e.summary,icon:e.icon}),(0,i.jsx)(S.default,{color:v.tokens.foregroundDimmer,rotate:180*!!o,clsx:T.default.chevron})]}),o?(0,i.jsx)(p.ProgressRenderer,{data:e.data,openPane:e.openPane}):null]})});function C(e){return(0,i.jsxs)(y.Interactive,{variant:"nofill",px:4,clsx:[T.default.button,T.default.toolUse],tag:"button",row:!0,gap:6,align:"center",justify:"space-between",onClick:e.onClick,children:[(0,i.jsx)(j,{toolDataKind:e.toolDataKind,summary:e.summary,icon:e.icon}),(0,i.jsxs)(b.View,{row:!0,gap:6,align:"center",children:[(0,i.jsx)(x.Text,{variant:"small",color:"dimmer",clsx:T.default.label,children:e.label}),(0,i.jsx)(w.default,{clsx:T.default.openIcon})]})]})}function E(e){return(0,i.jsx)(b.View,{px:4,row:!0,gap:6,align:"center",justify:"space-between",clsx:T.default.toolUse,children:(0,i.jsx)(j,{toolDataKind:e.toolDataKind,summary:e.summary,icon:e.icon})})}function A(e){return(0,i.jsx)(b.View,{px:4,row:!0,gap:6,align:"center",justify:"space-between",clsx:T.default.toolUse,children:(0,i.jsxs)(b.View,{row:!0,align:"center",gap:6,grow:!0,shrink:!0,children:[(0,i.jsx)(d.ToolNameIcon,{toolName:e.toolName}),(0,i.jsx)(b.View,{align:"start",grow:!0,shrink:!0,children:(0,i.jsx)(f.Summary,{summary:e.summary,color:"dimmer"})})]})})}e.s(["OpenableToolUse",()=>C,"StaticToolUse",()=>E,"ToolUse",()=>D])},166876,e=>{"use strict";var t=e.i(188507),n=[t.TaskStatus.TASK_STATUS_PENDING,t.TaskStatus.TASK_STATUS_IN_PROGRESS];function r(e){var t=e.tasks;return!!t&&0!==t.length&&t.every(function(e){return e.updated&&n.includes(e.status)})}function i(e){return e.agentMode===t.AgentMode.AGENT_MODE_DISCUSSION}function a(e){return e.tasks.filter(function(e){return e.updated}).filter(function(e){return e.status===t.TaskStatus.TASK_STATUS_COMPLETED})}function o(e){return e.length>0&&e.every(function(e){return e.status===t.TaskStatus.TASK_STATUS_COMPLETED})}function s(e){return e.summary&&""!==e.summary?e.summary:e.content}function l(e){return!!e.extraDetails||!!e.content&&!!e.summary&&e.content!==e.summary}e.s(["getCompletedTasks",()=>a,"getTaskSummary",()=>s,"hasExpandableTaskDetails",()=>l,"isFirstInstanceOfTaskList",()=>r,"isFullyCompletedTaskList",()=>o,"isPlanModeProposedTaskList",()=>i])},694665,e=>{e.v({button:"TaskListCost-module__fVnFyG__button",loadingPlaceholder:"TaskListCost-module__fVnFyG__loadingPlaceholder","skeleton-data-loading":"TaskListCost-module__fVnFyG__skeleton-data-loading"})},562123,359699,e=>{"use strict";var t=e.i(276385),n=e.i(389959),r=e.i(509908),i=e.i(136540),a=e.i(960178),o=e.i(751273),s=e.i(625484),l=e.i(651499),u=e.i(694665);function c(e){var c=e.cents,d=e.isExpanded,p=e.setIsExpanded,f=(0,n.useCallback)(function(){p(!d),d||(0,r.trackAgentAnalyticsEvent)({action:"viewed_task_list_usage_cost"})},[d,p]);return(0,t.jsxs)(s.View,{row:!0,align:"center",gap:8,children:[(0,t.jsx)(i.IconButton,{alt:"Agent Usage",onClick:f,clsx:u.default.button,children:(0,t.jsx)(l.default,{})}),d?null==c?(0,t.jsx)(o.Tooltip,{tooltip:"Loading usage informationâ€¦",children:(0,t.jsx)(s.View,{clsx:u.default.loadingPlaceholder})}):(0,t.jsxs)(a.Text,{color:"dimmer",variant:"small",children:["$",(c/100).toFixed(2)]}):null]})}e.s(["TaskListCost",()=>c],562123);var d=e.i(374106);e.i(877212);var p=e.i(924908);e.i(925218);var f=e.i(267103),m=e.i(641555);function g(e){var t,n=(0,p.useChatter)(),r=(0,f.useObservable)(n.sessions.agent.current),i=(0,m.useObservableMemo)(function(){return null==r?void 0:r.reduce(h,"global")},[r],{default:void 0}),a=null==i||null==(t=i.event)?void 0:t.created;return(0,m.useObservableMemo)(function(){return e&&a?null==r?void 0:r.agent.usage(a):void 0},[r,a,e])}var h={direction:"reverse",state:{event:void 0},reducer:function(e,t){if((0,d.isEventAgentToolDataKind)(e,"endOfRunSummaryData")||(0,d.isEventContentsKind)(e,"sessionCreationEventContents"))return t.event=e,!1}};e.s(["useAgentUsageSinceLastBillingEvent",()=>g],359699)},149448,e=>{"use strict";e.i(925218);var t=e.i(641555);function n(e){return(0,t.useObservableMemo)(function(){return null==e?void 0:e.reduce(r,1)},[e],{default:null})}var r={direction:"reverse",state:{id:null,event:null,state:null,senderType:null},reducer:function(e,t){return t.id=e.id,t.state=e.state,t.event=e,t.senderType=e.sender.type,!1}};e.s(["useLastEvent",()=>n])},197761,e=>{e.v({rotate:"TaskStatusIcon-module__rEH1rq__rotate",rotatingIcon:"TaskStatusIcon-module__rEH1rq__rotatingIcon"})},638274,e=>{e.v({chevron:"TaskListDrawer-module__WGwI0G__chevron",chevronIconContainer:"TaskListDrawer-module__WGwI0G__chevronIconContainer",drawerItems:"TaskListDrawer-module__WGwI0G__drawerItems",drawerSurface:"TaskListDrawer-module__WGwI0G__drawerSurface",drawerSurfaceProposed:"TaskListDrawer-module__WGwI0G__drawerSurfaceProposed",emptyIconContainer:"TaskListDrawer-module__WGwI0G__emptyIconContainer",expandableTaskItem:"TaskListDrawer-module__WGwI0G__expandableTaskItem",expandedContent:"TaskListDrawer-module__WGwI0G__expandedContent",showMoreButton:"TaskListDrawer-module__WGwI0G__showMoreButton",statusIconContainer:"TaskListDrawer-module__WGwI0G__statusIconContainer",taskContent:"TaskListDrawer-module__WGwI0G__taskContent",titleContainer:"TaskListDrawer-module__WGwI0G__titleContainer",truncatedSection:"TaskListDrawer-module__WGwI0G__truncatedSection"})},976944,e=>{e.v({changesButton:"TaskList-module__XwSK2W__changesButton",chevron:"TaskList-module__XwSK2W__chevron",expandableButton:"TaskList-module__XwSK2W__expandableButton",expandedContainer:"TaskList-module__XwSK2W__expandedContainer"})},474429,e=>{e.v({agentAction:"EventRenderer-module__RTGgnG__agentAction",eventContainer:"EventRenderer-module__RTGgnG__eventContainer",userMessage:"EventRenderer-module__RTGgnG__userMessage"})},117328,690767,e=>{"use strict";e.s(["EventContainer",()=>ej,"EventRenderer",()=>eT],117328);var t=e.i(297083),n=e.i(878420),r=e.i(64386),i=e.i(886513),a=e.i(817556),o=e.i(276385),s=e.i(389959),l=e.i(992785);e.i(925218);var u=e.i(641555),c=e.i(569910),d=e.i(597865),p=e.i(418689),f=e.i(831147),m=e.i(287999),g=e.i(526962),h=e.i(316799),v=e.i(68612),y=e.i(191654),x=e.i(840732),b=e.i(314535),S=e.i(202975),_=e.i(774671),w=e.i(422145),T=e.i(66373),j=e.i(682872),D=e.i(489172),k=e.i(956002),C=e.i(71834),E=e.i(10537),A=e.i(225821),I=e.i(202872),R=e.i(530658),P=e.i(188507),M=e.i(250479),O=e.i(178815),N=e.i(509908),L=e.i(166876),B=e.i(346715),V=e.i(562123),U=e.i(359699),F=e.i(374106);e.i(877212);var H=e.i(924908),G=e.i(267103),z=e.i(149448),q=e.i(480028),W=e.i(751273),K=e.i(625484),$=e.i(616278),Y=e.i(167690),X=e.i(245225),Q=e.i(993134),J=e.i(281594),Z=e.i(197761);function ee(e){var t=e.status,n=e.oldStatus,r=e.tooltipContent;switch(t){case P.TaskStatus.TASK_STATUS_COMPLETED:if(n===P.TaskStatus.TASK_STATUS_COMPLETED_PENDING_REVIEW)return(0,o.jsx)(W.Tooltip,{tooltip:null!=r?r:"Task completed & reviewed",children:(0,o.jsx)(J.default,{color:q.tokens.foregroundDimmer,size:16})});return(0,o.jsx)(W.Tooltip,{tooltip:null!=r?r:"Task completed",children:(0,o.jsx)($.default,{color:q.tokens.foregroundDimmer,size:16})});case P.TaskStatus.TASK_STATUS_IN_PROGRESS:return(0,o.jsx)(W.Tooltip,{tooltip:null!=r?r:"Task in progress",children:(0,o.jsx)(K.View,{clsx:Z.default.rotatingIcon,align:"center",justify:"center",children:(0,o.jsx)(X.default,{color:q.tokens.foregroundDimmer,size:16})})});case P.TaskStatus.TASK_STATUS_COMPLETED_PENDING_REVIEW:return(0,o.jsx)(W.Tooltip,{tooltip:null!=r?r:"Task completed, pending review",children:(0,o.jsx)(Q.default,{color:q.tokens.foregroundDimmer,size:16})});case P.TaskStatus.TASK_STATUS_PENDING:default:return(0,o.jsx)(W.Tooltip,{tooltip:null!=r?r:"Task pending",children:(0,o.jsx)(Y.default,{color:q.tokens.foregroundDimmest,size:16})})}}var et=e.i(719976),en=e.i(929872),er=e.i(960178),ei=e.i(916271),ea=e.i(576073),eo=e.i(462783),es=e.i(638274);function el(e){var t=e.task,r=e.approvalStatus,i=(0,R._)((0,s.useState)(!1),2),a=i[0],l=i[1],u="proposed"!==r;return(0,o.jsxs)(K.View,{gap:2,children:[(0,o.jsxs)(K.View,{clsx:[es.default.taskItem,es.default.expandableTaskItem],row:!0,justify:"space-between",align:"center",gap:8,px:8,py:4,role:"button",children:[(0,o.jsx)(K.View,{grow:!0,shrink:!0,row:!0,align:"center",gap:4,onClick:function(){return l(!a)},children:(0,o.jsxs)(er.Text,{clsx:es.default.taskContent,color:ec(t.status,r),shrink:!0,children:[(0,L.getTaskSummary)(t)," ",(0,o.jsx)(ea.default,{rotate:180*!!a,clsx:es.default.chevron,color:q.tokens.foregroundDimmest})]})}),u?(0,o.jsx)(K.View,{clsx:es.default.statusIconContainer,p:4,align:"center",justify:"center",children:(0,o.jsx)(ee,(0,n._)({},t))}):null]}),a?(0,o.jsx)(K.View,{clsx:es.default.expandedContent,pr:16,pt:4,pl:24,pb:8,children:t.extraDetails?(0,o.jsx)(ei.default,{children:t.extraDetails}):(0,o.jsx)(er.Text,{color:"dimmer",children:t.content})}):null]})}function eu(e){var t=e.task,r=e.approvalStatus,i="proposed"!==r;return(0,o.jsxs)(K.View,{clsx:es.default.taskItem,row:!0,justify:"space-between",align:"center",gap:8,px:8,py:4,children:[(0,o.jsx)(K.View,{grow:!0,shrink:!0,children:(0,o.jsx)(er.Text,{clsx:es.default.taskContent,color:ec(t.status,r),children:(0,L.getTaskSummary)(t)})}),i?(0,o.jsx)(K.View,{clsx:es.default.statusIconContainer,p:4,align:"center",justify:"center",children:(0,o.jsx)(ee,(0,n._)({},t))}):null]})}function ec(e,t){return"proposed"===t?"default":e===P.TaskStatus.TASK_STATUS_COMPLETED||e===P.TaskStatus.TASK_STATUS_COMPLETED_PENDING_REVIEW?"dimmest":e===P.TaskStatus.TASK_STATUS_PENDING?"dimmer":"default"}function ed(e){var t=e.tasks,n=e.approvalStatus,r=e.areTaskDetailsExpandable,i=void 0!==r&&r;return(0,o.jsx)(o.Fragment,{children:t.map(function(e){return i&&(0,L.hasExpandableTaskDetails)(e)?(0,o.jsx)(el,{task:e,approvalStatus:n},e.id):(0,o.jsx)(eu,{task:e,approvalStatus:n},e.id)})})}function ep(e){var t=e.innerRef,r=e.approvalStatus,a=e.placement,l=e.isCollapsed,u=e.setIsCollapsed,c=e.areTaskDetailsExpandable,d=e.agentUsage,p=e.isCostInfoExpanded,f=e.setIsCostInfoExpanded,m=e.isCostInfoHidden,g=(0,i._)(e,["innerRef","approvalStatus","placement","isCollapsed","setIsCollapsed","areTaskDetailsExpandable","agentUsage","isCostInfoExpanded","setIsCostInfoExpanded","isCostInfoHidden"]),h=null!=a?a:"proposed"===r?"bottom":"top",v=g.tasks,y=(0,R._)((0,s.useState)(!1),2),x=y[0],b=y[1],S=(0,s.useRef)(null),_=v.filter(function(e){return e.status===P.TaskStatus.TASK_STATUS_COMPLETED||e.status===P.TaskStatus.TASK_STATUS_COMPLETED_PENDING_REVIEW}).length,w=(0,L.isFullyCompletedTaskList)(v),T=(0,s.useMemo)(function(){var e=[],t=[],n=[],r=[];return v.forEach(function(i){switch(i.status){case P.TaskStatus.TASK_STATUS_COMPLETED:e.push(i);break;case P.TaskStatus.TASK_STATUS_COMPLETED_PENDING_REVIEW:r.push(i);break;case P.TaskStatus.TASK_STATUS_IN_PROGRESS:t.push(i);break;case P.TaskStatus.TASK_STATUS_PENDING:default:n.push(i)}}),{completed:e,completedPendingReview:r,inProgress:t,pending:n}},[v]),j=!w&&T.completed.length>3,D=j&&!x?T.completed.length-3:0,k=j&&!x?T.completed.slice(D):T.completed,C=(0,s.useMemo)(function(){return T.inProgress[0]},[T.inProgress]),E=(0,s.useMemo)(function(){return"proposed"===r?"Proposed tasks":w?"Completed tasks":l&&C?(0,L.getTaskSummary)(C):"In progress tasks"},[r,l,C,w]);return(0,o.jsxs)(en.Surface,{elevated:!0,clsx:[es.default.drawerSurface,"proposed"===r?es.default.drawerSurfaceProposed:void 0],gap:4,grow:1,shrink:1,innerRef:t,children:[(0,o.jsxs)(K.View,{clsx:es.default.titleContainer,row:!0,gap:4,align:"center",justify:"space-between",py:8,pl:4,pr:12,onClick:function(){return u(function(e){return!e})},children:[(0,o.jsxs)(K.View,{row:!0,gap:8,align:"center",shrink:!0,children:[(0,o.jsx)(W.Tooltip,{tooltip:l?"Expand":"Collapse",children:(0,o.jsx)(K.View,{clsx:es.default.chevronIconContainer,align:"center",justify:"center",children:"bottom"===h?l?(0,o.jsx)(eo.default,{}):(0,o.jsx)(ea.default,{}):l?(0,o.jsx)(ea.default,{}):(0,o.jsx)(eo.default,{})})}),(0,o.jsx)(er.Text,{color:"dimmer",ref:S,shrink:!0,multiline:!1,showTooltipOnTruncate:!0,children:E})]}),"proposed"!==r?(0,o.jsxs)(K.View,{row:!0,gap:8,align:"center",children:[(0,o.jsxs)(er.Text,{color:"dimmer",variant:"small",children:[_," / ",v.length]}),C&&l?(0,o.jsx)(K.View,{pr:2,children:(0,o.jsx)(ee,(0,n._)({},C))}):null,void 0!==m&&m||l?null:(0,o.jsx)(V.TaskListCost,{cents:null==d?void 0:d.cents,isExpanded:p,setIsExpanded:f})]}):null]}),l?null:(0,o.jsxs)(K.View,{clsx:es.default.drawerItems,shrink:!0,px:2,pb:8,children:[j&&!x?(0,o.jsx)(K.View,{clsx:es.default.truncatedSection,children:(0,o.jsx)(K.View,{row:!0,justify:"center",align:"center",p:2,children:(0,o.jsx)(et.PillButton,{clsx:es.default.showMoreButton,onClick:function(){return b(!0)},text:"Show ".concat(D," more completed task").concat(1===D?"":"s")})})}):null,(0,o.jsx)(ed,{tasks:(0,B._)(k).concat((0,B._)(T.completedPendingReview),(0,B._)(T.inProgress),(0,B._)(T.pending)),approvalStatus:r,areTaskDetailsExpandable:void 0!==c&&c}),0===v.length?(0,o.jsxs)(K.View,{row:!0,px:2,align:"center",gap:4,children:[(0,o.jsx)(K.View,{clsx:es.default.emptyIconContainer}),(0,o.jsx)(er.Text,{color:"dimmest",children:"No tasks to show"})]}):null]})]})}function ef(e){var t,a,l,u=e.approvalStatus,c=(0,i._)(e,["approvalStatus"]),d="approved"===u,p=(0,R._)((0,s.useState)(null!=d?d:"approved"===u),2),f=p[0],m=p[1],g=(0,R._)((0,s.useState)(!1),2),h=g[0],v=g[1],y=(t=(0,H.useChatter)(),a=(0,G.useObservable)(t.sessions.agent.current),!!(null==(l=(0,z.useLastEvent)(a))?void 0:l.event)&&(0,F.isEventAgentToolDataKind)(l.event,"endOfRunSummaryData")),x=(0,U.useAgentUsageSinceLastBillingEvent)(!y&&h);return(0,o.jsx)(ep,(0,r._)((0,n._)({},c),{approvalStatus:u,isCollapsed:f,setIsCollapsed:m,isCostInfoExpanded:h,setIsCostInfoExpanded:v,agentUsage:x,isCostInfoHidden:y}))}e.s(["TaskListDrawer",()=>ef,"TaskListItems",()=>ed],690767);var em=e.i(907371),eg=e.i(718610),eh=e.i(976944);function ev(e){var t=e.isAwaitingTaskListApproval,n=(0,i._)(e,["isAwaitingTaskListApproval"]).eventState;return void 0!==t&&t?null:(0,o.jsx)(M.StaticToolUse,{toolDataKind:"taskListData",summary:n===P.EventState.IN_PROGRESS?"Creating task listâ€¦":"Created task list"})}function ey(e){var t=e.onOpenCommit,n=e.tasks,r=e.commitData,i=e.id,a=e.sessionId,l=(0,R._)((0,s.useState)(!1),2),u=l[0],c=l[1],d=(0,s.useCallback)(function(){c(function(e){return!e}),u||(0,N.trackAgentAnalyticsEvent)({action:"event_item_expanded",eventId:i,sessionId:a,toolDataKind:"taskListData"})},[i,a,u]),p=(0,s.useCallback)(function(e){e.stopPropagation(),(null==r?void 0:r.commitId)&&t(r.commitId)},[r,t]);return(0,o.jsxs)(K.View,{gap:6,pt:4,children:[(0,o.jsxs)(em.Interactive,{variant:"nofill",px:4,tag:"button",row:!0,gap:6,align:"center",justify:"space-between",onClick:d,clsx:eh.default.expandableButton,children:[(0,o.jsxs)(K.View,{row:!0,align:"center",gap:6,grow:!0,shrink:!0,children:[(0,o.jsx)(O.ToolDataIcon,{kind:"taskListData",color:q.tokens.foregroundDimmest}),(0,o.jsx)(er.Text,{color:"dimmer",children:"Completed tasks"})]}),(0,o.jsx)(ea.default,{color:q.tokens.foregroundDimmer,rotate:180*!!u,clsx:eh.default.chevron})]}),u?(0,o.jsxs)(en.Surface,{elevated:!0,clsx:eh.default.expandedContainer,p:2,children:[(0,o.jsx)(ed,{tasks:n,approvalStatus:"approved"}),(null==r?void 0:r.commitId)?(0,o.jsxs)(em.Interactive,{variant:"nofill",tag:"button",row:!0,gap:4,align:"center",px:8,py:4,onClick:p,clsx:eh.default.changesButton,children:[(0,o.jsx)(eg.default,{size:16,color:q.tokens.foregroundDimmer}),(0,o.jsx)(er.Text,{variant:"small",color:"dimmer",children:"Changes"})]}):null]}):null]})}function ex(e){var t=e.completedTasks,r=e.tasks,i=e.commitData,a=e.onOpenCommit;return(0,L.isFullyCompletedTaskList)(r)&&r.length>1?(0,o.jsx)(ey,(0,n._)({},e)):(0,o.jsx)(K.View,{gap:8,py:4,children:t.map(function(e){return i&&i.commitId?(0,o.jsx)(M.OpenableToolUse,{toolDataKind:"taskListData",icon:(0,o.jsx)(ee,(0,n._)({},e)),summary:(0,L.getTaskSummary)(e),label:"View changes",onClick:function(){a(i.commitId)}},e.id):(0,o.jsx)(M.StaticToolUse,{toolDataKind:"taskListData",icon:(0,o.jsx)(ee,(0,n._)({},e)),summary:(0,L.getTaskSummary)(e)},e.id)})})}var eb=e.i(798790),eS=e.i(484921);function e_(e){var t=e.created,n=e.agentConfig;return(0,o.jsx)(eb.UserMessageContainer,{created:t,agentConfig:n,children:(0,o.jsx)(eb.UserMessageSurface,{agentMode:P.AgentMode.AGENT_MODE_GENERAL,acknowledged:!0,children:(0,o.jsx)(er.Text,{children:eS.TASK_LIST_START_BUILDING_MESSAGE})})})}var ew=e.i(474429),eT=(0,s.memo)(function(e){var R=e.data,P=e.subagentRenderer,O=(0,i._)(e,["data","subagentRenderer"]),N=O.openPane,L=(0,u.useObservableMemo)(function(){return R.select(function(e){return e},l.default)},[R]),B=(0,s.useCallback)(function(e){return N({type:"git",data:{mode:{type:g.GitPaneModeType.COMMIT,hash:e}}})},[N]),V=(0,h.useLinkUnlinkSecrets)(O.secrets.replaceAllExternalSecrets),U=V.linkSecrets,F=V.unlinkSecrets,H=(0,m.useCheckpoints)(),G=H.renameCommit,z=H.findCommit,q=(0,d.default)(function(e){return(0,t._)(function(){return(0,a._)(this,function(t){switch(t.label){case 0:return[4,e.status()];case 1:return[2,t.sent()]}})})()},[]);if(!L)return(0,o.jsx)(K.View,{children:"No data found for event"});switch(L.type){case"planProposal":return(0,o.jsx)(ej,{children:(0,o.jsx)(j.PlanProposal,(0,n._)({},L))});case"userMessage":return(0,o.jsx)(ej,{clsx:ew.default.userMessage,children:(0,o.jsx)(eb.UserMessage,{message:L.message,attachments:L.uploadedFiles,acknowledged:L.acknowledged,created:L.created,readFile:O.readFile,targetedElement:L.targetedElement,openPane:O.openPane,agentConfig:L.agentConfig})});case"agentMessage":return(0,o.jsx)(ej,{children:(0,o.jsx)(v.AgentMessage,{eventId:L.id,state:L.state,message:L.message,requestedSecrets:L.requestedSecrets,requestedEnvVars:L.requestedEnvVars,waitingOnUser:L.waitingOnUser,sessionId:L.sessionId,openPane:O.openPane,secrets:O.secrets,sendAskUserForActionResponse:O.sendAskUserForActionResponse,linkSecrets:U,unlinkSecrets:F})});case"setupImport":return(0,o.jsx)(ej,{children:(0,o.jsx)(C.SetupImport,{sessionId:L.sessionId,importSource:L.importSource,state:L.state})});case"agentToolUse":return(0,o.jsx)(ej,{clsx:ew.default.agentAction,children:(0,o.jsx)(M.ToolUse,{toolName:L.toolName,toolDataKind:L.toolDataKind,summary:L.summary,data:L.data,sessionId:L.sessionId,id:L.id,openPane:O.openPane})});case"checkpoint":var W,$,Y,X=(null==q?void 0:q.error)===null&&q.commit===L.commitId,Q=!!((null==q?void 0:q.error)===null&&q.changes&&q.changes.length>0),J=z(L.commitId);return(0,o.jsx)(ej,{children:(0,o.jsx)(b.Checkpoint,{eventState:L.state,openPane:N,onOpenCommit:B,onSessionChange:O.onSessionChange,checkpoint:(0,r._)((0,n._)({},L),{title:null!=(W=null==J?void 0:J.customSubject)?W:L.title,isLatest:X,isDirty:Q,missingAgentState:null!=($=null==J?void 0:J.missingAgentState)&&$,beforeReplCreation:null!=(Y=null==J?void 0:J.beforeReplCreation)&&Y}),onRenameTitle:G})});case"endOfRunSummary":return(0,o.jsx)(ej,{children:(0,o.jsx)(S.EndOfRunSummary,{summary:L})});case"suggestDeploy":return(0,o.jsx)(ej,{children:(0,o.jsx)(E.SuggestDeploy,{openPane:N})});case"suggestRollback":return(0,o.jsx)(ej,{children:(0,o.jsx)(I.SuggestRollback,{suggestRollbackReason:L.suggestRollbackReason,onShowCheckpoints:O.onShowCheckpoints})});case"suggestGeneralBuildMode":return(0,o.jsx)(ej,{children:(0,o.jsx)(A.SuggestGeneralBuildMode,{message:L.message,suggestedAutonomyLevel:L.suggestedAutonomyLevel,onSwitchToAutonomousBuildMode:O.onSwitchToAutonomousBuildMode})});case"askUserForAction":return(0,o.jsx)(ej,{children:(0,o.jsx)(x.AskUserForAction,(0,r._)((0,n._)({},L),{eventId:L.id,sendAskUserForActionResponse:O.sendAskUserForActionResponse,secrets:O.secrets,openPane:O.openPane,linkSecrets:U,unlinkSecrets:F}))});case"taskListApproval":return(0,o.jsx)(ej,{children:(0,o.jsx)(e_,{created:L.created,agentConfig:L.agentConfig})});case"revert":return(0,o.jsx)(ej,{children:(0,o.jsx)(k.RollbackStatus,{event:L,onSessionChange:O.onSessionChange})});case"taskList":if("itemsCompleted"===L.subType)return(0,o.jsx)(ej,{children:(0,o.jsx)(ex,(0,r._)((0,n._)({},L),{onOpenCommit:B,tasks:L.tasks,commitData:L.commitData,estimatedUsageCents:L.estimatedUsageCents}))});if("creation"===L.subType)return(0,o.jsx)(ej,{children:(0,o.jsx)(ev,(0,r._)((0,n._)({},L),{isAwaitingTaskListApproval:O.isAwaitingTaskListApproval}))});return null;case"error":return(0,o.jsx)(ej,{children:(0,o.jsx)(_.ErrorMessage,{message:L.message,shortMessage:L.shortMessage})});case"tipRecommendation":return O.tipData?(0,o.jsx)(ej,{children:(0,o.jsx)(y.TipRecommendation,{event:L,tipData:O.tipData,bonsaiTourTipInfo:O.bonsaiTourTipInfo,openPane:N,onNewSession:O.onNewSession})}):null;case"subagent":if(!P)return null;return(0,o.jsx)(ej,{children:(0,o.jsx)(P,(0,n._)({data:L},O))});case"planApproval":return(0,o.jsx)(ej,{children:(0,o.jsx)(T.PlanApproval,{created:L.created,initialBuildMode:L.initialBuildMode,agentConfig:L.agentConfig})});case"convertMockupToAppRequest":return(0,o.jsx)(p.ConvertMockupToAppRequest,{message:L.message,id:L.id,created:L.created});case"convertMockupToAppResponse":return(0,o.jsx)(f.ConvertMockupToAppResponse,{created:L.created,additionalComments:L.additionalComments});case"initialBuildPhaseApproval":return(0,o.jsx)(ej,{children:(0,o.jsx)(w.InitialBuildPhaseApproval,{created:L.created,agentConfig:L.agentConfig,initialBuildPhase:L.initialBuildPhase})});case"queryRequest":return(0,o.jsx)(ej,{children:(0,o.jsx)(D.QueryRequest,{id:L.id,created:L.created,queries:L.queries,responses:L.responses})});default:(0,c.default)(L)}});function ej(e){var t=e.children,a=(0,i._)(e,["children"]);return(0,o.jsx)(K.View,(0,r._)((0,n._)({clsx:ew.default.eventContainer},a),{children:t}))}},556972,e=>{"use strict";var t=e.i(530929),n=["years","months","weeks","days","hours","minutes","seconds"];function r(e,r){if(arguments.length<1)throw TypeError("1 argument required, but only ".concat(arguments.length," present"));var i=(null==r?void 0:r.format)||n,a=(null==r?void 0:r.locale)||t.default,o=(null==r?void 0:r.zero)||!1,s=(null==r?void 0:r.delimiter)||" ";return i.reduce(function(t,n){var r="x".concat(n.replace(/(^.)/,function(e){return e.toUpperCase()}));return"number"==typeof e[n]&&(o||e[n])?t.concat(a.formatDistance(r,e[n])):t},[]).join(s)}e.s(["formatDuration",()=>r],556972)},876216,e=>{"use strict";var t=e.i(556972),n=e.i(188507),r=e.i(629536),i=e.i(64868),a="Working";function o(e){var o,s,l,u,c=e.contents.contents;if((null==c?void 0:c.$kind)!=="agentTimelineEventContents")return a;var d=e.state===n.EventState.IN_PROGRESS,p=c.agentTimelineEventContents,f=p.toolName,m=p.toolData;if("screenshot_tool"===f)return"".concat(d?"Taking":"Took"," a screenshot");if("programming_language_install_tool"===f)return"".concat(d?"Configuring":"Configured"," programming environment");if("wait_for_background_jobs"===f)return c.agentTimelineEventContents.message||"Waiting for background jobs";switch(null==m?void 0:m.$kind){case"deployData":return"Suggested publishing project";case"createPostgresqlDatabaseData":return"Created PostgreSQL database";case"sqlExecutionData":return"".concat(d?"Executing":"Executed"," SQL query `").concat(m.sqlExecutionData.command,"`");case"fileEditData":return"".concat(d?"Editing":"Edited"," `").concat(m.fileEditData.filePath,"`");case"createFileData":return"".concat(d?"Creating":"Created"," `").concat(m.createFileData.filePath,"`");case"readFileData":return"".concat(d?"Reading":"Opened"," `").concat(m.readFileData.filePath,"`");case"readDirData":var g=m.readDirData.path;return"."===g&&(g="home"),"".concat(d?"Reading":"Opened"," `").concat(g,"` directory");case"shellExecutionData":return"".concat(d?"Executing":"Executed"," `").concat(m.shellExecutionData.command,"`");case"toolchainInstallData":return"".concat(d?"Adding":"Added"," support for ").concat(m.toolchainInstallData.modules.map(function(e){return"`".concat(e,"`")}).join(", "));case"packagerInstallData":var h=m.packagerInstallData.inputPackages;if(!d){if(0===h.length)return"Installed dependencies";return"Installed ".concat(h.map(function(e){return"`".concat(e,"`")}).join(", "))}if(0===h.length)return"Installing packages";return"Installing ".concat(h.map(function(e){return"`".concat(e,"`")}).join(", "));case"packagerUninstallData":var v=m.packagerUninstallData.inputPackages;return"Uninstalled ".concat(v.map(function(e){return"`".concat(e,"`")}).join(", "));case"systemDependencyInstallData":return"Installed ".concat(m.systemDependencyInstallData.deps.map(function(e){return"`".concat(e,"`")}).join(", "));case"systemDependencyUninstallData":return"Uninstalled ".concat(m.systemDependencyUninstallData.deps.join(", "));case"searchFileData":return"".concat(d?"Searching":"Searched",' "').concat(m.searchFileData.filePath,'" for "').concat(m.searchFileData.query,'"');case"searchFilesystemData":return"".concat(d?"Searching":"Searched",' for "').concat(m.searchFilesystemData.queryDescription,'"');case"screenshotData":return"".concat(d?"Taking":"Took"," a screenshot");case"agentPlanStepBegin":case"planProgressData":case"presentResultsToolData":case"deployConfigData":return null;case"workflowsStartToolData":return"Started `".concat(m.workflowsStartToolData.name,"`");case"workflowsRestartToolData":return"Restarted `".concat(m.workflowsRestartToolData.name,"`");case"workflowsStopToolData":return"Stopped `".concat(m.workflowsStopToolData.name,"`");case"workflowsSetRunConfigToolData":var y=m.workflowsSetRunConfigToolData,x=y.name,b=y.command;if(d||0===x.length||0===b.length)return"Configuring run";return"Configured `".concat(x,"` to run `").concat(b,"`");case"workflowsRemoveRunConfigToolData":return"Removed configuration for `".concat(m.workflowsRemoveRunConfigToolData.name,"`");case"blueprintsSetup":var S=[],_=!0,w=!1,T=void 0;try{for(var j,D=m.blueprintsSetup.blueprintData[Symbol.iterator]();!(_=(j=D.next()).done);_=!0){var k=j.value;""!==k.displayName.trim()&&S.push(k.displayName)}}catch(e){w=!0,T=e}finally{try{_||null==D.return||D.return()}finally{if(w)throw T}}if(0===S.length)return null;return"Integrating with ".concat(S.map(function(e){return"`".concat(e,"`")}).join(", "));case"webSearchData":var C=m.webSearchData,E=C.searchType,A=C.query,I=e.state===n.EventState.IN_PROGRESS;if(E===n.WebSearchType.WEB_SEARCH_TYPE_REPLIT_DOCUMENTATION)return I?"Searching Replit documentation":'Searched Replit documentation for "'.concat(A,'"');return I?"Searching the web":'Searched the web for "'.concat(A,'"');case"samplingEvent":var R=m.samplingEvent.trajectories.length;if(e.state===n.EventState.IN_PROGRESS)return"Exploring ".concat(R," potential solutions");return"Explored ".concat(R," potential solutions");case"webPageVisitData":return"Visited ".concat(m.webPageVisitData.url);case"imageGenerationData":if(d)return(null==(s=m.imageGenerationData.imageDescription)?void 0:s.trim())?"Generating an image of ".concat(m.imageGenerationData.imageDescription.toLowerCase(),"..."):"Generating image...";return(null==(o=m.imageGenerationData.imageDescription)?void 0:o.trim())?"Generated an image of ".concat(m.imageGenerationData.imageDescription.toLowerCase(),"."):"Generated image.";case"videoGenerationData":if(d)return(null==(u=m.videoGenerationData.videoDescription)?void 0:u.trim())?"Generating a video of ".concat(m.videoGenerationData.videoDescription.toLowerCase()):"Generating video";return(null==(l=m.videoGenerationData.videoDescription)?void 0:l.trim())?"Generated a video of ".concat(m.videoGenerationData.videoDescription.toLowerCase()):"Generated video";case"stockImageData":var P=m.stockImageData,M=P.numberOfImages,O=P.imageDescription;return"Found ".concat(M," stock image").concat(1===M?"":"s"," of ").concat(O.toLowerCase(),".");case"generateMediaData":var N=m.generateMediaData.media.length;if(d)return"Generating ".concat(N," image").concat(1===N?"":"s");return"Generated ".concat(N," image").concat(1===N?"":"s");case"waitingForBackgroundJobsData":return"Waiting for background jobs to complete";case"memoryCompressionData":if(e.state===n.EventState.IN_PROGRESS)return"Optimizing ".concat(r.AGENT_NAME," memory");return"Optimized ".concat(r.AGENT_NAME," memory");case"thoughts":var L=m.thoughts.summary;if(e.state===n.EventState.IN_PROGRESS)return L||"Thinking";var B=Math.max(1,Math.round(m.thoughts.totalTimeTakenMs/1e3)),V=null!=L?L:"Finished thinking";if(B>3){var U=(0,t.formatDuration)({seconds:B});return"".concat(V," (").concat(U,")")}return V;case"setupObjectStorageData":return"Created a new Object Storage bucket";case"setupModelfarmData":return"Integrated with Replit AI Integrations";case"viewLogsData":if(m.viewLogsData.webviewConsole&&m.viewLogsData.workflows)return"Checked console and system logs";if(m.viewLogsData.webviewConsole)return"Checked console logs";if(m.viewLogsData.workflows)return"Checked system logs";else if(m.viewLogsData.lsp)return"Checked code issues";else return"Checked logs";case"viewSpecialFiles":if(m.viewSpecialFiles.fileType===n.SpecialFileType.LOG_FILE)return"Reading log files in detail";return"Analyzing files";case"designGuidelinesData":return"".concat(d?"Generating":"Generated"," design guidelines");case"searchIntegrationsData":return"".concat(d?"Searching":"Searched"," Replit's integrations for \"").concat(m.searchIntegrationsData.query,'"');case"viewIntegrationData":return"".concat(d?"Viewing":"Viewed"," ").concat(m.viewIntegrationData.name," integration");case"mcpToolData":return(0,i.getMCPToolSummaryFromData)(m.mcpToolData,d);case"messagedBackgroundAgent":return d?"Running background task":"Ran background task";case"subagentReportResultData":return d?"Generating response":"Generated response";case"reportAgentIssueData":return d?"Sending issue report to Replit Team":"Sent issue report to Replit Team";default:return d?a:null}}e.s(["DEFAULT_IN_PROGRESS_EVENT_SUMMARY",()=>a,"getToolUseSummary",()=>o])},708874,e=>{e.v({"pulse-blurple":"FeedStatusRow-module__jLbR_G__pulse-blurple",root:"FeedStatusRow-module__jLbR_G__root",statusTextContainer:"FeedStatusRow-module__jLbR_G__statusTextContainer"})},134663,713295,e=>{"use strict";var t=e.i(530658),n=e.i(276385),r=e.i(389959),i=e.i(876216),a=e.i(389503),o=e.i(188507);e.i(925218);var s=e.i(641555);function l(e){return(0,s.useObservableMemo)(function(){return null==e?void 0:e.reduce(u,1)},[e],{default:{summary:null,startedAt:null,toolDataKind:null}})}var u={direction:"reverse",state:{summary:null,startedAt:null,toolDataKind:null},reducer:function(e,t){t.summary=e.state===o.EventState.IN_PROGRESS?(0,i.getToolUseSummary)(e):null;var n,r,a=e.contents.contents,s=(null==a?void 0:a.$kind)==="agentTimelineEventContents"&&null!=(r=null==(n=a.agentTimelineEventContents.toolData)?void 0:n.$kind)?r:null;return t.startedAt="thoughts"===s?e.created:null,t.toolDataKind=t.summary&&"messageData"!==s?s:null,!1}};e.s(["useInProgressEventData",()=>l],713295);var c=e.i(625484),d=e.i(179140),p=e.i(708874);function f(e){var t=l(e.session).summary;return(0,n.jsx)(m,{inProgressEventSummary:null!=t?t:i.DEFAULT_IN_PROGRESS_EVENT_SUMMARY})}function m(e){var t=e.inProgressEventSummary,r="".concat(t.replace(/`/g,""),"â€¦");return(0,n.jsx)(c.View,{px:4,pt:4,pb:6,row:!0,align:"center",justify:"space-between",clsx:p.default.root,children:(0,n.jsxs)(c.View,{row:!0,gap:6,align:"center",px:2,shrink:!0,grow:!0,clsx:p.default.statusTextContainer,children:[(0,n.jsx)(d.default,{size:16}),(0,n.jsx)(g,{text:r})]})})}function g(e){var i=e.text,o=(0,t._)((0,r.useState)(""),2),s=o[0],l=o[1];(0,r.useEffect)(function(){if(!i.endsWith("â€¦"))return void l("");var e=0,t=!0,n=setInterval(function(){t?++e>=3&&(t=!1):--e<=0&&(t=!0),l(".".repeat(e))},200);return function(){return clearInterval(n)}},[i]);var u=i.endsWith("â€¦")?i.slice(0,-1)+s:i;return(0,n.jsx)(a.Summary,{summary:u,variant:"small"})}e.s(["AnimatedStatusText",()=>g,"FeedStatusRow",()=>f,"FeedStatusRowUI",()=>m],134663)}]);

//# debugId=0e3e4704-b447-41d9-f507-f8dd435e1b60
//# sourceMappingURL=cab58484da02dcf5.js.map