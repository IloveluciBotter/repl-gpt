;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="92f72a1b-2daa-3433-4619-898c59be395f")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,553368,e=>{"use strict";var t=e.i(878420),n=e.i(64386),i=e.i(530658),a=e.i(346715),o=e.i(276385),r=e.i(389959),l=e.i(888136),s=e.i(750936),c=e.i(807566),u=e.i(550600),d=e.i(162914),m=e.i(98816),p=e.i(46654),g=e.i(228108),h=e.i(480028),f=e.i(446530),_=e.i(754873),x=e.i(613355),v=e.i(960178),S=e.i(625484),b=e.i(940745),A=e.i(793579),k=S.SpecializedView.input,T=S.SpecializedView.div,j=S.SpecializedView.li,y=(0,f.cssRecord)({main:[_.interactive.filled,x.rcss.p(8),x.rcss.pr(32),{color:h.tokens.foregroundDefault,border:"0 none",outline:"0 none",fontSize:h.tokens.fontSizeDefault,lineHeight:"16px",display:"block",width:"100%","::placeholder":{color:h.tokens.foregroundDimmer},":not([disabled])":{cursor:"text"}}],comboBox:[{position:"relative"}],comboBoxWrapper:[{position:"relative"}],selectedItemIcon:[x.rcss.center,{position:"absolute",top:0,left:0,height:"100%"}],searchIconWrapper:[x.rcss.center,x.rcss.px(8),{position:"absolute",top:0,right:0,height:"100%"}],comboBox2:[{position:"relative"}],loadingIconWrapper:[x.rcss.center,x.rcss.py(32)],noReplsFoundWrapper:[x.rcss.center,x.rcss.py(32)]});function I(e){var h,f=e.id,_=e.className,I=e.disabled,w=e.filter,C=e.manualSelect,E=e.excludePrivate,M=e.excludeMultiplayer,P=e.onSelect,L=e.selectedIconOverride,D=e.showComboBox,B=(0,i._)((0,r.useState)([]),2),N=B[0],R=B[1],O=(0,i._)((0,r.useState)(""),2),U=O[0],F=O[1],W=(0,r.useRef)(null),V=w?N.filter(w):N,G=function(e){return e?e.owner?"".concat(e.owner.username,"/").concat(e.title):e.title:""},H=(0,l.useCombobox)({items:V,initialHighlightedIndex:C?-1:0,itemToString:G});(0,r.useEffect)(function(){return F(H.inputValue)},[H.inputValue]);var K=(0,d.default)(U,100),z=(0,s.useReplSelectorQuery)({variables:{search:K,excludePrivate:E,excludeMultiplayer:M},onCompleted:function(e){if(!e.currentUser)throw Error("Expected currentUser");e.currentUser.replSearch?R(e.currentUser.replSearch.reduce(function(e,t){return t?(0,a._)(e).concat([t]):e},[])):R([])}}).loading,q=(0,m.default)(P);(0,r.useEffect)(function(){var e;H.selectedItem&&(null==(e=W.current)||e.blur(),q.current(H.selectedItem))},[H.selectedItem,q]);var Q=(null==(h=H.selectedItem)?void 0:h.iconUrl)&&H.inputValue?(0,o.jsx)(S.View,{css:y.selectedItemIcon,px:8,children:L||(0,o.jsx)(g.default,{alt:H.selectedItem.title,iconUrl:H.selectedItem.iconUrl,size:16})}):null;return(0,o.jsxs)(S.View,{css:y.comboBoxWrapper,className:_,children:[(0,o.jsxs)(T,(0,n._)((0,t._)({},H.getComboboxProps()),{css:y.comboBox,children:[Q,(0,o.jsx)(k,(0,t._)({css:y.main,style:Q&&x.rcss.pl(32)},H.getInputProps({ref:W,id:f,placeholder:"Search for an App",onFocus:void 0===D||D?function(e){H.selectedItem&&(e.preventDefault(),e.currentTarget.select(),F("")),H.openMenu()}:void 0}))),(0,o.jsx)(S.View,{css:y.searchIconWrapper,children:(0,o.jsx)(A.default,{})})]})),(0,o.jsx)(T,(0,n._)((0,t._)({},H.getMenuProps()),{css:y.comboBox2,children:H.isOpen&&!I?(0,o.jsxs)(c.default,{children:[z?(0,o.jsx)(j,{css:y.loadingIconWrapper,children:(0,o.jsx)(b.default,{})}):null,V.length||z?null:(0,o.jsx)(j,{css:y.noReplsFoundWrapper,children:(0,o.jsxs)(v.Text,{color:"dimmer",variant:"small",multiline:!1,children:["No ",N.length>0?"more ":null,"Apps found"]})}),V.map(function(e,i){return(0,o.jsx)(j,(0,n._)((0,t._)({},H.getItemProps({item:e,index:i})),{children:(0,o.jsx)(u.default,{taller:!0,filter:U,title:G(e),subtitle:(0,p.ago)(e.timeUpdated),selected:H.selectedItem===e,highlighted:H.highlightedIndex===i,icon:e.iconUrl?(0,o.jsx)(g.default,{iconUrl:e.iconUrl,alt:e.title,size:16}):void 0})}),e.id)})]}):null}))]})}e.s(["default",()=>I])},97992,(e,t,n)=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},133723,(e,t,n)=>{"use strict";var i=e.r(97992);function a(){}function o(){}o.resetWarningCache=a,t.exports=function(){function e(e,t,n,a,o,r){if(r!==i){var l=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return n.PropTypes=n,n}},203537,(e,t,n)=>{t.exports=e.r(133723)()},162914,e=>{"use strict";var t=e.i(530658),n=e.i(389959);function i(e,i){var a=(0,t._)((0,n.useState)(e),2),o=a[0],r=a[1];return(0,n.useEffect)(function(){var t=setTimeout(function(){r(e)},i);return function(){clearTimeout(t)}},[e,i]),o}e.s(["default",()=>i])},25195,e=>{"use strict";function t(){return(t=Object.assign.bind()).apply(this,arguments)}e.s(["default",()=>t])},898740,e=>{"use strict";function t(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}e.s(["default",()=>t])},438059,e=>{"use strict";function t(e,n){return(t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,n)}function n(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,t(e,n)}e.s(["default",()=>n],438059)},37068,e=>{"use strict";var t=e.i(530658),n=e.i(276385),i=e.i(389959),a=e.i(314531),o=e.i(480028),r=function(e){return function(t){return(0,n.jsx)("span",{style:e,children:t})}},l=function(e,t){var a=e.map(function(e,t){return(0,n.jsx)(i.Fragment,{children:e},t)});return(0,n.jsx)("span",{style:t,children:a})},s=function(e){var t=e.source,i=e.match,s=e.matchStyle,c=void 0===s?{fontWeight:500,color:o.tokens.foregroundDefault}:s,u=e.style,d=void 0===u?{color:o.tokens.foregroundDimmest}:u,m=r(c),p=a.default.filter(i,[t],{matchRenderer:m}).map(function(e){return e.elements});return p.length?l(p[0],d):(0,n.jsx)(n.Fragment,{children:t})},c=function(e){var i=e.source,a=e.match;if(!i.toLowerCase().includes(a.toLowerCase()))return(0,n.jsx)(n.Fragment,{children:i});var o=(0,t._)(i.split(RegExp("".concat(a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"(.+)?"),"i")),2),r=o[0],l=o[1];return(0,n.jsx)(n.Fragment,{children:[r,(0,n.jsx)("b",{children:i.substr(r.length,a.length)},a),l]})},u=function(e){var t=e.source,n=e.matches,i=e.matchStyle,a=void 0===i?{fontWeight:500,color:o.tokens.foregroundDefault}:i,s=e.style,c=void 0===s?{color:o.tokens.foregroundDimmest,maxWidth:"100%",wordWrap:"break-word"}:s,u=0,d=[],m=r(a);return n.forEach(function(e){var n=e.column,i=e.length;d.push(t.slice(u,n)),d.push(m(t.slice(n,n+i))),u=n+i}),d.push(t.slice(u)),l(d,c)};e.s(["ExactMatchSubString",()=>c,"FuzzyMatchSubString",()=>s,"HighlightMatches",()=>u])},807566,550600,e=>{"use strict";var t=e.i(878420),n=e.i(276385),i=e.i(389959),a=e.i(480028),o=e.i(613355),r=e.i(929872);function l(e){var t=e.children,i=e.className,l=e.innerRef;return(0,n.jsx)(r.Surface,{className:i,tag:"ul",elevated:!0,innerRef:l,css:[{zIndex:999,maxHeight:300,position:"absolute",overflowY:"auto",width:"100%",left:0,top:a.tokens.space8,border:"1px solid",borderColor:a.tokens.outlineDimmest,listStyle:"none"},o.rcss.borderRadius(8)],children:t})}var s=(0,i.forwardRef)(function(e,i){return(0,n.jsx)(l,(0,t._)({innerRef:i},e))});s.displayName="Menu",e.s(["default",0,s],807566);var c=e.i(967629),u=e.i(754873),d=e.i(960178),m=e.i(625484),p=e.i(37068),g=e.i(606867),h=function(e){var t=e.highlighted,n=e.selected,i=e.taller;return(0,c.css)([o.rcss.rowWithGap(8),o.rcss.align.center,o.rcss.p(8),o.rcss.borderRadius(4),{cursor:"pointer",height:i?"auto":a.tokens.space32,border:"0 !important"},t&&!n&&[u.interactive.nofill,{background:a.tokens.interactiveBackground}],n&&{backgroundColor:a.tokens.accentPrimaryDimmer,color:a.tokens.foregroundDefault,":hover":{backgroundColor:a.tokens.accentPrimaryDefault}},t&&n&&[o.rcss.backgroundColor.accentPrimaryDefault]])};function f(e){var t=e.filter?(0,n.jsx)(p.ExactMatchSubString,{source:e.title,match:e.filter}):e.title;return e.subtitle?(0,n.jsxs)(m.View,{css:h(e),children:[e.icon?(0,n.jsx)(g.IconProvider,{size:e.subtitle?24:16,children:e.icon}):null,(0,n.jsxs)(m.View,{gap:4,grow:!0,shrink:!0,children:[(0,n.jsx)(d.Text,{height:"singleLine",multiline:!1,children:t}),(0,n.jsx)(d.Text,{multiline:!1,height:"singleLine",variant:"small",color:e.selected?void 0:"dimmer",children:e.subtitle})]})]}):(0,n.jsxs)(m.View,{css:h(e),children:[e.icon?(0,n.jsx)(g.IconProvider,{size:e.subtitle?24:16,children:e.icon}):null,(0,n.jsx)(d.Text,{css:{flexShrink:1},multiline:!1,children:t})]})}e.s(["default",()=>f],550600)},46654,e=>{"use strict";var t=e.i(546284),n={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6},i={millisecond:"ms",month:"mo"};function a(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e4,r=Math.round,l=" ago",s=function(e,n){if(a){var o=i[n]||n.substring(0,1);return"".concat(e).concat(o)}return"".concat((0,t.default)(n,e,!0)).concat(l)},c=Date.now()-new Date(e).getTime();if(c<0&&(c*=-1,l=" from now"),o&&c<=o)return"now";var u="millisecond";for(var d in n){if(r(c)<n[d])return s(r(c/n[u]),u);u=d}return s(r(c/n.year),"year")}e.s(["ago",()=>a])},750936,e=>{"use strict";var t=e.i(878420),n=e.i(569384),i=e.i(973245),a=e.i(304277);function o(){var e=(0,n._)(["\n  fragment ReplSelectorRepl on Repl {\n    id\n    title\n    timeUpdated\n    url\n    slug\n    owner {\n      ... on User {\n        id\n        username\n        image\n        fullName\n      }\n      ... on Team {\n        id\n        username\n        image\n      }\n    }\n    iconUrl\n    templateLabel\n    publishedAs\n  }\n"]);return o=function(){return e},e}function r(){var e=(0,n._)(["\n  query ReplSelector(\n    $search: String!\n    $excludePrivate: Boolean\n    $excludeMultiplayer: Boolean\n  ) {\n    currentUser {\n      id\n      replSearch(\n        search: $search\n        excludePrivate: $excludePrivate\n        excludeMultiplayer: $excludeMultiplayer\n      ) {\n        id\n        ...ReplSelectorRepl\n      }\n    }\n  }\n  ","\n"]);return r=function(){return e},e}e.i(566901);var l={},s=(0,i.gql)(o()),c=(0,i.gql)(r(),s);function u(e){var n=(0,t._)({},l,e);return a.useQuery(c,n)}e.s(["ReplSelectorReplFragmentDoc",()=>s,"useReplSelectorQuery",()=>u])},562544,e=>{e.v({active:"AgentInputTabs-module__wnhPIW__active",backgroundNoneImportant:"AgentInputTabs-module__wnhPIW__backgroundNoneImportant",tab:"AgentInputTabs-module__wnhPIW__tab",tabContent:"AgentInputTabs-module__wnhPIW__tabContent",tabCurveLeft:"AgentInputTabs-module__wnhPIW__tabCurveLeft",tabCurveRight:"AgentInputTabs-module__wnhPIW__tabCurveRight",tabPill:"AgentInputTabs-module__wnhPIW__tabPill",tabShape:"AgentInputTabs-module__wnhPIW__tabShape",tabShapeLeft:"AgentInputTabs-module__wnhPIW__tabShapeLeft",tabShapeRight:"AgentInputTabs-module__wnhPIW__tabShapeRight",tabsContainer:"AgentInputTabs-module__wnhPIW__tabsContainer"})},367439,e=>{e.v({agentStackPlatformSelector:"AgentsAndAutomationsOptions-module__MtWCkW__agentStackPlatformSelector",comingSoonPill:"AgentsAndAutomationsOptions-module__MtWCkW__comingSoonPill",grid:"AgentsAndAutomationsOptions-module__MtWCkW__grid",gridItem:"AgentsAndAutomationsOptions-module__MtWCkW__gridItem",gridItemIcon:"AgentsAndAutomationsOptions-module__MtWCkW__gridItemIcon",gridItemRoot:"AgentsAndAutomationsOptions-module__MtWCkW__gridItemRoot",gridItemRootDisabled:"AgentsAndAutomationsOptions-module__MtWCkW__gridItemRootDisabled",gridItemRootSelected:"AgentsAndAutomationsOptions-module__MtWCkW__gridItemRootSelected",gridItemSurface:"AgentsAndAutomationsOptions-module__MtWCkW__gridItemSurface",itemContent:"AgentsAndAutomationsOptions-module__MtWCkW__itemContent",itemIcon:"AgentsAndAutomationsOptions-module__MtWCkW__itemIcon",itemRoot:"AgentsAndAutomationsOptions-module__MtWCkW__itemRoot",itemRootDisabled:"AgentsAndAutomationsOptions-module__MtWCkW__itemRootDisabled",itemRootSelected:"AgentsAndAutomationsOptions-module__MtWCkW__itemRootSelected",itemSelectionIndicator:"AgentsAndAutomationsOptions-module__MtWCkW__itemSelectionIndicator",label:"AgentsAndAutomationsOptions-module__MtWCkW__label",listBox:"AgentsAndAutomationsOptions-module__MtWCkW__listBox",noValue:"AgentsAndAutomationsOptions-module__MtWCkW__noValue",popoverSurface:"AgentsAndAutomationsOptions-module__MtWCkW__popoverSurface",popoverSurfaceContainer:"AgentsAndAutomationsOptions-module__MtWCkW__popoverSurfaceContainer",popoverTitle:"AgentsAndAutomationsOptions-module__MtWCkW__popoverTitle",root:"AgentsAndAutomationsOptions-module__MtWCkW__root","select-button-initial-animation":"AgentsAndAutomationsOptions-module__MtWCkW__select-button-initial-animation","select-button-initial-animation-flash-background":"AgentsAndAutomationsOptions-module__MtWCkW__select-button-initial-animation-flash-background",selectButton:"AgentsAndAutomationsOptions-module__MtWCkW__selectButton","smooth-slide-down-and-fade-in":"AgentsAndAutomationsOptions-module__MtWCkW__smooth-slide-down-and-fade-in"})},323396,e=>{e.v({content:"ChatModeTour-module__jHAQzG__content",popoverWrapper:"ChatModeTour-module__jHAQzG__popoverWrapper"})},967757,e=>{e.v({colorSwatch:"CustomAppThemeSelect2-module__3x6NKa__colorSwatch"})},732308,e=>{e.v({agentInputContainer:"AgentInputComponents-module__oLCofq__agentInputContainer",agentInputSurface:"AgentInputComponents-module__oLCofq__agentInputSurface",innerContainer:"AgentInputComponents-module__oLCofq__innerContainer",maxAutonomyLevelIndicator:"AgentInputComponents-module__oLCofq__maxAutonomyLevelIndicator",primaryButtonGroup:"AgentInputComponents-module__oLCofq__primaryButtonGroup",settingsDropdownButtonContainer:"AgentInputComponents-module__oLCofq__settingsDropdownButtonContainer",wrapper:"AgentInputComponents-module__oLCofq__wrapper"})},586707,e=>{e.v({bold:"CustomAppThemeSelect-module__FEwxGW__bold",colorSwatch:"CustomAppThemeSelect-module__FEwxGW__colorSwatch",item:"CustomAppThemeSelect-module__FEwxGW__item",itemContent:"CustomAppThemeSelect-module__FEwxGW__itemContent",itemSelected:"CustomAppThemeSelect-module__FEwxGW__itemSelected",label:"CustomAppThemeSelect-module__FEwxGW__label",listBox:"CustomAppThemeSelect-module__FEwxGW__listBox",listBoxSection:"CustomAppThemeSelect-module__FEwxGW__listBoxSection",popoverSurface:"CustomAppThemeSelect-module__FEwxGW__popoverSurface",root:"CustomAppThemeSelect-module__FEwxGW__root",separator:"CustomAppThemeSelect-module__FEwxGW__separator",themeName:"CustomAppThemeSelect-module__FEwxGW__themeName"})},322427,e=>{e.v({additionalSelectorsAndSupportingText:"AgentInput-module___Bo6IG__additionalSelectorsAndSupportingText",attachments:"AgentInput-module___Bo6IG__attachments",codemirror:"AgentInput-module___Bo6IG__codemirror","fade-in":"AgentInput-module___Bo6IG__fade-in",overlayBackground:"AgentInput-module___Bo6IG__overlayBackground",overlayContent:"AgentInput-module___Bo6IG__overlayContent"})},3931,565835,e=>{"use strict";var t,n=e.i(297083),i=e.i(721281),a=e.i(878420),o=e.i(64386),r=e.i(530658),l=e.i(346715),s=e.i(817556),c=e.i(276385),u=e.i(389959),d=e.i(781230),m=e.i(436418),p=e.i(188507),g=e.i(629536),h=e.i(753950),f=e.i(179302),_=e.i(700170),x=new _.ReactCompartment(function(e){var t=e.onFirstEdit;return h.StateField.define({create:function(){return!1},update:function(e,n){return e||!n.docChanged||void 0===n.annotation(h.Transaction.userEvent)?e:(null==t||t(),!0)}})}),v=e.i(656381),S=e.i(825423),b=e.i(257378),A=e.i(703613),k=e.i(564416),T=e.i(542101),j=e.i(808032);e.i(925218);var y=e.i(267103),I=e.i(641555),w=e.i(886513),C=e.i(546833),E=e.i(650587),M=e.i(441329),P=e.i(858248),L=e.i(709485),D=e.i(123850),B=e.i(173703),N=e.i(696770),R=e.i(624782),O=e.i(625484),U=e.i(562e3),F=e.i(634669),W=e.i(562544),V=O.SpecializedView.button,G=(0,D.createCssVarTokens)(["tab-bg","tab-border"]).styleTokens,H=[{key:"Auto",title:"App",icon:(0,c.jsx)(F.default,{})},{key:"Design",title:"Design",icon:(0,c.jsx)(U.default,{}),isBeta:!0}];function K(e){var t,n=e.onTabSelected,o=e.selectedTab,r=void 0===o?"Auto":o,l=(0,N.useShadesFlag)(),s=(0,E.useIsMobile)(),u=function(e){(0,P.track)(L.events.START_WITH_AI_USED,(0,a._)({action:"agent_input_tab_clicked",tab_key:e.key},s?{isBonsai:!0}:{})),null==n||n(e.key)};return(0,c.jsx)("div",{clsx:W.default.tabsContainer,style:l?void 0:(t={},(0,i._)(t,"--active-tab-border-color","var(--tab-active-border)"),(0,i._)(t,"--active-tab-text-color","var(--tab-active-text)"),t),children:H.map(function(e){var t=l||"Auto"!==e.key?e.title:"Build";return(0,c.jsx)(z,{isActive:e.key===r,title:t,icon:e.icon,isBeta:e.isBeta&&!l,onClick:function(){return u(e)},"data-agent-input-tab":e.key},e.key)})})}function z(e){var t,n=e.isActive,r=e.title,s=e.icon,u=e.isBeta,d=e.onClick,m=(0,w._)(e,["isActive","title","icon","isBeta","onClick"]),p=(0,M.useIsInBonsaiWebview)(),g=(0,N.useShadesFlag)(),h=(0,B.useShadesSurface)({colorShade:"textInput",background:!0,elevate:!n&&"1x",border:{side:["top","left","right"],strength:n?"strong":"regular"}});return(0,c.jsxs)(V,(0,o._)((0,a._)({clsx:[W.default.tab,(t={},(0,i._)(t,W.default.active,n),(0,i._)(t,W.default.backgroundNoneImportant,!g),(0,i._)(t,C.classes.secondaryText,n&&g),(0,i._)(t,C.classes.tertiaryText,!n&&g),(0,i._)(t,C.classes.hoverable1,!n&&g),(0,i._)(t,C.classes.pressable2,!n&&g),t)].concat((0,l._)(g?h:[])),onClick:d,onMouseDown:function(e){p&&e.preventDefault()},row:!0},m),{children:[g?(0,c.jsx)(Q,{}):(0,c.jsxs)("div",{className:W.default.tabShape,children:[(0,c.jsx)("div",{className:W.default.tabShapeLeft,children:(0,c.jsx)(q,{})}),(0,c.jsx)("div",{className:W.default.tabShapeRight,children:(0,c.jsx)(q,{})})]}),(0,c.jsxs)(O.View,{row:!0,className:W.default.tabContent,children:[s?(0,c.jsx)(O.View,{className:W.default.tabIcon,children:s}):null,(0,c.jsx)("span",{className:W.default.tabTitle,children:r}),u?(0,c.jsx)(R.Pill,{text:"Beta",colorway:"primary",compact:!0,className:W.default.tabPill}):null]})]}))}var q=function(e){var t=e.width,n=void 0===t?820:t,i=e.height,a=void 0===i?34:i,o=e.cornerRadius,r=void 0===o?6:o,l=e.bottomHeight,s=e.horizontalExtension,u=void 0===s?2:s,d=e.fill,m=void 0===d?G["tab-bg"]:d,p=e.stroke,g=void 0===p?G["tab-border"]:p,h=e.strokeWidth,f=void 0===h?1:h,_=e.className,x=e.style,v=Math.min(r,Math.min(n,a)/2),S=void 0===l?1:l,b=null!=u?u:0===r?0:r/2,A=["M ".concat(-b," ").concat(a),"L ".concat(-b," ").concat(a-S),"L 0 ".concat(a-S),"A ".concat(v," ").concat(v," 0 0 0 ").concat(v," ").concat(a-S-v),"L ".concat(v," ").concat(v),"A ".concat(v," ").concat(v," 0 0 1 ").concat(2*v," 0"),"L ".concat(n-2*v," 0"),"A ".concat(v," ").concat(v," 0 0 1 ").concat(n-v," ").concat(v),"L ".concat(n-v," ").concat(a-S-v),"A ".concat(v," ").concat(v," 0 0 0 ").concat(n," ").concat(a-S),"L ".concat(n+b," ").concat(a-S),"L ".concat(n+b," ").concat(a),"Z"].join(" "),k=["M ".concat(-b," ").concat(a-S),"L 0 ".concat(a-S),"A ".concat(v," ").concat(v," 0 0 0 ").concat(v," ").concat(a-S-v),"L ".concat(v," ").concat(v),"A ".concat(v," ").concat(v," 0 0 1 ").concat(2*v," 0"),"L ".concat(n-2*v," 0"),"A ".concat(v," ").concat(v," 0 0 1 ").concat(n-v," ").concat(v),"L ".concat(n-v," ").concat(a-S-v),"A ".concat(v," ").concat(v," 0 0 0 ").concat(n," ").concat(a-S),"L ".concat(n+b," ").concat(a-S)].join(" "),T=f/2,j=n+2*b+f,y=a+f;return(0,c.jsxs)("svg",{width:j,height:y,viewBox:"".concat(-b-T," ").concat(-T," ").concat(j," ").concat(y),className:_,style:x,xmlns:"http://www.w3.org/2000/svg",children:[(0,c.jsx)("path",{d:A,fill:m,stroke:"none"}),(0,c.jsx)("path",{d:k,fill:"none",stroke:g,strokeWidth:f})]})},Q=function(){return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)($,{}),(0,c.jsx)($,{right:!0})]})},$=function(e){var t=e.right;return(0,c.jsxs)("svg",{width:"9",height:"9",viewBox:"0 0 9 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",clsx:t?W.default.tabCurveRight:W.default.tabCurveLeft,children:[(0,c.jsxs)("g",{clipPath:"url(#clip0_303_23)",children:[(0,c.jsx)("rect",{width:"9",height:"9"}),(0,c.jsx)("path",{fill:"var(--tab-background-color)",d:"M9 9H-2V8H0C4.41828 8 8 4.41828 8 0V-2H9V9ZM0 -10C4.41828 -10 8 -6.41828 8 -2H-2V8L-2.41211 7.98926C-6.63886 7.77477 -10 4.28006 -10 0V-2C-10 -6.41828 -6.41828 -10 -2 -10H0Z"}),(0,c.jsx)("rect",{x:"-9.5",y:"-9.5",width:"17",height:"17",rx:"7.5",stroke:"var(--tab-border-color)"})]}),(0,c.jsx)("defs",{children:(0,c.jsx)("clipPath",{id:"clip0_303_23",children:(0,c.jsx)("rect",{width:"9",height:"9"})})})]})},Y=e.i(255615),X=e.i(654647),J=e.i(413309),Z=e.i(178339),ee=e.i(58261),et=e.i(993796),en=e.i(854760),ei=e.i(480028),ea=e.i(818503),eo=e.i(929872),er=e.i(960178),el=e.i(751273),es=e.i(211397),ec=e.i(33914),eu=e.i(616278),ed=e.i(644826),em=e.i(993134),ep=e.i(77601),eg=e.i(367321),eh=e.i(357399),ef=e.i(367439);O.SpecializedView.button;var e_={slack:{title:"Slack message",description:"Build a Slack bot or app integration",Icon:ep.default},telegram:{title:"Telegram message",description:"Create a Telegram bot for messaging",Icon:eg.default},timeBased:{title:"Time based",description:"Schedule workflows and automated tasks",Icon:em.default}};function ex(e){var t,n,i,a=(0,E.useIsMobile)(),o=e.selectedOption,l=e.onSelectionChange,s=e.isDisabled,d=e.agentStackPillRef,m=e.onUnselectAgentStack,p=(t=(0,et.useFlag)({controlName:"flag-new-connector-triggers",default:!1}),n=(0,ee.useConnectorContext)().connectorConfigs,(0,u.useMemo)(function(){var e=[];return Object.entries(e_).forEach(function(t){var n=(0,r._)(t,2),i=n[0],a=n[1];e.push({key:i,title:a.title,description:a.description,icon:(0,c.jsx)(a.Icon,{size:16})})}),t&&n.forEach(function(t){if(t.webhookEvents&&t.webhookEvents.length>0&&t.connectorName){var n,i,a;e.push({key:"connector-".concat(t.id),title:"".concat(null!=(n=t.displayName)?n:"Connector"," event"),description:"Triggered by ".concat(null!=(i=t.displayName)?i:"connector"," events"),icon:t.iconPath?(0,c.jsx)(es.default,{src:t.iconPath,alt:null!=(a=t.displayName)?a:"",width:16,height:16}):(0,c.jsx)(ec.default,{size:16}),webhookEvents:t.webhookEvents})}}),e},[t,n])),g=void 0===o,h=(0,u.useRef)(!1),f=(0,u.useMemo)(function(){if(o)return p.find(function(e){return e.key===o})},[o,p]);return(0,c.jsx)(O.View,{className:ef.default.root,grow:!0,shrink:!0,children:(0,c.jsx)(el.Tooltip,{tooltip:"A platform must be selected first",placement:"top",isDisabled:!!o,children:(0,c.jsxs)(Z.Select,{selectedKey:o,isDisabled:s,onOpenChange:function(e){e?(0,P.track)(L.events.START_WITH_AI_USED,{action:"agent_platform_type_select_opened"}):e||o||h.current||m(),h.current=!1},isOpen:!!g||void 0,onSelectionChange:function(e){h.current=!0,l(e)},children:[(0,c.jsx)(ea.Label,{className:ef.default.label,children:"Integration"}),(0,c.jsxs)(Y.Button,{className:"".concat(ef.default.selectButton," ").concat(o?"":ef.default.noValue),children:[(null==f?void 0:f.icon)?f.icon:(0,c.jsx)(eh.default,{}),(0,c.jsxs)(O.View,{row:!0,gap:2,pl:2,align:"center",children:[(0,c.jsx)("span",{children:null!=(i=null==f?void 0:f.title)?i:"Select platform"}),(0,c.jsx)(ed.default,{size:12})]})]}),(0,c.jsx)(J.Popover,{placement:a?"top":void 0,containerPadding:12,className:ef.default.popoverSurfaceContainer,triggerRef:g?d:void 0,children:(0,c.jsxs)(eo.Surface,{className:ef.default.popoverSurface,p:4,elevated:!0,children:[(0,c.jsx)(O.View,{pb:6,pl:4,children:(0,c.jsx)(er.Text,{variant:"small",color:"dimmer",className:ef.default.popoverTitle,children:"Select a trigger event"})}),(0,c.jsx)(X.ListBox,{"aria-label":"App type",selectionMode:"single",className:ef.default.listBox,children:p.map(function(e){return(0,c.jsx)(X.ListBoxItem,{id:e.key,"aria-label":e.title,children:(0,c.jsx)(ev,{title:e.title,isSelected:o===e.key,icon:e.icon,webhookEvents:e.webhookEvents})},e.key)})})]})})]})})})}function ev(e){var t=e.title,n=e.isSelected,i=e.icon,a=e.isDisabled,o=e.webhookEvents,r=o&&o.length>0,l=r?(0,c.jsxs)(O.View,{gap:4,children:[(0,c.jsxs)(O.View,{gap:2,children:[(0,c.jsx)(er.Text,{variant:"small",children:(0,c.jsx)("strong",{children:"Available Events"})}),(0,c.jsx)(er.Text,{variant:"small",children:"Ask Agent what to trigger on"})]}),(0,c.jsx)(O.View,{as:"ul",style:{margin:0,paddingLeft:"20px"},children:o.map(function(e,t){return(0,c.jsx)("li",{children:(0,c.jsx)(er.Text,{variant:"small",children:(0,en.formatOpenIntWebhookEventName)(e.name)})},t)})})]}):null,s=(0,c.jsxs)(O.View,{className:"".concat(ef.default.itemRoot," ").concat(n?ef.default.itemRootSelected:""," ").concat(a?ef.default.itemRootDisabled:""),children:[(0,c.jsxs)(O.View,{row:!0,grow:!0,align:"center",gap:4,className:ef.default.itemContent,children:[(0,c.jsx)(O.View,{className:ef.default.itemIcon,children:i}),(0,c.jsx)(O.View,{justify:"center",children:(0,c.jsx)(O.View,{row:!0,gap:4,align:"center",children:(0,c.jsx)(er.Text,{children:t})})})]}),(0,c.jsxs)(O.View,{className:ef.default.itemSelectionIndicator,children:[a?(0,c.jsx)(eS,{}):null,n?(0,c.jsx)(eu.default,{color:ei.tokens.greenStrongest}):null]})]});return r&&l?(0,c.jsx)(el.Tooltip,{tooltip:l,placement:"right",children:s}):s}var eS=function(){return(0,c.jsx)(R.Pill,{text:"Coming soon",compact:!0,variant:"muted",colorway:"primary",className:ef.default.comingSoonPill})},eb=e.i(631936),eA=e.i(600572),ek=e.i(917095),eT=e.i(363605),ej=e.i(968783),ey=e.i(98816),eI=e.i(796674),ew=e.i(222342),eC=e.i(343252);e.i(653863);var eE=e.i(973519),eM=e.i(971465),eP=e.i(956515),eL=e.i(266645),eD=e.i(628576),eB=e.i(200260);e.i(877212);var eN=e.i(924908);function eR(e){var t=e.view,i=e.selectedTheme,a=(0,eN.useYapper)();return{onUndo:function(e){null==t||t.dispatch({changes:{from:0,to:t.state.doc.length,insert:e}})},onEnhance:function(){return(0,n._)(function(){var e,n,o,r;return(0,s._)(this,function(l){switch(l.label){case 0:return n=null!=(e=null==t?void 0:t.state.doc.toString())?e:"",[4,a.enhancePrompt(n,[],[],i)];case 1:if(!(o=l.sent()).ok||!(r=o.payload))throw Error("Failed to generate prompt");return null==t||t.dispatch({changes:{from:0,to:t.state.doc.length,insert:r.trimStart().trimEnd()}}),(0,P.track)(L.events.AI_ENHANCE_PROMPT_USED,{action:"prompt_enhanced",originalPrompt:n,generatedPrompt:r}),[2,n]}})})()}}}var eO=e.i(136540),eU=e.i(770257),eF=e.i(940745),eW=e.i(245150);function eV(e){var t=eR({view:e.view,selectedTheme:e.selectedTheme}),n=t.onUndo,i=t.onEnhance,a=(0,r._)((0,u.useState)(null),2),o=a[0],l=a[1],s=(0,r._)((0,u.useState)({type:"waiting"}),2),d=s[0],m=s[1];return(0,c.jsxs)(O.View,{row:!0,gap:4,align:"center",children:[null!==o?(0,c.jsx)(eO.IconButton,{alt:"Undo",disabled:e.loading,style:e.isDisabled?eG:void 0,onClick:function(){l(null),n(o)},children:(0,c.jsx)(eW.default,{})}):null,(0,c.jsx)(eO.IconButton,{alt:"Improve prompt",tooltipContents:"Improve prompt",disabled:e.isDisabled||"waiting"!==d.type,style:e.isDisabled?eG:void 0,onClick:function(){m({type:"generating"}),i().then(function(e){return l(e)}).finally(function(){return m({type:"waiting"})})},children:(0,c.jsx)(function(){return"generating"===d.type?(0,c.jsx)(eF.default,{}):(0,c.jsx)(eU.default,{})},{})})]})}var eG={cursor:"default",opacity:.5},eH=e.i(624714),eK=e.i(709696),ez=e.i(777110),eq=e.i(61511),eQ=e.i(245218),e$=e.i(64256),eY=e.i(509908),eX=e.i(66830),eJ=e.i(900433),eZ=e.i(559099),e0=e.i(179549),e1=e.i(32109),e2=/hsl\(\s*([+-]?\d*\.?\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*\)/g,e6=function(e){return e?e.replace(e2,"hsl($1 $2 $3)"):e},e3=e.i(368964),e8=e.i(596139),e5=function(e){var t=e.children,n=e.className,i=e.durationMS,o=e.style,l=(0,u.useRef)(null),s=(0,u.useRef)(null),d=(0,r._)((0,u.useState)("auto"),2),m=d[0],p=d[1],g=(0,r._)((0,u.useState)(!1),2),h=g[0],f=g[1];(0,u.useEffect)(function(){var e=l.current;if(e){if(!h){p(e.scrollHeight),f(!0);return}var t=new ResizeObserver(function(e){var t=!0,n=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var r=a.value.target.scrollHeight;p(r)}}catch(e){n=!0,i=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}});return t.observe(e),function(){t.disconnect()}}},[h]),(0,u.useEffect)(function(){h&&l.current&&p(l.current.scrollHeight)},[t,h]);var _=(0,a._)({transition:"height ".concat(void 0===i?300:i,"ms"),height:"auto"===m?"auto":"".concat(m,"px")},void 0===o?{}:o);return(0,c.jsx)("div",{ref:s,style:_,children:(0,c.jsx)("div",{ref:l,className:void 0===n?"":n,children:t})})},e4=e.i(952521),e7=e.i(112942),e9=e.i(354093),te=e.i(131614),tt=e.i(573605);e.i(85742),e.i(12034),p.AgentMode.AGENT_MODE_GENERAL,p.AgentMode.AGENT_MODE_INITIAL_PLANNING;var tn=e.i(569384),ti=e.i(973245),ta=e.i(304277);function to(){var e=(0,tn._)(["\n  query ChatModeTourCurrentUser {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return to=function(){return e},e}e.i(566901);var tr={},tl=(0,ti.gql)(to()),ts=e.i(706510),tc=e.i(140487),tu=e.i(604963),td=e.i(690821),tm=e.i(323396),tp=new Date("2025-12-18T08:00:00Z");function tg(e){var t=e.onDismiss,n=e.targetRef,i=(0,u.useMemo)(function(){return function(){return(0,c.jsxs)(O.View,{gap:12,clsx:tm.default.content,children:[(0,c.jsxs)(O.View,{gap:4,children:[(0,c.jsx)(er.Text,{variant:"subheadDefault",children:"Agent now builds right away"}),(0,c.jsx)(er.Text,{children:"If you'd like to plan your work before building, switch to Plan here."})]}),(0,c.jsx)(tc.Button,{variant:"outlined",text:"Got it",iconRight:(0,c.jsx)(eu.default,{}),onClick:t,stretch:!0})]})}},[t]);return n.current?(0,c.jsx)(tu.RawPopover,{triggerRef:n,isOpen:!0,isNonModal:!0,placement:"bottom start",offset:12,arrow:!0,clsx:tm.default.popoverWrapper,children:(0,c.jsx)(td.Tour,{content:i,onDismiss:t,hideCloseButton:!0,hideNavigation:!0,compact:!0,colorway:!1,hideBorder:!0})}):null}var th=e.i(482853),tf=e.i(931849),t_=e.i(625251),tx=e.i(788106),tv=e.i(990313),tS=e.i(341126),tb=e.i(808188),tA=e.i(119274),tk=e.i(468964),tT=e.i(576073),tj=e.i(243914),ty=e.i(360877),tI=e.i(467185),tw=e.i(967757),tC=function(e){return tk.themePresetKeys.includes(e)};function tE(e){var t=e.selectedThemeId,n=e.selectedStack,i=e.onChange,a=e.appThemes,o=e.isDisabled,l=(0,E.useIsMobile)(),s=(0,tf.useRouter)(),d=(0,r._)((0,u.useState)(t),2),m=d[0],p=d[1],g=(0,ej.useCurrentUserStoredOrgContext)(),h=g.orgId,f=g.orgSlug,_=(0,tv.useAppThemeTracking)().trackAppTheme,x=h&&f?"".concat((0,tS.orgLinks)({slug:f}).home.href,"/theme-editor"):"/theme-editor";(0,u.useEffect)(function(){p(t)},[t]);var v=null!=a?a:[];if(!ek.STACKS_THAT_SUPPORT_APP_THEMES.has(n))return null;var S=v.find(function(e){return e.id===m});return(0,c.jsxs)(tA.PopupMenu,{"aria-label":"App theme",trigger:(0,c.jsx)(tc.Button,{disabled:o,iconLeft:(0,c.jsx)(ty.default,{}),text:m?tC(m)?tk.default[m].name:S?S.name:"Auto":"Auto",iconRight:(0,c.jsx)(tT.default,{}),variant:"nofill"}),selectionMode:"single",selectedKeys:new Set(m?[m]:["auto"]),onSelectionChange:function(e){if("all"!==e){var t=Array.from(e)[0];if(t){var n=String(t);if("manage"===n){_(L.events.APP_THEME,{action:"manage_button_pressed",source:"start_with_ai_selector"}),s.push(x);return}if("auto"===String(t)){p(void 0),null==i||i(void 0,void 0);return}if(tC(n)){p(n);var a=tk.default[n],o=(null==a?void 0:a.schema)?JSON.stringify(a.schema):void 0;_(L.events.APP_THEME,{action:"start_with_ai_selected",themeType:"preset",themeId:n,themeName:null==a?void 0:a.name}),null==i||i(String(t),o);return}p(n);var r=v.find(function(e){return e.id===n}),l=(null==r?void 0:r.schema)?JSON.stringify(r.schema):void 0;_(L.events.APP_THEME,{action:"start_with_ai_selected",themeType:"custom"}),null==i||i(n,l)}}},onOpenChange:function(e){e&&(0,P.track)(L.events.START_WITH_AI_USED,{action:"app_theme_select_opened"})},children:[(0,c.jsxs)(t_.MenuSection,{children:[(0,c.jsx)(tA.BaseMenuItem,{id:"auto",textValue:"Auto theme",children:(0,c.jsx)(tM,{title:"Auto theme",isSelected:void 0===m})},"auto"),v.map(function(e){return(0,c.jsx)(tA.BaseMenuItem,{id:e.id,textValue:e.name,children:(0,c.jsx)(tM,{title:e.name,isSelected:m===e.id,schema:e.schema})},e.id)})]}),Object.keys(tk.default).length>0&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(tA.Separator,{}),(0,c.jsxs)(t_.MenuSection,{children:[!l&&(0,c.jsx)(tA.MenuHeader,{text:"Examples"}),Object.entries(tk.default).map(function(e){var t=(0,r._)(e,2),n=t[0],i=t[1];return(0,c.jsx)(tA.BaseMenuItem,{id:n,textValue:i.name,children:(0,c.jsx)(tM,{title:i.name,isSelected:m===n,schema:i.schema})},n)})]})]}),!l&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(tA.Separator,{}),(0,c.jsx)(t_.MenuSection,{children:(0,c.jsx)(tA.BaseMenuItem,{id:"manage",textValue:"Manage themes",children:(0,c.jsxs)(O.View,{row:!0,align:"center",gap:8,children:[(0,c.jsx)(tj.default,{}),(0,c.jsx)(er.Text,{children:"Manage themes"})]})},"manage")})]})]})}var tM=function(e){var t=e.title,n=e.isSelected,i=e.schema;return(0,c.jsxs)(O.View,{row:!0,gap:8,align:"center",grow:!0,shrink:!0,children:[n?(0,c.jsx)(eu.default,{color:ei.tokens.greenStrongest}):null,(0,c.jsx)(er.Text,{children:t}),i?(0,c.jsx)(O.View,{pl:8,row:!0,grow:!0,shrink:!0,justify:"end",children:["foreground","background","accent","primary"].map(function(e){var t,n;return tx.default.valid(null==i||null==(t=i[":root"])?void 0:t[e])?(0,c.jsx)(tb.ColorSwatch,{color:(0,tx.default)(null!=(n=i[":root"][e])?n:"").hex(),size:20,clsx:tw.default.colorSwatch},e):null})}):(0,c.jsx)(tI.default,{})]})},tP=e.i(739521),tL=e.i(553368);function tD(e){var t=e.isOpen,n=e.onRequestClose,i=e.onConfirm;return(0,c.jsx)(tP.Modal,{isOpen:t,onRequestClose:n,centered:!0,children:(0,c.jsxs)(O.View,{gap:24,children:[(0,c.jsx)(er.Header,{variant:"headerDefault",level:2,children:"Custom Template"}),(0,c.jsxs)(O.View,{gap:16,children:[(0,c.jsx)(er.Text,{children:"Select an app to use as a custom stack. This app will be used as the starting point for the agent."}),(0,c.jsxs)(O.View,{gap:4,children:[(0,c.jsx)(ea.Label,{children:"Template"}),(0,c.jsx)(tL.default,{onSelect:function(e){i(e),n()},disabled:!1,excludePrivate:!1,selectedIconOverride:(0,c.jsx)(c.Fragment,{})})]})]})]})})}var tB=e.i(908320),tN=e.i(576255),tR=e.i(228108),tO=e.i(947108),tU=e.i(606867);function tF(e){var t,n=e.selectedStack,i=e.stacks,r=e.customStackRepl,l=e.onSelectionChange,s=e.disabled,u=e.label,d=void 0===u?"App type":u,m=e.isPaidUser,p=void 0===m||m,g=e.showCoreBadge,h=e.onOpenCustomTemplateModal,f=i.orgTemplates,_=i.staffOnly,x=i.free,v=i.paid,S=v.find(function(e){return"Custom Stack"===e.key}),b=v.filter(function(e){return"Custom Stack"!==e.key}),A=(null==n?void 0:n.key)==="Stack from existing App"&&r?(0,o._)((0,a._)({},n),{label:r.title}):n,k=null==A?void 0:A.icon,T=(0,c.jsx)(tc.Button,{text:null!=(t=null==A?void 0:A.label)?t:d,iconLeft:(null==n?void 0:n.key)==="Stack from existing App"&&(null==r?void 0:r.iconUrl)?(0,c.jsx)(tR.default,{iconUrl:r.iconUrl,alt:r.title,size:16}):(null==n?void 0:n.key)==="OrgStackTemplate"&&(null==n?void 0:n.iconUrl)?(0,c.jsx)(tR.default,{iconUrl:n.iconUrl,alt:n.label,size:16}):k?(0,c.jsx)(k,{}):void 0,iconRight:(0,c.jsxs)(O.View,{row:!0,gap:4,align:"center",children:[void 0!==g&&g?(0,c.jsx)(tO.default,{plan:e8.corePlanName,size:"small"}):null,(0,c.jsx)(tT.default,{})]}),disabled:s,variant:"nofill"}),j=(null==n?void 0:n.key)==="OrgStackTemplate"?n.replId:null==n?void 0:n.key;return(0,c.jsxs)(tA.PopupMenu,{"aria-label":d,trigger:T,selectionMode:"single",selectedKeys:j?new Set([j]):void 0,onSelectionChange:l,children:[x.map(function(e){return(0,c.jsx)(tW,{item:e,isSelected:e.key===j},e.key)}),!p&&b.length>0?(0,c.jsxs)(c.Fragment,{children:[x.length>0?(0,c.jsx)(tA.Separator,{}):null,(0,c.jsxs)(t_.MenuSection,{children:[(0,c.jsx)(tA.MenuHeader,{text:"App types available with",trailingElement:(0,c.jsx)(tO.default,{plan:e8.corePlanName,size:"small"})}),b.map(function(e){return(0,c.jsx)(tW,{item:e,isSelected:e.key===j},e.key)})]}),(0,c.jsx)(tA.Separator,{})]}):null,!p&&S?(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(tW,{item:S,isSelected:S.key===j},S.key)}):null,p&&b.length>0?(0,c.jsx)(c.Fragment,{children:b.map(function(e){return(0,c.jsx)(tW,{item:e,isSelected:e.key===j},e.key)})}):null,p&&S?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(tA.Separator,{}),(0,c.jsx)(tW,{item:S,isSelected:S.key===j},S.key)]}):null,f.length>0?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(tA.Separator,{}),(0,c.jsxs)(t_.MenuSection,{children:[(0,c.jsx)(tA.MenuHeader,{text:"Templates"}),f.map(function(e){var t;return(0,c.jsx)(tW,{item:e,isSelected:e.replId===j,isOrgTemplate:!0},"template"+(null!=(t=e.replId)?t:e.key))})]})]}):null,_.length>0?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(tA.Separator,{}),_.map(function(e){return(0,c.jsx)(tW,{item:e,isSelected:e.key===j&&!r},e.key)})]}):null,r&&"Stack from existing App"===j?(0,c.jsx)(tV,{repl:r,isSelected:!0,onOpenModal:h}):null]})}function tW(e){var t,n=e.item,i=e.isSelected,a=e.isOrgTemplate,o=void 0!==a&&a,r=n.icon,l=null;n.isBeta?l=(0,c.jsx)(R.Pill,{text:"Beta",colorway:"primary",compact:!0}):n.isStaffOnly&&(l=(0,c.jsx)(R.Pill,{text:"Staff",colorway:"orange",compact:!0}));var s=o&&null!=(t=n.replId)?t:n.key;return(0,c.jsx)(tA.BaseMenuItem,{textValue:n.label,id:s,children:(0,c.jsxs)(O.View,{row:!0,gap:8,align:"center",grow:!0,shrink:!0,children:[o&&n.iconUrl?(0,c.jsx)(tR.default,{iconUrl:n.iconUrl,alt:n.label,size:16}):(0,c.jsx)(tU.IconProvider,{size:16,children:(0,c.jsx)(r,{})}),(0,c.jsx)(tA.MenuItemLabel,{children:n.label}),l,i?(0,c.jsx)(tU.IconProvider,{size:16,children:(0,c.jsx)(eu.default,{})}):null]})})}function tV(e){var t=e.repl,n=e.isSelected,i=e.onOpenModal;return(0,c.jsx)(tA.BaseMenuItem,{textValue:t.title,id:t.id,onAction:i,children:(0,c.jsxs)(O.View,{row:!0,gap:8,align:"center",grow:!0,shrink:!0,children:[t.iconUrl?(0,c.jsx)(tR.default,{iconUrl:t.iconUrl,alt:t.title,size:16}):(0,c.jsx)(tU.IconProvider,{size:16,children:(0,c.jsx)(tI.default,{})}),(0,c.jsx)(tA.MenuItemLabel,{children:t.title}),n?(0,c.jsx)(tU.IconProvider,{size:16,children:(0,c.jsx)(eu.default,{})}):null]})})}tI.default,g.AGENT_NAME,(0,a._)({icon:null},g.stackBlueprintDetails[p.StackBlueprint.STACK_BLUEPRINT_FULLSTACK_JS]),(0,a._)({icon:null},g.stackBlueprintDetails[p.StackBlueprint.STACK_BLUEPRINT_STREAMLIT]),(0,a._)({icon:null},g.stackBlueprintDetails[p.StackBlueprint.STACK_BLUEPRINT_GAMESTACK_JS]),(0,a._)({icon:null},g.stackBlueprintDetails[p.StackBlueprint.STACK_BLUEPRINT_AGENT]),(0,a._)({icon:null},g.stackBlueprintDetails[p.StackBlueprint.STACK_BLUEPRINT_EXPO]);var tG=e.i(197649),tH=e.i(703774),tK=e.i(396776),tz=e.i(257811),tq=e.i(369948),tQ=e.i(713081),t$=e.i(658886),tY=e.i(283660),tX=e.i(709263),tJ=e.i(363201),tZ=e.i(732308),t0=(0,ei.cvarsFrom)("AgentInputComponents.module.css",["--agent-input-border-color"]);let t1=function(e){var t=e.className,n=e.children,i=(0,N.useShadesFlag)();return(0,c.jsx)(O.View,{gap:8,className:(0,tG.default)(t,{"flag-rui-shades":i}),children:n})},t2=function(e){var t,n=e.children,a=e.isDraggedOver,o=(0,N.useShadesFlag)(),r=(0,tH.useTheme)().isDarkColorScheme;return o?(0,c.jsx)(B.ShadesSurface,{clsx:tZ.default.agentInputSurface,"data-is-dragged-over":a,colorShade:"textInput",elevate:!1,background:!1,children:n}):(0,c.jsx)(eo.Surface,{clsx:tZ.default.agentInputContainer,style:(t={},(0,i._)(t,t0.agentInputBorderColor,a?ei.tokens.accentPrimaryDefault:ei.tokens.outlineDimmer),(0,i._)(t,"backgroundColor","transparent"),t),background:r?void 0:"root",children:n})},t6=function(e){var t=e.children,n=(0,N.useShadesFlag)(),i=(0,B.useShadesSurface)({elevate:!1,border:"strong",background:!0});return(0,c.jsx)(e5,{clsx:[tZ.default.innerContainer,n?i:void 0],durationMS:100,children:(0,c.jsx)(O.View,{grow:!0,shrink:!0,gap:4,children:(0,c.jsx)(O.View,{clsx:tZ.default.wrapper,children:t})})})},t3=function(e){var t=e.children,n=e.view,i=(0,N.useShadesFlag)();return(0,c.jsx)(O.View,{row:!0,gap:4,clsx:tZ.default.primaryButtonGroup,px:2*!i,pb:2*!i,justify:"space-between",align:"end",onClick:function(e){e.target===e.currentTarget&&(null==n||n.focus())},children:t})},t8=function(e){var t=e.children;return(0,c.jsx)(O.View,{row:!0,gap:2,align:"center",children:t})},t5=function(e){var t,n,i,a,o,l,s,d=e.availableStacks,m=e.onUpsell,p=(0,ts.useStackSelectState)(),g=p.show,h=p.stackKey,f=p.updateStack,_=p.setOrgTemplateStack,x=p.requiresPaid,v=(0,ts.usePremiumStackState)().isBlockedByPlan,S=(0,tB.useAgentInputContext)(),b=(0,ts.usePromptSettings)("customStackReplId").customStackReplId,A=(0,r._)((0,u.useState)(!1),2),k=A[0],T=A[1],j=(0,r._)((0,u.useState)(),2),y=j[0],I=j[1],w=(0,u.useCallback)(function(e){if("OrgStackTemplate"===e.key){e.replId&&_(e.replId);return}"Stack from existing App"===e.key?T(!0):f(e.key)},[f,_]),C=(0,u.useCallback)(function(e){T(!1),I(e),S.updateSettings(function(){return{stackKey:"Stack from existing App",customStackReplId:e.id}})},[S]),E=(n=(t={availableStacks:d,selectedKey:null!=h?h:"Auto",selectedOrgTemplateReplId:b,onSelectionChange:w,isPaidUser:!x,onUpsell:m}).availableStacks,i=t.selectedKey,a=t.selectedOrgTemplateReplId,o=t.onSelectionChange,l=t.isPaidUser,s=t.onUpsell,{stacks:(0,u.useMemo)(function(){var e=[],t=[],i=[],a=[],o=!0,r=!1,l=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var u=s.value;"OrgStackTemplate"===u.key?e.push(u):u.isStaffOnly?t.push(u):u.isPaid?a.push(u):i.push(u)}}catch(e){r=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(r)throw l}}return{orgTemplates:e,staffOnly:t,free:i,paid:a}},[n]),selectedStack:(0,u.useMemo)(function(){return"OrgStackTemplate"===i&&a?n.find(function(e){return e.replId===a}):n.find(function(e){return e.key===i})},[n,i,a]),handleSelectionChange:(0,u.useCallback)(function(e){if("all"!==e){var t=Array.from(e)[0];if(t){var i=n.find(function(e){return e.key===t});if(i||(i=n.find(function(e){return e.replId===t})),(null==i?void 0:i.isPaid)&&!l){null==s||s();return}i&&o(i)}}},[n,l,s,o])}),M=E.stacks,P=E.selectedStack,L=E.handleSelectionChange;return g?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(tF,{stacks:M,onSelectionChange:L,selectedStack:P,customStackRepl:y,isPaidUser:!x,showCoreBadge:v,onOpenCustomTemplateModal:function(){return T(!0)}}),(0,c.jsx)(tD,{isOpen:k,onRequestClose:function(){return T(!1)},onConfirm:C})]}):null},t4=function(e){var t=e.appThemes,n=e.isDisabled,i=(0,tB.useAgentInputContext)(),a=(0,ts.useSelectedTab)(),o=(0,ts.useAppTheme)();return"anon"!==i.userType&&"free"!==i.userType&&"Auto"===a&&o.supported?(0,c.jsx)(tE,{selectedThemeId:o.themeId,selectedStack:o.stackKey,onChange:function(e,t){i.updateSettings(function(){return{themeId:e,themeConfig:t}})},appThemes:t,isDisabled:void 0!==n&&n}):null},t7=function(e){var t=e.children;return(0,c.jsx)(O.View,{row:!0,gap:4,align:"center",children:t})},t9=function(e){var t=e.isDisabled,n=void 0!==t&&t,i=e.loading,a=eR({view:e.view,selectedTheme:e.selectedThemeConfig}),o=a.onEnhance,l=a.onUndo,s=(0,ts.useEnhancePromptButtonVisibility)(),d=(0,r._)((0,u.useState)(null),2),m=d[0],p=d[1],g=(0,r._)((0,u.useState)({type:"waiting"}),2),h=g[0],f=g[1];if(!s)return null;var _={cursor:"default",opacity:.5};return(0,c.jsxs)(O.View,{row:!0,gap:4,align:"center",children:[null!==m?(0,c.jsx)(eO.IconButton,{size:32,alt:"Undo",disabled:void 0!==i&&i,style:n?_:void 0,onClick:function(){p(null),l(m)},children:(0,c.jsx)(eW.default,{})}):null,(0,c.jsx)(eO.IconButton,{size:32,alt:"Improve prompt",tooltipContents:"Improve prompt",disabled:n||"waiting"!==h.type,style:n?_:void 0,onClick:function(){f({type:"generating"}),o().then(function(e){return p(e)}).finally(function(){return f({type:"waiting"})})},children:(0,c.jsx)(function(){return"generating"===h.type?(0,c.jsx)(eF.default,{}):(0,c.jsx)(eU.default,{})},{})})]})},ne=function(e){var t=e.addAttachments,n=e.onFigmaImportClick,i=e.isDisabled;return t?(0,c.jsx)(eP.AttachmentButton,{source:"home",disabled:void 0!==i&&i,status:"composing",addAttachments:t,onFigmaImportClick:null!=n?n:function(){},size:32}):null},nt=function(e){var t=e.onSubmit,n=e.submitDisabled,i=void 0!==n&&n,r=e.submitDisabledReason,l=e.isLoading,s=void 0!==l&&l,u=(0,ts.useIsEmpty)(),d=s?"Startingâ€¦":"Start";return(0,c.jsx)(el.Tooltip,{isDisabled:!r,tooltip:null!=r?r:void 0,children:function(e,n){var r=e.onFocus,l=e.onBlur,m=(0,w._)(e,["onFocus","onBlur"]);return(0,c.jsx)(tc.Button,(0,o._)((0,a._)({ref:n},m),{onFocus:r,onBlur:l,"aria-label":i?"Submit disabled":"Submit",disabled:i,onClick:t,colorway:u?void 0:"primary",dataCy:"ai-prompt-submit",text:d,iconRight:s?(0,c.jsx)(eF.default,{}):(0,c.jsx)(tq.default,{})}))}})},nn=function(e){var t,n,i,o,r,l,s,d,m,g,h,f,_,x=e.view,v=(0,M.useIsInMobileWorkspace)(),S=(0,ts.useUserType)(),b=(0,ts.useAgentModeState)(),A=b.agentMode,k=b.updateMode,T=b.show,j=b.requiresPaid,y=b.disabled,I=b.disabledTooltipText,w=(0,eE.useGlobalModal)().show,C=(0,u.useRef)(null),E=(l=(i={skip:"paid"!==(n=(0,ts.useUserType)())},o=(0,a._)({},tr,i),r=ta.useQuery(tl,o)).data,s=r.loading,m=(d=(0,e4.useMemoedDismissibleElement)("agent-home-chat-mode-tour")).isLoading,g=d.isDone,h=d.setAsDone,f=s||m,_=(0,u.useMemo)(function(){var e;return!!(null==l||null==(e=l.currentUser)?void 0:e.timeCreated)&&new Date(l.currentUser.timeCreated)<tp},[null==l||null==(t=l.currentUser)?void 0:t.timeCreated]),{shouldDisplay:!f&&"paid"===n&&_&&!g,dismiss:h,isLoading:f}),P=E.shouldDisplay,L=E.dismiss,D=A===p.AgentMode.AGENT_MODE_INITIAL_PLANNING;return"anon"!==S&&T?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(el.Tooltip,{tooltip:I,isDisabled:!y,children:(0,c.jsx)(eM.AgentChatModeDropdown,{dropdownButtonRef:C,buttonSize:"default",buttonVariant:"nofill",popoverPlacement:"bottom start",disabled:y,chatMode:D?"plan":"build",onChatModeChange:function(e){e===e3.AgentChatMode.Discussion?k(p.AgentMode.AGENT_MODE_INITIAL_PLANNING):k(p.AgentMode.AGENT_MODE_GENERAL)},keyboardShortcutEnabled:!v,onModeSwitchFocusInput:function(){!v&&x&&queueMicrotask(function(){x.focus()})},isFreeUser:j,isInWorkspace:!1,onPlanModeUpsell:function(){w("UpgradeEducationModal",{context:"agent_home_plan_mode_upsell",surface:"agent_entry_point",highlightedFeature:"planMode"})},onOpenChange:function(e){e&&P&&L()}})}),P?(0,c.jsx)(tg,{targetRef:C,onDismiss:L}):null]}):null},ni=function(e){var t=e.isSubscribed,i=(0,ts.useUserType)(),a=(0,ts.useSelectedTab)(),o=(0,ts.useAgentModeState)().agentMode,r=(0,ts.useFastBuildType)(),l=r.buildTier,u=r.updateBuildTier,d=(0,ts.usePromptSettings)("stackKey").stackKey,m=(0,eE.useGlobalModal)().show,g=(0,ej.useCurrentUserStoredOrgContext)().orgId,h=(0,et.useFlag)({controlName:"flag-free-plan",default:!1});if("anon"===i||o===p.AgentMode.AGENT_MODE_INITIAL_PLANNING||"Design"===a)return null;var f=l===p.AgentInitialBuildTier.AGENT_INITIAL_BUILD_TIER_LITE,_="Modern web app"!==d&&"Auto"!==d;return(0,c.jsx)(el.Tooltip,{tooltip:_?"Fast mode is only available for web apps":void 0,isDisabled:!_,children:(0,c.jsx)(eO.IconButton,{filled:f,colorway:f?"yellow":void 0,size:32,alt:f?"Fast enabled":"Enable Fast",onClick:function(){return(0,n._)(function(){return(0,s._)(this,function(e){return _||(!h||t||g?u(f?p.AgentInitialBuildTier.AGENT_INITIAL_BUILD_TIER_PRO:p.AgentInitialBuildTier.AGENT_INITIAL_BUILD_TIER_LITE):m("UpgradeEducationModal",{context:"agent_home_autonomous_mode_upsell",surface:"agent_entry_point",highlightedFeature:"autonomousBuildMode"})),[2]})})()},disabled:_,children:f?(0,c.jsx)(tQ.default,{}):(0,c.jsx)(ec.default,{})})})},na=function(e){var t=(0,ts.useTabs)(),n=t.selectedTab,i=t.updateTab;return(0,c.jsx)(K,{selectedTab:n,onTabSelected:function(t){i(t),e.onClick()}})},no=function(e){var t=e.fallbackMessage,n=(0,ts.useAgentModeState)().agentMode,i=(0,ts.useFastBuildType)().buildTier,a=(0,ts.useSelectedTab)(),o=(0,ts.useUserType)(),r=(0,ts.usePremiumStackState)().isBlockedByPlan,l=(0,tt.useGetAgentFreeUsage)({skip:"free"!==o}).agentUsageV2,s=null==l?void 0:l.nextCreditsAt;if("anon"===o)return null;var u=n===p.AgentMode.AGENT_MODE_INITIAL_PLANNING,d=i===p.AgentInitialBuildTier.AGENT_INITIAL_BUILD_TIER_LITE;if("Design"===a)return null;var m=s&&"0m"!==(0,tz.toCountdownDate)({date:s}),h=l&&!l.isUnderQuota&&s,f=null;return(h&&m?f=(0,c.jsxs)(O.View,{row:!0,gap:3,children:[(null==l?void 0:l.isUnderMonthlyQuota)===!1?"Monthly":"Daily"," ","credits will reset in"," ",(0,c.jsx)(tz.Timestamp,{date:s,dateFormat:"countdown",live:!0,textColor:"dimmer",textVariant:"small"})]}):t?f=t:r?f=th.PREMIUM_STACK_SUPPORTING_TEXT.REQUIRES_CORE:u?f=g.AGENT_INPUT_SUPPORTING_TEXT.PLAN_MODE:d&&(f=g.AGENT_INPUT_SUPPORTING_TEXT.FAST_MODE),f)?(0,c.jsxs)(O.View,{row:!0,gap:6,align:"center",justify:"center",children:[(0,c.jsx)(tJ.default,{}),(0,c.jsx)(er.Text,{variant:"small",color:"dimmer",children:f})]}):null},nr=function(){var e=(0,ts.usePromptSettings)("agentMode","buildTier","autonomyLevel","enableAutomatedTesting","imageGenerationEnabled","webSearchEnabled","stackKey"),t=e.agentMode,n=e.buildTier,i=e.autonomyLevel,l=e.enableAutomatedTesting,s=e.imageGenerationEnabled,d=e.webSearchEnabled,m=e.stackKey,h=(0,N.useShadesFlag)(),f=(0,e9.useAutonomyControlVariant)(),_=(0,ts.useSelectedTab)(),x=t===p.AgentMode.AGENT_MODE_INITIAL_PLANNING,v="Design"===_,S=n===p.AgentInitialBuildTier.AGENT_INITIAL_BUILD_TIER_LITE,b=i===p.AutonomyLevel.AUTONOMY_LEVEL_MAX,A=v?p.AutonomyLevel.AUTONOMY_LEVEL_LOW:p.AutonomyLevel.AUTONOMY_LEVEL_HIGH,k=(0,tB.useAgentInputContext)(),T=(0,tN.getStackCapabilities)(m).automatedTesting===tN.AutomatedTestingConfig.DISABLED,j=(0,ts.useUpdatePromptSettings)(),y=(0,r._)((0,u.useState)(!1),2),I=y[0],w=y[1],C=(0,u.useMemo)(function(){return(0,e7.convertAgentSettingsFromAiChatToGQL)({autonomyLevel:null!=i?i:A,agentMode:null!=t?t:p.AgentMode.AGENT_MODE_GENERAL,enableAutomatedTesting:null!=l&&l,imageGenerationEnabled:null==s||s,webSearchEnabled:null==d||d})},[i,A,t,l,s,d]),E=(0,u.useCallback)(function(e,t){j(function(){if(null!=t.chatMode)if(t.chatMode===e3.AgentChatMode.QuickEdit)return{buildTier:p.AgentInitialBuildTier.AGENT_INITIAL_BUILD_TIER_LITE};else return{buildTier:p.AgentInitialBuildTier.AGENT_INITIAL_BUILD_TIER_PRO};return null!=t.autonomyLevel?{autonomyLevel:e7.autonomyLevelMapFromGQLEnum[t.autonomyLevel]}:null!=t.enableAutomatedTesting?{enableAutomatedTesting:t.enableAutomatedTesting}:null!=t.imageGenerationEnabled?{imageGenerationEnabled:t.imageGenerationEnabled}:null!=t.webSearchEnabled?{webSearchEnabled:t.webSearchEnabled}:{}})},[j]),M=(0,e4.useMemoedDismissibleElement)("max-autonomy-warning-acknowledged"),P=M.isLoading,L=M.isDone,D=M.setAsDone,B=(0,eE.useGlobalModal)();return"free"===k.userType||"anon"===k.userType||x||v?null:(0,c.jsxs)(tu.PopoverTrigger,{isOpen:I,onOpenChange:w,label:"".concat(g.AGENT_NAME," Tools"),placement:"bottom end",children:[function(e){return(0,c.jsxs)(O.View,{clsx:tZ.default.settingsDropdownButtonContainer,children:[(0,c.jsx)(eO.IconButton,(0,o._)((0,a._)({},e),{alt:"Agent Tools",tooltipContents:"Agent Tools",tooltipPlacement:"top",size:32,children:(0,c.jsx)(tX.default,{})})),!S&&b?(0,c.jsx)(tY.default,{size:8,color:ei.tokens.orangeDefault,clsx:tZ.default.maxAutonomyLevelIndicator}):null]})},(0,c.jsx)(te.AgentSettingsDropdownContent,{settings:C,updateSetting:E,autonomyControlVariant:f,hasShadesFlag:h,hasFlagFreeQuickEdits:!1,isFastModeUnavailable:"Modern web app"!==m&&"Auto"!==m,isFreemiumUserRestrictedToFastMode:!1,isAppTestingUnavailable:v||T,isHighPowerModelUnavailable:!1,isHighPowerModelToggleHidden:!0,isFastModeEnabled:S,fastModeDescription:"Build a lightweight app, quickly",autonomousModeDescription:"Use Agent's full capabilities",isWebDesignMockup:v,isLoading:P,onAutonomyLevelChange:function(e){e!==e3.AutonomyLevel.Max||L?E("autonomyLevel",{autonomyLevel:e}):B.show("MaxAutonomyWarningModal",{onConfirm:function(){D(),E("autonomyLevel",{autonomyLevel:e})}})}})]})},nl=function(){var e=(0,ts.usePromptSettings)("stackKey").stackKey,t=(0,ts.useUserType)();if("Custom Stack"===e&&"free"!==t&&"anon"!==t)return(0,c.jsx)(tK.StatusBanner,{colorway:"yellow",text:(0,c.jsxs)(er.Text,{multiline:!0,children:["This option allows Agent to build with any developer framework, which may require manual troubleshooting or code editing."," ",(0,c.jsx)("a",{href:"https://docs.replit.com/replitai/general-agent",target:"_blank",rel:"noopener noreferrer",children:"Learn more"})]})})};var ns=e.i(341190),nc=e.i(701382),nu=e.i(586707),nd=function(e){return tk.themePresetKeys.includes(e)};function nm(e){var t=e.selectedThemeId,n=e.selectedStack,i=e.onChange,a=e.appThemes,o=e.isDisabled,l=(0,E.useIsMobile)(),s=(0,tf.useRouter)(),d=(0,r._)((0,u.useState)(t),2),m=d[0],p=d[1],g=(0,r._)((0,u.useState)(!1),2),h=g[0],f=g[1],_=(0,ej.useCurrentUserStoredOrgContext)(),x=_.orgId,v=_.orgSlug,S=(0,tv.useAppThemeTracking)().trackAppTheme,b=x&&v?"".concat((0,tS.orgLinks)({slug:v}).home.href,"/theme-editor"):"/theme-editor";(0,u.useEffect)(function(){p(t)},[t]);var A=null!=a?a:[];if(!ek.STACKS_THAT_SUPPORT_APP_THEMES.has(n))return null;var k=A.find(function(e){return e.id===m}),T=function(){return m?nd(m)?tk.default[m].name:k?k.name:"Auto theme":"Auto theme"};return(0,c.jsx)(O.View,{clsx:nu.default.root,grow:!0,shrink:!0,children:(0,c.jsxs)(Z.Select,{"aria-label":"App theme",selectedKey:m,isDisabled:o,onOpenChange:function(e){f(e),e&&(0,P.track)(L.events.START_WITH_AI_USED,{action:"app_theme_select_opened"})},onSelectionChange:function(e){var t=String(e);if("manage"===t){S(L.events.APP_THEME,{action:"manage_button_pressed",source:"start_with_ai_selector"}),s.push(b);return}if("auto"===String(e)){p(void 0),null==i||i(void 0,void 0);return}if(nd(t)){p(t);var n=tk.default[t],a=(null==n?void 0:n.schema)?JSON.stringify(n.schema):void 0;S(L.events.APP_THEME,{action:"start_with_ai_selected",themeType:"preset",themeId:t,themeName:null==n?void 0:n.name}),null==i||i(String(e),a);return}p(t);var o=A.find(function(e){return e.id===t}),r=(null==o?void 0:o.schema)?JSON.stringify(o.schema):void 0;S(L.events.APP_THEME,{action:"start_with_ai_selected",themeType:"custom"}),null==i||i(t,r)},children:[(0,c.jsx)("label",{clsx:nu.default.label,htmlFor:"app-theme-select",children:"App theme"}),l?(0,c.jsx)(eO.IconButton,{id:"app-theme-select",disabled:o,alt:T(),size:28,children:(0,c.jsx)(ty.default,{})}):(0,c.jsx)(tc.Button,{variant:"nofill",size:"small",disabled:o,iconLeft:(0,c.jsx)(ty.default,{}),id:"app-theme-select",isDisabled:o,text:T(),iconRight:(0,c.jsx)(ed.default,{rotate:180*!!h})}),(0,c.jsx)(J.Popover,{placement:"bottom start",className:nu.default.popoverSurface,containerPadding:12,children:(0,c.jsxs)(eo.Surface,{p:4,elevated:!0,children:[l?null:(0,c.jsxs)(O.View,{pb:6,pl:4,row:!0,align:"center",gap:8,children:[(0,c.jsx)(er.Text,{variant:"small",color:"dimmer",className:nu.default.bold,children:"App theme"}),(0,c.jsx)(R.Pill,{colorway:"primary",text:"Beta",compact:!0})]}),(0,c.jsxs)(X.ListBox,{"aria-label":"App theme",selectionMode:"single",className:nu.default.listBox,shouldFocusWrap:!0,children:[(0,c.jsxs)(X.ListBoxSection,{className:nu.default.listBoxSection,children:[(0,c.jsx)(X.ListBoxItem,{id:"auto","aria-label":"Auto theme",children:(0,c.jsx)(np,{title:"Auto theme",isSelected:void 0===m})},"auto"),A.map(function(e){return(0,c.jsx)(X.ListBoxItem,{id:e.id,"aria-label":e.name,children:(0,c.jsx)(np,{title:e.name,isSelected:m===e.id,schema:e.schema})},e.id)})]}),Object.keys(tk.default).length>0?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(nc.Separator,{className:nu.default.separator}),(0,c.jsxs)(X.ListBoxSection,{className:nu.default.listBoxSection,children:[l?null:(0,c.jsx)(ns.Header,{children:(0,c.jsx)(O.View,{py:4,pl:4,children:(0,c.jsx)(er.Text,{variant:"small",color:"dimmer",clsx:nu.default.bold,children:"Examples"})})}),Object.entries(tk.default).map(function(e){var t=(0,r._)(e,2),n=t[0],i=t[1];return(0,c.jsx)(X.ListBoxItem,{id:n,"aria-label":i.name,children:(0,c.jsx)(np,{title:i.name,isSelected:m===n,schema:i.schema})},n)})]})]}):null,l?null:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(nc.Separator,{className:nu.default.separator}),(0,c.jsx)(X.ListBoxSection,{className:nu.default.listBoxSection,children:(0,c.jsx)(X.ListBoxItem,{id:"manage","aria-label":"Manage themes",children:(0,c.jsx)(O.View,{clsx:nu.default.item,children:(0,c.jsxs)(O.View,{row:!0,align:"center",gap:8,clsx:nu.default.itemContent,children:[(0,c.jsx)(tj.default,{}),(0,c.jsx)(er.Text,{children:"Manage themes"})]})})},"manage")})]})]})]})})]})})}var np=function(e){var t=e.title,n=e.isSelected,a=e.schema;return(0,c.jsxs)(O.View,{clsx:[nu.default.item,(0,i._)({},nu.default.itemSelected,n)],children:[n?(0,c.jsx)(eu.default,{color:ei.tokens.greenStrongest}):null,(0,c.jsx)(O.View,{clsx:nu.default.itemContent,children:(0,c.jsx)(er.Text,{clsx:nu.default.themeName,children:t})}),a?(0,c.jsx)(O.View,{row:!0,children:["foreground","background","accent","primary"].map(function(e){var t,n;return tx.default.valid(null==a||null==(t=a[":root"])?void 0:t[e])?(0,c.jsx)(tb.ColorSwatch,{color:(0,tx.default)(null!=(n=a[":root"][e])?n:"").hex(),size:20,clsx:nu.default.colorSwatch},e):null})}):null]})},ng=e.i(747930);function nh(){var e=(0,tn._)(["\n  fragment OrgStackTemplate on Repl {\n    id\n    title\n    description\n    iconUrl\n  }\n"]);return nh=function(){return e},e}function nf(){var e=(0,tn._)(["\n  query OrgStackTemplates($orgId: String) {\n    currentUser {\n      id\n      isExplorer: hasRole(role: EXPLORER)\n      org(orgId: $orgId) {\n        __typename\n        ... on Org {\n          id\n          stackTemplates {\n            ...OrgStackTemplate\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return nf=function(){return e},e}var n_={},nx=(0,ti.gql)(nh()),nv=(0,ti.gql)(nf(),nx),nS=e.i(406345),nb=e.i(249622),nA=e.i(322427),nk=f.EditorView.theme((t={"&":{flexGrow:1},"& .cm-content":{fontFamily:ei.tokens.fontFamilyDefault}},(0,i._)(t,"& .".concat(j.ACTIVE_LINE_LAYER_CLASS),{display:"none"}),(0,i._)(t,"& .cm-cursor",{borderLeftColor:ei.tokens.foregroundDefault,borderLeftWidth:"1px"}),t)),nT=new _.ReactCompartment(function(e){return f.EditorView.focusChangeEffect.of(function(t,n){return e(n),null})}),nj=[];function ny(e){var t,i,h,f,_,j,w,C,E,D,B,R,U,F,W,V,G,H=(0,eI.useManagerWhoFlag)(),z=(0,N.useShadesFlag)(),q=(0,ts.useUserType)(),Q=(0,T.default)(),$=Q.ref,Y=Q.view,X=(0,d.useIsSSR)(),J=(0,M.useIsInBonsaiWebview)(),Z=null!=(F=e.status)?F:"composing",ee=(0,A.useCodeMirrorValue)(Y,e0.isEmpty),en=(0,r._)((0,u.useState)(!1),2),ei=en[0],ea=en[1],er=(0,ew.default)().showError,es=(0,ts.usePlaceholderText)(),ec=(0,e0.usePlaceholder)({text:H?es:null!=(W=e.placeholderText)?W:"Message Agentâ€¦"}),eu=eZ.MaxLength.use(2e3),ed=e.isPrivate,em=e.selectedStack,ep=e.onSelectedStackChanged,eg=e.inputRef,eh=em.customStackReplId,ef=(0,ts.usePromptSettings)("stackKey"),e_=H?null!=(V=ef.stackKey)?V:"Auto":em.key,ev=(0,r._)((0,u.useState)(),2),eS=ev[0],eN=ev[1],eR=(0,r._)((0,u.useState)(),2),eO=eR[0],eU=eR[1],eW=(0,r._)((0,u.useState)(void 0),2),eG=eW[0],e2=eW[1],e3=(0,r._)((0,u.useState)(!1),2),e8=e3[0],e5=e3[1],e4=(0,r._)((0,u.useState)(null),2),e7=e4[0],e9=e4[1],te=(0,eE.useGlobalModal)().show,tt=(0,ts.usePremiumStackState)(),tn=tt.isBlockedByPlan,ti=tt.selectedStackLabel,to=(0,ej.useCurrentUserStoredOrgContext)().orgId,tr=(0,m.useAppThemesQuery)({skip:"anon"===q||!ek.STACKS_THAT_SUPPORT_APP_THEMES.has(e_),variables:{orgId:to}}),tl=tr.data,tu=tr.refetch,td=(0,u.useMemo)(function(){return to?null==tl?void 0:tl.appThemes.filter(function(e){return"OrgAppTheme"===e.__typename}):null==tl?void 0:tl.appThemes.filter(function(e){return"AppTheme"===e.__typename})},[tl,to]);(0,u.useLayoutEffect)(function(){if(ei&&Y&&Y.state&&Y.state.doc.length>0&&"Auto"===e_){var e=requestAnimationFrame(function(){ea(!1),nc()});return function(){return cancelAnimationFrame(e)}}},[ei,Y,e_]);var tm=(0,ez.usePersistPromptDraft)(e.persistenceKey,Y),tp=tm.persistPromptDraftCompartment,tg=tm.clearPersistedPromptDraft,tf=(0,eQ.useUrlContextFeatureKillswitch)(),t_=(0,u.useMemo)(function(){return"anon"===q?eK.AnonSafeUrlAttachmentExtensions:eK.UrlAttachmentExtensions},[q]),tx=(0,eX.useAiChatAttachments)(),tv=tx.attachments,tS=tx.urlAttachments,tb=tx.removeAttachment,tA=tx.addAttachments,tk=tx.addUrlAttachment,tT=tx.removeUrlAttachment,tj=tx.isLoading,ty=null!=(G=(0,A.useCodeMirrorValue)(Y,eK.detectedUrlsState))?G:nj,tI=(null==(U=(0,A.useCodeMirrorValue)(Y,nw))?void 0:U.started)||void 0,tw=(0,eb.useAgentInputFigmaContextProviderState)({source:"home",detectedLinks:ty}),tC=(0,ey.default)(tw),tE=(0,r._)((0,u.useState)(!1),2),tM=tE[0],tP=tE[1],tL=tw.hasFigmaLinks,tD=(0,r._)((0,u.useState)(!1),2),tB=tD[0],tN=tD[1],tR=(0,ey.default)(tB),tO=(0,eJ.useDropTarget)({addAttachments:tA}),tU=tO.isDraggedOver,tF=tO.drop,tW=(0,ts.useClassifyPrompt)(tv),tV=(0,I.useObservableMemo)(function(){return tv.map(function(e){return e.length>0})},[tv]),tG=(0,y.useObservable)(tj,!1),tH=e.disabled||tM||e.isCreatingRepl,tK=!H&&"composing"===Z&&"Agents & Automations"===e_&&!eG,tz=ee&&!tV&&"composing"===Z||"loading"===Z||e.isSubmitDisabled||!!tH||tG||tK,tq=e.submitDisabledReason;tG?tq="Please wait for files to finish uploading":ee&&!tV&&"composing"===Z?tq="Enter a message or attach a file":"composing"!==Z||"Agents & Automations"!==e_||eG?tM&&(tq="Preparing to import from figma..."):tq="A platform must be selected first";var tQ=e.onUpsell,t$=e.onSubmit,tY=(0,ey.default)({prompt:null==Y?void 0:Y.state.doc.toString(),attachments:tv.current}),tX=(0,u.useCallback)(function(){return(0,n._)(function(){var e,t,n,i,r,l,c,u,d;return(0,s._)(this,function(s){switch(s.label){case 0:if(t=(e=tC.current).createFigmaRepl,n=e.figmaLinks,!e.hasFigmaLinks)return[2];return r=(i=tY.current).prompt,l=i.attachments,c=n[0],tP(!0),d={has_figma_links:(u=tC.current.getFigmaTelemetryData()).hasFigmaLinks,figma_link:c,figma_link_count:u.figmaLinksCount,figma_link_count_unique:u.figmaLinksCountUnique},(0,P.track)(L.events.START_WITH_AI_USED,(0,o._)((0,a._)({action:"prompt_submitted",prompt:r,attachments_count:l.length,agent_stack_platform_type:eG,time_taken:tI?Date.now()-tI:void 0},d),{selected_stack:em})),(0,P.track)(L.events.START_WITH_AI_USED,(0,a._)({action:"import_from_figma_with_prompt",prompt:r,attachments_count:l.length},d)),[4,t({isPrivate:ed,orgId:to,figmaUrl:c,initialPrompt:r,initialPromptAttachments:l})];case 1:return s.sent(),tg(),[2,null]}})})()},[tC,tY,eG,tI,em,ed,to,tg]),tJ=(0,ts.useGetValidatedSettings)(),tZ=(0,ts.useUpdatePromptSettings)(),t0=(0,u.useCallback)(function(e){e&&tR.current&&tX(),tN(!1)},[tX,tR]),ns=(0,u.useCallback)(function(e){tR.current&&"closed"===e&&tN(!1)},[tR]),nc=(0,u.useCallback)(function(){if("loading"!==Z){if(tz||!Y){e.isSubmitDisabled&&tQ&&tQ();return}var t=tC.current,n=t.hasFigmaLinks,i=t.isFigmaAuthenticated,a=t.showFigmaAuthModal;if(n)return void(i?tX():(tN(!0),a({surface:"agent_input",trigger:"submit_button_clicked"})));var o=Y.state.doc.toString();tg();var r=(0,l._)(tv.current).concat((0,l._)(tS.current.map(function(e){return e.file}))),s=tI?Date.now()-tI:void 0;if(H){if(tn)return void te("UpgradeEducationModal",{context:"home_page_stack_select",surface:"agent_entry_point",highlightedFeature:"appTypes",onRequestClose:function(){tZ(function(){return{stackKey:"Modern web app",buildTier:p.AgentInitialBuildTier.AGENT_INITIAL_BUILD_TIER_LITE}});var e=null!=ti?ti:"Premium";e9(th.PREMIUM_STACK_SUPPORTING_TEXT.FALLBACK(e))}});var c=tJ(),u=c.settings,d=c.usedAutoStackFallback,m=u.stackKey;return void t$({message:o,attachments:r,requestedStackBlueprint:m?(0,g.getStackBlueprintFromStackOption)(m):void 0,customStackReplId:u.customStackReplId,appThemeId:u.themeId,themeConfig:e6(u.themeConfig),agentStackPlatformType:u.agentStackPlatformType,isExpertMode:"Custom Stack"===e_,isInPlanningPhase:u.agentMode===p.AgentMode.AGENT_MODE_INITIAL_PLANNING,timeTaken:s,agentInitialBuildTier:u.buildTier,initialBuildMode:u.initialBuildMode,usedAutoStackFallback:d,autonomyLevel:u.autonomyLevel,webSearchEnabled:u.webSearchEnabled,imageGenerationEnabled:u.imageGenerationEnabled,enableAutomatedTesting:u.enableAutomatedTesting})}t$({message:o,attachments:r,requestedStackBlueprint:(0,g.getStackBlueprintFromStackOption)(e_),customStackReplId:eh,isExpertMode:"Custom Stack"===e_,themeConfig:e6(eO),appThemeId:eS,agentStackPlatformType:eG,timeTaken:s})}},[tz,tQ,Y,tg,e.isSubmitDisabled,t$,tv,tS,e_,Z,eh,eO,eS,tC,tX,eG,tI,H,tJ,tn,ti,te,tZ]),nu=(0,ey.default)(nc),nd=nI.use({onSubmit:(0,u.useCallback)(function(){return nu.current()},[nu])}),np=(0,u.useRef)(null),nh=(0,u.useCallback)(function(e){np.current=e,null==eg||eg(e)},[eg]),nf=(0,eq.useSetPromptEditor)({view:Y,setPromptEditor:nh}),nx=eH.HandlePasteCompartment.use({addAttachments:tA,onAutoAttachedLargePaste:function(e){(0,eY.trackAgentAnalyticsEvent)({action:"auto_attached_large_paste",fileSize:e})}}),ny=x.use({onFirstEdit:function(){var t;null==(t=e.onFirstEdit)||t.call(e)}}),nC=nT.use(function(t){var n;null==(n=e.onFocusChange)||n.call(e,t)}),nE=(0,eC.useMergeRefs)([tF,nf],{breadcrumb:"client/workspace/components/Agent/Chat/InputBox/index.tsx:448"}),nM=(0,y.useObservable)(tv),nP=null!=td?td:null,nL=!!e.overlay,nD=(0,u.useCallback)(function(e){(0,P.track)(L.events.START_WITH_AI_USED,{action:"agent_stack_platform_type_selected",agentStackPlatformType:e}),tZ(function(){return{agentStackPlatformType:e}}),e2(e)},[tZ]),nB=(0,u.useCallback)(function(){e5(!0)},[]),nN=(0,u.useCallback)(function(){e5(!1)},[]),nR=(0,u.useCallback)(function(e){if(Y){var t=Y.state.doc.toString(),n=t?"".concat(t,"\n\n").concat(e):e;Y.dispatch(Y.state.update({changes:{from:0,to:Y.state.doc.length,insert:n}})),e5(!1),Y.focus()}},[Y]),nO="Agents & Automations"===e_,nU=nO&&!eG,nF=(0,u.useRef)(null),nW=!nO&&"anon"!==q;(0,u.useLayoutEffect)(function(){var e;return nO||e2(void 0),nO&&!nU&&(e=window.requestAnimationFrame(function(){var e;null==(e=np.current)||e.focus()})),function(){null!=e&&window.cancelAnimationFrame(e)}},[nO,nU]),(0,u.useEffect)(function(){tL&&(!ek.STACKS_THAT_SUPPORT_FIGMA_LINKS.has(e_)||"Auto"===e_)&&ep("Modern web app")},[tL,e_,ep]);var nV=(0,c.jsx)(eL.default,{clsx:nA.default.attachments,detectedUrls:ty.map(function(e,t){return(0,c.jsx)(eD.default,{source:"home",url:e,addUrlAttachment:tk,removeUrlAttachment:tT,onError:er,isDisabled:tH},t)}),fileAttachments:nM.map(function(e){return(0,c.jsx)(eB.FileAttachment,{attachment:e,removeAttachment:tb,getAttachmentTypeDisclaimer:(0,e$.getAttachmentTypeDisclaimer)({aiName:(0,g.getAgentName)({capitalizeFirstChar:!0})})},e.path)})}),nG=(0,u.useCallback)(function(e){var t;(0,P.track)(L.events.START_WITH_AI_USED,{action:"stack_pill_selected",previousStack:em,newStack:e}),tZ(function(){return{stackKey:e}}),em.key===e||((0,ng.isDesignMode)(em.key)||"Auto"!==e)&&(ep(e),null==(t=np.current)||t.animatePlaceholder())},[ep,em,tZ]),nH=(h=(0,ej.useCurrentUserStoredOrgContext)().orgId,f=(0,et.useFlag)({controlName:"flag-recursive-robotonometry"}),_=(0,et.useFlag)({controlName:"flag-custom-stack-repls"}),E=(j={variables:{orgId:h},skip:!h},w=(0,a._)({},n_,j),C=ta.useQuery(nv,w)).data,D=C.loading,B=(null==E||null==(i=E.currentUser)||null==(t=i.org)?void 0:t.__typename)==="Org"?E.currentUser.org.stackTemplates:void 0,R=(0,u.useMemo)(function(){var e,t,n,i,r,s,c;return t=(e={hasAgentStack:f,hasCustomStackRepls:_,orgStackTemplates:B}).hasAgentStack,n=e.hasCustomStackRepls,i=e.orgStackTemplates,r=ek.STACK_PILL_OPTIONS.filter(function(e){var i=e.key;return("Stack from existing App"!==i||!!n)&&("Agents & Automations"!==i||!!t)}),c=(s=(0,l._)((null!=i?i:[]).map(function(e){return(0,o._)((0,a._)({},e),{key:"OrgStackTemplate",replId:e.id,label:e.title,description:e.description,icon:nS.default})})).concat((0,l._)(r))).filter(function(e){return"Auto"!==e.key}),{allAvailableStackOptions:s,allAvailableStackOptionsWithoutHiddenTypes:c}},[f,_,B]),(0,a._)({isLoading:D,orgStackTemplates:B},R)).allAvailableStackOptionsWithoutHiddenTypes,nK=(0,u.useCallback)(function(){var t;null==(t=e.onUpsell)||t.call(e)},[e]);return(0,c.jsx)(eb.AgentInputFigmaContext.Provider,{value:tw,children:(0,c.jsxs)(t1,{className:e.className,children:[(0,c.jsxs)(t2,{isDraggedOver:tU,children:[nL?null:(0,c.jsx)(c.Fragment,{children:H?(0,c.jsx)(na,{onClick:function(){null==Y||Y.focus()}}):(0,c.jsx)(K,{selectedTab:(0,ng.isDesignMode)(em.key)?"Design":"Auto",onTabSelected:nG})}),(0,c.jsxs)(t6,{children:[(0,c.jsxs)(O.View,{grow:!0,shrink:!0,p:z?12:4,innerRef:nE,gap:4,style:e8?{display:"none"}:void 0,"aria-hidden":!!e.overlay||!!e8,"aria-disabled":!!tH||void 0,inert:e.overlay||e8?"true":void 0,onClick:function(e){e.target===e.currentTarget&&(null==Y||Y.focus())},children:[(0,c.jsxs)(O.View,{grow:!0,shrink:!0,gap:4,children:[X?(0,c.jsx)(O.View,{style:{minHeight:e.minHeight?"".concat(e.minHeight,"px"):void 0}}):(0,c.jsx)(k.default,{"data-chromatic":"ignore",ref:$,clsx:nA.default.codemirror,initialDoc:e.initialValue,style:{minHeight:e.minHeight?"".concat(e.minHeight,"px"):void 0,maxHeight:e.maxHeight?e.maxHeight:void 0},fontSize:14,readOnly:tH,extensions:[nk,nd,nx,ec,eZ.characterLimit,eu,tp,b.autocorrectExtension,S.autocapitalizeExtension,ny,nC,nw,tf?[]:t_,v.slashCommandExtension,tW.cmExtension],id:"ai-prompt-input","data-cy":"ai-prompt-input"}),nV]}),(0,c.jsx)(t3,{view:Y,children:H?(0,c.jsxs)(e1.KeybindingsProvider,{commands:[eM.switchAgentModeCommand],children:[(0,c.jsxs)(t8,{children:[(0,c.jsx)(nn,{view:Y}),(0,c.jsx)(ne,{addAttachments:tA,onFigmaImportClick:nB,isDisabled:tH}),nW&&Y?(0,c.jsx)(t9,{view:Y,selectedThemeConfig:eO}):null]}),(0,c.jsxs)(t7,{children:[(0,c.jsx)(ni,{isSubscribed:!e.isStarterPlanUser}),(0,c.jsx)(nr,{}),(0,c.jsx)(nt,{onSubmit:nc,submitDisabled:tz,submitDisabledReason:tq,isLoading:"loading"===Z})]})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(eo.Surface,{elevated:!0,row:!0,gap:J?12:4,align:"center",children:[(0,c.jsx)(eP.AttachmentButton,{source:"home",disabled:tH,status:Z,addAttachments:tA,onFigmaImportClick:nB,size:28}),"Agents & Automations"===e_?(0,c.jsx)(ex,{agentStackPillRef:nF,selectedOption:eG,onSelectionChange:nD,isDisabled:tH,onUnselectAgentStack:function(){(0,P.track)(L.events.START_WITH_AI_USED,{action:"stack_pill_unselected",previousStack:{key:em}}),ep("Auto")}}):null,tL?null:(0,c.jsx)(nm,{isDisabled:tH,selectedThemeId:eS,selectedStack:e_,onChange:function(e,t){eN(e),eU(t),tZ(function(){return{themeId:e,themeConfig:t}}),ek.STACKS_THAT_SUPPORT_APP_THEMES.has(e_)&&"Auto"!==e_||ep("Modern web app")},appThemes:nP,refetchThemes:function(){return tu()}})]}),(0,c.jsxs)(O.View,{align:"center",row:!0,gap:8,children:[nW&&Y?(0,c.jsx)(eV,{isDisabled:tH||null==ee||ee,view:Y,selectedTheme:eO}):null,(0,c.jsx)(el.Tooltip,{isDisabled:!tq,tooltip:tq,children:(0,c.jsx)(tc.Button,{text:e.submitButtonText,colorway:"primary",dataCy:"ai-prompt-submit",iconLeft:e.submitButtonText.startsWith("Start")?(0,c.jsx)(nb.default,{}):(0,c.jsx)(eF.default,{}),onClick:nc,disabled:tz})})]})]})})]}),e8?(0,c.jsx)(eA.FigmaUrlInput,{source:"home",onCancel:nN,onSubmit:nR}):null,e.overlay?(0,c.jsx)(O.View,{clsx:nA.default.overlayBackground,children:(0,c.jsx)(O.View,{grow:!0,shrink:!0,align:"center",justify:"center",p:24,clsx:nA.default.overlayContent,children:e.overlay})}):null]})]}),H?(0,c.jsxs)(O.View,{clsx:nA.default.additionalSelectorsAndSupportingText,gap:16,children:[(0,c.jsxs)(O.View,{row:!0,justify:"start",gap:6,px:8,children:[(0,c.jsx)(t5,{availableStacks:nH,onUpsell:nK}),(0,c.jsx)(t4,{appThemes:nP,isDisabled:tH}),(0,c.jsx)(nl,{})]}),(0,c.jsx)(no,{fallbackMessage:e7})]}):null,(0,c.jsx)(eT.FigmaAuthModal,{onAuthenticated:t0,onClose:ns})]})})}var nI=new _.ReactCompartment(function(e){var t=e.onSubmit,n=e.preventSubmitOnEnter;return f.EditorView.domEventHandlers({keydown:function(e){!n&&("Enter"===e.key&&e.metaKey&&e.stopPropagation(),"Enter"!==e.key||e.shiftKey||(e.preventDefault(),t()))}})}),nw=h.StateField.define({create:function(){return{started:null}},update:function(e,t){return!e.started&&t.docChanged&&t.isUserEvent("input")?{started:Date.now()}:e}});e.s(["default",()=>ny],3931);var nC=e.i(541793),nE=e.i(161322),nM=e.i(251612),nP=e.i(180703),nL=(0,nC.atom)({key:null});function nD(){var e=(0,r._)((0,nE.useAtom)(nL),2),t=e[0],n=e[1],i=(0,nM.useShouldDefaultAppCreationToDesignMode)(),a=(0,r._)((0,nP.default)(th.BUILD_DESIGN_MODE_PREFERENCE_STORAGE_KEY,null),2),o=a[0],l=a[1];return{selectedStack:(0,u.useMemo)(function(){return t.key?t:o?{key:"Design"===o?"Design":"Auto"}:{key:i?"Design":"Auto"}},[t,i,o]),onSelectedStackChanged:(0,u.useCallback)(function(e,t){n({key:e,customStackReplId:t}),"Design"===e?l("Design"):"Auto"===e&&l("Build")},[n,l]),resetSelectedStack:(0,u.useCallback)(function(){n({key:null})},[n])}}e.s(["useSelectedStack",()=>nD],565835)}]);

//# debugId=92f72a1b-2daa-3433-4619-898c59be395f
//# sourceMappingURL=2077720792942033.js.map