;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="40d5ea25-9c4b-0030-5f27-81301a0b1740")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,427802,e=>{"use strict";var t=e.i(904851),r=e.i(90659),n=e.i(700005),i=e.i(282453),a=function(){function e(){(0,t._)(this,e)}return(0,r._)(e,null,[{key:"get",value:function(e){return i.default.get(e,"string")||n.default.get(e)}},{key:"set",value:function(e,t){i.default.set(e,t),n.default.set(e,t)}},{key:"remove",value:function(e){i.default.remove(e),n.default.remove(e)}}]),e}();e.s(["default",()=>a])},216373,e=>{"use strict";var t=e.i(878420),r=e.i(64386),n=e.i(276385),i=e.i(606867);function a(e){return(0,n.jsx)(i.default,(0,r._)((0,t._)({},e),{children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M23.31 11.753a.75.75 0 0 1-.75.75h-1.523v2.698a.75.75 0 0 1-1.5 0v-2.698h-2.476v3.698a.75.75 0 0 1-1.5 0v-3.698h-3.219a5.168 5.168 0 0 1-10.285-.755v-.008a5.168 5.168 0 0 1 10.268-.737H22.56a.75.75 0 0 1 .75.75Zm-12.417.043-.002-.03a3.668 3.668 0 0 0-7.334-.004 3.668 3.668 0 1 0 7.336.034Z",clipRule:"evenodd"})}))}e.s(["default",()=>a])},245150,e=>{"use strict";var t=e.i(878420),r=e.i(64386),n=e.i(276385),i=e.i(606867);function a(e){return(0,n.jsx)(i.default,(0,r._)((0,t._)({},e),{children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M10.64 2.354A9.75 9.75 0 1 1 2.803 15.25a.75.75 0 0 1 1.414-.498 8.25 8.25 0 1 0 1.937-8.564L2.894 9.25H7a.75.75 0 0 1 0 1.5H1A.75.75 0 0 1 .25 10V4a.75.75 0 0 1 1.5 0v4.266l3.368-3.165a9.75 9.75 0 0 1 5.522-2.747Z",clipRule:"evenodd"})}))}e.s(["default",()=>a])},848295,e=>{"use strict";var t=e.i(878420),r=e.i(64386),n=e.i(276385),i=e.i(606867);function a(e){return(0,n.jsx)(i.default,(0,r._)((0,t._)({},e),{children:(0,n.jsx)("path",{d:"M20.34 8.5c-.128.1-2.38 1.37-2.38 4.192 0 3.265 2.866 4.42 2.952 4.449-.013.07-.456 1.582-1.512 3.122-.941 1.355-1.925 2.708-3.42 2.708-1.497 0-1.882-.869-3.61-.869-1.682 0-2.28.898-3.65.898-1.368 0-2.323-1.254-3.42-2.794C4.027 18.397 3 15.588 3 12.92c0-4.277 2.781-6.546 5.518-6.546 1.454 0 2.667.955 3.58.955.869 0 2.224-1.012 3.879-1.012.627 0 2.88.057 4.363 2.183ZM15.19 4.508c.685-.812 1.169-1.938 1.169-3.065 0-.156-.014-.314-.042-.442-1.113.042-2.438.741-3.237 1.668-.627.713-1.212 1.84-1.212 2.981 0 .172.029.343.042.398.07.014.185.029.3.029.998 0 2.254-.669 2.98-1.569Z"})}))}e.s(["default",()=>a])},606265,e=>{"use strict";var t=e.i(878420),r=e.i(64386),n=e.i(276385),i=e.i(606867);function a(e){return(0,n.jsx)(i.default,(0,r._)((0,t._)({},e),{children:(0,n.jsx)("path",{d:"M12 0c6.627 0 12 5.373 12 12 0 5.99-4.388 10.954-10.125 11.854V15.47h2.796L17.203 12h-3.328V9.749c0-.255.034-.509.112-.743.176-.528.578-.958 1.332-1.09.155-.027.325-.041.512-.041h1.513V4.922s-1.374-.234-2.686-.234c-2.742 0-4.533 1.66-4.533 4.668V12H7.078v3.469h3.047v8.385C4.388 22.954 0 17.99 0 12 0 5.373 5.373 0 12 0Z"})}))}e.s(["default",()=>a])},472859,e=>{"use strict";var t=e.i(878420),r=e.i(64386),n=e.i(276385),i=e.i(853763);function a(e){return(0,n.jsxs)(i.default,(0,r._)((0,t._)({},e),{children:[(0,n.jsx)("path",{fill:"#4285F4",fillRule:"evenodd",d:"M21.6 12.227c0-.71-.064-1.391-.182-2.046H12v3.869h5.382a4.6 4.6 0 0 1-1.996 3.018v2.509h3.232c1.891-1.741 2.982-4.305 2.982-7.35Z",clipRule:"evenodd"}),(0,n.jsx)("path",{fill:"#34A853",fillRule:"evenodd",d:"M12 22c2.7 0 4.963-.895 6.618-2.423l-3.232-2.509c-.895.6-2.04.955-3.386.955-2.605 0-4.81-1.76-5.596-4.123h-3.34v2.59A9.996 9.996 0 0 0 12 22Z",clipRule:"evenodd"}),(0,n.jsx)("path",{fill:"#FBBC05",fillRule:"evenodd",d:"M6.405 13.9c-.2-.6-.314-1.241-.314-1.9 0-.66.114-1.3.314-1.9V7.509H3.064A9.996 9.996 0 0 0 2 11.999c0 1.614.386 3.142 1.064 4.492l3.34-2.591Z",clipRule:"evenodd"}),(0,n.jsx)("path",{fill:"#EA4335",fillRule:"evenodd",d:"M12 5.977c1.468 0 2.786.505 3.822 1.496l2.869-2.868C16.959 2.99 14.695 2 12 2 8.09 2 4.709 4.24 3.063 7.51l3.341 2.59C7.191 7.736 9.395 5.977 12 5.977Z",clipRule:"evenodd"})]}))}e.s(["default",()=>a])},690472,e=>{"use strict";var t=e.i(878420),r=e.i(64386),n=e.i(276385),i=e.i(606867);function a(e){return(0,n.jsx)(i.default,(0,r._)((0,t._)({},e),{children:(0,n.jsx)("path",{d:"M0 .21h7.098l6.561 9.167L21.826 0l1.94.035-9.14 10.66L24 23.79h-7.095l-6.193-8.543L3.147 24h-1.91l8.536-10.001L0 .21Zm6.429 1.354H2.68L17.678 22.4h3.681L6.43 1.564Z"})}))}e.s(["default",()=>a])},782514,e=>{"use strict";var t=e.i(878420),r=e.i(276385),n=e.i(389959),i=e.i(664152);e.i(929872),e.i(960178),e.i(625484);var a=(0,n.createContext)(void 0),o={page:"unknown"};function s(){var e=(0,n.useContext)(a);if(!e){try{i.logger.warn("useTrackingHierarchy called without provider")}catch(e){}return o}return e}function c(e){var i,s=e.children,c=e.hierarchy,u=null!=(i=(0,n.useContext)(a))?i:o,l=(0,n.useMemo)(function(){return(0,t._)({},u,c)},[u,c]);return(0,r.jsx)(a.Provider,{value:l,children:s})}e.s(["TrackingHierarchyProvider",()=>c,"useTrackingHierarchy",()=>s])},187505,e=>{"use strict";var t=e.i(878420),r=e.i(389959),n=e.i(858248),i=e.i(709485),a=e.i(782514);function o(){var e=(0,a.useTrackingHierarchy)();return{trackClick:(0,r.useCallback)(function(r){var a=(0,t._)({},e,r);(0,n.track)(i.events.CLICK,a)},[e])}}e.s(["useTrackClick",()=>o])},523579,e=>{"use strict";var t=e.i(878420),r=e.i(64386),n=e.i(276385),i=e.i(606867);function a(e){return(0,n.jsx)(i.default,(0,r._)((0,t._)({},e),{children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0 0 24 12c0-6.63-5.37-12-12-12Z",clipRule:"evenodd"})}))}e.s(["default",()=>a])},669996,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){if(null==e)throw TypeError("Expected a string but received a ".concat(e));if("String"!==e.constructor.name)throw TypeError("Expected a string but received a ".concat(e.constructor.name))},t.exports=r.default,t.exports.default=r.default},501005,e=>{"use strict";var t=e.i(439725),r=e.i(297083),n=e.i(817556),i="473079ba-e99f-4e25-a635-e9b661c7dd3e",a=0,o=null;function s(e,a){return(0,r._)(function(){var r;return(0,n._)(this,function(n){switch(n.label){case 0:if("true"===t.default.env.IS_CYPRESS_AUTOMATED_TEST||"true"===t.default.env.SKIP_HCAPTCHA)return[2,"bypassed"];if(!o)return[3,2];return[4,o];case 1:n.sent(),n.label=2;case 2:return r=window.hcaptcha,[2,new Promise(function(t,n){var o=document.createElement("div"),s=r.render(o,{sitekey:e||i,size:"invisible",callback:function(e){r.reset(s),window.document.body.contains(o)&&window.document.body.removeChild(o),t(e)},"open-callback":function(){a&&a()},"close-callback":function(){r.reset(s),window.document.body.contains(o)&&window.document.body.removeChild(o),n(Error("HCaptcha closed"))},"chalexpired-callback":function(){r.reset(s),window.document.body.contains(o)&&window.document.body.removeChild(o),n(Error("HCaptcha challenge expired"))},"error-callback":function(){r.reset(s),window.document.body.contains(o)&&window.document.body.removeChild(o),n(Error("HCaptcha render error"))},"expired-callback":function(){r.reset(s),window.document.body.contains(o)&&window.document.body.removeChild(o),n(Error("HCaptcha render expired"))}});window.document.body.appendChild(o),r.execute(s)})]}})})()}o=function e(){return(0,r._)(function(){var t;return(0,n._)(this,function(r){return(t=document.createElement("script")).src="https://js.hcaptcha.com/1/api.js?render=explicit&host=repl.it",[2,new Promise(function(r,n){t.onload=function e(t){return function(){void 0===window.hcaptcha?setTimeout(function(){e(t)},100):t()}}(function(){o=null,r()}),t.onerror=function(){a++,o=new Promise(function(t,r){setTimeout(function(){e().then(t,r)},1e3*Math.pow(1.7,a)+Math.floor(500*Math.random()))}),5===a&&n(Error("Failed to load captcha script after ".concat(5," times")))},window.document.head.appendChild(t)})]})})()}(),e.s(["HCAPTCHA_SITE_KEY",()=>i,"default",()=>s])},441648,252890,751010,364839,285030,484059,e=>{"use strict";var t,r,n=e.i(346715),i=e.i(276385),a=e.i(761201),o=e.i(446530),s=e.i(613355),c=e.i(960178),u=e.i(625484),l=(0,o.cssRecord)({signupFormEmailDisclaimerContainer:[s.rcss.width("100%")],signupFormEmailDisclaimer:[s.rcss.color.brandText,s.rcss.font.brandVariable,s.brandStyles.typography.caption.small,s.rcss.textAlign.center,s.rcss.width("100%")],link:[s.rcss.color.foregroundDefault,{fontWeight:700,textDecoration:"none"}]});let d=function(){return(0,i.jsx)(u.View,{css:l.signupFormEmailDisclaimerContainer,children:(0,i.jsxs)(c.Text,{css:l.signupFormEmailDisclaimer,children:["By continuing, you agree to Replit's",(0,i.jsx)("br",{}),(0,i.jsx)("a",{css:l.link,href:a.LINKS_LEGAL.TERMS_OF_SERVICE,target:"_blank",children:"Terms of Service"})," ","and"," ",(0,i.jsx)("a",{css:l.link,href:a.LINKS_LEGAL.PRIVACY_POLICY,target:"_blank",children:"Privacy Policy"})]})})};var h=e.i(878420),f=e.i(427802),p=e.i(858248),m=e.i(709485),g=function(e){var t=f.default.get("gfa_ref")||void 0,r=f.default.get("gfa_campaign")||void 0,n=f.default.get("gfa_landed_on")||void 0;(0,p.identify)({id:e,firstAcquisitionSource:t,firstAcquisitionCampaign:r,firstAcquisitionLandedOn:n})},v=function(e){var t=e.isLogin,r=e.authFormPlacement;(0,p.track)(m.events.AUTH_FORM_MODE_TOGGLED,t?{from:"login",to:"signup",authFormPlacement:r}:{from:"signup",to:"login",authFormPlacement:r})},w=function(e){var t=e.from,r=e.location,n=e.authFormPlacement,i=e.extras;(0,p.track)(m.events.LOGIN_REQUESTED,(0,h._)({from:t,location:r,authFormPlacement:n},void 0===i?{}:i))},y=function(e){var t=e.from,r=e.location,n=e.authFormPlacement,i=e.extras;(0,p.track)(m.events.SIGNUP_REQUESTED,(0,h._)({from:t,location:r,authFormPlacement:n},void 0===i?{}:i))};e.s(["attributeAcquisition",()=>g,"trackLoginView",()=>w,"trackSignupView",()=>y,"trackToggleAuth",()=>v],252890);var x=e.i(187505),_=e.i(480028),b=e.i(988676),C=[s.rcss.align.center,s.rcss.colWithGap(16)],k=(0,o.cssRecord)({footerLinkWrapper:[s.brandStyles.typography.caption.small,s.rcss.textAlign.center],footerLink:[s.brandStyles.typography.caption.small,s.rcss.color.brandAccentStrongest,{":hover":{color:_.tokens.brandAccentStronger,backgroundColor:"transparent"}}],footerContainerNotModal:(0,n._)(C).concat([s.rcss.bottom(24)]),footerContainerModal:(0,n._)(C).concat([s.rcss.pt(24)]),heightWrapper:[s.rcss.height(132)],recaptchaDisclaimer:[s.rcss.textAlign.center,s.brandStyles.typography.caption.small,s.rcss.color.foregroundDimmest,{"& > a":{color:"inherit",textDecoration:"underline"},"& > a:hover":{textDecoration:"none"}}]}),S=function(e){var t=e.mode,r=e.isModal,n=e.onModeChange,a=e.className,o=e.appName,s=(0,x.useTrackClick)().trackClick,u=function(e){e.preventDefault(),s({productArea:"auth",target:"login"===t?"sign_up_button":"log_in_button"}),v({isLogin:"login"===t,authFormPlacement:r?"modal":"auth-page"}),n("login"===t?"signup":"login")};return(0,i.jsxs)(c.Text,{css:k.footerLinkWrapper,className:a,variant:"small",multiline:!1,children:["login"===t?"New to ".concat(o||"Replit","? "):"Already have an account? ",(0,i.jsx)("a",{role:"button",tabIndex:0,onKeyDown:function(e){"Enter"===e.key&&u(e)},onClick:function(e){return u(e)},css:k.footerLink,children:"login"===t?"Sign up":"Log in"})]})},j=function(){return(0,i.jsxs)(c.Text,{variant:"small",color:"dimmest",css:k.recaptchaDisclaimer,children:["This site is protected by reCAPTCHA Enterprise and the Google"," ",(0,i.jsx)("a",{href:"https://policies.google.com/privacy",children:"Privacy Policy"})," and"," ",(0,i.jsx)("a",{href:"https://policies.google.com/terms",children:"Terms of Service"})," apply."]})};e.s(["AuthTypeToggle",()=>S,"default",0,function(e){var t=e.isModal,r=e.mode,n=e.onModeChange,a=t?void 0:k.heightWrapper;return(0,i.jsx)(u.View,{css:a,children:(0,i.jsxs)(u.View,{css:t?k.footerContainerModal:k.footerContainerNotModal,children:[(0,i.jsx)(b.DividerH,{}),"signup"===r?(0,i.jsx)(u.View,{pb:24,children:(0,i.jsx)(d,{})}):null,(0,i.jsx)(S,{mode:r,isModal:t,onModeChange:n}),(0,i.jsx)(u.View,{row:!0,gap:16,align:"center",children:(0,i.jsx)(c.Text,{css:k.footerLinkWrapper,variant:"small",multiline:!1,children:(0,i.jsx)("a",{href:"https://replit.com/help",target:"_blank",rel:"noopener noreferrer",css:k.footerLink,children:"Get help"})})}),(0,i.jsx)(j,{})]})})}],441648);var P=(0,o.cssRecord)({self:[s.rcss.font.brandDefault,{fontWeight:512,fontSize:24,lineHeight:32/24}]});e.s(["default",0,function(e){var t=e.mode,r=e.privateDeployment,n=e.privateDevDomain,a="Create a Replit account";return"login"===t&&(a="Log in to your account"),r&&(a="Log in to access a private website"),n&&(a="Log in to access a private app"),(0,i.jsx)(c.Header,{variant:"headerDefault",level:1,css:P.self,children:a})}],751010);var E=e.i(439725),T=e.i(297083),I=e.i(530658),L=e.i(817556),R=e.i(931849),A=e.i(389959),M=e.i(906368),U=e.i(64386),F=e.i(571926),D=e.i(344188),O=function(e){if(e.isLoggedIn){var t;(0,p.identify)((0,U._)((0,h._)({id:e.id.toString(),email:e.email,roles:e.roles,verified:e.isVerified,emailPreference:e.emailNotifications,createdAt:e.timeCreated},!!e.loginMethod&&{loginMethod:e.loginMethod}),{signupMethod:null!=(t=e.signupMethod)?t:F.NONE_IDENTIFY_PROP}))}},H=e.i(738623),V=e.i(414248),W=e.i(278598),B=e.i(700005);function G(e){var t=e.redirectUrl,r=B.default.get("shouldUseMobileAppAuthComplete");return"string"!=typeof r||r.length<1?t:"/authComplete?redirectUrl=".concat(encodeURI(t))}e.s(["default",()=>G],364839);var N=e.i(294426),z=e.i(501005),Z=e.i(441329),K=e.i(612372),q=e.i(887877),Q=e.i(782514),Y=e.i(616278),X=e.i(940745),$=(0,o.cssRecord)({form:[s.rcss.colWithGap(8),s.rcss.width("100%")],secondaryAction:[s.rcss.width("100%"),s.rcss.textAlign.center,s.brandStyles.typography.caption.medium,s.rcss.color.brandAccentStrongest,{":hover":{color:_.tokens.brandAccentStronger,backgroundColor:"transparent"}}]});function J(e){var t=e.onSubmit,r=e.trackSource,n=e.footer,a=e.emailField,o=(0,I._)((0,A.useState)(!1),2),s=o[0],c=o[1],l=(0,I._)((0,A.useState)(!1),2),d=l[0],f=l[1],g=(0,I._)((0,A.useState)(""),2),v=g[0],w=g[1],y=(0,R.useRouter)(),x=(0,Q.useTrackingHierarchy)().surface,_=function(e){var n=e.emailOrUsername,i=e.password;return(0,T._)(function(){var e,a,o,s,u;return(0,L._)(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,(0,N.getRecaptchaToken)({action:"signInWithPassword"})];case 1:return e=l.sent(),[3,3];case 2:return l.sent(),[2,{fallthrough:!0}];case 3:return[4,(0,H.signInWithPassword)({emailOrUsername:n,rawPassword:i,clientType:"CLIENT_TYPE_WEB",recaptchaToken:e})];case 4:if("error"===(a=l.sent()).type)return f(!1),c(!1),t({error:a.message}),[2,{fallthrough:!1}];return[4,(0,N.setUserFromApiResponse)({response:a.session})];case 5:if("error"===(o=l.sent()).type)return f(!1),c(!1),t({error:o.message}),[2,{fallthrough:!1}];return[4,(0,H.setCookie)(o.user,{source:r})];case 6:return"success"===(s=l.sent()).type?(c(!1),f(!0),u=s.redirectUrl?G({redirectUrl:s.redirectUrl}):void 0,(0,W.saveLastLoginMethod)("password"),t({user:{id:s.userId,postLoginRedirectUrl:u},isLogin:!0})):(f(!1),c(!1),t({error:s.message,reauth:s.reauth})),[2,{fallthrough:!1}]}})})()};return(0,i.jsxs)(q.Form,{onSubmit:function(e){return(0,T._)(function(){return(0,L._)(this,function(r){switch(r.label){case 0:if(e.preventDefault(),s)return[2];return(0,p.track)(m.events.AUTH_FORM_SUBMITTED,{mode:"login",method:"password",surface:x}),c(!0),[4,_({emailOrUsername:a.value,password:v})];case 1:if(!r.sent().fallthrough)return[3,3];return[4,(0,T._)(function(){var e,r,n,i,o;return(0,L._)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,(0,z.default)(void 0,function(){(0,p.track)(m.events.AUTH_FORM_CAPTCHA_TRIGGERED,{authenticationType:"login"})})];case 1:return e=s.sent(),[3,3];case 2:return r=s.sent(),M.captureException(r,function(e){return e.setTag("bonsai",(0,Z.isInNativeMobileAuthFlow)(y))}),t({error:"Something went wrong trying to submit. Please try again."}),c(!1),[2];case 3:return[4,function(e){return(0,T._)(function(e){var t,r,n,i,a,o,s,c,u,l;return(0,L._)(this,function(d){switch(d.label){case 0:t=e.username,r=e.password,n=e.teacher,i=e.hCaptchaResponse,a=e.hCaptchaSiteKey,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,(0,D.postJson)("/login",(0,U._)((0,h._)({username:t,password:r},n?{teacher:n}:{}),{hCaptchaResponse:i,hCaptchaSiteKey:a}))];case 2:return o=d.sent(),[3,4];case 3:return(null==(u=(l=s=d.sent()).extras)||null==(c=u.responseData)?void 0:c.status)===401&&(s.status=l.extras.responseData.status),[2,{isLoggedIn:!1,error:s}];case 4:return O(o),[2,o]}})}).apply(this,arguments)}({username:a.value,password:v,hCaptchaResponse:e,hCaptchaSiteKey:z.HCAPTCHA_SITE_KEY})];case 4:if("error"in(n=s.sent())){if(i=n.error,c(!1),t({error:i.message||"Something went wrong"}),i.status&&i.status>=500)throw i;return[2]}return o=n.postLoginRedirectUrl?G({redirectUrl:n.postLoginRedirectUrl}):void 0,(0,W.saveLastLoginMethod)("password"),t({user:{id:n.id,postLoginRedirectUrl:o},isLogin:!0}),[2]}})})()];case 2:r.sent(),r.label=3;case 3:return[2]}})})()},css:$.form,children:[(0,i.jsx)(V.default,{type:"text",label:"Email or username",name:"username",value:a.value,onChange:a.setValue,autoComplete:"email"}),(0,i.jsx)(V.default,{type:"password",label:"Password",name:"password",value:v,onChange:w}),(0,i.jsxs)(u.View,{gap:n?8:24,children:[(0,i.jsx)(K.default,{type:"submit",variant:"primary",stretch:!0,loading:s,disabled:!v||!a.value||d,iconRight:s?(0,i.jsx)(X.default,{}):d?(0,i.jsx)(Y.default,{}):void 0,dataCy:"log-in-btn",text:"Log In"}),n||(0,i.jsx)(K.default,{variant:"clean",css:$.secondaryAction,onClick:function(){window.location.href="/forgot"},text:"Forgot password?"}),!1]})]})}e.s(["default",()=>J],285030);var ee=e.i(664152),et=((t={})[t.Loaded=0]="Loaded",t[t.Skipped=1]="Skipped",t[t.Failed=2]="Failed",t),er="https://elements.stytch.com/telemetry.js";function en(){return"true"===E.default.env.IS_CYPRESS_AUTOMATED_TEST}var ei=window.location.pathname;function ea(e){return(0,T._)(function(){var t;return(0,L._)(this,function(n){switch(n.label){case 0:var i;return n.trys.push([0,2,,3]),[4,Promise.race([(i=e,(0,T._)(function(){var e,t;return(0,L._)(this,function(n){switch(n.label){case 0:return[4,(0,T._)(function(){return(0,L._)(this,function(e){switch(e.label){case 0:if(en())return[2,1];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,r];case 2:return e.sent(),[2,0];case 3:return e.sent(),[2,2];case 4:return[2]}})})()];case 1:if(n.sent()!==et.Loaded)return[2];return e=window.location.host.startsWith("staging")?"public-token-test-f16841f0-b961-4442-93b3-751c8cfe0d8b":"public-token-live-88edc789-05cb-440a-a321-dab99f475524",[4,window.GetTelemetryID(e,"https://telemetry.replit.com/submit")];case 2:if(!(t=n.sent())||""===t.trim())return ee.logger.error("Client received an empty telemetryId",{userId:i}),[2];return ee.logger.info("Successfully received the telemetryId from Stytch ".concat(t),{telemetryId:t,userId:i}),[4,fetch("/telemetry",{method:"GET",headers:{"Content-Type":"application/json","telemetry-id":t,"user-id":i}})];case 3:return n.sent(),[2]}})})()),new Promise(function(e,t){return setTimeout(function(){return t(Error("Could not process device fingerprint in 4s"))},4e3)})])];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),ee.logger.error("Error fetching device fingerprint data ".concat(t.message)),[2,"N/A"];case 3:return[2]}})})()}!en()&&["/signup","/login"].some(function(e){return ei.startsWith(e)})&&(0,T._)(function(){var e,t,n;return(0,L._)(this,function(i){return e=performance.now(),(t=document.createElement("script")).src=er,t.async=!0,n=new Promise(function(e){setTimeout(function(){ee.logger.error("Timeout while loading Stytch script"),e()},4e3)}),r=Promise.race([new Promise(function(r){t.onload=function(){var t=performance.now();ee.logger.time("time to load Stytch script",t-e),r()},t.onerror=function(){ee.logger.error("Error loading Stytch script at ".concat(er)),r()},document.head.appendChild(t)}),n]),[2]})})().catch(function(e){return M.captureException(e)}),e.s(["callDeviceFingerprinting",()=>ea],484059)},127060,e=>{"use strict";var t=e.i(878420),r={signup:"68d1cdc1ca209329fe9a53f8",payment:"68d1cdeb7c0bfc7f9cc1ebe0"};function n(e,n){var i=r[e];i?function(e,r,n){if(!r)return console.warn("Invalid metric ID for event type: ".concat(e));window.CFQ=window.CFQ||[];var i={emit:e,payload:(0,t._)({metricId:r},n?{metadata:n}:{})};window.CFQ.push(i)}("conversion",i,n):console.warn("Unknown conversion metric: ".concat(e))}e.s(["sendCoframeConversionEvent",()=>n])},108369,832970,683743,149797,661922,961418,969761,e=>{"use strict";var t,r=e.i(878420),n=e.i(530658),i=e.i(276385),a=e.i(389959),o=e.i(738623),s=e.i(441648),c=e.i(751010),u=e.i(285030),l=e.i(273325),d=e.i(294426);e.i(439725);var h=e.i(297083),f=e.i(817556),p=e.i(414248),m=e.i(278598),g=e.i(364839),v=e.i(322823),w=e.i(978486),y=e.i(484059),x=e.i(858248),_=e.i(709485),b=e.i(746788),C=e.i(446530),k=e.i(613355),S=e.i(612372),j=e.i(140487),P=e.i(625484),E=e.i(127060),T=e.i(782514),I=e.i(616278),L=e.i(940745);function R(e){return e.error?[{message:e.error.message,state:"error"}]:e.warning?[{message:e.warning.message,state:"warning"}]:e.value?e.isValid?[{message:"",state:"success"}]:e.touched?[{message:"",state:"loading"}]:void 0:void 0}var A=(0,C.cssRecord)({form:[k.rcss.width("100%")]});function M(e){var t=e.onSubmit,r=e.tracking,s=void 0===r?{from:"explicit"}:r,c=e.emailField,u=(0,n._)((0,a.useState)(!1),2),l=u[0],C=u[1],k=(0,n._)((0,a.useState)(!1),2),j=k[0],M=k[1],U=(0,T.useTrackingHierarchy)().surface,F=(0,v.useFormField)("",b.default.password),D=(0,w.useGetAgentQueryPrompt)().directQueryPrompt,O=!c.value;return(0,i.jsx)("form",{onSubmit:function(e){return(0,h._)(function(){var r,n,i,a,u;return(0,f._)(this,function(l){switch(l.label){case 0:if(e.preventDefault(),(0,x.track)(_.events.AUTH_FORM_SUBMITTED,{mode:"signup",method:"password",surface:U}),C(!0),c.isValid)return[3,2];return[4,c.validate()];case 1:if(l.sent())return C(!1),[2];l.label=2;case 2:if(!F.isValid&&F.validate())return C(!1),[2];l.label=3;case 3:return l.trys.push([3,5,,6]),[4,(0,d.getRecaptchaToken)({action:"signUpPassword"})];case 4:return r=l.sent(),[3,6];case 5:return l.sent(),t({error:"We failed to evaluate your browser integrity. Please refresh the page and try again. If the problem persists, check your browser and network configuration."}),[2];case 6:return[4,(0,o.signUpWithPassword)({email:c.value,rawPassword:F.value,clientType:"CLIENT_TYPE_WEB",recaptchaToken:r,source:s.from,referrerId:s.referrerId,aiPrompt:D||void 0})];case 7:if("error"===(n=l.sent()).type)return M(!1),C(!1),t({error:n.message}),[2];return[4,(0,d.setUserFromApiResponse)({response:n.session})];case 8:if("error"===(i=l.sent()).type)return M(!1),C(!1),t({error:i.message}),[2];return[4,(0,o.setCookie)(i.user,{source:s.from,referrerId:s.referrerId})];case 9:if("success"===(a=l.sent()).type)return[3,10];return[3,12];case 10:return C(!1),M(!0),[4,(0,y.callDeviceFingerprinting)(a.userId.toString())];case 11:return l.sent(),u=a.redirectUrl?(0,g.default)({redirectUrl:a.redirectUrl}):void 0,(0,E.sendCoframeConversionEvent)("signup"),(0,m.saveLastLoginMethod)("password"),t({user:{id:a.userId,postLoginRedirectUrl:u},isLogin:!1}),[3,13];case 12:return M(!1),C(!1),t({error:a.message,reauth:a.reauth}),[3,13];case 13:return[2]}})})()},css:A.form,children:(0,i.jsxs)(P.View,{css:A.form,gap:8,children:[(0,i.jsx)(p.default,{type:"text",name:"email",label:"Email",onBlur:c.handleBlur,validationResults:R(c),onChange:c.setValue,value:c.value,autoComplete:"email"}),(0,i.jsx)(p.default,{type:"password",label:"Password",name:"password",onBlur:F.handleBlur,validationResults:R(F),onChange:F.setValue,value:F.value}),(0,i.jsx)(P.View,{gap:4,children:(0,i.jsx)(S.default,{type:"submit",variant:"primary",stretch:!0,loading:l,disabled:!F.value||O||j,iconLeft:l?(0,i.jsx)(L.default,{}):j?(0,i.jsx)(I.default,{}):void 0,dataCy:"signup-create-account",text:"Create Account"})}),null]})})}e.s(["default",()=>M],832970);var U=e.i(721281),F=e.i(886513),D=e.i(694387),O=e.i(173703),H=e.i(624782),V=e.i(848295),W=e.i(606265),B=e.i(523579),G=e.i(472859),N=e.i(690472),z=(0,C.cssRecord)({ssoButton:[k.rcss.backgroundColor.brandBackgroundDarker,k.rcss.minHeight(40)],ssoButtonWrapper:[k.rcss.position.relative,k.rcss.width("100%")],lastUsedPill:[k.rcss.position.absolute,{top:0,right:0,transform:"translate(0, -50%)",pointerEvents:"none"}]}),Z=(t={},(0,U._)(t,D.AppleProviderId,V.default),(0,U._)(t,D.FacebookProviderId,W.default),(0,U._)(t,D.GitHubProviderId,B.default),(0,U._)(t,D.GoogleProviderId,G.default),(0,U._)(t,D.XProviderId,N.default),t),K=function(e){var t=Z[e.id];return t?(0,i.jsx)(t,{size:20}):null},q=function(e){var t=e.onClick,n=e.iconLeft,a=e.text,o=e.customCss,s=e.showLastUsed,c=e.loading,u=(0,F._)(e,["onClick","iconLeft","text","customCss","showLastUsed","loading"]),l=o?[z.ssoButton,o]:z.ssoButton,d=c?(0,i.jsx)(L.default,{size:20}):n;if((0,O.useIsShadesSurfaceChild)()){u.children,u.size;var h=(0,F._)(u,["children","size"]);return(0,i.jsxs)(P.View,{css:z.ssoButtonWrapper,children:[(0,i.jsx)(j.Button,(0,r._)({style:{minHeight:40},variant:"default",onClick:t,stretch:!0,iconLeft:d,text:a,loading:c},h)),s?(0,i.jsx)(H.Pill,{text:"Last used",variant:"filled",compact:!0,colorway:"grey",css:z.lastUsedPill}):null]})}return(0,i.jsxs)(P.View,{css:z.ssoButtonWrapper,children:[(0,i.jsx)(S.default,(0,r._)({css:l,variant:"secondary",onClick:t,stretch:!0,iconLeft:d,text:a,loading:c},u)),s?(0,i.jsx)(H.Pill,{text:"Last used",variant:"filled",compact:!0,css:z.lastUsedPill}):null]})};e.s(["SsoButton",()=>q,"SsoIcon",()=>K],683743);var Q=e.i(346715),Y=e.i(187505),X=e.i(355744),$=(0,C.cssRecord)({minimizedSection:[k.rcss.gap(8)],showMoreButton:[k.rcss.py(6)]}),J=[D.GoogleProviderId,D.GitHubProviderId,D.XProviderId],ee=(0,Q._)(J).concat([D.FacebookProviderId,D.AppleProviderId]);function et(e){var t=e.mode,r=e.onRedirectingChange,o=e.onSubmit,s=e.onEmailClick,c=e.replitAuthProps,u=e.additionalOptions,l=(0,Y.useTrackClick)().trackClick,p=(0,n._)((0,a.useState)(!1),2),m=p[0],g=p[1],v=(0,a.useMemo)(function(){var e;return null!=(e=null==c?void 0:c.minimizedProviders)?e:[]},[c]),w=v.includes("email"),y="login"===t?ee:J,b=(0,a.useMemo)(function(){var e=function(e){return!!c&&"facebook.com"===e},t=y.filter(function(t){return v.includes(t.replace(".com",""))&&!e(t)}),r=y.filter(function(r){return!t.includes(r)&&!e(r)});return 0===r.length&&t.length>0&&(r.push.apply(r,(0,Q._)(t)),t.length=0),{primaryProviders:r,minimizedProvidersList:t}},[y,v,c]),C=b.primaryProviders,k=b.minimizedProvidersList;return(0,i.jsxs)(i.Fragment,{children:[(0,Q._)(C).concat((0,Q._)(m?k:[])).map(function(e){return(0,i.jsx)(q,{text:"Continue with ".concat((0,D.getOAuthProviderName)(e)),iconLeft:(0,i.jsx)(K,{id:e}),customCss:null==c?void 0:c.ssoButtonCss,onClick:function(){if("facebook.com"===e){window.confirm('Facebook login is no longer supported. Click "Ok" to continue to password reset using the connected email address.')&&(window.location.href="/forgot");return}(0,h._)(function(){var n;return(0,f._)(this,function(i){switch(i.label){case 0:return n=e.replace(".com",""),l({productArea:"auth",target:"continue_with_".concat(n,"_button")}),(0,x.track)(_.events.AUTH_FORM_SSO_REQUESTED,{provider:n,authenticationType:t,isTeacher:"false"}),[4,r(!0)];case 1:return i.sent(),[4,(0,d.signInWithProvider)({tenantId:void 0,provider:{type:"oauth",providerId:e}})];case 2:return"error"===i.sent().type&&o({error:d.signInWithProviderErrorMessage}),[2]}})})()}},e)}),c?(0,i.jsx)(q,{onClick:s,iconLeft:(0,i.jsx)(X.default,{}),text:"Continue with email",customCss:null==c?void 0:c.ssoButtonCss}):null,u,(k.length>0||w)&&!m&&(0,i.jsx)(P.View,{css:$.minimizedSection,children:(0,i.jsx)(j.Button,{onClick:function(){l({productArea:"auth",target:"more_options_button"}),g(!0)},css:$.showMoreButton,variant:"underlinedOnHover",colorway:"grey",stretch:!0,text:"More options"})})]})}e.s(["SsoOptionsList",()=>et,"oauthLoginProviders",()=>ee,"oauthSignupProviders",()=>J],149797);var er=e.i(252890),en=e.i(480028),ei=e.i(988676),ea=e.i(960178),eo=e.i(216373),es=e.i(245150),ec=(0,C.cssRecord)({mainControls:[k.rcss.width("100%"),k.rcss.px(12)],ssoContainer:[k.rcss.width("100%"),k.rcss.colWithGap(8)],samlLoginForm:[k.rcss.width("100%"),k.rcss.pb(32)],orText:[k.rcss.fontSize(en.tokens.fontSizeSmall)]});function eu(e){var t=e.mode,r=e.onRedirectingChange,n=e.onModeChange,a=e.onSubmit,o=e.tracking,c=e.seededEmail,u=e.isModal;return(0,i.jsxs)(i.Fragment,{children:["login"===t?(0,i.jsx)(el,{onRedirectingChange:r,onSubmit:a,tracking:o}):(0,i.jsx)(ed,{onRedirectingChange:r,onSubmit:a,seededEmail:c,tracking:o}),(0,i.jsx)(s.default,{mode:t,isModal:u,onModeChange:n})]})}var el=function(e){var t=e.onRedirectingChange,r=e.onSubmit,o=e.tracking,s=e.replitAuthProps,c=(0,n._)((0,a.useState)("password"),2),d=c[0],h=c[1],f=(0,v.useFormField)("",b.default.isValidEmail);return(0,i.jsxs)(i.Fragment,{children:["password"===d?(0,i.jsx)(u.default,{onSubmit:r,trackSource:o.from,emailField:f}):null,"saml"===d?(0,i.jsx)(P.View,{css:ec.samlLoginForm,children:(0,i.jsx)(l.default,{onSubmit:r,mode:"login",onRedirectingChange:t,seededEmail:f.value})}):null,(0,i.jsxs)(P.View,{css:ec.ssoContainer,children:[(0,i.jsx)(eh,{emailLoginType:d,setEmailLoginType:h}),(0,i.jsx)(et,{mode:"login",onRedirectingChange:t,onSubmit:r,replitAuthProps:s})]})]})},ed=function(e){var t=e.onRedirectingChange,r=e.onSubmit,o=e.seededEmail,s=e.tracking,c=(0,n._)((0,a.useState)("initial"),2),u=c[0],d=c[1],h=(0,v.useFormField)(o||"",b.default.email);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(P.View,{css:ec.ssoContainer,align:"center",children:[(0,i.jsx)(et,{mode:"signup",onRedirectingChange:t,onSubmit:r}),"initial"===u?(0,i.jsx)(ea.Text,{css:ec.orText,children:"Or"}):(0,i.jsx)(ei.DividerH,{}),(0,i.jsx)(eh,{emailLoginType:u,setEmailLoginType:d})]}),"password"===u?(0,i.jsx)(M,{onSubmit:r,seededEmail:o,tracking:s,emailField:h}):null,"saml"===u?(0,i.jsx)(l.default,{onSubmit:r,mode:"signup",onRedirectingChange:t,seededEmail:h.value}):null]})},eh=function(e){var t=e.emailLoginType,r=e.setEmailLoginType,n=(0,Y.useTrackClick)().trackClick;return"password"===t?(0,i.jsx)(q,{onClick:function(){n({productArea:"auth",target:"switch_to_sso_button"}),r("saml")},iconLeft:(0,i.jsx)(eo.default,{size:20}),text:"Use SSO login"}):"saml"===t?(0,i.jsx)(q,{onClick:function(){n({productArea:"auth",target:"switch_to_email_button"}),r("password")},iconLeft:(0,i.jsx)(es.default,{size:20}),text:"Use email login"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(S.default,{dataCy:"auth-form-reveal-email",onClick:function(){n({productArea:"auth",target:"email_and_password_button"}),r("password")},iconLeft:(0,i.jsx)(X.default,{size:20}),text:"Email & password",variant:"tertiary",stretch:!0}),(0,i.jsx)(S.default,{onClick:function(){n({productArea:"auth",target:"sso_button"}),r("saml")},iconLeft:(0,i.jsx)(eo.default,{size:20}),text:"Single sign-on (SSO)",variant:"tertiary",stretch:!0})]})};e.s(["default",0,function(e){var t=e.children,n=e.customHeader,s=e.isModal,u=e.mode,l=e.onRedirectingChange,h=e.onSubmit,f=e.initialTenantId,p=e.tracking,m=e.privateDeployment,g=e.privateDevDomain,v=e.renderForm;return(0,a.useEffect)(function(){var e,t,r=s?"modal":"auth-page";"login"===u?(0,er.trackLoginView)({from:p.from,location:null!=(e=p.location)?e:"",authFormPlacement:r}):(0,er.trackSignupView)({from:p.from,location:null!=(t=p.location)?t:"",authFormPlacement:r})},[u,s,p.from,p.location]),(0,a.useEffect)(function(){void 0!==f&&(l(!0),(0,o.getAuthTenant)({type:"tenantId",tenantId:f}).then(function(e){"error"===e.type?h({error:e.message}):(0,d.signInWithProvider)({tenantId:e.tenantId,provider:{type:"saml",providerId:e.samlProviderId}}).then(function(e){if("error"===e.type)return void h({error:d.signInWithProviderErrorMessage})})}))},[f,l,h]),(0,i.jsxs)(i.Fragment,{children:[n?null:(0,i.jsx)(c.default,{mode:u,privateDeployment:m,privateDevDomain:g}),(0,i.jsxs)(P.View,{css:ec.mainControls,gap:12,children:[t,v?v(e):(0,i.jsx)(eu,(0,r._)({},e))]})]})}],108369);var ef=(0,C.cssRecord)({container:[(0,U._)({margin:"auto"},k.media.max("mobileMax"),[k.rcss.pt(96)]),k.rcss.colWithGap(32)],button:[k.rcss.color.foregroundDimmest]});e.s(["default",0,function(e){var t=e.email,r=e.providerId,n=e.onCancel,a=(0,D.getOAuthProviderName)(r);return a||(a="this provider",r===D.PasswordProviderId&&(a="your password")),(0,i.jsxs)(P.View,{css:ef.container,pt:128,children:[(0,i.jsx)(ea.Header,{variant:"headerDefault",level:1,children:"Verification required"}),(0,i.jsxs)(P.View,{gap:16,children:[(0,i.jsxs)(ea.Text,{variant:"subheadDefault",multiline:!0,children:["In order to log in with ",a,", you must verify"," ",t||"your email","."]}),(0,i.jsx)(ea.Text,{multiline:!0,children:"We've sent an email with a verification link. If you don't see it, check your spam folder, or contact support for assistance."})]}),(0,i.jsx)(j.Button,{size:"big",variant:"outlined",css:ef.button,onClick:function(){return n()},text:"Back to log in"})]})}],661922);var ep=e.i(931849),em=e.i(442121);let eg=function(){return{href:"/home",as:"/~"}};e.s(["default",0,eg],961418);var ev=e.i(221586),ew="/agentVerify2?prompt=storage2&skipOnboarding=true";function ey(e){var t=e.enabled,r=(0,ep.useRouter)(),i=(0,em.useApolloClient)(),s=(0,n._)((0,a.useState)(!1),2),c=s[0],u=s[1],l=(0,n._)((0,a.useState)(null),2),p=l[0],g=l[1],v=(0,n._)((0,a.useState)(null),2),w=v[0],y=v[1],x=(0,a.useRef)(!1),_=(0,a.useCallback)(function(e){u(!0),y("SAML SSO required. Redirecting to the SSO login page..."),setTimeout(function(){return(0,h._)(function(){return(0,f._)(this,function(t){switch(t.label){case 0:return[4,(0,d.signInWithProvider)({tenantId:e.tenantId,provider:{type:"saml",providerId:e.samlProviderId}})];case 1:return"error"===t.sent().type&&(g("Something went wrong. Please try logging in again."),u(!1),y(null)),[2]}})})()},3e3)},[]);return(0,a.useEffect)(function(){t&&!x.current&&(x.current=!0,(0,d.handlePotentialOAuthRedirect)().then(function(e){return(0,h._)(function(){var t,n,a,s,c,l;return(0,f._)(this,function(h){switch(h.label){case 0:if("success"!==e.type)return[3,4];if(null===e.result)return u(!1),[2];return u(!0),[4,(0,o.setCookie)(e.result.user,{source:r.pathname})];case 1:if("success"===(t=h.sent()).type)return(n=(0,m.getPendingLoginMethod)())?((0,m.saveLastLoginMethod)(n),(0,m.clearPendingLoginMethod)()):(s=null==(a=e.result.user.providerData[0])?void 0:a.providerId)&&(0,m.isValidLoginMethod)(s)&&(0,m.saveLastLoginMethod)(s),(0,ev.getLoggedOutExperiencePrompt)()?window.location.href=ew:window.location.href=eg().as,[2];if("error"!==t.type)return[3,3];if(t.reauth)return(l=null==(c=e.result.user.providerData[0])?void 0:c.providerId)&&(0,m.isValidLoginMethod)(l)&&(0,m.savePendingLoginMethod)(l),_(t.reauth),[2];return g(t.message),u(!1),[4,(0,d.signOut)(i)];case 2:h.sent(),h.label=3;case 3:return[2];case 4:return u(!1),g("Something went wrong. Please try again."),[2]}})})()}).catch(function(){u(!1),g("Something went wrong. Please try again.")}))},[t,i,r.pathname,_]),{isRedirecting:c,error:p,samlRedirectMessage:w,authWithSamlTenant:_,setIsRedirecting:u,setError:g}}e.s(["LOGGED_OUT_EXPERIENCE_REDIRECT_URL",()=>ew,"useOAuthRedirectHandler",()=>ey],969761)},68278,e=>{"use strict";var t=e.i(297083),r=e.i(530658),n=e.i(817556),i=e.i(389959),a=e.i(906368),o=e.i(878420),s=e.i(569384),c=e.i(973245),u=e.i(951262);function l(){var e=(0,s._)(["\n  mutation SaveUserAuth($input: SaveUserAuthInput!) {\n    saveUserAuth(input: $input) {\n      ... on CurrentUser {\n        id\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on TooManyRequestsError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n"]);return l=function(){return e},e}var d={},h=(0,c.gql)(l()),f=e.i(294426),p={type:"error",message:"Something unexpected happened, please try again."};function m(){var e,s=(0,r._)((e=(0,o._)({},d,void 0),u.useMutation(h,e)),1)[0];return(0,i.useCallback)(function(e){var r=e.userCredential,i=e.oauthProviderId,o=e.scopes;return(0,t._)(function(){var e,t;return(0,n._)(this,function(n){switch(n.label){case 0:if(!(e=(0,f.getAccessTokenFromCredential)(i,r))||!e.accessToken)return a.captureException(Error("Failed to extract token from ".concat(i," credential"))),[2,p];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,s({variables:{input:{provider:i,token:e.accessToken,scopes:o}}})];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),a.captureException(Error("Failed to save ".concat(i," Auth state"))),[2,p];case 4:if(!t.data)return a.captureException(Error("Unexpected error trying to save ".concat(i," Auth state"))),[2,p];if("CurrentUser"!==t.data.saveUserAuth.__typename)return[2,{type:"error",message:t.data.saveUserAuth.message}];return[2,{type:"success"}]}})})()},[s])}e.s(["useSaveUserAuth",()=>m],68278)},192479,e=>{"use strict";var t=e.i(297083),r=e.i(530658),n=e.i(346715),i=e.i(817556),a=e.i(276385),o=e.i(931849),s=e.i(389959),c=e.i(906368),u=e.i(442121),l=e.i(569910),d=e.i(694387),h=e.i(738623),f=e.i(108369),p=e.i(751010),m=e.i(661922),g=e.i(364839),v=e.i(294426),w=e.i(252890),y=e.i(969761),x=e.i(68278),_=e.i(484059),b=e.i(221586),C=e.i(956111),k=e.i(446530),S=e.i(613355),j=e.i(624782),P=e.i(396776),E=e.i(960178),T=e.i(625484),I=e.i(782514),L=e.i(940745),R=[S.rcss.width(470),S.rcss.maxWidth("100%"),S.rcss.colWithGap(32),S.rcss.align.center,{margin:"auto","& *":[S.brandFontDefault]}],A=(0,k.cssRecord)({error:[S.rcss.mb(16)],container:(0,n._)(R).concat([S.rcss.p(24)]),containerModal:(0,n._)(R),loadingText:[S.rcss.fontSize(16),S.rcss.flex.shrink(1)]}),M="redirecting";function U(e){var n=e.customHeader,k=e.isModal,S=e.mode,R=e.onModeChange,U=e.onSuccess,F=e.seededEmail,D=e.initialTenantId,O=e.tracking,H=e.privateDeployment,V=e.privateDevDomain,W=e.renderForm,B=e.replitAuthProps,G=e.signupCoupon,N=(0,u.useApolloClient)(),z=(0,o.useRouter)(),Z=(0,C.useQueryParam)(M,"boolean"),K=(0,r._)((0,s.useState)(Z?{type:"redirecting"}:{type:"form"}),2),q=K[0],Q=K[1],Y=(0,r._)((0,s.useState)(),2),X=Y[0],$=Y[1],J=(0,s.useCallback)(function(e){return(0,t._)(function(){return(0,i._)(this,function(t){switch(t.label){case 0:if(!e)return[3,2];return Q({type:"redirecting"}),[4,(0,C.updatePathWithQueryParams)({router:z,params:[{mode:"add",key:M,value:"1"}]})];case 1:return t.sent(),[3,3];case 2:Q({type:"form"}),(0,C.updatePathWithQueryParams)({router:z,params:[{mode:"delete",key:M}]}),t.label=3;case 3:return[2]}})})()},[z]),ee=function(e){Q({type:"redirecting",message:"SAML SSO required. Redirecting to the SSO login page..."}),setTimeout(function(){return(0,t._)(function(){return(0,i._)(this,function(t){switch(t.label){case 0:return[4,(0,v.signInWithProvider)({tenantId:e.tenantId,provider:{type:"saml",providerId:e.samlProviderId}})];case 1:return"error"===t.sent().type&&($({message:"Something went wrong. Please try logging in again.",colorway:"negative"}),Q({type:"form"})),[2]}})})()},3e3)},et=(0,s.useCallback)(function(e){return(0,t._)(function(){var t,r;return(0,i._)(this,function(n){switch(n.label){case 0:if(!("error"in e&&e.error))return[3,2];if(e.reauth)return ee(e.reauth),[2];return $({message:e.error,colorway:null!=(t=e.colorway)?t:"negative"}),[4,J(!1)];case 1:return n.sent(),[2];case 2:if(!("user"in e&&e.user))throw Error("Expected error or user object");if(null!=(r=e.user.postLoginRedirectUrl)&&r.length>0)return window.location.href=r,[2];return e.isLogin||(0,w.attributeAcquisition)(e.user.id.toString()),U(e),[2]}})})()},[J,U,$]),er=(0,x.useSaveUserAuth)();return(0,s.useEffect)(function(){(0,v.handlePotentialOAuthRedirect)().then(function(e){return(0,t._)(function(){var t,r,n,a;return(0,i._)(this,function(i){switch(i.label){case 0:if("success"!==e.type)return[3,13];if(null===e.result)return"redirecting"===q.type&&J(!1),[2];return"redirecting"!==q.type&&J(!0),[4,(0,h.setCookie)(e.result.user,{source:O.from,referrerId:O.referrerId})];case 1:switch((t=i.sent()).type){case"success":return[3,2];case"needs_email_verification":return[3,7];case"error":return[3,9]}return[3,11];case 2:if((null==(r=e.result)?void 0:r.providerId)!==d.GitHubProviderId)return[3,4];return[4,er({userCredential:e.result,oauthProviderId:d.GitHubProviderId,scopes:[]})];case 3:i.sent(),i.label=4;case 4:if((0,b.getLoggedOutExperiencePrompt)())return window.location.href=y.LOGGED_OUT_EXPERIENCE_REDIRECT_URL,[2];if(n=t.redirectUrl?(0,g.default)({redirectUrl:t.redirectUrl}):void 0)return window.location.href=n,[2];if(!(t.isNewUser&&e.result.providerId===d.GoogleProviderId))return[3,6];return[4,(0,_.callDeviceFingerprinting)(t.userId.toString())];case 5:i.sent(),i.label=6;case 6:return U({user:{id:t.userId},isLogin:!t.isNewUser}),[3,12];case 7:return J(!1),Q({type:"needs-email-verification",email:e.result.user.email,providerId:e.result.providerId}),[4,(0,v.signOut)(N)];case 8:case 10:return i.sent(),[3,12];case 9:if(t.reauth)return ee(t.reauth),[2];return J(!1),$({message:t.message,colorway:"negative"}),[4,(0,v.signOut)(N)];case 11:(0,l.default)(t),i.label=12;case 12:return[2];case 13:switch(J(!1),e.treatment){case"requires-provider-link":return[3,14];case"credential-conflict":return[3,15];case"email-conflict":return[3,16];case"forbidden-operation":return[3,17];case"user-needs-email":return[3,18];case"timeout":case"unhandled":case"unknown":return[3,20]}return[3,21];case 14:return $({message:"Please log in to ".concat(e.context.email," with another method and link ").concat((0,d.getOAuthProviderName)(e.context.credential.providerId)," from the account page."),colorway:"negative"}),[3,22];case 15:return $({message:"This provider cannot be used, please try another method.",colorway:"negative"}),[3,22];case 16:return $({message:"This email cannot be used, please try another method.",colorway:"negative"}),[3,22];case 17:return $({message:"That action is not permitted",colorway:"negative"}),[3,22];case 18:return a=(0,d.getOAuthProviderName)(e.credential.providerId),$({message:"Your ".concat(a," account is missing an email address. To use it for Replit, you'll need to ").concat("login"===S?"log in":"sign up"," with another method and connect ").concat(a," from the account page."),colorway:"negative"}),[4,(0,v.signOut)(N)];case 19:return i.sent(),[3,22];case 20:return $({message:"Something unexpected happened, please try again.",colorway:"negative"}),[3,22];case 21:(0,l.default)(e),i.label=22;case 22:return[2]}})})()}).catch(function(e){return c.captureException(e)})},[]),(0,a.jsx)(T.View,{css:k?A.containerModal:A.container,children:"form"===q.type?(0,a.jsx)(I.TrackingHierarchyProvider,{hierarchy:{page:"auth_page",view:S},children:(0,a.jsxs)(f.default,{customHeader:n||!!G,isModal:k,mode:S,onModeChange:function(e){$(void 0),R(e)},onRedirectingChange:J,onSubmit:et,seededEmail:F,initialTenantId:D,tracking:O,privateDeployment:H,privateDevDomain:V,renderForm:W,replitAuthProps:B,children:[X?(0,a.jsx)(P.StatusBanner,{css:A.error,colorway:X.colorway,text:X.message}):null,G?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(T.View,{gap:16,align:"center",pb:8,children:[(0,a.jsxs)(T.View,{row:!0,gap:8,align:"center",justify:"center",children:[(0,a.jsx)("div",{children:"Using code"}),(0,a.jsx)(j.Pill,{colorway:"green",text:G.toUpperCase()})]}),(0,a.jsx)(p.default,{mode:"signup"})]})}):null]})}):"needs-email-verification"===q.type?(0,a.jsx)(m.default,{email:q.email,providerId:q.providerId,onCancel:function(){return Q({type:"form"})}}):(0,a.jsxs)(T.View,{gap:8,align:"center",children:[(0,a.jsx)(L.default,{size:32}),q.message?(0,a.jsx)(E.Text,{multiline:!0,css:A.loadingText,children:q.message}):null]})})}e.s(["default",()=>U,"redirectingParam",()=>M])}]);

//# debugId=40d5ea25-9c4b-0030-5f27-81301a0b1740
//# sourceMappingURL=4986e4c3bf09363d.js.map