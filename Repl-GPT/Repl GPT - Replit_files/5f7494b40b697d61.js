;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="f4d66463-c8ed-0e34-eb75-1c1dbfb62ddf")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,170784,122965,534518,e=>{"use strict";var t=e.i(878420),n=e.i(389959),r=e.i(992785);function i(e){var t=e.repl,n=e.currentUser;return{asViewer:e.asViewer,repl:{__typename:"Repl",authorizations:t.authorizations,id:t.id,language:t.language},currentUser:n?{__typename:"CurrentUser",id:n.id,username:n.username,isSubscribed:n.isSubscribed}:void 0}}function a(e){var a=e?i((0,t._)({},e)):null,l=(0,n.useRef)(a);return(0,r.default)(a,l.current)||(l.current=a),l.current}e.s(["createConnectContext",()=>i,"useMemoizedConnectContext",()=>a],170784);var l=e.i(775973),s=e.i(98816);function o(){var e=(0,l.useLDClient)(),t=(0,s.default)(e);return(0,n.useCallback)(function(){var e,n;return!Number.isFinite(n=parseInt(null==(e=t.current)?void 0:e.variation("flag-container-retry-minimum-ms",0),10))||n<0?0:n},[t])}e.s(["useFlaggedRetrier",()=>o],122965);var u=e.i(629712),c=e.i(858248),p=e.i(297083),f=e.i(530658),d=e.i(119468),g=e.i(817556),_=e.i(960933),v=e.i(469546),m=e.i(282453),h={};function y(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.info("ot client dataloss",(0,t._)({case:n,startTime:r.startTime,opsSinceFlush:r.opsSinceFlush,whileReconnecting:r.whileReconnecting,replid:r.replId,filePath:r.filePath},i))}var T={replsList:function(){return"dataLossRepls"},replFiles:function(e){return"dataLossReplFiles".concat(e)},latestOp:function(e,t){return"dataLossLatestOp--".concat(e,"--").concat(t)},latestFlushedOp:function(e,t){return"dataLossLatestFlushed--".concat(e,"--").concat(t)},latestOwnOp:function(e,t){return"dataLosslatestOwnOp--".concat(e,"--").concat(t)},opsSinceFlush:function(e,t){return"dataLossOpsSinceFlush--".concat(e,"--").concat(t)}},I=_.Type.Object({crc32:_.Type.Number(),version:_.Type.Number()});function b(){var e=m.default.get(T.replsList(),_.Type.Array(_.Type.String()));return e||(e=[],m.default.set(T.replsList(),e)),e}function S(e){var t=m.default.get(T.replFiles(e),_.Type.Array(_.Type.String()));return t||(t=[],m.default.set(T.replFiles(e),t)),t}function A(e){var t=S(e),n=!0,r=!1,i=void 0;try{for(var a,l=t[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var s=a.value;"string"==typeof s&&function(e,t){m.default.remove(T.latestOp(e,t)),m.default.remove(T.latestFlushedOp(e,t)),m.default.remove(T.latestOwnOp(e,t));var n=S(e).filter(function(e){return e!==t});m.default.set(T.replFiles(e),n)}(e,s)}}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}m.default.remove(T.replFiles(e));var o=b().filter(function(t){return t!==e});m.default.set(T.replsList(),o)}function E(e){var t,n=e.replId,r=e.filePath;(t=b()).includes(n)||(t.length>20?(A(t[0]),t[0]=n):t.push(n),m.default.set(T.replsList(),t));var i=S(n);i.includes(r)||(i.length>20?(A(i[0]),i[0]=r):i.push(r),m.default.set(T.replFiles(n),i))}function k(e){var t=e.filePath,n=e.replId,r=e.opType,i=e.op;!function(e){var t=e.filePath,n=e.replId,r=e.opType,i=e.logger,a=e.isReconnecting,l=y.bind(null,i),s="".concat(n,"--").concat(t);h[s]||(h[s]={replId:n,filePath:t,timer:null,startTime:null,whileReconnecting:0,opsSinceFlush:0});var o=h[s];if("latestFlushedOp"===r){delete h[s];var u=o.startTime;if(u){var c=Date.now()-u;c>6e4&&l("flush_delay_received",o,{elapsed:c})}var p=o.timer;p&&(clearTimeout(p),o.timer=null)}else{o.opsSinceFlush+=1,a&&(o.whileReconnecting+=1);var f,d=null!=(f=o.startTime)?f:Date.now();o.startTime=d,o.timer||(o.timer=setTimeout(function(){l("flush_delay_timeout",o)},6e4)),150===o.opsSinceFlush?l("flush_delay_small",o):1e3===o.opsSinceFlush&&l("flush_delay_large",o)}}({filePath:t,replId:n,opType:r,logger:e.logger,isReconnecting:e.isReconnecting}),m.default.set(T[r](n,t),i)}var w={};function R(e){return(0,p._)(function(e){var t,n,r,i,a,l,s,o;return(0,g._)(this,function(u){return t=e.filePath,n=e.replId,r=e.serverVersion,i=e.serverContent,a=e.fetchOps,l=e.logger,w[t+n]||(w[t+n]=!0,s=function(e,t){var n={latestOp:null,latestFlushedOp:null,latestOwnOp:null},r=Object.keys(n),i=!0,a=!1,l=void 0;try{for(var s,o=r[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var u=s.value,c=m.default.get(T[u](e,t),I);c&&c&&(void 0===c?"undefined":(0,d._)(c))==="object"&&"number"==typeof c.crc32&&"number"==typeof c.version&&(n[u]=c)}}catch(e){a=!0,l=e}finally{try{i||null==o.return||o.return()}finally{if(a)throw l}}return n}(n,t),o=v.str(i)>>>0,Object.keys(s).forEach(function(e){return(0,p._)(function(){var t,n,i;return(0,g._)(this,function(u){switch(u.label){case 0:if(!(t=s[e]))return[2];if(r<t.version)return l.info("ot client dataloss",{opType:e,case:"server_forgot"}),[2];if(r===t.version)return o!==t.crc32&&l.info("ot client dataloss",{opType:e,case:"crc32_mismatch"}),[2];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,a(t.version,t.version)];case 2:return n=f._.apply(void 0,[u.sent(),1])[0],[3,4];case 3:return i=u.sent(),l.info("ot client dataloss",{opType:e,case:"error_fetching_op",originalError:String(i)}),[2];case 4:if(!n)return l.info("ot client dataloss",{opType:e,case:"op_not_found"}),[2];return n.crc32!==t.crc32&&l.info("ot client dataloss",{opType:e,case:"crc32_mismatch"}),[2]}})})()})),[2]})}).apply(this,arguments)}e.s(["checkAndTrack",()=>R,"ensureTrackedFile",()=>E,"storeOp",()=>k],518656);var P=e.i(518656);function L(e){var t=e.container;return(0,u.default)({container:t,dataloss:P,track:c.track})}e.s(["default",()=>L],534518)},170710,e=>{"use strict";var t=e.i(276385),n=e.i(652455),r=e.i(389959),i=e.i(904851),a=e.i(90659),l=e.i(721281);e.i(242933);var s=e.i(790164),o=function(){function e(){var t=this;(0,i._)(this,e),(0,l._)(this,"state",new s.ObservableState(null)),(0,l._)(this,"timeoutId",null),(0,l._)(this,"start",function(e){t.clearTimeout(),t.state.set({prompt:e}),t.timeoutId=setTimeout(t.remove,2e4)}),(0,l._)(this,"update",function(e){var n,r=null==(n=t.state.current)?void 0:n.prompt;r&&t.state.set({prompt:r,repl:e})}),(0,l._)(this,"remove",function(){t.clearTimeout(),t.state.set(null)})}return(0,a._)(e,[{key:"clearTimeout",value:function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}}]),e}(),u=(0,r.createContext)(null),c=(0,n.default)(function(){return e.A(556827)},{loadableGenerated:{modules:[148805]},ssr:!1});function p(e){var n=(0,r.useRef)();return n.current||(n.current=new o),(0,t.jsxs)(u.Provider,{value:n.current,children:[e.children,(0,t.jsx)(c,{state:n.current.state})]})}function f(){return(0,r.useContext)(u)}e.s(["WorkspaceLoadingProvider",()=>p,"useWorkspaceLoadingState",()=>f],170710)},399978,e=>{"use strict";var t,n=e.i(297083),r=e.i(346715),i=e.i(817556),a=e.i(826771),l=e.i(903381),s=((t={}).AlreadyExists="ALREADY_EXIST",t.FileRead="FILE_READ",t.Network="NETWORK",t);function o(e){return(0,n._)(function(e){var t,s,o,u,c,p,f,d,g,_,v,m;return(0,i._)(this,function(h){switch(h.label){case 0:if(t=e.parentPath,s=e.overwrite,o=e.fs,u=e.files,c=e.onStart,p=e.onUpload,f=e.onError,d=e.onDone,g=e.envMigrationFlag,u.length>1e6)throw Error("Trying to upload too many files at once.");if(u.reduce(function(e,t){return t.size+e},0)>0xc800000)throw Error("Total file upload size exceeds maximum limit.");return _=function(e){var t=e.targetPath,r=e.file,a=e.progress;return(0,n._)(function(){var e,n;return(0,i._)(this,function(i){switch(i.label){case 0:if(s)return[3,2];return[4,o.stat(t)];case 1:if(i.sent().exists)return f(e={file:r,path:t,error:"ALREADY_EXIST"}),[2,e];i.label=2;case 2:return[4,o.transferFile(t,r,function(e,t){a.current=t/e},g)];case 3:if(i.sent().error===l.FsErrors.NotReadable)return f(n={file:r,path:t,error:"FILE_READ"}),[2,n];return null==p||p({file:r,path:t}),[2,{path:t,file:r}]}})})()},v=u.map(function(e){var n=e.dirPath||e.webkitRelativePath||e.name;return{targetPath:t?t+"/"+n:n,progress:(0,a.observableValue)(0),file:e}}),null==c||c(v),[4,Promise.all(v.map(_))];case 1:return m=h.sent(),null==d||d({parentPath:t,uploads:m.filter(function(e){return!("error"in e)}),errors:m.reduce(function(e,t){return"error"in t?(0,r._)(e).concat([t]):e},[])}),[2]}})}).apply(this,arguments)}e.s(["MAX_FILE_UPLOAD_SIZE_LIMIT_BYTES",()=>0xc800000,"MAX_NUM_FILES_UPLOAD_LIMIT",()=>1e6,"UploadErrors",()=>s,"uploadFiles",()=>o])},445059,e=>{"use strict";var t=e.i(297083),n=e.i(878420),r=e.i(64386),i=e.i(530658),a=e.i(817556),l=e.i(389959),s=e.i(131141);e.i(242933);var o=e.i(279606);e.i(925218);var u=e.i(112077),c=e.i(399978),p=e.i(509908),f="attached_assets",d=function(e){return"".concat(f,"/").concat(e)};function g(e){var f=e.sessionId,g=e.uploadFiles,_=e.onError,v=(0,u.useCreateObservable)([]),m=(0,u.useCreateObservable)([]),h=(0,l.useMemo)(function(){return o.Observable.combine(o.Observable.from(v),o.Observable.from(m)).select(function(e){var t=(0,i._)(e,2),n=t[0],r=t[1];return n.some(function(e){return e.isLoading})||r.some(function(e){return e.file.isLoading})})},[v,m]),y=(0,l.useCallback)(function(e){v.update(function(t){return(0,s.produce)(t,function(t){var n=t.findIndex(function(t){return t.path===e});-1!==n&&t.splice(n,1)})})},[v]),T=(0,l.useCallback)(function(e){m.update(function(t){return(0,s.produce)(t,function(t){var n=t.findIndex(function(t){return t.file.path===e});-1!==n&&t.splice(n,1)})})},[m]),I=(0,l.useCallback)(function(e){return(0,t._)(function(){var t,i,l,o,u,m,h,T,I;return(0,a._)(this,function(a){switch(a.label){case 0:t=e.map(function(e){var t=function(e){if(e){var t=e.lastIndexOf("."),n=-1!==t?e.slice(0,t):e,r=-1!==t?e.slice(t):"",i=n.replace(/\s+/g,"_"),a=Date.now(),l="_".concat(a),s=l.length+r.length,o=i.slice(0,Math.max(0,80-s));return"".concat(o).concat(l).concat(r)}return"pasted_".concat(Date.now())}(e.fileName);return{path:d(t),mimeType:e.file.type,file:new File([e.file],t,{type:e.file.type,lastModified:e.file.lastModified}),isLoading:!0}}),i=!0,l=!1,o=void 0;try{for(u=t[Symbol.iterator]();!(i=(m=u.next()).done);i=!0){if((h=m.value).file.size>c.MAX_FILE_UPLOAD_SIZE_LIMIT_BYTES)return null==_||_("Attachment size exceeds ".concat(c.MAX_FILE_UPLOAD_SIZE_LIMIT_BYTES/1024/1024," MB limit.")),(0,p.trackAgentAnalyticsEvent)({action:"attempted_to_attach_file_exceeding_size_limit",fileType:h.file.type,fileSize:h.file.size,sessionId:f}),[2,[]];if("image/svg+xml"===h.file.type)return null==_||_("SVG images are not allowed"),(0,p.trackAgentAnalyticsEvent)({action:"attempted_to_attach_svg_image",sessionId:f}),[2,[]]}}catch(e){l=!0,o=e}finally{try{i||null==u.return||u.return()}finally{if(l)throw o}}return T=!1,[4,new Promise(function(e){v.update(function(e){return(0,s.produce)(e,function(e){var n=t.filter(function(t){return!e.some(function(e){return e.path===t.path})});if(e.length+n.length>20)return null==_||_("You can only attach up to ".concat(20," files.")),e;T=!0,t.forEach(function(t){var n=e.findIndex(function(e){return e.path===t.path});-1!==n?e[n]=t:e.push(t)})})}),e()})];case 1:if(a.sent(),!T)return[2,[]];if(t.forEach(function(e){(0,p.trackAgentAnalyticsEvent)({action:"attached_file",fileType:e.file.type,fileSize:e.file.size,sessionId:f})}),I=t.map(function(e){return e.file}),!g)return[3,5];a.label=2;case 2:return a.trys.push([2,4,,5]),[4,g({files:I,onError:function(e){t.forEach(function(e){return y(e.path)}),null==_||_("Error writing files: "+e)}})];case 3:return a.sent(),[3,5];case 4:return a.sent(),[2,[]];case 5:return v.update(function(e){return(0,s.produce)(e,function(e){t.forEach(function(t){var i=e.findIndex(function(e){return e.path===t.path});-1!==i&&(e[i]=(0,r._)((0,n._)({},e[i]),{isLoading:!1}))})})}),[2,t]}})})()},[g,y,_,f,v]),b=(0,l.useCallback)(function(e){var i=e.url,l=e.file;return(0,t._)(function(){var e;return(0,a._)(this,function(t){switch(t.label){case 0:return e=!1,[4,new Promise(function(t){m.update(function(t){return(0,s.produce)(t,function(t){var n=t.findIndex(function(e){return e.url===i&&e.file.path===l.path});if(-1===n&&t.length+v.current.length>=20)return null==_||_("You can only attach up to ".concat(20," files.")),t;e=!0,-1!==n?t[n]={url:i,file:l}:t.push({url:i,file:l})})}),t()})];case 1:if(t.sent(),!e)return[2,null];if((0,p.trackAgentAnalyticsEvent)({action:"attached_url_file",fileType:l.file.type,fileSize:l.file.size,sessionId:f}),!g)return[3,5];t.label=2;case 2:return t.trys.push([2,4,,5]),[4,g({files:[l.file],onError:function(e){T(l.path),null==_||_("Error writing URL file: "+e)}})];case 3:return t.sent(),m.update(function(e){return(0,s.produce)(e,function(e){var t=e.findIndex(function(e){return e.url===i});-1!==t&&(e[t].file=(0,r._)((0,n._)({},e[t].file),{isLoading:!1}))})}),[3,5];case 4:return t.sent(),[2,null];case 5:return[2,{url:i,file:l}]}})})()},[g,T,_,f,m,v]),S=(0,l.useCallback)(function(){v.set([]),m.set([])},[v,m]);return(0,l.useMemo)(function(){return{attachments:v,removeAttachment:y,removeUrlAttachment:T,clearAttachments:S,urlAttachments:m,addAttachments:I,addUrlAttachment:b,isLoading:h}},[v,y,T,S,m,I,b,h])}e.s(["ATTACHED_ASSETS_PATH",()=>f,"getAttachedAssetsPath",()=>d,"useAttachmentsImpl",()=>g],445059)},377772,e=>{"use strict";var t=e.i(906368);function n(e,n){return t.withScope(function(r){r.setTag("start-with-ai",!0),n&&r.setExtras(n),t.captureException(e)}),e}e.s(["sendErrorToSentry",()=>n])},509908,597103,e=>{"use strict";var t,n=e.i(721281),r=e.i(878420),i=e.i(931849),a=e.i(368964),l=e.i(569384),s=e.i(973245),o=e.i(304277);function u(){var e=(0,l._)(["\n  query ReplConfigAgentStackPlatformType($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          agentStackPlatformType\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}e.i(566901);var c={},p=(0,s.gql)(u());function f(e){var t=(0,r._)({},c,e);return o.useQuery(p,t)}function d(){var e=(0,l._)(["\n  query TrackAgentAnalyticsEvent($replId: String!) {\n    getRepl(id: $replId) {\n      ... on Repl {\n        id\n        origin {\n          ... on Repl {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return d=function(){return e},e}e.s(["ReplConfigAgentStackPlatformTypeDocument",()=>p,"useReplConfigAgentStackPlatformTypeQuery",()=>f],597103);var g=(0,s.gql)(d()),_=e.i(188507),v=e.i(629536),m=e.i(173738),h=e.i(441329),y=e.i(858248),T=e.i(709485);function I(){var e,t,n,r,a=(0,h.isInMobileWorkspace)(i.default),l=(0,h.isInBonsaiWebview)(i.default);switch(i.default.pathname){case"/replEnvironmentDesktop":case"/replEnvironmentMobile":(e=i.default.query.replId?i.default.query.replId.toString():void 0)&&(t=(r=function(e){var t,n,r=null,i=null;try{r=null===m.apolloClient||void 0===m.apolloClient?void 0:m.apolloClient.readQuery({query:g,variables:{replId:e}}),i=null===m.apolloClient||void 0===m.apolloClient?void 0:m.apolloClient.readQuery({query:p,variables:{replId:e}})}catch(e){}var a=(null==r?void 0:r.getRepl.__typename)==="Repl"?r.getRepl:void 0,l=(null==i?void 0:i.getRepl.__typename)==="Repl"&&null!=(n=i.getRepl.config.agentStackPlatformType)?n:void 0;return{replId:null==a?void 0:a.id,originReplId:null==a||null==(t=a.origin)?void 0:t.id,agentStackPlatformType:l}}(e)).originReplId,n=r.agentStackPlatformType)}return{isMobile:a,isBonsai:l,replId:e,originReplId:t,agentStackPlatformType:n}}function b(e){var t=e.action,n=e.fileType,i=e.fileSize,a=e.messageText,l=e.feedbackText,s=e.sessionId,o=e.eventId,u=e.secretsRequested,c=e.freeCheckpoint,p=e.replOwnerPlanName,f=e.planApprovalState,d=e.blueprints,g=e.toolDataKind,_=e.hasUbbV2,v=e.checkpointPrice,m=e.isEnterprise,h=e.ctaLabel,b=e.agentMode,S=e.initialBuildMode,A=e.hasFigmaLinks,E=e.figmaLinksCount,k=e.figmaLinksCountUnique,w=e.autonomyLevel,R=e.integrationSearchQuery,P=e.integrationSearchNumResults,L=I(),N=L.isMobile,C=L.isBonsai,D=L.replId,x=L.originReplId,O=L.agentStackPlatformType;return(0,y.track)(T.events.AGENT_USED,(0,r._)({action:t,file_type:n,is_mobile:N,is_bonsai:C,repl_id:D,file_size:i,message_text:a,feedback_text:l,session_id:s,event_id:o,secrets_requested:u,free_checkpoint:c,origin_repl_id:x,repl_owner_plan_name:p,plan_approval_state:f,blueprints:d,tool_data_kind:g,hasUbbV2:_,checkpointPrice:v,is_enterprise:m,cta_label:h,agent_chat_mode:b,agent_stack_platform_type:O,initial_build_mode:S,autonomy_level:w,integration_search_query:R,integration_search_num_results:P},A?{has_figma_links:A,figma_links_count:E,figma_links_count_unique:k}:{}))}function S(e){var t,n,r=e.action,i=e.sessionId,a=e.messageText,l=e.planText,s=e.planId,o=e.isLatestPlanProposal,u=e.skipRapidBuild,c=e.planSupportsVisualPreview,p=e.didVisualPreviewComplete,f=e.numPlansProposed,d=e.stepsApproved,g=e.planBlueprints,m=e.stepBlueprints,h=e.stepId,b=e.stepName,S=e.initialBuildMode,E=e.isEnterprise,k=e.agentStackTriggerType,w=e.stackBlueprint,R=I(),P=R.isMobile,L=R.isBonsai,N=R.replId,C=R.originReplId,D=R.agentStackPlatformType;return(0,y.track)(T.events.AGENT_USED,{action:r,session_id:i,is_mobile:P,is_bonsai:L,repl_id:N,message_text:a,plan_text:l,plan_id:s,is_latest_plan_proposal:o,skip_rapid_build:u,plan_supports_visual_preview:c,did_visual_preview_complete:p,num_plans_proposed:f,origin_repl_id:C,steps_approved:d,plan_blueprints:g,step_blueprints:m,step_id:h,step_name:b,initial_build_mode:function(e){switch(e){case _.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_SYNC:return"design";case _.AgentInitialBuildMode.AGENT_INITIAL_BUILD_MODE_ASYNC:return"full_build";default:return"unknown"}}(S),is_enterprise:E,agent_stack_platform_type:null!=D?D:k?A[k]:void 0,stack_name:null==(t=w)||t===_.StackBlueprint.STACK_BLUEPRINT_NONE||t===_.StackBlueprint.STACK_BLUEPRINT_BEST_EFFORT_FALLBACK?"Unknown":null!=(n=v.stackBlueprintDetails[t].name)?n:"Unknown"})}var A=(t={},(0,n._)(t,_.AgentStackTriggerType.UNKNOWN_TRIGGER_TYPE,a.AgentStackPlatformType.TimeBased),(0,n._)(t,_.AgentStackTriggerType.SLACK_MESSAGE,a.AgentStackPlatformType.Slack),(0,n._)(t,_.AgentStackTriggerType.TELEGRAM_MESSAGE,a.AgentStackPlatformType.Telegram),(0,n._)(t,_.AgentStackTriggerType.TIME_BASED,a.AgentStackPlatformType.TimeBased),(0,n._)(t,_.AgentStackTriggerType.CONNECTOR_TRIGGER,a.AgentStackPlatformType.TimeBased),t);function E(e){var t=e.action,n=e.sessionId,r=e.messageText,i=e.isEnterprise,a=I(),l=a.isMobile,s=a.isBonsai,o=a.replId,u=a.originReplId,c=a.agentStackPlatformType;return(0,y.track)(T.events.AGENT_USED,{action:t,session_id:n,is_mobile:l,is_bonsai:s,repl_id:o,message_text:r,origin_repl_id:u,is_enterprise:i,agent_stack_platform_type:c})}e.s(["getAnalyticsMetadata",()=>I,"trackAgentAnalyticsEvent",()=>b,"trackAgentPlanningAnalyticsEvent",()=>S,"trackAgentQueueAnalyticsEvent",()=>E],509908)},796674,e=>{"use strict";var t=e.i(993796),n=e.i(817516);function r(){var e=(0,t.useFlag)({controlName:"flag-manager-who"});return(0,n.useIsMockHomeRoute)()||e}e.s(["useManagerWhoFlag",()=>r])},871318,e=>{"use strict";var t=e.i(276385),n=e.i(682070),r=e.i(529131),i=e.i(878420),a=e.i(569384),l=e.i(973245),s=e.i(304277);function o(){var e=(0,a._)(["\n  query AgentInputRequiresPaymentMethodInfo($orgId: String) {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          endDate\n        }\n      }\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          planInfo {\n            ... on OrgPlanInfo {\n              planEndDate\n            }\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n"]);return o=function(){return e},e}e.i(566901);var u={},c=(0,l.gql)(o()),p=e.i(629536),f=e.i(441329),d=e.i(341126),g=e.i(284325),_=e.i(446530),v=e.i(613355),m=e.i(140487),h=e.i(960178),y=e.i(625484),T=e.i(899323),I=(0,_.cssRecord)({root:[v.rcss.borderRadius(8)],infoText:[v.rcss.textAlign.center]});function b(e){var a,l,o,_,v,b=e.owner,S=e.orgId,A=(0,f.useDoesBonsaiWebviewSupportFeature)("stripePayment")&&(null==b?void 0:b.type)!=="org",E=(0,f.useIsInBonsaiWebview)(),k=(0,g.default)(),w=(a={variables:{orgId:S}},l=(0,i._)({},u,a),s.useQuery(c,l)).data,R=null,P="",L=null==w?void 0:w.currentUser;L&&(S&&(null==(o=L.org)?void 0:o.__typename)==="Org"?R=(null==(v=L.org.planInfo)?void 0:v.__typename)==="OrgPlanInfo"?L.org.planInfo.planEndDate:null:S||(null==(_=L.usageInterval)?void 0:_.__typename)!=="UsageInterval"||(R=L.usageInterval.endDate)),R&&(P=", resets in "+function(e,t){return(0,r.default)(1,arguments),(0,n.default)(e,Date.now(),t)}(new Date(R),{addSuffix:!1}));var N=(null==b?void 0:b.type)==="org"?"".concat((0,d.orgLinks)({slug:b.slug}).settings.href,"?tab=billing"):"/account#billing",C="Add payment method";return A?C="Add more usage":E&&(C="Add payment method on replit.com"),(0,t.jsxs)(y.View,{gap:8,align:"center",css:I.root,children:[(0,t.jsxs)(h.Text,{css:I.infoText,color:"dimmer",children:["No monthly ",p.AGENT_NAME," usage left",P,(0,t.jsx)("br",{}),"Get more usage now by adding a payment method"]}),(0,t.jsx)(m.Button,{onClick:function(){A?k.showPaymentFlow({type:"setup",source:"agent_input_requires_payment_method"}):window.open(N,"_blank")},disabled:E&&!A,stretch:!0,iconLeft:(0,t.jsx)(T.default,{}),variant:"outlined",text:C})]})}e.s(["default",()=>b],871318)},760129,e=>{"use strict";var t=e.i(716499),n=e.i(529131),r=/[T ]/,i=/[Z ]/i,a=/([Z+-].*)$/,l=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,s=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,o=/^([+-])(\d{2})(?::?(\d{2}))?$/;function u(e,u){(0,n.default)(1,arguments);var g,_,v=u||{},m=null==v.additionalDigits?2:(0,t.default)(v.additionalDigits);if(2!==m&&1!==m&&0!==m)throw RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var h=function(e){var t,n={},l=e.split(r);if(l.length>2)return n;if(/:/.test(l[0])?(n.date=null,t=l[0]):(n.date=l[0],t=l[1],i.test(n.date)&&(n.date=e.split(i)[0],t=e.substr(n.date.length,e.length))),t){var s=a.exec(t);s?(n.time=t.replace(s[1],""),n.timezone=s[1]):n.time=t}return n}(e);if(h.date){var y=function(e,t){var n=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:null};var i=r[1]&&parseInt(r[1]),a=r[2]&&parseInt(r[2]);return{year:null==a?i:100*a,restDateString:e.slice((r[1]||r[2]).length)}}(h.date,m);g=function(e,t){if(null===t)return null;var n,r,i,a,s,o,u,p,g,_,v,m,h=e.match(l);if(!h)return null;var y=!!h[4],T=c(h[1]),I=c(h[2])-1,b=c(h[3]),S=c(h[4]),A=c(h[5])-1;if(y){return(n=S,r=A,n>=1&&n<=53&&r>=0&&r<=6)?(i=t,a=S,s=A,(o=new Date(0)).setUTCFullYear(i,0,4),u=o.getUTCDay()||7,o.setUTCDate(o.getUTCDate()+((a-1)*7+s+1-u)),o):new Date(NaN)}var E=new Date(0);return(p=t,g=I,_=b,g>=0&&g<=11&&_>=1&&_<=(f[g]||(d(p)?29:28))&&(v=t,(m=T)>=1&&m<=(d(v)?366:365)))?(E.setUTCFullYear(t,I,Math.max(T,b)),E):new Date(NaN)}(y.restDateString,y.year)}if(isNaN(g)||!g)return new Date(NaN);var T=g.getTime(),I=0;if(h.time&&(isNaN(I=function(e){var t,n,r,i=e.match(s);if(!i)return null;var a=p(i[1]),l=p(i[2]),o=p(i[3]);return(t=a,n=l,r=o,24===t?0===n&&0===r:r>=0&&r<60&&n>=0&&n<60&&t>=0&&t<25)?36e5*a+6e4*l+1e3*o:NaN}(h.time))||null===I))return new Date(NaN);if(h.timezone){if(isNaN(_=function(e){if("Z"===e)return 0;var t,n=e.match(o);if(!n)return 0;var r="+"===n[1]?-1:1,i=parseInt(n[2]),a=n[3]&&parseInt(n[3])||0;return(t=a)>=0&&t<=59?r*(36e5*i+6e4*a):NaN}(h.timezone)))return new Date(NaN)}else{var b=new Date(T+I),S=new Date(0);return S.setFullYear(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()),S.setHours(b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds()),S}return new Date(T+I+_)}function c(e){return e?parseInt(e):1}function p(e){return e&&parseFloat(e.replace(",","."))||0}var f=[31,null,31,30,31,30,31,31,30,31,30,31];function d(e){return e%400==0||e%4==0&&e%100}e.s(["parseISO",()=>u],760129)},310158,e=>{"use strict";var t=e.i(969979);e.s(["isValid",()=>t.default])}]);

//# debugId=f4d66463-c8ed-0e34-eb75-1c1dbfb62ddf
//# sourceMappingURL=315518aeb0f6cc24.js.map